<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CSS 命名方案</title>
    <url>/2020/09/17/css-naming-scheme/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT-OUTLINE"></a>CONTENT-OUTLINE</h2><blockquote>
<p>css 作用域是全局的，项目越来越大，人越来越多，命名慢慢成为问题</p>
<p>以下是几种解决命名问题的方案</p>
<p>– BEM</p>
<p>– Scoped CSS</p>
<p>– CSS modules</p>
</blockquote>
<a id="more"></a>

<h2 id="一、BEM"><a href="#一、BEM" class="headerlink" title="一、BEM"></a>一、BEM</h2><p><code>BEM</code>代表块（Block），元素（Element），修饰符（Modifier）。</p>
<p><code>BEM</code>给我们的规定是块和元素之间用 — 连接，元素和修饰符之间用 _ 连接。例如：我们要设置表格某一行的背景颜色为红色，我们可以如下命名：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;table-row_red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>规范化书写实例</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;logo-img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;logo-words_big&quot;</span>&gt;</span>QQ·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;logo-word_small&quot;</span>&gt;</span>PC版<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span>QQ官网首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span>申请QQ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span>当前在线用户:2559393943<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;main-img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./img.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-words_small&quot;</span>&gt;</span>QQ PC版9.0.8<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-words_big&quot;</span>&gt;</span>从新出发·趣无止境<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;mian-button_blue&quot;</span>&gt;</span>立即下载<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="二-Scoped-CSS"><a href="#二-Scoped-CSS" class="headerlink" title="二. Scoped CSS"></a>二. Scoped CSS</h2><blockquote>
<p><a href="https://vue-loader.vuejs.org/zh/guide/scoped-css.html">vue-loader的传送门</a></p>
</blockquote>
<p>目标：当前组件样式不会影响其它组件</p>
<p>给组件的 dom 节点添加惟一属性，并转换 style 标签中的 css 匹配该属性，使得 css 作用域有限</p>
<p><strong>实例</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.example</span> &#123;</span></span><br><span class="line">          color: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span>&gt;</span>hi<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>转换结果：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.example</span><span class="selector-attr">[data-v-f3f3eg9]</span> &#123;</span></span><br><span class="line">          color: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span> <span class="attr">data-v-f3f3eg9</span>&gt;</span>hi<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="三-CSS-modules"><a href="#三-CSS-modules" class="headerlink" title="三. CSS modules"></a>三. CSS modules</h2><blockquote>
<p><a href="https://vue-loader.vuejs.org/zh/guide/css-modules.html#%E7%94%A8%E6%B3%95">VUE-loader传送门- CSS Moudules</a></p>
</blockquote>
<p>将 <code>css</code> 的选择器转换成惟一的字符串，运用到 DOM。是在用算法命名，记录了人的命名到算法命名的 <code>map</code> 表</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">module</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.red</span> &#123;</span></span><br><span class="line">      color: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">&quot;$style.red&quot;</span>&gt;</span></span><br><span class="line">    This should be red</span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>转换结果：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">module</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">._1yZGjg0pYkMbaHPr4wT6P__1</span> &#123;</span></span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;_1yZGjg0pYkMbaHPr4wT6P__1&quot;</span>&gt;</span></span><br><span class="line">    This should be red</span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li><code>BEM</code> 让命名有规律、有含义，block 可视为模块，有一定作用域含义</li>
<li><code>scoped css</code> 限定 css 作用域，无关命名。无法适配多套主题</li>
<li><code>css modules</code> 使用算法命名，没有了命名冲突，也限定了 css 作用域。无法适配多套主题</li>
</ol>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 选择器</title>
    <url>/2020/09/17/css-selectors/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT-OUTLINE"></a>CONTENT-OUTLINE</h2><blockquote>
<p>下面再次回顾一下CSS 选择器<code>(selectors)</code></p>
<p>–  共五大类：基本选择器、组合选择器、伪类选择器、伪对象选择器、属性选择器</p>
<p>–  选择器权重计算</p>
</blockquote>
<a id="more"></a>

<blockquote>
<p>参考相应的书籍整理，但自从发现<a href="http://www.ruanyifeng.com/blog/2009/03/css_selectors.html">阮一峰老师笔记</a>，整理的很不错！</p>
</blockquote>
<h2 id="五大类选择器概述"><a href="#五大类选择器概述" class="headerlink" title="五大类选择器概述"></a>五大类选择器概述</h2><h3 id="一、基本选择器"><a href="#一、基本选择器" class="headerlink" title="一、基本选择器"></a>一、基本选择器</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>1.</td>
<td>*****</td>
<td>通用元素选择器，匹配任何元素</td>
</tr>
<tr>
<td>2.</td>
<td><strong>E</strong></td>
<td>标签选择器，匹配所有使用E标签的元素</td>
</tr>
<tr>
<td>3.</td>
<td><strong>.info</strong></td>
<td>class选择器，匹配所有class属性中包含info的元素</td>
</tr>
<tr>
<td>4.</td>
<td><strong>#footer</strong></td>
<td>id选择器，匹配所有id属性等于footer的元素</td>
</tr>
</tbody></table>
<h3 id="二、组合选择器"><a href="#二、组合选择器" class="headerlink" title="二、组合选择器"></a>二、组合选择器</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>5.</td>
<td>E,F</td>
<td>多元素选择器，同时匹配所有E元素或F元素，E和F之间用逗号分隔</td>
</tr>
<tr>
<td>6.</td>
<td>E F</td>
<td>后代元素选择器，匹配所有属于E元素后代的F元素，E和F之间用空格分隔</td>
</tr>
<tr>
<td>7.</td>
<td>E &gt; F</td>
<td>子元素选择器，匹配所有E元素的子元素F</td>
</tr>
<tr>
<td>8.</td>
<td>E + F</td>
<td>毗邻元素选择器，匹配所有紧随E元素之后的同级元素F</td>
</tr>
</tbody></table>
<h3 id="三、CSS-2-1-属性选择器"><a href="#三、CSS-2-1-属性选择器" class="headerlink" title="三、CSS 2.1 属性选择器"></a>三、<em>CSS 2.1</em> 属性选择器</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>9.</td>
<td>E[att]</td>
<td>匹配所有具有att属性的E元素，不考虑它的值。（注意：E在此处可以省略，比如”[cheacked]”。以下同。）</td>
</tr>
<tr>
<td>10.</td>
<td>E[att=val]</td>
<td>匹配所有att属性等于”val”的E元素</td>
</tr>
<tr>
<td>11.</td>
<td>E[att~=val]</td>
<td>匹配所有att属性具有多个空格分隔的值、其中一个值等于”val”的E元素</td>
</tr>
<tr>
<td>12.</td>
<td>E[att|=val]</td>
<td>匹配所有att属性具有多个连字号分隔（hyphen-separated）的值、其中一个值以”val”开头的E元素，主要用于lang属性，比如”en”、”en-us”、”en-gb”等等</td>
</tr>
</tbody></table>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title]</span> &#123; <span class="attribute">color</span>:<span class="number">#f00</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-attr">[class=error]</span> &#123; <span class="attribute">color</span>:<span class="number">#f00</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">td</span><span class="selector-attr">[headers~=col1]</span> &#123; <span class="attribute">color</span>:<span class="number">#f00</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[lang|=en]</span> &#123; <span class="attribute">color</span>:<span class="number">#f00</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-attr">[class=quote]</span><span class="selector-attr">[cite]</span> &#123; <span class="attribute">color</span>:<span class="number">#f00</span>; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="四、CSS-2-1中的伪类"><a href="#四、CSS-2-1中的伪类" class="headerlink" title="四、CSS 2.1中的伪类"></a>四、<em>CSS 2.1</em>中的伪类</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>13.</td>
<td>E:first-child</td>
<td>匹配父元素的第一个子元素</td>
</tr>
<tr>
<td>14.</td>
<td>E:link</td>
<td>匹配所有未被点击的链接</td>
</tr>
<tr>
<td>15.</td>
<td>E:visited</td>
<td>匹配所有已被点击的链接</td>
</tr>
<tr>
<td>16.</td>
<td>E:active</td>
<td>匹配鼠标已经其上按下、还没有释放的E元素</td>
</tr>
<tr>
<td>17.</td>
<td>E:hover</td>
<td>匹配鼠标悬停其上的E元素</td>
</tr>
<tr>
<td>18.</td>
<td>E:focus</td>
<td>匹配获得当前焦点的E元素</td>
</tr>
<tr>
<td>19.</td>
<td>E:lang(c)</td>
<td>匹配lang属性等于c的E元素</td>
</tr>
</tbody></table>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:first-child</span> &#123; <span class="attribute">font-style</span>:italic; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=text]</span><span class="selector-pseudo">:focus</span> &#123; <span class="attribute">color</span>:<span class="number">#000</span>; <span class="attribute">background</span>:<span class="number">#ffe</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=text]</span><span class="selector-pseudo">:focus</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">background</span>:<span class="number">#fff</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:lang(sv)</span> &#123; <span class="attribute">quotes</span>: <span class="string">&quot;\201D&quot;</span> <span class="string">&quot;\201D&quot;</span> <span class="string">&quot;\2019&quot;</span> <span class="string">&quot;\2019&quot;</span>; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="五、-CSS-2-1中的伪元素"><a href="#五、-CSS-2-1中的伪元素" class="headerlink" title="五、 CSS 2.1中的伪元素"></a>五、 <em>CSS 2.1</em>中的伪元素</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>20.</td>
<td>E:first-line</td>
<td>匹配E元素的第一行</td>
</tr>
<tr>
<td>21.</td>
<td>E:first-letter</td>
<td>匹配E元素的第一个字母</td>
</tr>
<tr>
<td>22.</td>
<td>E:before</td>
<td>在E元素之前插入生成的内容</td>
</tr>
<tr>
<td>23.</td>
<td>E:after</td>
<td>在E元素之后插入生成的内容</td>
</tr>
</tbody></table>
<h3 id="六、CSS-3的同级元素通用选择器"><a href="#六、CSS-3的同级元素通用选择器" class="headerlink" title="六、CSS 3的同级元素通用选择器"></a>六、CSS 3的同级元素通用选择器</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>24.</td>
<td>E ~ F</td>
<td>匹配任何在E元素之后的同级F元素</td>
</tr>
</tbody></table>
<h3 id="七、CSS-3-属性选择器"><a href="#七、CSS-3-属性选择器" class="headerlink" title="七、CSS 3 属性选择器"></a>七、CSS 3 属性选择器</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>25.</td>
<td>E[att^=”val”]</td>
<td>属性att的值以”val”开头的元素</td>
</tr>
<tr>
<td>26.</td>
<td>E[att$=”val”]</td>
<td>属性att的值以”val”结尾的元素</td>
</tr>
<tr>
<td>27.</td>
<td>E[att*=”val”]</td>
<td>属性att的值包含”val”字符串的元素</td>
</tr>
</tbody></table>
<h3 id="八、CSS-3中与用户界面有关的伪类"><a href="#八、CSS-3中与用户界面有关的伪类" class="headerlink" title="八、CSS 3中与用户界面有关的伪类"></a>八、CSS 3中与用户界面有关的伪类</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>28.</td>
<td>E:enabled</td>
<td>匹配表单中激活的元素</td>
</tr>
<tr>
<td>29.</td>
<td>E:disabled</td>
<td>匹配表单中禁用的元素</td>
</tr>
<tr>
<td>30.</td>
<td>E:checked</td>
<td>匹配表单中被选中的radio（单选框）或checkbox（复选框）元素</td>
</tr>
<tr>
<td>31.</td>
<td>E::selection</td>
<td>匹配用户当前选中的元素</td>
</tr>
</tbody></table>
<h3 id="九、CSS-3中的结构性伪类"><a href="#九、CSS-3中的结构性伪类" class="headerlink" title="九、CSS 3中的结构性伪类"></a>九、CSS 3中的结构性伪类</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>32.</td>
<td>E:root</td>
<td>匹配文档的根元素，对于HTML文档，就是HTML元素</td>
</tr>
<tr>
<td>33.</td>
<td>E:nth-child(n)</td>
<td>匹配其父元素的第n个子元素，第一个编号为1</td>
</tr>
<tr>
<td>34.</td>
<td>E:nth-last-child(n)</td>
<td>匹配其父元素的倒数第n个子元素，第一个编号为1</td>
</tr>
<tr>
<td>35.</td>
<td>E:nth-of-type(n)</td>
<td>与:nth-child()作用类似，但是仅匹配使用同种标签的元素</td>
</tr>
<tr>
<td>36.</td>
<td>E:nth-last-of-type(n)</td>
<td>与:nth-last-child() 作用类似，但是仅匹配使用同种标签的元素</td>
</tr>
<tr>
<td>37.</td>
<td>E:last-child</td>
<td>匹配父元素的最后一个子元素，等同于:nth-last-child(1)</td>
</tr>
<tr>
<td>38.</td>
<td>E:first-of-type</td>
<td>匹配父元素下使用同种标签的第一个子元素，等同于:nth-of-type(1)</td>
</tr>
<tr>
<td>39.</td>
<td>E:last-of-type</td>
<td>匹配父元素下使用同种标签的最后一个子元素，等同于:nth-last-of-type(1)</td>
</tr>
<tr>
<td>40.</td>
<td>E:only-child</td>
<td>匹配父元素下仅有的一个子元素，等同于:first-child:last-child或 :nth-child(1):nth-last-child(1)</td>
</tr>
<tr>
<td>41.</td>
<td>E:only-of-type</td>
<td>匹配父元素下使用同种标签的唯一一个子元素，等同于:first-of-type:last-of-type或 :nth-of-type(1):nth-last-of-type(1)</td>
</tr>
<tr>
<td>42.</td>
<td>E:empty</td>
<td>匹配一个不包含任何子元素的元素，注意，文本节点也被看作子元素</td>
</tr>
</tbody></table>
<h3 id="十、CSS-3的反选伪类"><a href="#十、CSS-3的反选伪类" class="headerlink" title="十、CSS 3的反选伪类"></a>十、CSS 3的反选伪类</h3><table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>43.</td>
<td>E:not(s)</td>
<td>匹配不符合当前选择器的任何元素</td>
</tr>
</tbody></table>
<h3 id="十一、CSS-3中的-target-伪类"><a href="#十一、CSS-3中的-target-伪类" class="headerlink" title="十一、CSS 3中的 :target 伪类"></a>十一、CSS 3中的 :target 伪类</h3><blockquote>
<p>目标伪类：它表示匹配 E 的所有元素，且匹配元素被相关URL指向。</p>
<p>该选择器为动态选择器，只有当存在URL指向该匹配元素时，样式效果才有效。</p>
</blockquote>
<table>
<thead>
<tr>
<th>序号</th>
<th>选择器</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>44.</td>
<td>E:target</td>
<td>匹配文档中特定”id”点击后的效果</td>
</tr>
</tbody></table>
<h2 id="选择器权重计算"><a href="#选择器权重计算" class="headerlink" title="选择器权重计算"></a>选择器权重计算</h2><h3 id="权重计算规则"><a href="#权重计算规则" class="headerlink" title="权重计算规则"></a>权重计算规则</h3><ol>
<li>内联样式，如: style=”…”，权值为1000。</li>
<li>ID选择器，如：#content，权值为0100。</li>
<li>类，伪类、属性选择器，如.content，权值为0010。</li>
<li>类型选择器、伪元素选择器，如div p，权值为0001。</li>
<li>通配符、子选择器、相邻选择器等。如* &gt; +，权值为0000。</li>
<li>继承的样式没有权值</li>
</ol>
<h3 id="比较规则"><a href="#比较规则" class="headerlink" title="比较规则"></a>比较规则</h3><p>1,0,0,0 &gt; 0,99,99,99。也就是说从左往右逐个等级比较，前一等级相等才往后比。</p>
<p>无论是行间、内部和外部样式，都是按照这个规则来进行比较。而不是直观的行间&gt;内部&gt;外部样式；ID&gt;class&gt;元素。之所以有这样的错觉，是因为确实行间为第一等的权重，所以它的权重是最高的。而内部样式可能一般写在了外部样式引用了之后，所以覆盖掉了之前的。</p>
<p>在权重相同的情况下，后面的样式会覆盖掉前面的样式。</p>
<p>通配符、子选择器、相邻选择器等的。虽然权值为0000，但是也比继承的样式优先，0 权值比无权值优先。</p>
<h3 id="important"><a href="#important" class="headerlink" title="!important"></a><code>!important</code></h3><p><code>!important</code> 的作用是提升优先级，换句话说。加了这句的样式的优先级是最高的（比内联样式的优先级还高)。</p>
<p><strong>在使用 !important 时需要注意：</strong></p>
<ol>
<li>Never 永远不要在全站范围的 css 上使用 !important</li>
<li>Only 只在需要覆盖全站或外部 css（例如引用的 ExtJs 或者YUI ）的特定页面中使用 !important</li>
<li>Never 永远不要在你的插件中使用 !important</li>
<li>Always 要优化考虑使用样式规则的优先级来解决问题而不是 !important</li>
</ol>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS响应式设计</title>
    <url>/2020/09/17/css-responsive-design/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>CSS响应式设计有关内容</p>
<p>– 媒体查询</p>
<p>– rem/em</p>
</blockquote>
<a id="more"></a>

<h2 id="一、媒体查询-Media-Queryies"><a href="#一、媒体查询-Media-Queryies" class="headerlink" title="一、媒体查询 Media Queryies"></a>一、媒体查询 <code>Media Queryies</code></h2><p><strong>Media Queries</strong>直译过来就是“<code>媒体查询</code>”，在我们平时的Web页面中<code>head</code>部分常看到这样的一段代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/reset.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;all&quot;</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/print.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;print&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>而这个“media”就是用来指定特定的媒体类型，在HTML4和CSS2中允许你使用“<a href="https://link.jianshu.com/?t=http://www.w3.org/TR/CSS2/media.html">media</a>”来指定特定的媒体类型，如屏幕（screen）和打印（print）的样式表，当然还有其他的，比如说“TV”,“handheld”等，其中“all”表示的是支持所有媒体介质。有关于更多的Media类型，可以点击<a href="http://www.w3.org/TR/CSS2/media.html">这里</a>。</p>
<p><strong>举个例子</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">media</span>=<span class="string">&quot;screen and (max-width: 600px)&quot;</span> <span class="attr">href</span>=<span class="string">&quot;small.css&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面的media语句表示的是：当页面宽度小于或等于600px,调用small.css样式表来渲染你的Web页面。</p>
</blockquote>
<ol>
<li><strong>screen</strong>：这个不用说大家都知道，指的是一种媒体类型；</li>
<li><strong>and</strong>：被称为关键词，与其相似的还有not,only，稍后会介绍；</li>
<li><strong>（max-width:600px）</strong>：这个就是媒体特性，说得通俗一点就是媒体条件。</li>
</ol>
<p><strong>上述的代码换成css的写法如下:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@media</span> <span class="function">screen <span class="title">and</span> <span class="params">(max-width: <span class="number">600</span>px)</span> </span>&#123; 选择器 &#123; 属性：属性值； &#125; &#125;</span><br></pre></td></tr></table></figure>

<p><strong>常用的Media Query</strong>如下表所示：</p>
<blockquote>
<p>color<br>color-index<br>aspect-ratio<br>device-aspect-ratio<br>device-height<br>device-width<br>grid<br>height<br>monochrome<br>orientation : landscape | portrait<br>resolution<br>scan<br>width</p>
</blockquote>
<p><img data-src="media_query-1.png"></p>
<h3 id="Media-Queries的具体使用方式"><a href="#Media-Queries的具体使用方式" class="headerlink" title="Media Queries的具体使用方式"></a>Media Queries的具体使用方式</h3><h4 id="1-最大宽度Max-Width"><a href="#1-最大宽度Max-Width" class="headerlink" title="1. 最大宽度Max Width"></a>1. 最大宽度Max Width</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> </span><br><span class="line">media=<span class="string">&quot;screen and (max-width:600px)&quot;</span> </span><br><span class="line">href=<span class="string">&quot;small.css&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;text/css&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>上面表示的是：当屏幕小于或等于<code>600px</code>时，将采用<code>small.css</code>样式来渲染Web页面。</p>
<h4 id="2-最小宽度Min-Width"><a href="#2-最小宽度Min-Width" class="headerlink" title="2. 最小宽度Min Width"></a>2. 最小宽度Min Width</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> </span><br><span class="line">media=<span class="string">&quot;screen and (min-width:600px)&quot;</span> </span><br><span class="line">href=<span class="string">&quot;large.css&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;text/css&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>上面表示的是：当屏幕大于或等于600px时，将采用large.css样式来渲染Web页面。</p>
<h4 id="3-多个Media-Queries使用"><a href="#3-多个Media-Queries使用" class="headerlink" title="3. 多个Media Queries使用"></a>3. 多个Media Queries使用</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> </span><br><span class="line">media=<span class="string">&quot;screen and (min-width:600px) and (max-width:900px)&quot;</span> </span><br><span class="line">href=<span class="string">&quot;style.css&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;text/css&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>上面的表示的是当屏幕在600px-900px之间时采用style.css样式来渲染web页面。</p>
<h4 id="4-两种加载方式"><a href="#4-两种加载方式" class="headerlink" title="4. 两种加载方式"></a>4. 两种加载方式</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- CSS media query on a link element --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">media</span>=<span class="string">&quot;(max-width: 800px)&quot;</span> <span class="attr">href</span>=<span class="string">&quot;example.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- CSS media query within a stylesheet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">600px</span>) &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.facet_sidebar</span> &#123;</span></span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：所有的media query css都会加载，只有符合条的会被解析</strong></p>
<h4 id="5-标准语法"><a href="#5-标准语法" class="headerlink" title="5. 标准语法"></a>5. 标准语法</h4><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="symbol">media_query_list:</span> &lt;media_query&gt; [, &lt;media_query&gt; ]*</span><br><span class="line"><span class="symbol">media_query:</span> [[only <span class="params">| <span class="keyword">not</span>]? &lt;media_type&gt; [ <span class="keyword">and</span> &lt;expression&gt; ]*]</span></span><br><span class="line"><span class="params">  |</span> &lt;expression&gt; [ <span class="keyword">and</span> &lt;expression&gt; ]*</span><br><span class="line"><span class="symbol">expression:</span> ( &lt;media_feature&gt; [: &lt;value&gt;]? )</span><br><span class="line"><span class="symbol">media_type:</span> all <span class="params">| aural |</span> braille <span class="params">| handheld |</span> print <span class="params">|</span></span><br><span class="line"><span class="params">  projection |</span> screen <span class="params">| tty |</span> tv <span class="params">| embossed</span></span><br><span class="line"><span class="params">media_feature: width |</span> min-width <span class="params">| max-width</span></span><br><span class="line"><span class="params">  |</span> height <span class="params">| min-height |</span> max-height</span><br><span class="line">  <span class="params">| device-width |</span> min-device-width <span class="params">| max-device-width</span></span><br><span class="line"><span class="params">  |</span> device-height <span class="params">| min-device-height |</span> max-device-height</span><br><span class="line">  <span class="params">| aspect-ratio |</span> min-aspect-ratio <span class="params">| max-aspect-ratio</span></span><br><span class="line"><span class="params">  |</span> device-aspect-ratio <span class="params">| min-device-aspect-ratio |</span> max-device-aspect-ratio</span><br><span class="line">  <span class="params">| color |</span> min-color <span class="params">| max-color</span></span><br><span class="line"><span class="params">  |</span> color-index <span class="params">| min-color-index |</span> max-color-index</span><br><span class="line">  <span class="params">| monochrome |</span> min-monochrome <span class="params">| max-monochrome</span></span><br><span class="line"><span class="params">  |</span> resolution <span class="params">| min-resolution |</span> max-resolution</span><br><span class="line">  <span class="params">| scan |</span> grid</span><br></pre></td></tr></table></figure>

<h4 id="6-逻辑操作符"><a href="#6-逻辑操作符" class="headerlink" title="6. 逻辑操作符"></a>6. 逻辑操作符</h4><ul>
<li>and 同编程语言里的and</li>
<li>not 同编程语言里的not</li>
</ul>
<p><strong>逗号</strong> ：    当逗号两边的条件有一个为真都为真， 同编程语言里的or</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><h4 id="1-提供一组目前的适配移动端屏幕的Media-Queries"><a href="#1-提供一组目前的适配移动端屏幕的Media-Queries" class="headerlink" title="1. 提供一组目前的适配移动端屏幕的Media Queries"></a>1. 提供一组目前的适配移动端屏幕的Media Queries</h4><blockquote>
<p>根据不同的手机屏幕,设置基于html元素的字体大小,利用rem的方式实现移动端屏幕的适配</p>
<p>(注:这套适配方案是按照640的屏幕,获得的实际大小除以40,如获得的字体大小为40px,那么转换为rem就是1rem)</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">321px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">321px</span>) <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">360px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">22.5px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">361px</span>) <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">375px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">23.4px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">376px</span>) <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">414px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">25.8px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">415px</span>) <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">479px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">27px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">480px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">32px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、响应式设计中的-em-rem"><a href="#二、响应式设计中的-em-rem" class="headerlink" title="二、响应式设计中的 em/rem"></a>二、响应式设计中的 <code>em/rem</code></h2><p><code>rem</code>是指：<strong>根元素</strong>（root element，html）的字体大小，</p>
<p><code>em</code>是指：<strong>父元素</strong>的字体大小。</p>
<blockquote>
<p><strong>注:</strong>    可以引入 CSS 预处理工具（Sass、LESS 、Stylus等）自动计算 rem 值。</p>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>Git Problems</title>
    <url>/2020/09/08/git-problems/</url>
    <content><![CDATA[<blockquote>
<h2 id="CONTENT-OUTlINE"><a href="#CONTENT-OUTlINE" class="headerlink" title="CONTENT OUTlINE"></a>CONTENT OUTlINE</h2><p>收集汇总自己遇到的Git问题，并附上值得推荐的<code>Git</code>教程</p>
<p><a href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰的Git教程</a></p>
<p><a href="https://www.jianshu.com/p/e57a4a2cf077">Git使用教程（简书）</a></p>
<p><a href="https://learngitbranching.js.org/?locale=zh_CN">Git 互动练习教程</a></p>
<p>以及两个来自CSDN的  <a href="https://blog.csdn.net/weixin_42152081/article/details/80558282">Git教程(完整)</a> 和 <a href="https://blog.csdn.net/u011535541/article/details/83379151">Git傻瓜教程</a></p>
</blockquote>
<a id="more"></a>

<h2 id="1-使用git将本地项目上传至git仓库"><a href="#1-使用git将本地项目上传至git仓库" class="headerlink" title="1. 使用git将本地项目上传至git仓库"></a>1. 使用git将本地项目上传至git仓库</h2><blockquote>
<p><strong>介绍</strong>:  一般来说开发过程中都是先在git创建远程仓库，然后fetch到本地仓库，再进行commit push等操作，但是有时候也需要将本地已经开发的项目上传至一个空的远程仓库中，期间也是遇到不少问题，特此总结一下</p>
</blockquote>
<h3 id="初始化本地仓库"><a href="#初始化本地仓库" class="headerlink" title="初始化本地仓库"></a>初始化本地仓库</h3><p>初始化仓库</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">git init</span></span><br></pre></td></tr></table></figure>

<p>将文件提交至本地仓库</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">git</span> commit -m <span class="string">&quot;注释&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="关联线上仓库"><a href="#关联线上仓库" class="headerlink" title="关联线上仓库"></a>关联线上仓库</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git remote add origin &lt;线上仓库url&gt;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 线上仓库url 为如下链接</span><br><span class="line"><span class="regexp">//</span> https:<span class="regexp">//gi</span>thub.com<span class="regexp">/wenhaofan/</span>xxx.git</span><br></pre></td></tr></table></figure>

<h3 id="提交代码"><a href="#提交代码" class="headerlink" title="提交代码"></a>提交代码</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> git pull </span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<p><strong>常见错误及解决方案</strong></p>
<p>现在已经创建好了本地仓库，并关联上了远程仓库，如果我们直接使用git push -u origin master将本地内容推送至线上那么可能会出现出现以下错误</p>
<h4 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h4><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">failed <span class="built_in">to</span> push some refs <span class="built_in">to</span> <span class="string">&#x27;https://github.com/xxx/xxx.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because <span class="keyword">the</span> remote <span class="keyword">contains</span> work that you dogit</span><br><span class="line">hint: <span class="keyword">not</span> have locally. This is usually caused <span class="keyword">by</span> another repository pushing</span><br><span class="line">hint: <span class="built_in">to</span> <span class="keyword">the</span> same ref. You may want <span class="built_in">to</span> <span class="keyword">first</span> integrate <span class="keyword">the</span> remote changes</span><br><span class="line">hint: (e.g., <span class="string">&#x27;git pull ...&#x27;</span>) <span class="keyword">before</span> pushing again.</span><br><span class="line">hint: See <span class="keyword">the</span> <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure>

<p>​    以上错误很明显的提示先执行 git pull 再push,需要先执行以下指令将远程仓库中master分支中的文件拉取到本地</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">git pull origin <span class="literal">master</span></span><br></pre></td></tr></table></figure>

<p>​    如果没有抛异常 那么就可以愉快的再次执行 git push 了，如果抛了异常，那么可以接着往下看</p>
<h4 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h4><figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line"> * branch            <span class="keyword">master</span>     <span class="title">-&gt; FETCH_HEAD</span></span><br><span class="line">fatal: refusing to merge unrelated histories</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 出现这个问题是因为本地库和远程库没有进行关联远， 然后本地推送到远程库， 远端因为这个本地库跟自己没有关联， 所以告知无法合并，该情况有两种解决方法</p>
</blockquote>
<p><strong>第一种：</strong>    </p>
<p>​    先从远端库拉下来代码，然后将本地代码放入本地库中， 然后再执行push提交上去 </p>
<p><strong>第二种</strong>：</p>
<p>使用以下命令,把两段不相干的 分支进行强行合并</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">git pull origin <span class="keyword">master</span> <span class="title">--allow-unrelated-histories</span></span><br></pre></td></tr></table></figure>

<p><strong>然后再进行提交</strong></p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">git</span> <span class="keyword">push</span> gitlab master:init</span><br></pre></td></tr></table></figure>

<h2 id="2-git拉取远程分支并创建本地分支"><a href="#2-git拉取远程分支并创建本地分支" class="headerlink" title="2. git拉取远程分支并创建本地分支"></a>2. git拉取远程分支并创建本地分支</h2><p><strong>查看远程分支</strong><br> git branch -r</p>
<p><strong>拉取远程分支并创建本地分支</strong><br> git checkout -b 本地分支名  origin/远程分支名</p>
<p>使用该方式会在本地新建分支x，并自动切换到该本地分支x。<br> 采用此种方法建立的本地分支会和远程分支建立映射关系。</p>
<p><strong>如果不想建立映射关系，可以：</strong><br> git fetch origin 远程分支名x:本地分支名x<br> 使用该方式会在本地新建分支x，但是不会自动切换到该本地分支x，需要手动checkout。</p>
<p>本地分支和远程分支建立映射关系的作用见：<a href="https://blog.csdn.net/tterminator/article/details/78108550">此文章</a> </p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">git checkout -b my-<span class="keyword">test</span>  //在当前分支下创建my-<span class="keyword">test</span>的本地分支分支</span><br><span class="line">git push origin my-<span class="keyword">test</span>  //将my-<span class="keyword">test</span>分支推送到远程</span><br><span class="line">git branch --<span class="keyword">set</span>-upstream-to=origin/my-<span class="keyword">test</span> //将本地分支my-<span class="keyword">test</span>关联到远程分支my-<span class="keyword">test</span>上</span><br><span class="line">git branch -a //查看远程分支</span><br></pre></td></tr></table></figure>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>开发与调试</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML Meta</title>
    <url>/2020/08/31/HTML-meta/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><code>&lt;meta&gt;</code> 标签是 HTML 语言头部的一个辅助性标签，我们可以定义页面编码语言、搜索引擎优化、自动刷新并指向新的页面、控制页面缓冲、响应式视窗等</p>
<a id="more"></a>

<blockquote>
<p> 转载自<a href="https://blog.csdn.net/zhangank/article/details/94014629">HTML meta 标签</a></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">charset( H5 New)</td>
<td align="left">character_set</td>
<td align="left">定义文档的字符编码。</td>
</tr>
<tr>
<td align="left">content</td>
<td align="left">text</td>
<td align="left">定义与 http-equiv 或 name 属性相关的元信息。</td>
</tr>
<tr>
<td align="left">http-equiv</td>
<td align="left">content-type default-style refresh</td>
<td align="left">把 content 属性关联到 HTTP 头部。</td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">application-name author description generator keywords</td>
<td align="left">把 content 属性关联到一个名称。</td>
</tr>
<tr>
<td align="left">scheme(H5 删除)</td>
<td align="left">format/URI</td>
<td align="left">HTML5不支持。 定义用于翻译 content 属性值的格式。</td>
</tr>
</tbody></table>
<p>整体来看，HTML5之前，<code>meta</code>标签只有两个主要属性，分别是 <code>name</code> 属性和 <code>http-equiv</code> 属性。 HTML5新添加”<code>charset</code>“.</p>
<h2 id="一、name"><a href="#一、name" class="headerlink" title="一、name"></a>一、name</h2><p><code>name</code>属性主要用于描述网页，对应属性是 <code>content</code> ，<strong>以便于搜索引擎机器人查找、分类</strong>（目前几乎所有的搜索引擎都使用网上机器人自动查找meta值来给网页分类）。</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;参数&quot; content=&quot;参数值&quot; /&gt;</code></p>
<h3 id="1-Keywords（关键字）"><a href="#1-Keywords（关键字）" class="headerlink" title="1. Keywords（关键字）"></a>1. Keywords（关键字）</h3><p><strong>说明</strong>：为搜索引擎提供的关键字列表</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;keywords&quot; content=&quot;程序员,程序猿,攻城狮&quot;/&gt;</code></p>
<h3 id="2-Description（简介）"><a href="#2-Description（简介）" class="headerlink" title="2. Description（简介）"></a>2. Description（简介）</h3><p><strong>说明</strong>：Description用来告诉搜索引擎你的网站主要内容。</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;description&quot; content=&quot;meta标签是HTML中的一个重要标签，它位于HTML文档头部的&lt;HEAD&gt;标签和&lt;TITL&gt;标签之间。&quot;/&gt;</code></p>
<h3 id="3-robots（机器人向导）"><a href="#3-robots（机器人向导）" class="headerlink" title="3. robots（机器人向导）"></a>3. robots（机器人向导）</h3><p><strong>说明</strong>：robots用来告诉搜索机器人哪些页面需要索引，哪些页面不需要索引。</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;robots&quot; content=&quot;&quot;/&gt;</code></p>
<p><code>content</code>的参数值有<code>all</code>,<code>none</code>,<code>index</code>,<code>noindex</code>,<code>follow</code>,<code>nofollow</code>，默认值是<u>all</u>。</p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>参数为 all ：文件将被检索，且页面上的链接可以被查询； </li>
<li>参数为 none ：文件将不被检索，且页面上的链接不可以被查询； </li>
<li>参数为 index ：文件将被检索；</li>
<li>参数为 follow ：页面上的链接可以被查询； </li>
<li>参数为 noindex ：文件将不被检索，但页面上的链接可以被查询； </li>
<li>参数为 nofollow ：文件将被检索，但页面上的链接不可以被查询；</li>
</ul>
<h3 id="4-author（作者）"><a href="#4-author（作者）" class="headerlink" title="4. author（作者）"></a>4. author（作者）</h3><p><strong>说明</strong>：标注网页的作者</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;author&quot; content=&quot;TG,TG@qq.com&quot;/&gt;</code></p>
<h3 id="5-copyright（版权）"><a href="#5-copyright（版权）" class="headerlink" title="5. copyright（版权）"></a>5. copyright（版权）</h3><p><strong>说明</strong>：标注版权</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;copyright&quot; content=&quot;本网站版权归TG所有&quot;/&gt;</code></p>
<h3 id="6-generator"><a href="#6-generator" class="headerlink" title="6. generator"></a>6. generator</h3><p><strong>说明</strong>：说明网站采用什么编辑器制作。</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;generator&quot; content=&quot;你所用的编辑器&quot;/&gt;</code></p>
<h3 id="7-revisit-after（重访）"><a href="#7-revisit-after（重访）" class="headerlink" title="7. revisit-after（重访）"></a>7. revisit-after（重访）</h3><p><strong>说明</strong>：网站重访</p>
<p><strong>语法</strong>：<code>&lt;meta name=&quot;revisit-after&quot; content=&quot;7days&quot;/&gt;</code></p>
<h2 id="二、http-equiv"><a href="#二、http-equiv" class="headerlink" title="二、http-equiv"></a>二、http-equiv</h2><p><code>http-equiv</code>类似于HTTP的头部协议，它回应给浏览器一些有用的信息，以帮助正确和精确地显示网页内容。与之对应的属性值为<code>content</code>，content中的内容其实就是各个参数的变量值。</p>
<p><strong>语法</strong>：<code>&lt;meta http-equiv=&quot;参数&quot;  content=&quot;参数值&quot;/&gt;</code></p>
<p><strong>参数说明</strong>如下</p>
<h3 id="1-Expires（期限）"><a href="#1-Expires（期限）" class="headerlink" title="1. Expires（期限）"></a>1. Expires（期限）</h3><p><strong>说明</strong>：指定网页在缓存中的过期时间，一旦网页过期，必须到服务器上重新传输。</p>
<p><strong>语法</strong>：<code>&lt;meta http-equiv=&quot;expires&quot; content=&quot;Wed, 26 Feb 1997 08:21:57 GMT&quot;/&gt;</code></p>
<p><strong>注意</strong>：必须使用GMT的时间格式，或者直接设为0（数字表示多久后过期）</p>
<h3 id="2-Pragma（cache模式）"><a href="#2-Pragma（cache模式）" class="headerlink" title="2. Pragma（cache模式）"></a>2. Pragma（cache模式）</h3><p><strong>说明</strong>：禁止浏览器从本地计算机的缓存中访问页面内容。</p>
<p><strong>语法</strong>：<code>&lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot;/&gt;</code></p>
<p><strong>注意</strong>：网页不保存在缓存中，每次访问都刷新页面。这样设定，访问者将无法脱机浏览。</p>
<h3 id="3-Refresh（刷新）"><a href="#3-Refresh（刷新）" class="headerlink" title="3. Refresh（刷新）"></a>3. Refresh（刷新）</h3><p><strong>说明</strong>：自动刷新并指向新页面。</p>
<p><strong>语法</strong>：<code>&lt;meta http-equiv=&quot;refresh&quot;content=&quot;5; url=http://www.baidu.com/&quot;/&gt;</code></p>
<p>其中的5表示5秒后自动刷新并调整到URL新页面。</p>
<h3 id="4-Set-Cookie（cookie设定）"><a href="#4-Set-Cookie（cookie设定）" class="headerlink" title="4. Set-Cookie（cookie设定）"></a>4. Set-Cookie（cookie设定）</h3><p><strong>说明</strong>：浏览器访问某个页面时会将它存在缓存中，下次再次访问时就可从缓存中读取，以提高速度。当你希望访问者每次都刷新你广告的图标，或每次都刷新你的计数器，就要禁用缓存了。</p>
<p>如果网页过期，那么存盘的cookie将被删除。</p>
<p><strong>语法</strong>：</p>
<p><code>&lt;meta http-equiv=&quot;Set-Cookie&quot;  content=&quot;cookievalue=xxx; expires=Wednesday,21-Oct-98 16:14:21 GMT; path=/&quot;&gt;</code></p>
<p><strong>注意</strong>：必须使用GMT的时间格式</p>
<h3 id="5-Window-target（显示窗口的设定）"><a href="#5-Window-target（显示窗口的设定）" class="headerlink" title="5. Window-target（显示窗口的设定）"></a>5. Window-target（显示窗口的设定）</h3><p><strong>说明</strong>：强制页面在当前窗口以独立页面显示</p>
<p><strong>语法</strong>：<code>&lt;meta http-equiv=&quot;Window-target&quot; content=&quot;_top&quot;/&gt;</code></p>
<p>可以用来防止别人在框架里调用你的页面。</p>
<h3 id="6-content-Type（显示字符集的设定）"><a href="#6-content-Type（显示字符集的设定）" class="headerlink" title="6.  content-Type（显示字符集的设定）"></a>6.  content-Type（显示字符集的设定）</h3><p><strong>说明</strong>：设定页面使用的字符集</p>
<p><code>&lt;meta http-equiv=&quot;content-Type&quot; content=&quot;text/html;charset=utf-8&quot;/&gt;</code></p>
<p><strong>其他参数值</strong>：</p>
<ul>
<li>meta标签的charset的信息参数如GB2312时，代表说明网站是采用的编码是简体中文；</li>
<li>meta标签的charset的信息参数如BIG5时，代表说明网站是采用的编码是繁体中文； </li>
<li>meta标签的charset的信息参数如iso-2022-jp时，代表说明网站是采用的编码是日文；  </li>
<li>meta标签的charset的信息参数如ks_c_5601时，代表说明网站是采用的编码是韩文；  </li>
<li>meta标签的charset的信息参数如ISO-8859-1时，代表说明网站是采用的编码是英文；  </li>
<li>meta标签的charset的信息参数如UTF-8时，代表世界通用的语言编码；</li>
</ul>
<blockquote>
<p>在HTML5中，我们一般都是：<code>&lt;meta charset=&quot;utf-8&quot;/&gt;</code></p>
</blockquote>
<h3 id="7-content-Language（显示语言的设定）"><a href="#7-content-Language（显示语言的设定）" class="headerlink" title="7. content-Language（显示语言的设定）"></a>7. content-Language（显示语言的设定）</h3><p><strong>说明</strong>：显示语言</p>
<p><strong>语法</strong>：<code>&lt;meta http-equiv=&quot;Content-Language&quot; content=&quot;zh-cn&quot;/&gt;</code></p>
<h3 id="8-http-equiv-”imagetoolbar”"><a href="#8-http-equiv-”imagetoolbar”" class="headerlink" title="8. http-equiv=”imagetoolbar”"></a>8. http-equiv=”imagetoolbar”</h3><p><code>&lt;meta http-equiv=&quot;imagetoolbar&quot; content=&quot;false&quot;/&gt;</code></p>
<p>指定是否显示图片工具栏，当<code>为false</code>代表不显示，当为<code>true</code>代表显示。</p>
<h2 id="三、HTML-5新增"><a href="#三、HTML-5新增" class="headerlink" title="三、HTML 5新增"></a>三、HTML 5新增</h2><h3 id="1-name"><a href="#1-name" class="headerlink" title="1. name"></a>1. name</h3><h4 id="1-1-viewport"><a href="#1-1-viewport" class="headerlink" title="1.1 viewport"></a>1.1 viewport</h4><p><strong>说明</strong>：能优化移动浏览器的显示（屏幕的缩放）</p>
<p><strong>语法</strong>：</p>
<p><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no&quot;/&gt;</code></p>
<p><strong>参数值</strong>：</p>
<p><code>width</code> viewport的宽度[device-width | pixel_value]width如果直接设置pixel_value数值，大部分的安卓手机不支持，但是ios支持；  </p>
<p><code>height</code> – viewport 的高度 （范围从 223 到 10,000 ）  </p>
<p><code>user-scalable</code> [yes | no]是否允许缩放  </p>
<p><code>initial-scale</code> [数值] 初始化比例（范围从 &gt; 0 到 10）  </p>
<p><code>minimum-scale</code> [数值] 允许缩放的最小比例  </p>
<p><code>maximum-scale</code> [数值] 允许缩放的最大比例  </p>
<h4 id="1-2-format-detection（忽略电话号码和邮箱）"><a href="#1-2-format-detection（忽略电话号码和邮箱）" class="headerlink" title="1.2 format-detection（忽略电话号码和邮箱）"></a>1.2 format-detection（忽略电话号码和邮箱）</h4><p><strong>说明</strong>：忽略电话号码和邮箱</p>
<p><strong>语法</strong>：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span>忽略页面中的数字识别为电话号码</span><br><span class="line">&lt;meta name=<span class="string">&quot;format-detection&quot;</span>content=<span class="string">&quot;telephone=no&quot;</span>&gt;</span><br><span class="line"><span class="regexp">//</span>忽略页面中的邮箱格式识别为邮箱</span><br><span class="line">&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;email=no&quot;</span>/&gt;</span><br><span class="line"><span class="regexp">//</span> 也可以写成：</span><br><span class="line">&lt;meta name=<span class="string">&quot;format-detection&quot;</span> content=<span class="string">&quot;telphone=no, email=no&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-浏览器内核控制"><a href="#1-3-浏览器内核控制" class="headerlink" title="1.3 浏览器内核控制"></a>1.3 浏览器内核控制</h4><p>国内浏览器很多都是双内核（<code>webkit</code>和<code>Trident</code>），webkit内核高速浏览，IE内核兼容网页和旧版网站。而添加meta标签的网站可以控制浏览器选择何种内核渲染。（仅限360浏览器）</p>
<p><code>&lt;meta name=&quot;renderer&quot; content=&quot;webkit|ie-comp|ie-stand&quot;&gt;</code></p>
<p>若页面需默认用极速核，增加标签：<code>&lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt;</code><br>若页面需默认用ie兼容内核，增加标签：<code>&lt;meta name=&quot;renderer&quot; content=&quot;ie-comp&quot;&gt;</code><br>若页面需默认用ie标准内核，增加标签：<code>&lt;meta name=&quot;renderer&quot; content=&quot;ie-stand&quot;&gt;</code></p>
<p>  <strong>各渲染内核的技术细节</strong></p>
<table>
<thead>
<tr>
<th align="left">内核</th>
<th>Webkit</th>
<th>IE兼容</th>
<th>IE标准</th>
</tr>
</thead>
<tbody><tr>
<td align="left">内核版本</td>
<td>Chrome 45</td>
<td>IE6/7</td>
<td>IE9/IE10/IE11(取决于用户的IE)</td>
</tr>
<tr>
<td align="left">HTML5支持</td>
<td>YES</td>
<td>NO</td>
<td>YES</td>
</tr>
<tr>
<td align="left">ActiveX控件支持</td>
<td>NO</td>
<td>YES</td>
<td>YES</td>
</tr>
</tbody></table>
<h4 id="1-4-WebApp全屏模式"><a href="#1-4-WebApp全屏模式" class="headerlink" title="1.4 WebApp全屏模式"></a>1.4 WebApp全屏模式</h4><p><code>&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt; &lt;!-- 启用 WebApp 全屏模式 --&gt;</code></p>
<h4 id="1-5-隐藏状态栏-设置状态栏颜色"><a href="#1-5-隐藏状态栏-设置状态栏颜色" class="headerlink" title="1.5 隐藏状态栏/设置状态栏颜色"></a>1.5 隐藏状态栏/设置状态栏颜色</h4><p>只有在开启WebApp全屏模式时才生效。content的值为<code>default</code> | <code>black</code> | <code>black-translucent</code> 。</p>
<p><code>&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black-translucent&quot; /&gt;</code></p>
<h4 id="1-6-不同浏览器"><a href="#1-6-不同浏览器" class="headerlink" title="1.6 不同浏览器"></a>1.6 不同浏览器</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">`<span class="comment">&lt;!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 --&gt;</span> `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;HandheldFriendly&quot;</span> <span class="attr">content</span>=<span class="string">&quot;true&quot;</span>&gt;</span>  `</span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- 微软的老式浏览器 --&gt;</span>  `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;MobileOptimized&quot;</span> <span class="attr">content</span>=<span class="string">&quot;320&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- uc强制竖屏 --&gt;</span>  `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;screen-orientation&quot;</span> <span class="attr">content</span>=<span class="string">&quot;portrait&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- QQ强制竖屏 --&gt;</span>  `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;x5-orientation&quot;</span> <span class="attr">content</span>=<span class="string">&quot;portrait&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- UC强制全屏 --&gt;</span> `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;full-screen&quot;</span> <span class="attr">content</span>=<span class="string">&quot;yes&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- QQ强制全屏 --&gt;</span>  `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;x5-fullscreen&quot;</span> <span class="attr">content</span>=<span class="string">&quot;true&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- UC应用模式 --&gt;</span> `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;browsermode&quot;</span> <span class="attr">content</span>=<span class="string">&quot;application&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- QQ应用模式 --&gt;</span> `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;x5-page-mode&quot;</span> <span class="attr">content</span>=<span class="string">&quot;app&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- windows phone 点击无高光 --&gt;</span> `</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;msapplication-tap-highlight&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-http-equiv"><a href="#2-http-equiv" class="headerlink" title="2. http-equiv"></a>2. http-equiv</h3><h4 id="2-1-优先使用-IE-最新版本和-Chrome"><a href="#2-1-优先使用-IE-最新版本和-Chrome" class="headerlink" title="2.1 优先使用 IE 最新版本和 Chrome"></a>2.1 优先使用 IE 最新版本和 Chrome</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span>  </span><br><span class="line"></span><br><span class="line">`<span class="comment">&lt;!-- 关于X-UA-Compatible --&gt;</span>  `</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=6&quot;</span> &gt;</span><span class="comment">&lt;!-- 使用IE6 --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=7&quot;</span> &gt;</span><span class="comment">&lt;!-- 用于在IE8版本浏览器中使用IE7渲染来避免出错 --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=8&quot;</span> &gt;</span><span class="comment">&lt;!-- 使用IE8 --&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-转码申明"><a href="#2-2-转码申明" class="headerlink" title="2.2 转码申明"></a>2.2 转码申明</h4><p>用百度打开网页可能会对其进行转码（比如贴广告），避免转码可添加如下<code>meta</code></p>
<p><code>&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-siteapp&quot; /&gt;</code></p>
<h3 id="3-charset"><a href="#3-charset" class="headerlink" title="3. charset"></a>3. charset</h3><p><code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code></p>
<ul>
<li><p>meta标签的charset的信息参数如<code>GB2312</code>时，代表说明网站是采用的编码是简体中文；</p>
</li>
<li><p>meta标签的charset的信息参数如<code>BIG5</code>时，代表说明网站是采用的编码是繁体中文； </p>
</li>
<li><p>meta标签的charset的信息参数如<code>iso-2022-jp</code>时，代表说明网站是采用的编码是日文；  </p>
</li>
<li><p>meta标签的charset的信息参数如<code>ks_c_5601</code>时，代表说明网站是采用的编码是韩文；  </p>
</li>
<li><p>meta标签的charset的信息参数如<code>ISO-8859-1</code>时，代表说明网站是采用的编码是英文；  </p>
</li>
<li><p>meta标签的charset的信息参数如<code>UTF-8</code>时，代表世界通用的语言编码</p>
</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>Html</tag>
      </tags>
  </entry>
  <entry>
    <title>The Second Birthday</title>
    <url>/2020/10/10/the-second-birthday/</url>
    <content><![CDATA[<p>d</p>
<p><div id="clock-box"><br>臭臭鑫与 <a href="http: blog.csdn.net wuxia2001" target="_blank">@哈尼小宝贝 在一起的<br>         <div id="clock"></div id="clock"></a href="http:></div id="clock-box"></p>


<p><canvas id="mycanvas" width="1100" height="680"></canvas></p>
<div style="background-color:blue">d</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>My Life</category>
      </categories>
      <tags>
        <tag>myLove</tag>
      </tags>
  </entry>
  <entry>
    <title>VsCode 杂谈</title>
    <url>/2020/09/08/talk-about-VsCode/</url>
    <content><![CDATA[<blockquote>
<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><p>这篇文章汇总有关**<code>VsCode</code>**的冷知识，换句话说就是<code>IDE</code>的使用和一些自己遇到的问题</p>
</blockquote>
<a id="more"></a>

<h2 id="一、值得推荐的-Vscode-插件"><a href="#一、值得推荐的-Vscode-插件" class="headerlink" title="一、值得推荐的**Vscode**插件"></a>一、值得推荐的**<code>Vscode</code>**插件</h2><h2 id="二、使用-Vscode-中遇到的问题"><a href="#二、使用-Vscode-中遇到的问题" class="headerlink" title="二、使用**Vscode**中遇到的问题"></a>二、使用**<code>Vscode</code>**中遇到的问题</h2><h3 id="1-解决eslint空格报错等问题"><a href="#1-解决eslint空格报错等问题" class="headerlink" title="1. 解决eslint空格报错等问题"></a>1. 解决<code>eslint</code>空格报错等问题</h3><blockquote>
<p>参考<a href="https://www.cnblogs.com/fqh123/p/9967771.html">该博主</a></p>
</blockquote>
<p><code>eslint</code>检查代码风格是好的，不过 有些<code>换行报错</code> 、<code>空格报错</code>，还有在代码中有 console也是报错，这有些烦人—-&gt;</p>
<p>为了把这些烦人的报错给禁止掉</p>
<p>我们可以在<code>package.json</code>文件中 找到（或者在<code>.eslintrc.js</code>中找到<code>rules</code>）</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line">　　<span class="string">&quot;root&quot;</span>: true,</span><br><span class="line">　　<span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">　　　　<span class="string">&quot;node&quot;</span>: true</span><br><span class="line">　　&#125;,</span><br><span class="line">　　<span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">　　　　<span class="string">&quot;plugin:vue/essential&quot;</span>,</span><br><span class="line">　　　　<span class="string">&quot;eslint:recommended&quot;</span></span><br><span class="line">　　],</span><br><span class="line">　　<span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">　　　　<span class="string">&quot;no-console&quot;</span>:<span class="string">&quot;off&quot;</span>,<span class="regexp">//</span>在这禁止掉console报错检查</span><br><span class="line">　　　　<span class="string">&quot;no-irregular-whitespace&quot;</span>:<span class="string">&quot;off&quot;</span><span class="regexp">//</span>这禁止掉 空格报错检查</span><br><span class="line">　　&#125;,</span><br><span class="line">　　<span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">　　　　<span class="string">&quot;parser&quot;</span>: <span class="string">&quot;babel-eslint&quot;</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>在rules规则中 禁止掉这些规则</span><br></pre></td></tr></table></figure>

<p>下面罗列一些，一些规则的含义：</p>
<blockquote>
<p>“off” or 0 - 关闭(禁用)规则<br>“warn” or 1 - 将规则视为一个警告（并不会导致检查不通过）<br>“error” or 2 - 将规则视为一个错误 (退出码为1，检查不通过) </p>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>开发与调试</tag>
        <tag>开发工具</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue-socket-io API说明及使用</title>
    <url>/2020/09/05/Vue-socket-io-API-description-and-usage/</url>
    <content><![CDATA[<h2 id="问题缘起"><a href="#问题缘起" class="headerlink" title="问题缘起"></a>问题缘起</h2><blockquote>
<p>最近接手了一个小项目，数据通信选型使用<code>Socket</code>实现，因此，恶补<code>WebScoket</code>的概念和<code>vue-socket-io</code>的使用</p>
</blockquote>
<h2 id="一、WebSocket-基础"><a href="#一、WebSocket-基础" class="headerlink" title="一、WebSocket 基础"></a>一、<code>WebSocket</code> 基础</h2><blockquote>
<p>这一部分还是廖雪峰老师讲的好，附上<a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html">传送门</a></p>
<p>当然，我个人还是要记录一下，可能是<code>CTRL-C/V</code>，但权当再加深印象</p>
</blockquote>
<a id="more"></a>

<h3 id="1-HTTP-协议和-WebSocket-的区别？它能带来什么好处？"><a href="#1-HTTP-协议和-WebSocket-的区别？它能带来什么好处？" class="headerlink" title="1. HTTP 协议和 WebSocket 的区别？它能带来什么好处？"></a>1. HTTP 协议和 WebSocket 的区别？它能带来什么好处？</h3><p>答案很简单，因为 HTTP 协议有一个缺陷：通信只能由客户端发起。</p>
<p>这种单向请求的特点，注定了如果服务器有连续的状态变化，客户端要获知就非常麻烦。我们只能使用<a href="https://www.pubnub.com/blog/2014-12-01-http-long-polling/">“轮询”</a>：每隔一段时候，就发出一个询问，了解服务器有没有新的信息。最典型的场景就是聊天室。</p>
<p>轮询的效率低，非常浪费资源（因为必须不停连接，或者 HTTP 连接始终打开）。因此，工程师们一直在思考，有没有更好的方法。WebSocket 就是这样发明的。</p>
<p>WebSocket 协议在2008年诞生，2011年成为国际标准。所有浏览器都已经支持了。</p>
<p><strong>它的最大特点就是</strong>，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话，属于<a href="https://en.wikipedia.org/wiki/Push_technology">服务器推送技术</a>的一种。</p>
<p><img data-src="bg202009051.png"></p>
<p><strong>其他特点包括：</strong></p>
<p>（1）建立在 TCP 协议之上，服务器端的实现比较容易。</p>
<p>（2）与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。</p>
<p>（3）数据格式比较轻量，性能开销小，通信高效。</p>
<p>（4）可以发送文本，也可以发送二进制数据。</p>
<p>（5）没有同源限制，客户端可以与任意服务器通信。</p>
<p>（6）协议标识符是<code>ws</code>（如果加密，则为<code>wss</code>），服务器网址就是 URL。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ws:&#x2F;&#x2F;example.com:80&#x2F;some&#x2F;path</span><br></pre></td></tr></table></figure>

<p><img data-src="bg202009052.jpg"></p>
<h3 id="2-客户端的简单示例"><a href="#2-客户端的简单示例" class="headerlink" title="2. 客户端的简单示例"></a>2. 客户端的简单示例</h3><p>WebSocket 的用法相当简单。</p>
<p>下面是一个网页脚本的例子（点击<a href="http://jsbin.com/muqamiqimu/edit?js,console">这里</a>看运行结果），基本上一眼就能明白。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">&quot;wss://echo.websocket.org&quot;</span>);</span><br><span class="line"></span><br><span class="line">ws.onopen = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Connection open ...&quot;</span>); </span><br><span class="line">  ws.send(<span class="string">&quot;Hello WebSockets!&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">&quot;Received Message: &quot;</span> + evt.data);</span><br><span class="line">  ws.close();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.onclose = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Connection closed.&quot;</span>);</span><br><span class="line">&#125;;      </span><br></pre></td></tr></table></figure>

<h3 id="3-客户端的-API"><a href="#3-客户端的-API" class="headerlink" title="3. 客户端的 API"></a>3. 客户端的 API</h3><p>WebSocket 客户端的 API 如下。</p>
<h4 id="3-1-WebSocket-构造函数"><a href="#3-1-WebSocket-构造函数" class="headerlink" title="3.1 WebSocket 构造函数"></a>3.1 WebSocket 构造函数</h4><p>WebSocket 对象作为一个构造函数，用于新建 WebSocket 实例。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">&#x27;ws://localhost:8080&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>执行上面语句之后，客户端就会与服务器进行连接。</p>
<p>实例对象的所有属性和方法清单，参见<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket">这里</a>。</p>
<h4 id="3-2-webSocket-readyState"><a href="#3-2-webSocket-readyState" class="headerlink" title="3.2 webSocket.readyState"></a>3.2 webSocket.readyState</h4><p><code>readyState</code>属性返回实例对象的当前状态，共有四种。</p>
<blockquote>
<ul>
<li>CONNECTING：值为0，表示正在连接。</li>
<li>OPEN：值为1，表示连接成功，可以通信了。</li>
<li>CLOSING：值为2，表示连接正在关闭。</li>
<li>CLOSED：值为3，表示连接已经关闭，或者打开连接失败。</li>
</ul>
</blockquote>
<p>下面是一个示例。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (ws.readyState) &#123;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.CONNECTING:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.OPEN:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.CLOSING:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.CLOSED:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">// this never happens</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-webSocket-onopen"><a href="#3-3-webSocket-onopen" class="headerlink" title="3.3 webSocket.onopen"></a>3.3 webSocket.onopen</h4><p>实例对象的<code>onopen</code>属性，用于指定连接成功后的回调函数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ws.onopen = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ws.send(<span class="string">&#x27;Hello Server!&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果要指定多个回调函数，可以使用<code>addEventListener</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ws.addEventListener(<span class="string">&#x27;open&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  ws.send(<span class="string">&#x27;Hello Server!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="3-4-webSocket-onclose"><a href="#3-4-webSocket-onclose" class="headerlink" title="3.4 webSocket.onclose"></a>3.4 webSocket.onclose</h4><p>实例对象的<code>onclose</code>属性，用于指定连接关闭后的回调函数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ws.onclose = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> code = event.code;</span><br><span class="line">  <span class="keyword">var</span> reason = event.reason;</span><br><span class="line">  <span class="keyword">var</span> wasClean = event.wasClean;</span><br><span class="line">  <span class="comment">// handle close event</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.addEventListener(<span class="string">&quot;close&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> code = event.code;</span><br><span class="line">  <span class="keyword">var</span> reason = event.reason;</span><br><span class="line">  <span class="keyword">var</span> wasClean = event.wasClean;</span><br><span class="line">  <span class="comment">// handle close event</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="3-5-webSocket-onmessage"><a href="#3-5-webSocket-onmessage" class="headerlink" title="3.5 webSocket.onmessage"></a>3.5 webSocket.onmessage</h4><p>实例对象的<code>onmessage</code>属性，用于指定收到服务器数据后的回调函数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ws.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = event.data;</span><br><span class="line">  <span class="comment">// 处理数据</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.addEventListener(<span class="string">&quot;message&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = event.data;</span><br><span class="line">  <span class="comment">// 处理数据</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>注意，服务器数据可能是文本，也可能是二进制数据（<code>blob</code>对象或<code>Arraybuffer</code>对象）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ws.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> event.data === <span class="built_in">String</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Received data string&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(event.data <span class="keyword">instanceof</span> <span class="built_in">ArrayBuffer</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> buffer = event.data;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Received arraybuffer&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除了动态判断收到的数据类型，也可以使用<code>binaryType</code>属性，显式指定收到的二进制数据类型。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 收到的是 blob 数据</span></span><br><span class="line">ws.binaryType = <span class="string">&quot;blob&quot;</span>;</span><br><span class="line">ws.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e.data.size);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 收到的是 ArrayBuffer 数据</span></span><br><span class="line">ws.binaryType = <span class="string">&quot;arraybuffer&quot;</span>;</span><br><span class="line">ws.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e.data.byteLength);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="3-6-webSocket-send"><a href="#3-6-webSocket-send" class="headerlink" title="3.6 webSocket.send()"></a>3.6 webSocket.send()</h4><p>实例对象的<code>send()</code>方法用于向服务器发送数据。</p>
<p>发送文本的例子。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ws.send(<span class="string">&#x27;your message&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>发送 Blob 对象的例子。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> file = <span class="built_in">document</span></span><br><span class="line">  .querySelector(<span class="string">&#x27;input[type=&quot;file&quot;]&#x27;</span>)</span><br><span class="line">  .files[<span class="number">0</span>];</span><br><span class="line">ws.send(file);</span><br></pre></td></tr></table></figure>

<p>发送 ArrayBuffer 对象的例子。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sending canvas ImageData as ArrayBuffer</span></span><br><span class="line"><span class="keyword">var</span> img = canvas_context.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">320</span>);</span><br><span class="line"><span class="keyword">var</span> binary = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(img.data.length);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; img.data.length; i++) &#123;</span><br><span class="line">  binary[i] = img.data[i];</span><br><span class="line">&#125;</span><br><span class="line">ws.send(binary.buffer);</span><br></pre></td></tr></table></figure>

<h4 id="3-7-webSocket-bufferedAmount"><a href="#3-7-webSocket-bufferedAmount" class="headerlink" title="3.7 webSocket.bufferedAmount"></a>3.7 webSocket.bufferedAmount</h4><p>实例对象的<code>bufferedAmount</code>属性，表示还有多少字节的二进制数据没有发送出去。它可以用来判断发送是否结束。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">10000000</span>);</span><br><span class="line">socket.send(data);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (socket.bufferedAmount === <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// 发送完毕</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 发送还没结束</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-webSocket-onerror"><a href="#3-8-webSocket-onerror" class="headerlink" title="3.8 webSocket.onerror"></a>3.8 webSocket.onerror</h4><p>实例对象的<code>onerror</code>属性，用于指定报错时的回调函数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">socket.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// handle error event</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.addEventListener(<span class="string">&quot;error&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// handle error event</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4-服务端的实现"><a href="#4-服务端的实现" class="headerlink" title="4. 服务端的实现"></a>4. 服务端的实现</h3><p>WebSocket 服务器的实现，可以查看维基百科的<a href="https://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations">列表</a>。</p>
<p>常用的 Node 实现有以下三种。</p>
<ul>
<li><a href="https://github.com/uWebSockets/uWebSockets">µWebSockets</a></li>
<li><a href="http://socket.io/">Socket.IO</a></li>
<li><a href="https://github.com/theturtle32/WebSocket-Node">WebSocket-Node</a></li>
</ul>
<h2 id="二、WebSocket实现之Socket-io"><a href="#二、WebSocket实现之Socket-io" class="headerlink" title="二、WebSocket实现之Socket.io"></a>二、WebSocket实现之<code>Socket.io</code></h2><blockquote>
<p><a href="https://socket.io/">Socket.io官网</a></p>
</blockquote>
<p>官网里的demo很多，看官网就好</p>
<h2 id="三、Vue-Socket-io-实现及使用"><a href="#三、Vue-Socket-io-实现及使用" class="headerlink" title="三、Vue-Socket-io 实现及使用"></a>三、<code>Vue-Socket-io</code> 实现及使用</h2><blockquote>
<p>推荐参考文档 <a href="https://www.npmjs.com/package//vue-socket.io#using-socketio-client-instance">vue-socket.io</a></p>
<p>参考自简书 <a href="https://www.jianshu.com/p/d509e8695850">候鸟与暖风</a></p>
<p>推荐和我一样的<a href="https://www.cnblogs.com/dreamsqin/p/12018866.html">踩坑博文</a></p>
</blockquote>
<h3 id="1-下载vue-socket-io依赖"><a href="#1-下载vue-socket-io依赖" class="headerlink" title="1. 下载vue-socket-io依赖"></a>1. 下载<code>vue-socket-io</code>依赖</h3><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">npm install vue-<span class="built_in">socket</span>.io <span class="comment">--save</span></span><br></pre></td></tr></table></figure>

<h3 id="2-引入到vue-cli项目中"><a href="#2-引入到vue-cli项目中" class="headerlink" title="2. 引入到vue-cli项目中"></a>2. 引入到vue-cli项目中</h3><p>引入的方式有两种情形，一种<code>固定地址</code>，一种动态地址</p>
<h4 id="a-第一种情景"><a href="#a-第一种情景" class="headerlink" title="a.第一种情景"></a>a.第一种情景</h4><p><strong>webSocket连接的地址是固定的</strong></p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在main.js中直接这样写</span></span><br><span class="line"><span class="keyword">import</span> VueSocketIO <span class="keyword">from</span> <span class="string">&#x27;vue-socket.io&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(<span class="keyword">new</span> VueSocketIO(&#123;</span><br><span class="line">  debug: <span class="keyword">true</span>,</span><br><span class="line">  connection: <span class="string">&#x27;ws://192.168.21.109:9099?storeId=1&#x27;</span>, </span><br><span class="line">  vuex: &#123;       <span class="comment">// 不需要用到vuex这个可以不加</span></span><br><span class="line">    store,</span><br><span class="line">    actionPrefix: <span class="string">&#x27;SOCKET_&#x27;</span>,</span><br><span class="line">    mutationPrefix: <span class="string">&#x27;SOCKET_&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<p>原博主还提到：连接方式很多直接在main.js中如下这样写：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">import VueSocketio from <span class="string">&#x27;vue-socket.io&#x27;</span>; </span><br><span class="line">Vue.use(VueSocketio, <span class="string">&#x27;http://socketserver.com:1923&#x27;</span>);      </span><br><span class="line"> <span class="regexp">//</span>*******这种方法我试了，我这边不行\**\*<span class="regexp">//</span>**</span><br></pre></td></tr></table></figure>

<h4 id="b-第二种情形"><a href="#b-第二种情形" class="headerlink" title="b.第二种情形"></a>b.第二种情形</h4><p><strong>webSocket连接的地址的是动态的，是后台通过接口传给我们的</strong></p>
<p><img data-src="bg202009053.png"></p>
<p><strong>这里要提示的一点就是，当连接的地址是动态的，代码的执行顺序就很重要了，即new VueSocket在main.js中的位置</strong></p>
<h3 id="3-在mounted中执行connect"><a href="#3-在mounted中执行connect" class="headerlink" title="3. 在mounted中执行connect"></a>3. 在mounted中执行connect</h3><h4 id="a-当socket地址是静态的写法"><a href="#a-当socket地址是静态的写法" class="headerlink" title="a.当socket地址是静态的写法"></a>a.当socket地址是静态的写法</h4><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span><span class="params">()</span></span>&#123;</span><br><span class="line"> this.<span class="variable">$socket</span>.emit(<span class="string">&#x27;connect&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="b-当socket地址是动态的"><a href="#b-当socket地址是动态的" class="headerlink" title="b.当socket地址是动态的"></a>b.当socket地址是动态的</h4><p>因为此时的socket连接地址是动态的，就会存在请求响应然后渲染的时间，这个时候就会出现socket还没渲染成功就执行了App.vue，这时候connect连接事件就不会触发，所以采用定时器的方法来执行connect</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line"> var timerOne = <span class="built_in">window</span>.<span class="built_in">setInterval</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.$socket) &#123;</span><br><span class="line">       <span class="built_in">this</span>.$socket.emit(<span class="string">&#x27;connect&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">       <span class="built_in">window</span>.<span class="built_in">clearInterval</span>(timerOne)</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="4-推送消息给后台，连接socket"><a href="#4-推送消息给后台，连接socket" class="headerlink" title="4. 推送消息给后台，连接socket"></a>4. 推送消息给后台，连接socket</h3><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export <span class="keyword">default</span> &#123;</span><br><span class="line">        <span class="keyword">data</span>() &#123;</span><br><span class="line">            id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            <span class="comment">//触发socket连接</span></span><br><span class="line">            <span class="keyword">this</span>.$socket.emit(<span class="string">&#x27;login&#x27;</span>, loginId);       </span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        sockets: &#123;</span><br><span class="line">            connect() &#123;</span><br><span class="line">                <span class="keyword">this</span>.id = <span class="keyword">this</span>.$socket.id;</span><br><span class="line">                <span class="comment">//监听connect事件</span></span><br><span class="line">                <span class="keyword">this</span>.$socket.emit(<span class="string">&#x27;login&#x27;</span>, loginId);      </span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">//监听message事件，方法是后台定义和提供的</span></span><br><span class="line">            message(<span class="keyword">data</span>) &#123;                                 </span><br><span class="line">                console.log(<span class="keyword">data</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">          methods: &#123;</span><br><span class="line">               <span class="comment">//添加按钮事件向服务端发送数据</span></span><br><span class="line">            clickButton: function(<span class="keyword">val</span>)&#123;                      </span><br><span class="line">                <span class="keyword">this</span>.$socket.emit(<span class="string">&#x27;emit_method&#x27;</span>, <span class="keyword">val</span>);</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="bg202009054.png"></p>
<h3 id="5-socket连接成功"><a href="#5-socket连接成功" class="headerlink" title="5. socket连接成功"></a>5. socket连接成功</h3><p>因为我们在 <code>new VueSocketIO</code>中开启了<code>debug: true</code>，就会在控制台中出现那些蓝色<code>debug信息</code>，来帮助我们调试socket</p>
<blockquote>
<p><strong>注意</strong>：如果蓝色的字中，没有包含我们在socket中定义的事件（connect、users、reconnect……），那就可能是我们在main,js中创建的new VueSocketIO渲染时间有问题,这个时候，connect事件也不会执行</p>
</blockquote>
<h3 id="6-后台定义的事件"><a href="#6-后台定义的事件" class="headerlink" title="6. 后台定义的事件"></a>6. 后台定义的事件</h3><blockquote>
<p>如图上所示user、transferMessage这些名词，都是后台自定义的，每个项目中可能都会有所不同，我们接受消息的事件就是靠后台来告诉我们的</p>
</blockquote>
<p><strong>vue-socket.io中自带的几个事件</strong> </p>
<blockquote>
<p>connect:查看socket是否渲染成功 </p>
<p>disconnect:检测socket断开连接 </p>
<p>reconnect:重新连接socket事件</p>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>框架与工具</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue常见打脸小问题</title>
    <url>/2020/09/09/vue-FAQ/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>这篇文章汇总使用<code>vue</code>的过程中遇到的小问题</p>
<p>–  获取地址参数</p>
<p>–  实现一段时间请求一次接口</p>
<p>–  Vue <code>v-loading</code> 加载</p>
<p>–  Vue 模拟点击事件</p>
<p>–  Vue 中使用定时器</p>
</blockquote>
<a id="more"></a>

<h2 id="一、获取地址参数"><a href="#一、获取地址参数" class="headerlink" title="一、获取地址参数"></a>一、获取地址参数</h2><h3 id="1-1-使用路由获取页面参数"><a href="#1-1-使用路由获取页面参数" class="headerlink" title="1.1 使用路由获取页面参数"></a>1.1 使用路由获取页面参数</h3><p><strong>在路由中设置</strong><code>path</code>：</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attribute">path</span>: <span class="string">&#x27;/detail/:id/&#x27;</span>,</span><br><span class="line">    <span class="attribute">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">    <span class="attribute">component</span>: detail,</span><br><span class="line">    <span class="attribute">meta</span>: &#123;</span><br><span class="line">        <span class="attribute">title</span>: <span class="string">&#x27;详情&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>获取参数</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span><span class="built_in"> id</span> = this.<span class="variable">$route</span>.params<span class="built_in">.id</span></span><br></pre></td></tr></table></figure>

<p><strong>备注:</strong> </p>
<p>1、参数名需要保持一致 </p>
<p>2、如果路由中没有传参（<a href="http://192.168.1.12:8080/#/detail%EF%BC%89%EF%BC%8C%E4%BC%9A%E6%8A%A5%E9%94%99%EF%BC%8C%E9%A1%B5%E9%9D%A2%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%EF%BC%8C%E6%AD%A3%E5%B8%B8%E9%A1%B5%E9%9D%A2%E4%B8%BA">http://192.168.1.12:8080/#/detail），会报错，页面无法显示，正常页面为</a> <a href="http://192.168.1.12:8080/#/detail/234">http://192.168.1.12:8080/#/detail/234</a></p>
<p><strong>如果有的参数可传可不传</strong>    传参例如：<a href="http://192.168.1.12:8080/#/detail/?id=123">http://192.168.1.12:8080/#/detail/?id=123</a>    </p>
<p>获取的时候：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span><span class="built_in"> id</span> = this.<span class="variable">$route</span>.query<span class="built_in">.id</span></span><br></pre></td></tr></table></figure>

<p>这样即使取不到参数，页面也不会报错</p>
<h3 id="1-2-使用Js获取页面参数-–-Location-href"><a href="#1-2-使用Js获取页面参数-–-Location-href" class="headerlink" title="1.2 使用Js获取页面参数 – Location.href"></a>1.2 使用Js获取页面参数 – Location.href</h3><p>如果是在普通js文件中，想获取url后面的参数，可以新建一个工具类，utils.js：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable */</span></span><br><span class="line"><span class="selector-tag">export</span> <span class="selector-tag">default</span>&#123;</span><br><span class="line">    <span class="attribute">getUrlKey</span>: function (name) &#123;</span><br><span class="line">        return <span class="built_in">decodeURIComponent</span>((new RegExp(<span class="string">&#x27;[?|&amp;]&#x27;</span> + name + <span class="string">&#x27;=&#x27;</span> + <span class="string">&#x27;([^&amp;;]+?)(&amp;|#|;|$)&#x27;</span>).<span class="built_in">exec</span>(location.href) || [, <span class="string">&quot;&quot;</span>])[<span class="number">1</span>].<span class="built_in">replace</span>(/\+/g, <span class="string">&#x27;%20&#x27;</span>)) || null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在其他需要获取参数的js中引入</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> utils <span class="keyword">from</span> <span class="string">&#x27;../../assets/scripts/utils&#x27;</span></span><br><span class="line"><span class="comment">// Vue.prototype.$utils = utils // main.js中全局引入</span></span><br><span class="line"><span class="keyword">let</span> id = utils.getUrlKey(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log()</span><br></pre></td></tr></table></figure>

<h2 id="二、实现一段时间请求一次接口（轮询）"><a href="#二、实现一段时间请求一次接口（轮询）" class="headerlink" title="二、实现一段时间请求一次接口（轮询）"></a>二、实现一段时间请求一次接口（轮询）</h2><h4 id="需要注意的一点是-setTimeOut-和-setInterval-的使用"><a href="#需要注意的一点是-setTimeOut-和-setInterval-的使用" class="headerlink" title="需要注意的一点是  setTimeOut 和 setInterval 的使用"></a>需要注意的一点是  <code>setTimeOut</code> 和 <code>setInterval</code> 的使用</h4><p><strong>一般都会使用setInterval，但要注意单纯使用它会导致页面卡死</strong></p>
<p>解决方法如下：</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.<span class="built_in">setInterval</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(fun, <span class="number">0</span>)</span><br><span class="line">&#125;, <span class="number">30000</span>)</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：<code>setInterval</code>不会清除定时器队列，每重复执行1次都会导致定时器叠加，最终卡死你的网页。<br>但是<code>setTimeout</code>是自带清除定时器的</p>
<h4 id="下面是我使用的方法："><a href="#下面是我使用的方法：" class="headerlink" title="下面是我使用的方法："></a>下面是我使用的方法：</h4><p>在<code>mounted</code>中调用</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.$socket.emit(<span class="string">&#x27;connect&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">this</span>.$socket.emit(<span class="string">&#x27;LIST_EVENT&#x27;</span>, &#123;</span><br><span class="line">   type: <span class="number">1</span>,</span><br><span class="line">   storeId: <span class="keyword">this</span>.storeId,</span><br><span class="line">   <span class="keyword">data</span>: &#123;&#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.getListData();</span><br><span class="line">  <span class="keyword">this</span>.updatedData();</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p><code>updateData()</code>中定义了轮询</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="attribute">methods</span>: &#123;</span><br><span class="line"></span><br><span class="line">  updatedData() &#123;</span><br><span class="line">   setInterval(()=&gt;&#123;</span><br><span class="line">     setTimeout(this.getListData, 0)</span><br><span class="line">   &#125;, 180000);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  getListData() &#123;</span><br><span class="line">   this.$socket.emit(&#x27;LIST_EVENT&#x27;, &#123;</span><br><span class="line">     type: 3,</span><br><span class="line">     storeId: this.storeId,</span><br><span class="line">     data: &#123;&#125;</span><br><span class="line">   &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、Vue-v-loading-加载"><a href="#三、Vue-v-loading-加载" class="headerlink" title="三、Vue v-loading 加载"></a>三、Vue <code>v-loading</code> 加载</h2><p>使用<code>v-loading</code>在接口为请求到数据之前，显示加载中，直到请求到数据后消失。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//全局loading</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-loading=<span class="string">&quot;loading&quot;</span>&gt; &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在data 中定义初始化， <code>loading: false</code>，同时在<code>mounted()</code>中将 <code>this.loading</code>设置为true,再去请求接口</p>
<p>在接口的回调函数中，将 <code>this.loading</code> 设为<code>false</code>，到达效果。</p>
<p>如果写在<code>template</code>下的顶层元素上的话，就不会触发全屏<code>loading</code></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//局部loading</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt; </span><br><span class="line">        &lt;section v-loading=<span class="string">&quot;loading&quot;</span>&gt;&lt;/section&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="四、Vue模拟点击事件"><a href="#四、Vue模拟点击事件" class="headerlink" title="四、Vue模拟点击事件"></a>四、Vue模拟点击事件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$refs.refName.$el.click();</span><br></pre></td></tr></table></figure>

<h2 id="五、-Vue中使用定时器"><a href="#五、-Vue中使用定时器" class="headerlink" title="五、 Vue中使用定时器"></a>五、 Vue中使用定时器</h2><p>Js中定时器有两种，一个是循环执行<strong>setInterval</strong>，另一个是定时执行<strong>setTimeout</strong></p>
<p><strong>要注意：在页面销毁的时候清除掉</strong></p>
<h3 id="5-1-循环执行（setInterval）"><a href="#5-1-循环执行（setInterval）" class="headerlink" title="5.1 循环执行（setInterval）"></a>5.1 循环执行（setInterval）</h3><p>顾名思义，循环执行就是设置一个时间间隔，每过一段时间都会执行一次这个方法,直到这个定时器被销毁掉</p>
<p>用法是<strong>setInterval</strong>（“方法名或方法”，“延时”）， 第一个参数为方法名或者方法，注意为方法名的时候不要加括号,第二个参数为时间间隔</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section&gt;</span><br><span class="line">    &lt;h1&gt;hello world~&lt;/h1&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        timer: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        value: <span class="number">0</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        <span class="built_in">this</span>.value ++;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="built_in">this</span>.get, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-定时执行（setTimeout）"><a href="#5-2-定时执行（setTimeout）" class="headerlink" title="5.2 定时执行（setTimeout）"></a>5.2 定时执行（setTimeout）</h3><p>定时执行<strong>setTimeout</strong>是设置一个时间，等待时间到达的时候只执行一次，但是执行完以后定时器还在，只是没有运行</p>
<p>用法是<strong>setTimeout</strong>(“方法名或方法”, “延时”); 第一个参数为方法名或者方法，注意为方法名的时候不要加括号,第二个参数为时间间隔</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section&gt;</span><br><span class="line">    &lt;h1&gt;hello world~&lt;/h1&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        timer: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        value: <span class="number">0</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        <span class="built_in">this</span>.value ++;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      <span class="built_in">this</span>.timer = <span class="built_in">setTimeout</span>(<span class="built_in">this</span>.get, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>框架与工具</tag>
        <tag>Vue</tag>
        <tag>Vue-Problems</tag>
      </tags>
  </entry>
  <entry>
    <title>在Vue-Swiper里踩过的坑</title>
    <url>/2020/09/05/about-Swiper/</url>
    <content><![CDATA[<h2 id="问题缘起"><a href="#问题缘起" class="headerlink" title="问题缘起"></a>问题缘起</h2><blockquote>
<p>在<code>vue</code>中使用<code>vue-awesome-swiper</code>的时候，踩坑无数，快爬不起来要哭了</p>
<p>算是小问题却搞一下午，心态都崩了呀！</p>
</blockquote>
<a id="more"></a>

<h2 id="一、关于Swiper"><a href="#一、关于Swiper" class="headerlink" title="一、关于Swiper"></a>一、关于Swiper</h2><blockquote>
<p><a href="https://www.swiper.com.cn/">Swiper官网</a></p>
</blockquote>
<blockquote>
<p><strong>Swiper常用于移动端网站的内容触摸滑动</strong></p>
<p><strong>Swiper</strong>是纯javascript打造的滑动特效插件，面向手机、平板电脑等移动终端。</p>
<p><strong>Swiper</strong>能实现触屏焦点图、触屏Tab切换、触屏多图切换等常用效果。</p>
<p><strong>Swiper</strong>开源、免费、稳定、使用简单、功能强大，是架构移动终端网站的重要选择！</p>
</blockquote>
<h2 id="二、Vue-awesome-swiper"><a href="#二、Vue-awesome-swiper" class="headerlink" title="二、Vue-awesome-swiper"></a>二、Vue-awesome-swiper</h2><blockquote>
<p><a href="https://github.com/surmon-china/vue-awesome-swiper">github传送门/走好</a></p>
</blockquote>
<h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install </span><span class="keyword">swiper </span>vue-awesome-<span class="keyword">swiper </span>--save</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">yarn <span class="keyword">add </span><span class="keyword">swiper </span>vue-awesome-<span class="keyword">swiper</span></span><br></pre></td></tr></table></figure>

<h3 id="Global-Registration"><a href="#Global-Registration" class="headerlink" title="Global Registration"></a>Global Registration</h3><figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueAwesomeSwiper <span class="keyword">from</span> <span class="string">&#x27;vue-awesome-swiper&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// import style</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/css/swiper.css&#x27;</span></span><br><span class="line"><span class="comment">// If you use Swiper 6.0.0 or higher</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/swiper-bundle.css&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueAwesomeSwiper, <span class="comment">/* &#123; default options with global component &#125; */</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Local-Registration"><a href="#Local-Registration" class="headerlink" title="Local Registration"></a>Local Registration</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Swiper, SwiperSlide, directive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-awesome-swiper&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/css/swiper.css&#x27;</span></span><br><span class="line"><span class="comment">// If you use Swiper 6.0.0 or higher</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/swiper-bundle.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Swiper,</span><br><span class="line">    SwiperSlide</span><br><span class="line">  &#125;,</span><br><span class="line">  directives: &#123;</span><br><span class="line">    swiper: directive</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;path/to/swiper.css&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;path/to/swiper.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;path/to/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;path/to/dist/vue-awesome-swiper.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">  Vue.use(<span class="built_in">window</span>.VueAwesomeSwiper)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Difference-with-usage"><a href="#Difference-with-usage" class="headerlink" title="Difference with usage"></a>Difference with usage</h3><p><strong>Directive and the only difference in the use of the Component:</strong></p>
<ul>
<li><code>component</code> find Swiper instance by <a href="https://vuejs.org/v2/guide/components-edge-cases.html#Accessing-Child-Component-Instances-amp-Child-Elements"><code>ref attribute</code></a>.</li>
<li><code>directive</code> find Swiper instance by <a href="https://vuejs.org/v2/guide/custom-directive.html#Dynamic-Directive-Arguments"><code>directive arg</code></a>.</li>
</ul>
<p>Other configurations, events are the same.</p>
<p>The effect of the two ways and the difference in the applicable environment <a href="https://github.com/surmon-china/surmon-china.github.io/blob/source/projects/vue-awesome-swiper/nuxt/">is here</a>.</p>
<h3 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">ref</span>=<span class="string">&quot;mySwiper&quot;</span> <span class="attr">:options</span>=<span class="string">&quot;swiperOptions&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 1<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 2<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 3<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 4<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 5<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">&#x27;carrousel&#x27;</span>,</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        swiperOptions: &#123;</span><br><span class="line">          pagination: &#123;</span><br><span class="line"><span class="javascript">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span></span></span><br><span class="line">          &#125;,</span><br><span class="line"><span class="javascript">          <span class="comment">// Some Swiper option/callback...</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      swiper() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">this</span>.$refs.mySwiper.$swiper</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;Current Swiper instance object&#x27;</span>, <span class="built_in">this</span>.swiper)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.swiper.slideTo(<span class="number">3</span>, <span class="number">1000</span>, <span class="literal">false</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Directive"><a href="#Directive" class="headerlink" title="Directive"></a>Directive</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-swiper:mySwiper</span>=<span class="string">&quot;swiperOption&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;banner&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;banner in banners&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data () &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        banners: [ <span class="string">&#x27;/1.jpg&#x27;</span>, <span class="string">&#x27;/2.jpg&#x27;</span>, <span class="string">&#x27;/3.jpg&#x27;</span> ],</span></span><br><span class="line">        swiperOption: &#123;</span><br><span class="line">          pagination: &#123;</span><br><span class="line"><span class="javascript">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span></span></span><br><span class="line">          &#125;,</span><br><span class="line"><span class="javascript">          <span class="comment">// ...</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;Current Swiper instance object&#x27;</span>, <span class="built_in">this</span>.mySwiper)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.mySwiper.slideTo(<span class="number">3</span>, <span class="number">1000</span>, <span class="literal">false</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Swiper-component-API"><a href="#Swiper-component-API" class="headerlink" title="Swiper component API"></a>Swiper component API</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&lt;!-- All events/props support camelCase or kebab-<span class="keyword">case</span>. --&gt;</span><br><span class="line">&lt;swiper</span><br><span class="line">  :options=<span class="string">&quot;swiperOptionsObject&quot;</span></span><br><span class="line">  :auto-update=<span class="string">&quot;true&quot;</span></span><br><span class="line">  :auto-destroy=<span class="string">&quot;true&quot;</span></span><br><span class="line">  :<span class="keyword">delete</span>-instance-on-destroy=<span class="string">&quot;true&quot;</span></span><br><span class="line">  :cleanup-styles-on-destroy=<span class="string">&quot;true&quot;</span></span><br><span class="line">  <span class="meta">@ready</span>=<span class="string">&quot;handleSwiperReadied&quot;</span></span><br><span class="line">  <span class="meta">@click</span>-slide=<span class="string">&quot;handleClickSlide&quot;</span></span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue-awesome-swiper converts all Swiper events into component/directive events, e.g.: --&gt;</span><br><span class="line">&lt;swiper</span><br><span class="line">  <span class="meta">@slide</span>-change-transition-start=<span class="string">&quot;onSwiperSlideChangeTransitionStart&quot;</span></span><br><span class="line">  <span class="meta">@slideChangeTransitionStart</span>=<span class="string">&quot;onSwiperSlideChangeTransitionStart&quot;</span></span><br><span class="line">  <span class="meta">@slideChangeTransitionEnd</span>=<span class="string">&quot;...&quot;</span></span><br><span class="line">  <span class="meta">@transitionStart</span>=<span class="string">&quot;...&quot;</span></span><br><span class="line">  ...</span><br><span class="line">/&gt;</span><br><span class="line"><span class="keyword">interface</span> IProps &#123;</span><br><span class="line">  <span class="comment">// Auto update swiper when vue component `updated`</span></span><br><span class="line">  autoUpdate?: <span class="built_in">boolean</span> <span class="comment">// default: true</span></span><br><span class="line">  <span class="comment">// Auto destroy swiper when vue component &#x27;beforeDestroy&#x27;</span></span><br><span class="line">  autoDestroy?: <span class="built_in">boolean</span> <span class="comment">// default: true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// swiper.destroy&#x27;s params</span></span><br><span class="line">  <span class="comment">// swiper.destroy(deleteInstanceOnDestroy, cleanupStylesOnDestroy)</span></span><br><span class="line">  deleteInstanceOnDestroy?: <span class="built_in">boolean</span> <span class="comment">// default: true</span></span><br><span class="line">  cleanupStylesOnDestroy?: <span class="built_in">boolean</span> <span class="comment">// default: true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// `@ready` event will emit when the Swiper instance mounted</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleSwiperReadied</span>(<span class="params">swiper: Swiper</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Swiper was munted!&#x27;</span>, swiper)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// `@click-slide` event has special treatment for Swiper&#x27;s loop mode, which is still available in loop mode</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleClickSlide</span>(<span class="params">index: <span class="built_in">number</span>, reallyIndex: <span class="built_in">number</span> | <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Click slide!&#x27;</span>, index, reallyIndex)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Swiper-directive-API"><a href="#Swiper-directive-API" class="headerlink" title="Swiper directive API"></a>Swiper directive API</h3><p>Based on the exact same as the component API.</p>
<p>In the <code>directive</code> mode, the Swiper instance will be mounted in the parent’s component context use the default name<code>$swiper</code>. In order to implement multiple swipers in a context, the <code>directive</code> has an additional name called <code>instanceName</code> API, through this API, you can easily control the name of each swiper mount context.</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;div v-swiper=<span class="string">&quot;swiperOptionsObject&quot;</span> /&gt;</span><br><span class="line">&lt;div v-swiper:secondSwiper=<span class="string">&quot;swiperOptionsObject&quot;</span> /&gt;</span><br><span class="line">&lt;div v-swiper:[dynamicSwiperName]=<span class="string">&quot;swiperOptionsObject&quot;</span> /&gt;</span><br><span class="line">&lt;div v-swiper=<span class="string">&quot;swiperOptionsObject&quot;</span> instance-name=<span class="string">&quot;fourthSwiper&quot;</span> /&gt;</span><br><span class="line">export dafault &#123;</span><br><span class="line">  <span class="keyword">data</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      dynamicSwiperName: <span class="string">&#x27;thirdSwiper&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(<span class="string">&#x27;Swiper instances:&#x27;</span>, <span class="keyword">this</span>.$swiper, <span class="keyword">this</span>.secondSwiper, <span class="keyword">this</span>.thirdSwiper, <span class="keyword">this</span>.fourthSwiper)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Swiper-API"><a href="#Swiper-API" class="headerlink" title="Swiper API"></a>Swiper API</h3><p>Swiper’s API and configuration can be used.</p>
<ul>
<li><a href="https://swiperjs.com/api/#events">EN Swiper events</a></li>
<li><a href="https://swiperjs.com/api/">EN Swiper documentation</a></li>
<li><a href="https://www.swiper.com.cn/api/index.html">ZH Swiper documentation</a></li>
</ul>
<h3 id="三、巨坑盘点（让我想报复SOCIAL）"><a href="#三、巨坑盘点（让我想报复SOCIAL）" class="headerlink" title="三、巨坑盘点（让我想报复SOCIAL）"></a>三、巨坑盘点（让我想报复<code>SOCIAL</code>）</h3><h4 id="1-Swiper滚动失效"><a href="#1-Swiper滚动失效" class="headerlink" title="1. Swiper滚动失效"></a>1. Swiper滚动失效</h4><p>对于这个问题，我的理解是：<code>swiper</code>使用版本为 <code>swiper@6.2.0</code>，应该是<code>vue-awesome-swiper</code>和高版本<code>swiper</code>兼容性很差很差</p>
<p><strong>解决方案：</strong></p>
<p>① 卸载已安装的<code>swiper</code>：<code>npm uninstall swiper  --save</code></p>
<p>② 安装低版本<code>swiper</code>，版本号可以去<a href="https://www.npmjs.com/package/swiper/v/6.2.0">npmjs</a>搜</p>
<p>③注意到<code>swiper6</code>的样式文件不同，需要按需引入，引入方式同上面的官方引入</p>
<h4 id="2-vue-awesome-swiper使用自动轮播和循环轮播不生效（loop和autoplay）"><a href="#2-vue-awesome-swiper使用自动轮播和循环轮播不生效（loop和autoplay）" class="headerlink" title="2. vue-awesome-swiper使用自动轮播和循环轮播不生效（loop和autoplay）"></a>2. vue-awesome-swiper使用自动轮播和循环轮播不生效（loop和autoplay）</h4><p><strong>方法一：</strong></p>
<p>在项目中使用vue-awesome-swiper如果loop和autoplay总是出现各种问题,第一次加载的时候,轮播是不动的,需要重新加载一下swiper才会轮播</p>
<p>解决方案:</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">//轮播设置</span></span><br><span class="line"><span class="attr">swiperOption:</span> &#123;</span><br><span class="line">　　<span class="attr">direction:</span> <span class="string">&#x27;vertical&#x27;</span>,</span><br><span class="line">　　<span class="attr">observer:</span><span class="literal">true</span>,<span class="comment">//修改swiper自己或子元素时，自动初始化swiper </span></span><br><span class="line">　　<span class="attr">observeParents:</span><span class="literal">true</span>,<span class="comment">//修改swiper的父元素时，自动初始化swiper </span></span><br><span class="line">　　<span class="attr">loop:</span><span class="literal">true</span>,</span><br><span class="line">　　<span class="attr">autoplay:</span> &#123;</span><br><span class="line">　　　　<span class="attr">delay:</span> <span class="number">2000</span>,</span><br><span class="line">　　<span class="attr">disableOnInteraction:</span> <span class="literal">false</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需要添加上两个属性,这样达到一个初始化swiper的目的</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="attr">observer:</span><span class="literal">true</span>,<span class="comment">//修改swiper自己或子元素时，自动初始化swiper </span></span><br><span class="line"><span class="attr">observeParents:</span><span class="literal">true</span>,<span class="comment">//修改swiper的父元素时，自动初始化swiper </span></span><br></pre></td></tr></table></figure>

<p><strong>方法二</strong>：</p>
<p>如果说轮播数据来自于异步请求，再循环展示，有可能出现轮播失效的问题。</p>
<p><strong>原因是</strong>循环还没有完的时候swiper组件运行冲突出错导致的，在swiper组件上对数据价格v-if就可以解决。代码如下： </p>
<p><img data-src="bg202009055.png"></p>
<p><img data-src="bg202009056.png"></p>
<h4 id="3-swiper手动滑动之后自动轮播失效的解决方法"><a href="#3-swiper手动滑动之后自动轮播失效的解决方法" class="headerlink" title="3. swiper手动滑动之后自动轮播失效的解决方法"></a>3. swiper手动滑动之后自动轮播失效的解决方法</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="javascript"><span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>,&#123;</span></span><br><span class="line">  autoplay: &#123;</span><br><span class="line"><span class="javascript">    disableOnInteraction: <span class="literal">false</span>,</span></span><br><span class="line">    delay:2000,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>用户操作swiper之后，是否禁止autoplay。默认为true：停止。</p>
<p>如果设置为false，用户操作swiper之后自动切换不会停止，每次都会重新启动autoplay。</p>
<p>操作包括触碰，拖动，点击pagination等。</p>
<p><strong>若不生效</strong>，问题应该依然和<code>swiper版本</code>有关。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>框架与工具</tag>
        <tag>Vue</tag>
        <tag>Vue Problems</tag>
      </tags>
  </entry>
  <entry>
    <title>重拾Vue相应式原理</title>
    <url>/2020/08/25/Retrieve-the-Vue-response-principle/</url>
    <content><![CDATA[<h2 id="问题缘起"><a href="#问题缘起" class="headerlink" title="问题缘起"></a>问题缘起</h2><p>今天接手了一个Bug，大概描述一下：</p>
<blockquote>
<p>存在一个列表和一个分页器，用的是Element-UI。</p>
<p>使用中，每次修改每页显示数据总数、换页等操作都会使用ajax异步请求新的数据。</p>
<p>问题：每次操作后，列表的渲染数据均是上一次操作的正确预期效果</p>
</blockquote>
<a id="more"></a>

<p>主要代码如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-int-pager</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">size-change</span>=<span class="string">&quot;onPagerSizeChange&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;onPagerCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pager.currentPage&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;pager.chose&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pager.size&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;pager.total&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- /分页器 --&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- 列表渲染数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:border</span>=<span class="string">&quot;true&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:stripe</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">onPagerSizeChange(size) &#123;</span><br><span class="line">   <span class="keyword">this</span>.pager.size = size;</span><br><span class="line">   <span class="keyword">this</span>.pager.currentPage = <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">this</span>._getGoodsList();</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="comment">// 切换页面</span></span><br><span class="line">onPagerCurrentChange(currentPage) &#123;</span><br><span class="line">   <span class="keyword">this</span>.pager.currentPage = currentPage;</span><br><span class="line">   <span class="keyword">this</span>._getGoodsList();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>其中，<code>this._getGoodsList()</code>为获取相应数据的异步请求，经验证后台数据均获取正确</p>
<p>所以，结论只有一个，就是异步获取数据之后，Vue 未更新 <code>Virtual DOM</code> </p>
<p>最后，发现需要渲染的数据没有加入到 <code>vm.data()</code>中，修改后问题解决。</p>
<blockquote>
<h5 id="也因此，在这里在此回顾Vue响应式原理"><a href="#也因此，在这里在此回顾Vue响应式原理" class="headerlink" title="也因此，在这里在此回顾Vue响应式原理"></a>也因此，在这里在此回顾<code>Vue</code>响应式原理</h5></blockquote>
<h2 id="深入响应式原理"><a href="#深入响应式原理" class="headerlink" title="深入响应式原理"></a>深入响应式原理</h2><blockquote>
<p><a href="https://cn.vuejs.org/v2/guide/reactivity.html">官方文档</a></p>
</blockquote>
<p>Vue 最独特的特性之一，是其非侵入性的响应式系统。数据模型仅仅是普通的 JavaScript 对象。而当你修改它们时，<strong>视图会进行更新</strong>。</p>
<h3 id="如何追踪变化"><a href="#如何追踪变化" class="headerlink" title="如何追踪变化"></a>如何追踪变化</h3><p>当你把一个普通的 JavaScript 对象传入 Vue 实例作为 <code>data</code> 选项，Vue 将遍历此对象所有的 property，并使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty</code></a> 把这些 property 全部转为 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Working_with_Objects#%E5%AE%9A%E4%B9%89_getters_%E4%B8%8E_setters">getter/setter</a>。<code>Object.defineProperty</code> 是 ES5 中一个无法 shim 的特性，这也就是 Vue 不支持 IE8 以及更低版本浏览器的原因。</p>
<p>这些 getter/setter 对用户来说是不可见的，但是在内部它们让 Vue 能够追踪依赖，在 property 被访问和修改时通知变更。这里需要注意的是不同浏览器在控制台打印数据对象时对 getter/setter 的格式化并不同，所以建议安装 <a href="https://github.com/vuejs/vue-devtools">vue-devtools</a> 来获取对检查数据更加友好的用户界面。</p>
<p>每个组件实例都对应一个 <strong>watcher</strong> 实例，它会在组件渲染的过程中把“接触”过的数据 property 记录为依赖。之后当依赖项的 setter 触发时，会通知 watcher，从而使它关联的组件重新渲染。</p>
<p><img data-src="rendering-way.png"></p>
<h3 id="检测变化的注意事项"><a href="#检测变化的注意事项" class="headerlink" title="检测变化的注意事项"></a>检测变化的注意事项</h3><p>由于 JavaScript 的限制，Vue <strong>不能检测</strong>数组和对象的变化。尽管如此我们还是有一些办法来回避这些限制并保证它们的响应性。</p>
<h4 id="对于对象"><a href="#对于对象" class="headerlink" title="对于对象"></a>对于对象</h4><p>Vue 无法检测 property 的添加或移除。由于 Vue 会在初始化实例时对 property 执行 getter/setter 转化，所以 property 必须在 <code>data</code> 对象上存在才能让 Vue 将它转换为响应式的。例如：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">var <span class="keyword">vm</span> = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  dat<span class="variable">a:</span>&#123;</span><br><span class="line">    <span class="variable">a:1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// `<span class="keyword">vm</span>.<span class="keyword">a</span>` 是响应式的</span><br><span class="line"></span><br><span class="line"><span class="keyword">vm</span>.<span class="keyword">b</span> = <span class="number">2</span></span><br><span class="line">// `<span class="keyword">vm</span>.<span class="keyword">b</span>` 是非响应式的</span><br></pre></td></tr></table></figure>

<p>对于已经创建的实例，Vue 不允许动态添加根级别的响应式 property。但是，可以使用 <code>Vue.set(object, propertyName, value)</code> 方法向嵌套对象添加响应式 property。例如，对于：</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">Vue.<span class="builtin-name">set</span>(vm.someObject, <span class="string">&#x27;b&#x27;</span>, 2)</span><br></pre></td></tr></table></figure>

<p>您还可以使用 <code>vm.$set</code> 实例方法，这也是全局 <code>Vue.set</code> 方法的别名：</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.someObject,<span class="string">&#x27;b&#x27;</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>有时你可能需要为已有对象赋值多个新 property，比如使用 <code>Object.assign()</code> 或 <code>_.extend()</code>。但是，这样添加到对象上的新 property 不会触发更新。在这种情况下，你应该用原对象与要混合进去的对象的 property 一起创建一个新的对象。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">代替</span> <span class="string">`Object.assign(this.someObject,</span> &#123; <span class="attr">a:</span> <span class="number">1</span>, <span class="attr">b:</span> <span class="number">2</span> &#125;<span class="string">)`</span></span><br><span class="line"><span class="string">this.someObject</span> <span class="string">=</span> <span class="string">Object.assign(&#123;&#125;,</span> <span class="string">this.someObject,</span> &#123; <span class="attr">a:</span> <span class="number">1</span>, <span class="attr">b:</span> <span class="number">2</span> &#125;<span class="string">)</span></span><br></pre></td></tr></table></figure>

<h4 id="对于数组"><a href="#对于数组" class="headerlink" title="对于数组"></a>对于数组</h4><p>Vue 不能检测以下数组的变动：</p>
<ol>
<li>当你利用索引直接设置一个数组项时，例如：<code>vm.items[indexOfItem] = newValue</code></li>
<li>当你修改数组的长度时，例如：<code>vm.items.length = newLength</code></li>
</ol>
<p>举个例子：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">var <span class="keyword">vm</span> = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  dat<span class="variable">a:</span> &#123;</span><br><span class="line">    item<span class="variable">s:</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">vm</span>.<span class="built_in">items</span>[<span class="number">1</span>] = <span class="string">&#x27;x&#x27;</span> // 不是响应性的</span><br><span class="line"><span class="keyword">vm</span>.<span class="built_in">items</span>.length = <span class="number">2</span> // 不是响应性的</span><br></pre></td></tr></table></figure>

<p>为了解决第一类问题，以下两种方式都可以实现和 <code>vm.items[indexOfItem] = newValue</code> 相同的效果，同时也将在响应式系统内触发状态更新：</p>
<figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Vue.set</span></span><br><span class="line">Vue.<span class="keyword">set</span>(vm.items, indexOfItem, <span class="keyword">new</span><span class="type">Value</span>)</span><br><span class="line"><span class="comment">// Array.prototype.splice</span></span><br><span class="line">vm.items.splice(indexOfItem, <span class="number">1</span>, <span class="keyword">new</span><span class="type">Value</span>)</span><br></pre></td></tr></table></figure>

<p>你也可以使用 <a href="https://cn.vuejs.org/v2/api/#vm-set"><code>vm.$set</code></a> 实例方法，该方法是全局方法 <code>Vue.set</code> 的一个别名：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">vm.<span class="constructor">$set(<span class="params">vm</span>.<span class="params">items</span>, <span class="params">indexOfItem</span>, <span class="params">newValue</span>)</span></span><br></pre></td></tr></table></figure>

<p>为了解决第二类问题，你可以使用 <code>splice</code>：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">vm</span><span class="selector-class">.items</span><span class="selector-class">.splice</span>(<span class="selector-tag">newLength</span>)</span><br></pre></td></tr></table></figure>

<h3 id="声明响应式-property"><a href="#声明响应式-property" class="headerlink" title="声明响应式 property"></a>声明响应式 property</h3><p>由于 Vue 不允许动态添加根级响应式 property，所以你必须在初始化实例前声明所有根级响应式 property，哪怕只是一个空值：</p>
<figure class="highlight lasso"><table><tr><td class="code"><pre><span class="line"><span class="built_in">var</span> vm = <span class="literal">new</span> Vue(&#123;</span><br><span class="line">  <span class="built_in">data</span>: &#123;</span><br><span class="line">    <span class="comment">// 声明 message 为一个空值字符串</span></span><br><span class="line">    message: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">&#x27;&lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 之后设置 `message`</span></span><br><span class="line">vm.message = <span class="string">&#x27;Hello!&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果你未在 <code>data</code> 选项中声明 <code>message</code>，Vue 将警告你渲染函数正在试图访问不存在的 property。</p>
<p>这样的限制在背后是有其技术原因的，它消除了在依赖项跟踪系统中的一类边界情况，也使 Vue 实例能更好地配合类型检查系统工作。但与此同时在代码可维护性方面也有一点重要的考虑：<code>data</code>对象就像组件状态的结构 (schema)。提前声明所有的响应式 property，可以让组件代码在未来修改或给其他开发人员阅读时更易于理解。</p>
<h3 id="异步更新队列"><a href="#异步更新队列" class="headerlink" title="异步更新队列"></a>异步更新队列</h3><p>可能你还没有注意到，Vue 在更新 DOM 时是<strong>异步</strong>执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。Vue 在内部对异步队列尝试使用原生的 <code>Promise.then</code>、<code>MutationObserver</code> 和 <code>setImmediate</code>，如果执行环境不支持，则会采用 <code>setTimeout(fn, 0)</code> 代替。</p>
<p>例如，当你设置 <code>vm.someData = &#39;new value&#39;</code>，该组件不会立即重新渲染。当刷新队列时，组件会在下一个事件循环“tick”中更新。多数情况我们不需要关心这个过程，但是如果你想基于更新后的 DOM 状态来做点什么，这就可能会有些棘手。虽然 Vue.js 通常鼓励开发人员使用“数据驱动”的方式思考，避免直接接触 DOM，但是有时我们必须要这么做。为了在数据变化之后等待 Vue 完成更新 DOM，可以在数据变化之后立即使用 <code>Vue.nextTick(callback)</code>。这样回调函数将在 DOM 更新完成后被调用。例如：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;example&quot;</span>&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;</span><br><span class="line">var <span class="keyword">vm</span> = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="keyword">e</span><span class="variable">l:</span> <span class="string">&#x27;#example&#x27;</span>,</span><br><span class="line">  dat<span class="variable">a:</span> &#123;</span><br><span class="line">    message: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">vm</span>.message = <span class="string">&#x27;new message&#x27;</span> // 更改数据</span><br><span class="line"><span class="keyword">vm</span>.$<span class="keyword">el</span>.textContent === <span class="string">&#x27;new message&#x27;</span> // false</span><br><span class="line">Vue.nextTick(<span class="function"><span class="keyword">function</span> <span class="params">()</span> &#123;</span></span><br><span class="line">  <span class="keyword">vm</span>.$<span class="keyword">el</span>.textContent === <span class="string">&#x27;new message&#x27;</span> // true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在组件内使用 <code>vm.$nextTick()</code> 实例方法特别方便，因为它不需要全局 <code>Vue</code>，并且回调函数中的 <code>this</code> 将自动绑定到当前的 Vue 实例上：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;example&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">&#x27;&lt;span&gt;&#123;&#123; message &#125;&#125;&lt;/span&gt;&#x27;</span>,</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      message: <span class="string">&#x27;未更新&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    updateMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.message = <span class="string">&#x27;已更新&#x27;</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el.textContent) <span class="comment">// =&gt; &#x27;未更新&#x27;</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el.textContent) <span class="comment">// =&gt; &#x27;已更新&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>因为 <code>$nextTick()</code> 返回一个 <code>Promise</code> 对象，所以你可以使用新的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function">ES2017 async/await</a> 语法完成相同的事情：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">methods</span>: &#123;</span><br><span class="line">  <span class="attribute">updateMessage</span>: async function () &#123;</span><br><span class="line">    this.message = <span class="string">&#x27;已更新&#x27;</span></span><br><span class="line">    console.<span class="built_in">log</span>(this.$el.textContent) // =&gt; <span class="string">&#x27;未更新&#x27;</span></span><br><span class="line">    await this.$<span class="built_in">nextTick</span>()</span><br><span class="line">    console.<span class="built_in">log</span>(this.$el.textContent) // =&gt; <span class="string">&#x27;已更新&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Problems-To-Collect"><a href="#Problems-To-Collect" class="headerlink" title="Problems To Collect"></a>Problems To Collect</h2><h3 id="1-Vue异步获取数据后初始化数据不能及时更新"><a href="#1-Vue异步获取数据后初始化数据不能及时更新" class="headerlink" title="1. Vue异步获取数据后初始化数据不能及时更新"></a>1. Vue异步获取数据后初始化数据不能及时更新</h3><ul>
<li>钩子函数尽量使用mounted来完成初始化函数，根据vue的生命周期尽量不要用mounted之前的</li>
<li>对于可能要改变的值，最好直接写到data{}中，比如这样写：</li>
<li>如果还不能实时更新，通过vue的官方$set方法可以实现手动设置</li>
<li>一些特殊set方法，比如其他js框架的set方法，会和vue的方法冲突造成数据不能同步</li>
</ul>
<h3 id="2-Vue-Watch的两个Demo参考"><a href="#2-Vue-Watch的两个Demo参考" class="headerlink" title="2. Vue Watch的两个Demo参考"></a>2. Vue Watch的两个Demo参考</h3><blockquote>
<p>参考<a href="https://www.cnblogs.com/jin-zhe/p/9319648.html">此处</a><br><strong>Demo1</strong></p>
</blockquote>
<figure class="highlight handlebars"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-variable">&#123;&#123;<span class="name">value</span>&#125;&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  export default &#123;</span></span><br><span class="line"><span class="xml">    name: &#x27;index&#x27;,</span></span><br><span class="line"><span class="xml">    data() &#123;</span></span><br><span class="line"><span class="xml">      return &#123;</span></span><br><span class="line"><span class="xml">        demo: &#x27;&#x27;,</span></span><br><span class="line"><span class="xml">        value: &#x27;&#x27;</span></span><br><span class="line"><span class="xml">      &#125;;</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    watch: &#123;</span></span><br><span class="line"><span class="xml">      demo(val) &#123;</span></span><br><span class="line"><span class="xml">        this.value = this.demo;</span></span><br><span class="line"><span class="xml">      &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>Demo2</strong></p>
<p>下面这个例子中，如果<code>watch</code>监测的是一个对象的话，直接使用<code>watch</code>是不行的，此时我们可以借助于<code>computed</code>计算属性来完成。</p>
<figure class="highlight handlebars"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;demo.name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-variable">&#123;&#123;<span class="name">value</span>&#125;&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  export default &#123;</span></span><br><span class="line"><span class="xml">    name: &#x27;index&#x27;,</span></span><br><span class="line"><span class="xml">    data() &#123;</span></span><br><span class="line"><span class="xml">      return &#123;</span></span><br><span class="line"><span class="xml">        demo: &#123;</span></span><br><span class="line"><span class="xml">          name: &#x27;&#x27;</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        value: &#x27;&#x27;</span></span><br><span class="line"><span class="xml">      &#125;;</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    computed: &#123;</span></span><br><span class="line"><span class="xml">      newName() &#123;</span></span><br><span class="line"><span class="xml">        return this.demo.name;</span></span><br><span class="line"><span class="xml">      &#125;</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    watch: &#123;</span></span><br><span class="line"><span class="xml">      newName(val) &#123;</span></span><br><span class="line"><span class="xml">        this.value = val;</span></span><br><span class="line"><span class="xml">      &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>Demo3</strong></p>
<p>数组的变化，不需要深度watch</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;childrens.name&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue( &#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      childrens: &#123;</span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;小强&#x27;</span>,</span></span><br><span class="line">        age: 20,</span><br><span class="line"><span class="javascript">        sex: <span class="string">&#x27;男&#x27;</span></span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      tdArray:[<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>],</span></span><br><span class="line"><span class="javascript">      lastName:<span class="string">&quot;张三&quot;</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    watch:&#123;</span><br><span class="line">      childrens:&#123;</span><br><span class="line"><span class="javascript">        handler:<span class="function"><span class="keyword">function</span>(<span class="params">val,oldval</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(val.name)</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        deep:<span class="literal">true</span><span class="comment">//对象内部的属性监听，也叫深度监听</span></span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="string">&#x27;childrens.name&#x27;</span>:<span class="function"><span class="keyword">function</span>(<span class="params">val,oldval</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(val+<span class="string">&quot;aaa&quot;</span>)</span></span><br><span class="line"><span class="javascript">      &#125;,<span class="comment">//键路径必须加上引号</span></span></span><br><span class="line"><span class="javascript">      lastName:<span class="function"><span class="keyword">function</span>(<span class="params">val,oldval</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.lastName)</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">    &#125;,<span class="comment">//以V-model绑定数据时使用的数据变化监测</span></span></span><br><span class="line">  &#125; );</span><br><span class="line"><span class="javascript">  vm.$watch(<span class="string">&quot;lastName&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">val,oldval</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(val)</span></span><br><span class="line"><span class="javascript">  &#125;)<span class="comment">//主动调用$watch方法来进行数据监测</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>框架与工具</tag>
        <tag>Vue</tag>
        <tag>Vue Problems</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 动画</title>
    <url>/2020/08/31/css-animation/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>下面汇总并总结了有关与CSS动画的知识点，再次熟悉一遍！</p>
<p><code>CSS Transform</code>/<code>CSS Transition</code>/<code>CSS Animation</code>/<code>CSS Gradient</code></p>
</blockquote>
<a id="more"></a>

<h2 id="一、CSS-Transform"><a href="#一、CSS-Transform" class="headerlink" title="一、CSS Transform"></a>一、CSS Transform</h2><p><code>Transform</code>字面上就是<code>变形，改变</code>的意思。在CSS3中<code>transform</code>主要包括以下几种：<strong>旋转rotate</strong>、<strong>扭曲skew</strong>、<strong>缩放scale</strong>和<strong>移动translate</strong>以及<strong>矩阵变形matrix</strong>。</p>
<p><strong>语法：</strong></p>
<p><code>transform ： none | [ rotate | scale | skew | translate |matrix]</code></p>
<p><code>none</code>:表示不进么变换；后者表示一个或多个变换函数，**<u>以空格分开</u>**</p>
<h3 id="1-旋转rotate"><a href="#1-旋转rotate" class="headerlink" title="1. 旋转rotate"></a>1. 旋转<code>rotate</code></h3><p><strong>rotate()</strong> ：通过指定的角度参数对原元素指定一个2D 旋转，需先有<code>transform-origin</code>属性的定义。<code>transform-origin</code>定义的是旋转的基点，其中<code>angle</code>是指旋转角度，如果设置的值为正数表示顺时针旋转，如果设置的值为负数，则表示逆时针旋转。</p>
<p>如：<code>transform:rotate(30deg)</code></p>
<p><img data-src="rotate.png"></p>
<h3 id="2-移动translate"><a href="#2-移动translate" class="headerlink" title="2. 移动translate"></a>2. 移动<code>translate</code></h3><p>移动<code>translate</code>我们分为三种情况：</p>
<ul>
<li><code>translate(x,y)</code>水平方向和垂直方向同时移动（也就是X轴和Y轴同时移动）</li>
<li><code>translateX(x)</code>仅水平方向移动（X轴移动）</li>
<li><code>translateY(Y)</code>仅垂直方向移动（Y轴移动）</li>
</ul>
<blockquote>
<p>也可以根据<code>transform-origin</code>改变基点位置</p>
</blockquote>
<p><img data-src="translate.png"></p>
<h3 id="3-缩放scale"><a href="#3-缩放scale" class="headerlink" title="3. 缩放scale"></a>3. 缩放<code>scale</code></h3><p>缩放<code>scale</code>具有三种情况：</p>
<ul>
<li><code>scale(x,y)</code>使元素水平方向和垂直方向同时缩放（也就是X轴和Y轴同时缩放）</li>
<li><code>scaleX(x)</code>元素仅水平方向缩放（X轴缩放）</li>
<li><code>scaleY(y)</code>元素仅垂直方向缩放（Y轴缩放）</li>
</ul>
<blockquote>
<p>但它们具有相同的缩放中心点和基数，其中心点就是元素的中心位置，<code>缩放基数为1</code>，如果<code>其值大于1</code>元素就放大，反之其值小于1，元素缩小。</p>
</blockquote>
<p><strong>scale([, ])：</strong>提供执行[sx,sy]缩放矢量的两个参数指定一个<code>2D缩放</code>。如果第二个参数未提供，则取与第一个参数一样的值。<code>scale(X,Y)</code>是用于对元素进行缩放，可以通过<code>transform-origin</code>对元素的基点进行设置，同样基点在元素中心位置；基中X表示水平方向缩放的倍数，Y表示垂直方向的缩放倍数，而Y是一个可选参数，如果没有设置Y值，则表示X，Y两个方向的缩放倍数是一样的。并以X为准。如：</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>:scale(<span class="number">2</span>,<span class="number">1</span>.<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="scale.png"></p>
<h3 id="4-扭曲skew"><a href="#4-扭曲skew" class="headerlink" title="4. 扭曲skew"></a>4. 扭曲skew</h3><p>扭曲<code>skew</code>具有三种情况：</p>
<ul>
<li><code>skew(x,y)</code>使元素在水平和垂直方向同时扭曲（X轴和Y轴同时按一定的角度值进行扭曲变形）</li>
<li><code>skewX(x)</code>仅使元素在水平方向扭曲变形（X轴扭曲变形）</li>
<li><code>skewY(y)</code>仅使元素在垂直方向扭曲变形（Y轴扭曲变形）</li>
</ul>
<p><strong>skew( [, ])</strong> ：X轴Y轴上的斜切变换。第一个参数对应X轴，第二个参数对应Y轴。如果第二个参数未提供，则值为0，也就是Y轴方向上无斜切。</p>
<p>skew是用来对元素进行扭曲变行，第一个参数是水平方向扭曲角度，第二个参数是垂直方向扭曲角度。其中第二个参数是可选参数，如果没有设置第二个参数，那么Y轴为0deg。同样是以元素中心为基点，我们也可以通过<code>transform-origin</code>来改变元素的基点位置。如：</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">transform:skew(<span class="number">30</span>deg,<span class="number">10</span>deg):</span><br></pre></td></tr></table></figure>

<p><img data-src="skew.png"></p>
<p><strong>skewX()</strong> ： 按给定的角度沿X轴指定一个斜切变换。如：</p>
<figure class="highlight isbl"><table><tr><td class="code"><pre><span class="line"><span class="variable">transform</span>:<span class="function"><span class="title">skewX</span>(<span class="number">30</span><span class="variable">deg</span>)</span></span><br></pre></td></tr></table></figure>

<p><img data-src="skewX.png"></p>
<h3 id="5-矩阵matrix"><a href="#5-矩阵matrix" class="headerlink" title="5. 矩阵matrix"></a>5. 矩阵<code>matrix</code></h3><p><code>matrix(, , , , , )</code> </p>
<p> 以一个含六值的(a,b,c,d,e,f)<code>变换矩阵</code>的形式指定一个<code>2D变换</code>，相当于直接应用一个<code>[a b c d e f]变换矩阵</code>。就是基于水平方向（X轴）和垂直方向（Y轴）重新定位元素,此属性值使用涉及到数学中的矩阵。</p>
<h3 id="6-改变元素基点transform-origin"><a href="#6-改变元素基点transform-origin" class="headerlink" title="6. 改变元素基点transform-origin"></a>6. 改变元素基点<code>transform-origin</code></h3><p><strong>其主要作用</strong>就是让我们在进行<code>transform</code>动作之前可以改变元素的基点位置。</p>
<p>因为我们元素默认基点就是其中心位置，换句话说我们没有使用transform-origin改变元素基点位置的情况下，transform进行的rotate,translate,scale,skew,matrix等操作都是以元素自己中心位置进行变化的。但有时候我们需要在不同的位置对元素进行这些操作，那么我们就可以使用transform-origin来对元素进行基点位置改变，使元素基点不在是中心位置，以达到你需要的基点位置。下面我们主要来看看其使用规则：</p>
<p><code>transform-origin(X,Y):</code> 用来设置元素的运动的基点（参照点）。默认点是元素的中心点。其中X和Y的值可以是<code>百分值</code>,<code>em</code>,<code>px</code>，其中X也可以是字符参数值<code>left,center,right</code>；Y和X一样除了百分值外还可以设置字符值<code>top,center,bottom</code></p>
<ol>
<li><code>top left | left top</code> 等价于 <code>0 0 | 0% 0%</code></li>
<li><code>top | top center | center top</code> 等价于 <code>50% 0</code></li>
<li><code>right top | top right</code> 等价于 <code>100% 0</code></li>
<li><code>left | left center | center left</code> 等价于 <code>0 50% | 0% 50%</code></li>
<li><code>center | center center</code> 等价于 <code>50% 50%（默认值）</code></li>
<li><code>right | right center | center right</code> 等价于 <code>100% 50%</code></li>
<li><code>bottom left | left bottom</code> 等价于 <code>0 100% | 0% 100%</code></li>
<li><code>bottom | bottom center | center bottom</code> 等价于 <code>50% 100%</code></li>
<li><code>bottom right | right bottom</code> 等价于 <code>100% 100%</code></li>
</ol>
<p>其中 <code>left,center right</code>是水平方向取值，对应的百分值为<code>left=0%;center=50%;right=100%</code>，而<code>top center bottom</code>是垂直方向的取值，其中<code>top=0%;center=50%;bottom=100%;</code>如果只取一个值，表示垂直方向值不变</p>
<p>这里还要提醒大家一点的是，transform-origin并不是transform中的属性值，他具有自己的语法，跟其他的css3属性一样，我们需要在不同的浏览内核中加上相应的前缀，下面列出各种浏览器内核下的语法规则：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span>Mozilla内核浏览器：</span><br><span class="line">firefox3.<span class="number">5</span>+-moz-transform-origin: x y;</span><br><span class="line"><span class="regexp">//</span>Webkit内核浏览器：Safari and Chrome-webkit-transform-origin: x y;</span><br><span class="line"><span class="regexp">//</span>Opera-o-transform-origin: x y ;</span><br><span class="line"><span class="regexp">//</span>IE9-ms-transform-origin: x y;</span><br><span class="line"><span class="regexp">//</span>W3C标准transform-origin: x y ;</span><br></pre></td></tr></table></figure>

<h2 id="二、CSS-Transition"><a href="#二、CSS-Transition" class="headerlink" title="二、CSS Transition"></a>二、CSS Transition</h2><blockquote>
<p>参考自<a href="https://www.cnblogs.com/xiaohuochai/p/5347930.html">深入理解CSS过渡transition</a>（博主写的太赞了！）</p>
<p>可参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition">MDN文档</a></p>
</blockquote>
<h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1. 定义"></a>1. 定义</h3><p>过渡<code>transition</code>是一个复合属性，包括<code>transition-property</code>、<code>transition-duration</code>、<code>transition-timing-function</code>、<code>transition-delay</code>这四个子属性。通过这四个子属性的配合来完成一个完整的过渡效果</p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line">transition-<span class="keyword">property</span><span class="string"></span>: 过渡属性(默认值为all)</span><br><span class="line">transition-<span class="attribute">duration</span>: 过渡持续时间(默认值为<span class="number">0</span>s)</span><br><span class="line">transiton-timing-<span class="function"><span class="keyword">function</span>: 过渡函数(<span class="params">默认值为ease函数</span>)</span></span><br><span class="line"><span class="function"><span class="title">transition</span>-<span class="title">delay</span>: 过渡延迟时间(<span class="params">默认值为0s</span>)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>**[注意]**IE9-不支持该属性，<code>safari3.1-6</code>、<code>IOS3.2-6.1</code>、<code>android2.1-4.3</code>需要添加<code>-webkit-</code>前缀；而其余高版本浏览器支持标准写法</p>
</blockquote>
<h3 id="2-复合属性"><a href="#2-复合属性" class="headerlink" title="2. 复合属性"></a>2. 复合属性</h3><p>过渡<code>transition</code>的这四个子属性只有<code>&lt;transition-duration&gt;</code>是必需值且不能为0。其中，<code>&lt;transition-duration&gt;</code>和<code>&lt;transition-delay&gt;</code>都是时间。当两个时间同时出现时，第一个是<code>&lt;transition-duration&gt;</code>，第二个是<code>&lt;transition-delay&gt;</code>；当只有一个时间时，它是<code>&lt;transition-duration&gt;</code>，而<code>&lt;transition-delay&gt;</code>为默认值0</p>
<blockquote>
<p><strong>[注意]</strong><code>transition</code>的这四个子属性之间不能用逗号隔开，只能用空格隔开。因为逗号隔开的代表不同的属性(transition属性支持多值，多值部分(稍后介绍)；而空格隔开的代表不同属性的四个关于过渡的子属性</p>
</blockquote>
<h3 id="3-过渡属性-transition-property"><a href="#3-过渡属性-transition-property" class="headerlink" title="3. 过渡属性 transition-property"></a>3. 过渡属性 <code>transition-property</code></h3><blockquote>
<p><strong>值:</strong> <code>none</code> | <code>all</code> | <code>&lt;transition-property&gt;</code>[,<code>&lt;transition-property&gt;</code>]*</p>
<p><strong>初始值:</strong> <code>all</code></p>
<p><strong>应用于:</strong> 所有元素</p>
<p><strong>继承性:</strong> 无</p>
</blockquote>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="attribute">none</span>: 没有指定任何样式</span><br><span class="line"><span class="attribute">all</span>: 默认值，表示指定元素所有支持transition-<span class="keyword">property</span><span class="string">属性的样式</span></span><br><span class="line">&lt;transition-<span class="keyword">property</span><span class="string">&gt;</span>: 可过渡的样式，可用逗号分开写多个样式</span><br></pre></td></tr></table></figure>

<p><strong>可过渡的样式</strong></p>
<p>　　不是所有的CSS样式值都可以过渡，只有具有中间值的属性才具备过渡效果</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="attr">Vstart</span> = 开始值; <span class="attr">Vend</span> = 结束值; <span class="attr">Vres</span> = 中间值; <span class="attr">p</span> = 过渡函数的输出值</span><br><span class="line"><span class="attr">Vres</span> = (<span class="number">1</span> - p) * Vstart + p * Vend</span><br><span class="line">当Vres具有有效值时，则该CSS样式可过渡</span><br></pre></td></tr></table></figure>

<blockquote>
<p>颜色: <code>color</code> <code>background-color</code> <code>border-color</code> <code>outline-color</code></p>
<p>位置: <code>backround-position</code> <code>left</code> <code>right</code> <code>top</code> <code>bottom</code></p>
<p>长度:<br>    [1]<code>max-height</code> <code>min-height</code> <code>max-width</code> <code>min-width</code> <code>height</code> <code>width</code><br>    [2]<code>border-width</code> <code>margin</code> <code>padding</code> <code>outline-width</code> <code>outline-offset</code><br>    [3]<code>font-size</code> <code>line-height</code> <code>text-indent</code> <code>vertical-align</code><br>    [4]<code>border-spacing</code> <code>letter-spacing</code> <code>word-spacing</code></p>
<p>数字: <code>opacity</code> <code>visibility</code> <code>z-index</code> <code>font-weight</code> <code>zoom</code></p>
<p>组合: <code>text-shadow</code> <code>transform</code> <code>box-shadow</code> <code>clip</code></p>
<p>其他: <code>gradient</code></p>
</blockquote>
<h3 id="4-过渡持续时间-transition-duration"><a href="#4-过渡持续时间-transition-duration" class="headerlink" title="4. 过渡持续时间 transition-duration"></a>4. 过渡持续时间 <code>transition-duration</code></h3><blockquote>
<p><strong>值:</strong> <code>&lt;time&gt;</code>[,<code>&lt;time&gt;</code>]*</p>
<p><strong>初始值:</strong> 0s</p>
<p><strong>应用于:</strong> 所有元素</p>
<p><strong>继承性:</strong> 无</p>
<p>**[注意]**该属性不能为负值,单位是秒s或毫秒ms</p>
<p>**[注意]**若该属性为0s则为默认值，若为0则为无效值。所以必须带单位</p>
<p>**[注意]**该值为单值时，即所有过渡属性都对应同样时间；该值为多值时，过渡属性按照顺序对应持续时间</p>
</blockquote>
<h3 id="5-过渡延迟时间-transition-delay"><a href="#5-过渡延迟时间-transition-delay" class="headerlink" title="5. 过渡延迟时间 transition-delay"></a>5. 过渡延迟时间 <code>transition-delay</code></h3><p>该属性定义元素属性延迟多少时间后开始过渡效果，该属性的单位是秒s或毫秒ms</p>
<blockquote>
<p><strong>值:</strong> <code>&lt;time&gt;</code>[,<code>&lt;time&gt;</code>]*</p>
<p><strong>初始值:</strong> 0s</p>
<p><strong>应用于:</strong> 所有元素</p>
<p><strong>继承性:</strong> 无</p>
<p>**[注意]**该属性若为负值，无延迟效果，但过渡元素的起始值将从0变成设定值(设定值=延迟时间+持续时间)。若该设定值小于等于0，则无过渡效果；若该设定值大于0，则过渡元素从该设定值开始完成剩余的过渡效果</p>
<p>**[注意]**若该属性为0s则为默认值，若为0则为无效值。所以必须带单位</p>
<p>**[注意]**该值为单值时，即所有过渡属性都对应同样时间；该值为多值时，过渡属性按照顺序对应持续时间</p>
</blockquote>
<h3 id="6-过渡时间函数-transition-timing-function"><a href="#6-过渡时间函数-transition-timing-function" class="headerlink" title="6. 过渡时间函数 transition-timing-function"></a>6. 过渡时间函数 <code>transition-timing-function</code></h3><p><code>过渡时间函数</code>用于定义元素过渡属性随时间变化的过渡速度变化效果</p>
<blockquote>
<p><strong>值:</strong> <code>&lt;timing-function&gt;</code>[,<code>&lt;timing-function&gt;</code>]*</p>
<p><strong>初始值:</strong> ease</p>
<p><strong>应用于:</strong> 所有元素</p>
<p><strong>继承性:</strong> 无</p>
</blockquote>
<p><strong>取值</strong></p>
<p><code>过渡时间函数</code>共三种取值:分别是<code>关键字</code>、<code>steps函数</code>和<code>bezier函数</code></p>
<p><strong>①steps函数</strong></p>
<p>　　steps步进函数将过渡时间划分成大小相等的时间时隔来运行</p>
<p>　　steps步进函数为</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">steps(&lt;<span class="keyword">integer</span>&gt;[,<span class="built_in">start</span> | <span class="keyword">end</span>]?)</span><br><span class="line">&lt;<span class="keyword">integer</span>&gt;:用来指定间隔个数(该值只能是正整数)</span><br><span class="line">第二个参数: 该参数可选，默认是<span class="keyword">end</span>，表示开始值保持一次；若参数为<span class="built_in">start</span>，表示开始不保持</span><br></pre></td></tr></table></figure>

<p><strong>②贝塞尔曲线</strong></p>
<p>贝塞尔曲线通过p0-p3四个控制点来控制，其中p0表示(0,0)，p3表示(1,1)。而<code>&lt;transition-timing-function&gt;</code>就是通过确定<code>p1(x1,y1)</code>和<code>p2(x2,y2)</code>的值来确定的。可以使用<a href="http://cubic-bezier.com/">工具网站</a>来定制。</p>
<p><strong>③关键字</strong></p>
<p><code>关键字</code>其实是<code>bezier函数</code>或<code>steps函数</code>的特殊值</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">ease</span>: 开始和结束慢，中间快。相当于cubic-bezier(<span class="number">0</span>.<span class="number">25</span>,<span class="number">0</span>.<span class="number">1</span>,<span class="number">0</span>.<span class="number">25</span>,<span class="number">1</span>)</span><br><span class="line"><span class="attribute">linear</span>: 匀速。相当于cubic-bezier(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="attribute">ease</span>-in: 开始慢。相当于cubic-bezier(<span class="number">0</span>.<span class="number">42</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="attribute">ease</span>-out: 结束慢。相当于cubic-bezier(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>.<span class="number">58</span>,<span class="number">1</span>)</span><br><span class="line"><span class="attribute">ease</span>-in-out: 和ease类似，但比ease幅度大。相当于cubic-bezier(<span class="number">0</span>.<span class="number">42</span>,<span class="number">0</span>,<span class="number">0</span>.<span class="number">58</span>,<span class="number">1</span>)</span><br><span class="line"><span class="attribute">step</span>-start: 直接位于结束处。相当于steps(<span class="number">1</span>,start)</span><br><span class="line"><span class="attribute">step</span>-end: 位于开始处经过时间间隔后结束。相当于steps(<span class="number">1</span>,end)</span><br></pre></td></tr></table></figure>

<p><img data-src="function.png"></p>
<h3 id="7-触发方式"><a href="#7-触发方式" class="headerlink" title="7. 触发方式"></a>7. 触发方式</h3><p>一般地，过渡<code>transition</code>的触发有三种方式，分别是<code>伪类触发</code>、<code>媒体查询触发</code>和<code>javascript触发</code>。其中常用伪类触发包括<code>:hover、:focus、:active</code>等</p>
<p><strong>@media触发</strong>  符合媒体查询条件时触发</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 把浏览器的宽度拖动到小于1000px时触发 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">1000px</span>)&#123;</span><br><span class="line">    <span class="selector-class">.test</span>&#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>点击事件</strong>    用户点击元素时触发</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">test.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    test.style.width = <span class="string">&#x27;300px&#x27;</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        test.style.width = <span class="string">&#x27;100px&#x27;</span>;</span><br><span class="line">    &#125;,<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-API"><a href="#8-API" class="headerlink" title="8. *API"></a>8. *API</h3><blockquote>
<p>关于过渡transition的事件只有一个，是<code>transitionend</code>事件，它发生在过渡事件完成后</p>
<p>[注意]safari3.1-6、ISO3.2-6.1、android2.1-4.3需要使用<code>webkitTransitionEnd</code>事件</p>
</blockquote>
<h3 id="9-transition的使用注意"><a href="#9-transition的使用注意" class="headerlink" title="9. transition的使用注意"></a>9. transition的使用注意</h3><blockquote>
<p>参考自 <a href="http://www.ruanyifeng.com/blog/2014/02/css_transition_and_animation.html">阮一峰网络日志</a></p>
</blockquote>
<p>（1）目前，各大浏览器（包括IE 10）都已经支持无前缀的transition，所以transition已经可以很安全地不加浏览器前缀。</p>
<p>（2）不是所有的CSS属性都支持transition，完整的列表查看<a href="http://oli.jp/2010/css-animatable-properties/">这里</a>，以及具体的<a href="http://leaverou.github.io/animatable/">效果</a>。</p>
<p>（3）transition需要明确知道，开始状态和结束状态的具体数值，才能计算出中间状态。比如，height从0px变化到100px，transition可以算出中间状态。但是，transition没法算出0px到auto的中间状态，也就是说，如果开始或结束的设置是height: auto，那么就不会产生动画效果。类似的情况还有，display: none到block，background: url(foo.jpg)到url(bar.jpg)等等。</p>
<h3 id="10-transition的局限"><a href="#10-transition的局限" class="headerlink" title="10. transition的局限"></a>10. transition的局限</h3><p>transition的优点在于简单易用，但是它有几个很大的局限。</p>
<p>（1）transition需要事件触发，所以没法在网页加载时自动发生。</p>
<p>（2）transition是一次性的，不能重复发生，除非一再触发。</p>
<p>（3）transition只能定义开始状态和结束状态，不能定义中间状态，也就是说只有两个状态。</p>
<p>（4）一条transition规则，只能定义一个属性的变化，不能涉及多个属性。</p>
<p>CSS Animation就是为了解决这些问题而提出的。</p>
<h2 id="三、CSS-Animation"><a href="#三、CSS-Animation" class="headerlink" title="三、CSS Animation"></a>三、CSS Animation</h2><blockquote>
<p>参考自<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Animations/Using_CSS_animations">MDN 文档</a>、<a href="https://blog.csdn.net/u013243347/article/details/79976352">CSDN大佬博文</a></p>
<h4 id="SVG动画实践"><a href="#SVG动画实践" class="headerlink" title="SVG动画实践"></a>SVG动画实践</h4><p><a href="http://www.yangoogle.com/#/">动画实践</a></p>
<h4 id="CSS3动效网站"><a href="#CSS3动效网站" class="headerlink" title="CSS3动效网站:"></a>CSS3动效网站:</h4><p> 一个很全的CSS3的动效库，可以尝试看看源码进行学习。<br><a href="https://createjs.com/demos/easeljs/alphamaskreveal">CreateJS</a> 里面的特效做得也很不错，有很多酷炫的样例。<br><a href="https://fournier-pere-fils.com/story">国外css3网页</a> 布局很优雅的网站<br><a href="http://usatoday.geex-arts.com/">USAToday</a> 也是一个很酷炫的国外网站<br><a href="https://peekabeat.com/#!/">peekabeat</a> 很清爽的界面<br><a href="http://www.ensemblecorrespondances.com/">dances</a> 貌似是交响乐的网站主页（打不开）<br><a href="https://www.couleecreative.com/">reative</a> 很有时代感的网站(第一感觉有点突兀吓人)<br><a href="http://cssanimate.com/">animation</a> 在线animation编辑器</p>
</blockquote>
<p>动画可以通过设置多个节点来精确控制一个或一组动画，常用来实现复杂的动画效果。</p>
<p>创建动画序列，需要使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation"><code>animation</code></a>属性或其子属性，该属性允许配置动画时间、时长以及其他动画细节，但该属性不能配置动画的实际表现，动画的实际表现是由 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@keyframes"><code>@keyframes</code></a>规则实现，具体情况参见<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Animations/Using_CSS_animations#%E4%BD%BF%E7%94%A8keyframes%E5%AE%9A%E4%B9%89%E5%8A%A8%E7%94%BB%E5%BA%8F%E5%88%97">使用keyframes定义动画序列</a>小节部分。</p>
<blockquote>
<p><strong>实例</strong></p>
<p><code>animation</code>：<code>动画名称</code> <code>动画时间</code> <code>运动曲线</code> <code>何时开始</code> <code>播放次数</code> <code>是否反方向</code>;</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">animation: rotate 5s linear 0s infinite alternate;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="1、Animation-属性"><a href="#1、Animation-属性" class="headerlink" title="1、Animation 属性"></a>1、Animation 属性</h3><h4 id="简写属性形式"><a href="#简写属性形式" class="headerlink" title="简写属性形式:"></a>简写属性形式:</h4><blockquote>
<p><strong>animation:</strong></p>
<p>[<code>animation-name</code>] // 动画的名称</p>
<p>[<code>animation-duration</code>] // 持续时间</p>
<p>[<code>animation-timing-function</code>] // 关于时间的函数(properties/t)</p>
<p>[<code>animation-delay</code>] // 延迟时间</p>
<p>[<code>animation-iteration-count</code>]  // 播放次数</p>
<p>[<code>animation-direction</code>] // 播放顺序</p>
<p>[<code>animation-fill-mode</code>]  // 播放前或停止后设置相应样式</p>
<p>[<code>animation-play-state</code>]; // 控制动画运行或暂停</p>
</blockquote>
<h5 id="1-时间函数（animation-timing-function）"><a href="#1-时间函数（animation-timing-function）" class="headerlink" title="1. 时间函数（animation-timing-function）"></a>1. 时间函数（animation-timing-function）</h5><p><code>animation-timing-function</code>属性定义了动画的播放速度曲线。<br>可选配置参数为:<br><code>ease</code>   (默认值)、<br><code>ease-in</code>、<br><code>ease-out</code>、<br><code>ease-in-out</code>、<br><code>linear</code>、<br><code>cubic-bezier(number, number, number, number)</code></p>
<p><img data-src="time-function.gif"></p>
<h5 id="2-动画延迟（animation-delay）"><a href="#2-动画延迟（animation-delay）" class="headerlink" title="2. 动画延迟（animation-delay）"></a>2. 动画延迟（animation-delay）</h5><p><code>animation-delay</code>属性定义动画是从何时开始播放，即动画应用在元素上的到动画开始的这段时间的长度。<br>默认值0s，表示动画在该元素上后立即开始执行。<br>该值以秒(s)或者毫秒(ms)为单位。</p>
<h5 id="3-动画迭代次数（animation-iteration-count）"><a href="#3-动画迭代次数（animation-iteration-count）" class="headerlink" title="3. 动画迭代次数（animation-iteration-count）"></a>3. 动画迭代次数（animation-iteration-count）</h5><p><code>animation-iteration-count</code>该属性就是定义我们的动画播放的次数。次数可以是1次或者无限循环（默认值为1）</p>
<blockquote>
<p>single-animation-iteration-count = <strong>infinite</strong> | number</p>
</blockquote>
<h5 id="4-动画方向（animation-direction）"><a href="#4-动画方向（animation-direction）" class="headerlink" title="4. 动画方向（animation-direction）"></a>4. 动画方向（animation-direction）</h5><p><code>animation-direction</code>属性表示CSS动画是否反向播放。<br>可选配置参数为:</p>
<blockquote>
<p>single-animation-direction = normal | reverse | alternate | alternate-reverse</p>
</blockquote>
<ul>
<li>animation-direction: normal 正序播放</li>
<li>animation-direction: reverse 倒序播放</li>
<li>animation-direction: alternate 交替播放</li>
<li>animation-direction: alternate-reverse 反向交替播放</li>
<li>animation-direction: normal, reverse</li>
<li>animation-direction: alternate, reverse, normal</li>
</ul>
<h5 id="5-动画填充模式（animation-fill-mode）"><a href="#5-动画填充模式（animation-fill-mode）" class="headerlink" title="5.动画填充模式（animation-fill-mode）"></a>5.动画填充模式（animation-fill-mode）</h5><p><code>animation-fill-mode</code>是指给定动画播放前后应用元素的样式。</p>
<blockquote>
<p>single-animation-fill-mode = <strong>none **| **forwards **| **backwards **| **both</strong></p>
</blockquote>
<ul>
<li>animation-fill-mode: none 动画执行前后不改变任何样式</li>
<li>animation-fill-mode: forwards 保持目标动画最后一帧的样式</li>
<li>animation-fill-mode: backwards 保持目标动画第一帧的样式</li>
<li>animation-fill-mode: both 动画将会执行 forwards 和 backwards 执行的动作。</li>
</ul>
<h5 id="6-动画播放状态（animation-play-state）"><a href="#6-动画播放状态（animation-play-state）" class="headerlink" title="6.动画播放状态（animation-play-state）"></a>6.动画播放状态（animation-play-state）</h5><p><code>animation-play-state:</code> 定义动画是否运行或者暂停。可以查询它来确定动画是否运行。默认值为<strong>running</strong></p>
<blockquote>
<p>有时，动画播放过程中，会突然停止。这时，默认行为是跳回到动画的开始状态。</p>
<p>如果鼠标移走，色块立刻回到动画开始状态。如果想让动画保持突然终止时的状态，就要使用animation-play-state属性。</p>
</blockquote>
<blockquote>
<p>single-animation-timing-function = <strong>running</strong> | <strong>paused</strong></p>
</blockquote>
<ul>
<li>running 动画正常播放</li>
<li>paused 动画暂停播放</li>
</ul>
<p><img data-src="description.png"></p>
<h4 id="浏览器前缀"><a href="#浏览器前缀" class="headerlink" title="浏览器前缀"></a>浏览器前缀</h4><p>目前，IE 10和Firefox（&gt;= 16）支持没有前缀的animation，而chrome不支持，所以必须使用webkit前缀。</p>
<p>也就是说，实际运用中，代码必须写成下面的样子。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-animation</span>: <span class="number">1s</span> rainbow;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">1s</span> rainbow;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> rainbow &#123;</span><br><span class="line">  0% &#123; <span class="attribute">background</span>: <span class="number">#c00</span>; &#125;</span><br><span class="line">  50% &#123; <span class="attribute">background</span>: orange; &#125;</span><br><span class="line">  100% &#123; <span class="attribute">background</span>: yellowgreen; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> rainbow &#123;</span><br><span class="line">  0% &#123; <span class="attribute">background</span>: <span class="number">#c00</span>; &#125;</span><br><span class="line">  50% &#123; <span class="attribute">background</span>: orange; &#125;</span><br><span class="line">  100% &#123; <span class="attribute">background</span>: yellowgreen; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、keyframes的写法"><a href="#2、keyframes的写法" class="headerlink" title="2、keyframes的写法"></a>2、keyframes的写法</h3><p><code>keyframes</code>关键字用来定义动画的各个状态，它的写法相当自由。</p>
<p>0%可以用from代表，100%可以用to代表。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> rainbow &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123; <span class="attribute">background</span>: <span class="number">#c00</span> &#125;</span><br><span class="line">  50% &#123; <span class="attribute">background</span>: orange &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123; <span class="attribute">background</span>: yellowgreen &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果省略某个状态，浏览器会自动推算中间状态，所以下面都是合法的写法。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> rainbow &#123;</span><br><span class="line">  50% &#123; <span class="attribute">background</span>: orange &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123; <span class="attribute">background</span>: yellowgreen &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> rainbow &#123;</span><br><span class="line">  <span class="selector-tag">to</span> &#123; <span class="attribute">background</span>: yellowgreen &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>甚至，可以把多个状态写在一行。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> pound &#123;</span><br><span class="line">  <span class="selector-tag">from</span>，<span class="selector-tag">to</span> &#123; <span class="attribute">transform</span>: none; &#125;</span><br><span class="line">  50% &#123; <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外一点需要注意的是，浏览器从一个状态向另一个状态过渡，是平滑过渡。steps函数可以实现分步过渡。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">1s</span> rainbow infinite <span class="built_in">steps</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>附</strong>一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation">MDN的例子</a>：<strong>赛隆人之眼(赛隆人</strong>是一个虚构的生化人种族,出自科幻电视系列剧星际大争霸系列**)**</p>
<p>然后引出  <strong>渐变色</strong>  的概念，<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Using_CSS_gradients">MDN 使用CSS渐变</a> 的传送门</p>
</blockquote>
<h2 id="四、CSS-渐变"><a href="#四、CSS-渐变" class="headerlink" title="四、CSS 渐变"></a>四、CSS 渐变</h2><p><strong>CSS 渐变</strong><code>&lt;image&gt;</code> 类型的一种特殊类型 <code>&lt;gradient&gt;</code>表示，由两种或多种颜色之间的渐进过渡组成。您可以选择三种类型的渐变：线性 (由 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/linear-gradient"><code>linear-gradient</code></a> 函数创建)，径向(由 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/radial-gradient"><code>radial-gradient()</code></a> 函数创建) 和圆锥 (由 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/conic-gradient"><code>conic-gradient</code></a> 函数创建)。您还可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/repeating-linear-gradient"><code>repeating-linear-gradient</code></a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/repeating-radial-gradient"><code>repeating-radial-gradient</code></a> 函数创建重复渐变。</p>
<p>渐变可以在任何使用 <code>&lt;image&gt;</code> 的地方使用，例如在背景中。 由于渐变是动态生成的，因此它们可以消除对传统用于实现类似效果的栅格图像文件的需求。 此外，由于渐变是由浏览器生成的，因此在放大时它们看起来比栅格图像更好，并且可以动态调整大小。</p>
<h3 id="1、使用线性渐变"><a href="#1、使用线性渐变" class="headerlink" title="1、使用线性渐变"></a>1、使用线性渐变</h3><p>线性渐变创建了一条沿直线前进的颜色带。</p>
<h4 id="基础线性渐变"><a href="#基础线性渐变" class="headerlink" title="基础线性渐变"></a>基础线性渐变</h4><p>要创建最基本的渐变类型，您只需指定两种颜色即可。 这些被称为色标。 至少指定两个色标，也可以指定任意数量。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.simple-linear</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(blue, pink);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="改变渐变方向"><a href="#改变渐变方向" class="headerlink" title="改变渐变方向"></a>改变渐变方向</h4><p>默认情况下，线性渐变的方向是从上到下， 你可以指定一个值来改变渐变的方向。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.horizontal-gradient</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, blue, pink);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="对角线渐变"><a href="#对角线渐变" class="headerlink" title="对角线渐变"></a>对角线渐变</h4><p>你甚至可以设置渐变方向为从一个对角到另一个对角。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.diagonal-gradient</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom right, blue, pink);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="设置渐变角度"><a href="#设置渐变角度" class="headerlink" title="设置渐变角度"></a>设置渐变角度</h4><p>如果你想要更精确地控制渐变的方向，你可以给渐变设置一个具体的角度。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.angled-gradient</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">70deg</span>, blue, pink);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、声明颜色和创建效果"><a href="#2、声明颜色和创建效果" class="headerlink" title="2、声明颜色和创建效果"></a>2、声明颜色和创建效果</h3><p>所有的CSS渐变类型都是一个位置依赖的颜色范围。CSS渐变产生的颜色可以随位置不断变化，从而产生平滑的颜色过渡。也可以创建纯色带和两种颜色之间的硬过渡。以下内容适用于所有渐变函数：</p>
<h4 id="使用多种颜色"><a href="#使用多种颜色" class="headerlink" title="使用多种颜色"></a>使用多种颜色</h4><p>无需局限于使用两种颜色，你想使用多少种颜色都可以！ 默认情况下，所设置颜色会均匀分布在渐变路径中。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.auto-spaced-linear-gradient</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(red, yellow, blue, orange);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="颜色终止位置"><a href="#颜色终止位置" class="headerlink" title="颜色终止位置"></a>颜色终止位置</h4><p>你不需要让你设置的颜色在默认位置终止。 你可以通过给每个颜色设置0，1%或者2%或者其他的绝对数值来调整它们的位置。如果你将位置设置为百分数， <code>0%</code> 表示起始点, 而100%表示终点，但是如果需要的话你也可以设置这个范围之外的其他值来达到你想要的效果。如果有些位置你没有明确设置，那么它将会被自动计算，第一种颜色会在0%处停止，而最后一种颜色是100%，至于其他颜色则是在它邻近的两种颜色的中间停止。 </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.multicolor-linear</span> &#123; </span><br><span class="line">   <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to left, lime <span class="number">28px</span>, red <span class="number">77%</span>, cyan);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建实线"><a href="#创建实线" class="headerlink" title="创建实线"></a>创建实线</h4><p>要在两种颜色之间创建一条硬线，即创建一个条纹而不是逐渐过渡，可以将相邻的颜色停止设置为相同的位置。在此示例中，两种颜色在50%标记处共享一个颜色停止点，即渐变的一半：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.striped</span> &#123; </span><br><span class="line">   <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom left, cyan <span class="number">50%</span>, palegoldenrod <span class="number">50%</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="渐变提示"><a href="#渐变提示" class="headerlink" title="渐变提示"></a>渐变提示</h4><p>默认情况下，渐变会平滑地从一种颜色过渡到另一种颜色。你可以通过设置一个值来将渐变的中心点移动到指定位置。 在如下示例中, 我们将渐变的中心点由50%设为10%。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.color-hint</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(blue, <span class="number">10%</span>, pink);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.simple-linear</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(blue, pink);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更多内容如<strong>在图片上的叠加鉴别</strong>、<strong>增加不透明度</strong>  以及其他的<strong>渐变函数</strong>  见<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Using_CSS_gradients">MDN</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 动画及图形解决方案</title>
    <url>/2020/09/09/CSS-animation-and-graphics-solutions/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>CSS动画库 （转载自知乎博主<a href="https://zhuanlan.zhihu.com/p/101563245">十个推荐的CSS动画库</a>）</p>
<p>一些CSS牛逼样式图形</p>
</blockquote>
<a id="more"></a>

<h2 id="一、十个值得推荐的CSS动画库"><a href="#一、十个值得推荐的CSS动画库" class="headerlink" title="一、十个值得推荐的CSS动画库"></a>一、十个值得推荐的CSS动画库</h2><h3 id="1-Animista-生成器"><a href="#1-Animista-生成器" class="headerlink" title="1. Animista(生成器)"></a>1. <a href="https://animista.net/play/basic/slide-bck">Animista</a>(生成器)</h3><blockquote>
<p>emmm,简直不要太爽！可视化自动生成！</p>
</blockquote>
<h3 id="2-Animation-css（调用库）"><a href="#2-Animation-css（调用库）" class="headerlink" title="2. Animation.css（调用库）"></a>2. <a href="https://animate.style/">Animation.css</a>（调用库）</h3><p>当然，我也必须提及<code>Animate CSS</code>，也许这是一个众所周知的动画库。</p>
<p><strong>1.使用</strong></p>
<p>Install with npm:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install animate.css --save</span></span><br></pre></td></tr></table></figure>

<p>or add it directly to your webpage using a CDN:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">    <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后在你需要添加动画的元素上添加<code>animated</code>类名，然后就是添加动画的名称。<strong>比如</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animated slideInLeft&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果你希望动画是持久的，你可以添加<code>infinite</code>类，这样动画将不停地重复自身。</p>
<ul>
<li><strong>通过 JavaScript</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;.my-element&#x27;</span>).classList.add(<span class="string">&#x27;animated&#x27;</span>, <span class="string">&#x27;slideInLeft&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>通过 Jquery</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.my-element&quot;</span>).addClass(<span class="string">&quot;animated slideInLeft&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>2.额外的特性</strong></p>
<p><code>Animate CSS</code>为你提供了一些基本的类去操作动画的延时和速度。</p>
<ul>
<li>延时</li>
</ul>
<p>你可以通过使用<code>delay</code>类来延迟你的动画。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;animated slideInLeft delay-&#123;1-5&#125;&quot;</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>速度</li>
</ul>
<p>你可以通过添加下表中的类来控制动画的速度。</p>
<table>
<thead>
<tr>
<th>Class name</th>
<th>Speed time</th>
</tr>
</thead>
<tbody><tr>
<td>slow</td>
<td>2s</td>
</tr>
<tr>
<td>slower</td>
<td>3s</td>
</tr>
<tr>
<td>fast</td>
<td>800ms</td>
</tr>
<tr>
<td>faster</td>
<td>500ms</td>
</tr>
</tbody></table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animated slideInLeft slow|slower|fast|faster&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3.在vue中使用animate.css</strong></p>
<p>命令行中执行：<code>npm install animate.css --save</code></p>
<p>第二步：<code>main.js</code>中引入及使用：<code>import animated from &#39;animate.css&#39;</code></p>
<p><code>Vue.use(animated)</code></p>
<p>vue模板中：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ty&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 直接使用animated中的动画class名，注意：必须使用animated这个class名，否则动画会无效 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box animated bounceInDown&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Vivify（调用库）"><a href="#3-Vivify（调用库）" class="headerlink" title="3. Vivify（调用库）"></a>3. <a href="http://vivify.mkcreative.cz/">Vivify</a>（调用库）</h3><p>它的使用一样，有自己更多的类，但是也扩展了些。添加<code>vivify</code>类到元素中，而不是<code>animated</code>。比如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;vivify slideInLeft&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Javascript</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;.my-element&#x27;</span>).classList.add(<span class="string">&#x27;vivify&#x27;</span>, <span class="string">&#x27;slideInLeft&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Jquery</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.my-element&quot;</span>).addClass(<span class="string">&quot;vivify slideInLeft&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>就像<code>Animate CSS</code>一样，<code>Vivify</code>也为你提供了一些类来控制动画的持续时间和延迟时间。</p>
<p>延迟和持续时间的类在下面的间隔中可用：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;delay|duration-&#123;100|150|200|250...1000|1250|1500|1750...10750&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：值的单位是毫秒（ms）。1000ms = 1s</p>
</blockquote>
<h3 id="4-Magic-Animations-CSS3（调用库）"><a href="#4-Magic-Animations-CSS3（调用库）" class="headerlink" title="4. Magic Animations CSS3（调用库）"></a>4. <a href="https://www.minimamente.com/project/magic/">Magic Animations CSS3</a>（调用库）</h3><blockquote>
<p>官网暂无相应（可能我不会用）</p>
</blockquote>
<p>这个动画库有些不错并且流畅的动画，我特别喜欢<code>3D</code>动画。</p>
<p>没什么好说的，自己去尝试下，玩下动画。</p>
<p>你可以添加<code>magictime &#123;animation_name&#125;</code>到你的元素中，如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;magictime fadeIn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Javascript</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;.my-element&#x27;</span>).classList.add(<span class="string">&#x27;magictime&#x27;</span>, <span class="string">&#x27;fadeIn&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Jquery</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.my-element&quot;</span>).addClass(<span class="string">&quot;magictime fadeIn&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="5-cssanimation-io（调用库）"><a href="#5-cssanimation-io（调用库）" class="headerlink" title="5. cssanimation.io（调用库）"></a>5. <a href="http://cssanimation.io/index.html">cssanimation.io</a>（调用库）</h3><blockquote>
<p>此时，我打不开它。。。</p>
</blockquote>
<p><code>cssanimation.io</code>是一大堆不同动画的集合，总共大约有200个，真是太神奇了。</p>
<p>如果在这里都找不到你想要的动画，那你在哪都找不到了。</p>
<p>它的使用方式类似<code>animista</code>。比如，你可以直接选择动画，然后直接从网站中获取，或者下载整个库。</p>
<p><strong>使用</strong></p>
<p>为你的元素添加<code>cssanimation &#123;animation_name&#125;</code>。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cssanimation fadeIn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Javascript</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;.my-element&#x27;</span>).classList.add(<span class="string">&#x27;cssanimation&#x27;</span>,<span class="string">&#x27;fadeIn&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Jquery</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.my-element&quot;</span>).addClass(<span class="string">&quot;cssanimation fadeIn&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>你也可以添加<code>infinite</code>类，以便动画不断重复。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cssanimation fadeIn infinite&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此外，<code>cssanimations.io</code>为你提供了动画字母的功能。为了实现这个，你需要在<code>head</code>标签中引入<code>letteranimation.js</code>文件，然后在你的文本元素中添加<code>le&#123;animation_name&#125;</code>。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cssanimation leSnake&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>想要字母动画有序进行，添加<code>sequence</code>类；想要字母动画无序进行，添加<code>random</code>类。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cssanimation leSnake &#123;sequence|random&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-Angrytools（生成器）"><a href="#6-Angrytools（生成器）" class="headerlink" title="6. Angrytools（生成器）"></a>6. <a href="https://angrytools.com/css/animation/">Angrytools</a>（生成器）</h3><p>如果使用生成器（<code>Angrytools</code>不错），<code>Angrytools</code>实际上是一个集合，其中还包括<code>CSS</code>动画生成器。</p>
<p>这个网站也为你提供了定制动画的功能，比如持续时间和延迟时间。</p>
<p>最重要的是，你可以在时间线上添加<code>keyframes（关键帧）</code>，并且你可以直接在那里写代码。而且，你也可以编辑现有的一个效果。</p>
<h3 id="7-Hover-css（调用库）"><a href="#7-Hover-css（调用库）" class="headerlink" title="7. Hover.css（调用库）"></a>7. <a href="http://ianlunn.github.io/Hover/">Hover.css</a>（调用库）</h3><p><code>Hover.css</code>是众多<code>CSS</code>动画的集合，与上面的动画不同，<strong>每次将元素悬停时</strong>都会触发。</p>
<blockquote>
<p>一组CSS3驱动的悬停效果，可以应用到链接，按钮，logos，svg，图片特性和其他。</p>
</blockquote>
<p>它有一些惊人的动效。而且它还有用于动画图标的类，比如超棒的字体。</p>
<p><strong>使用</strong></p>
<p>使用很简单：将类名添加到你的元素中，比如：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&lt;button class=&quot;hvr-fade&quot;&gt;Hover me!&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h3 id="8-WickedCSS-（调用库）"><a href="#8-WickedCSS-（调用库）" class="headerlink" title="8. WickedCSS （调用库）"></a>8. <a href="http://kristofferandreasen.github.io/wickedCSS/#">WickedCSS</a> （调用库）</h3><p><code>WickedCSS</code>是一个小型的<code>CSS</code>动画库，没有太多的动画体，但是它至少有很棒的动画。它们中大多数是我们熟悉的基本动画，但是它们真是很简洁。</p>
<p>使用方法很简单，只要为你的元素添加动画名就行了。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bounceIn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Javascript</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;.my-element&#x27;</span>).classList.add(<span class="string">&#x27;bounceIn&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Jquery</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.my-element&quot;</span>).addClass(<span class="string">&quot;bounceIn&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="9-Three-Dots（调用库）"><a href="#9-Three-Dots（调用库）" class="headerlink" title="9.  Three Dots（调用库）"></a>9.  <a href="https://nzbin.github.io/three-dots/">Three Dots</a>（调用库）</h3><blockquote>
<p><code>Three Dots</code>是<code>CSS</code>加载动画的集合，仅由三个简单元素制作而成的三个点创建。</p>
</blockquote>
<p><strong>使用</strong></p>
<p>创建一个<code>div</code>元素，然后添加动画名。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot-elastic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="10-CSSHake（调用库）"><a href="#10-CSSHake（调用库）" class="headerlink" title="10. CSSHake（调用库）"></a>10. <a href="https://elrumordelaluz.github.io/csshake/">CSSHake</a>（调用库）</h3><p>最后，来点摇晃的抖动。</p>
<p>如其名，<code>CSShake</code>包含了不同类型的抖动动画的<code>CSS</code>动画库。</p>
<ul>
<li><strong>使用</strong></li>
</ul>
<p>添加<code>shake &#123;animation_name&#125;</code>到你的元素中。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;shake shake-hard&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Javascript</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;.my-element&#x27;</span>).classList.add(<span class="string">&#x27;shake&#x27;</span>,<span class="string">&#x27;shake-hard&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用 Jquery</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.my-element&quot;</span>).addClass(<span class="string">&quot;shake shake-hard&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="二、神奇的CSS多边形绘制"><a href="#二、神奇的CSS多边形绘制" class="headerlink" title="二、神奇的CSS多边形绘制"></a>二、神奇的CSS多边形绘制</h2><blockquote>
<p>转载自 <a href="https://www.imooc.com/article/27838">手记</a></p>
</blockquote>
<p>CSS3之前，我们能做的只有矩形，四四方方，条条框框</p>
<p>CSS3出来后，我们有了更广阔的施展空间，通过</p>
<ul>
<li><code>border-radius</code></li>
<li><code>border</code></li>
<li><code>transform</code></li>
<li>伪元素配合</li>
<li>gradient 渐变</li>
</ul>
<p>我们能够作出非常多的几何图形。</p>
<h3 id="传统方式绘制"><a href="#传统方式绘制" class="headerlink" title="传统方式绘制"></a>传统方式绘制</h3><p>除去最常见的矩形，圆形（<code>border-radius</code>），下面稍微列举一些其他几何图形：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 三角形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;traingle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 切角 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;notching&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 梯形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;trapezoid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 五边形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pentagon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 六边形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hexagon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 八边形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;octagon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- star --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;star&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 六角星 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sixstar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 八角星 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;eightstar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 十二角星 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twelvestar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 椭圆 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ellipse&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-三角形"><a href="#1-三角形" class="headerlink" title="1. 三角形"></a>1. 三角形</h4><p>通常会使用透明的border模拟出一个三角形：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.traingle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">50px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">50px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">100px</span> solid yellowgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape1.png"></p>
<h4 id="2-切角"><a href="#2-切角" class="headerlink" title="2. 切角"></a>2. 切角</h4><p>《CSS Secret》里面的方法，采用多重线性渐变实现切角。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.notching</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">135deg</span>, transparent <span class="number">15px</span>, yellowgreen <span class="number">0</span>) top left,</span><br><span class="line">        <span class="built_in">linear-gradient</span>(-<span class="number">135deg</span>, transparent <span class="number">15px</span>, yellowgreen <span class="number">0</span>) top right,</span><br><span class="line">        <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, transparent <span class="number">15px</span>, yellowgreen <span class="number">0</span>) bottom right,</span><br><span class="line">        <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, transparent <span class="number">15px</span>, yellowgreen <span class="number">0</span>) bottom left;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape2.png"></p>
<h4 id="3-梯形"><a href="#3-梯形" class="headerlink" title="3. 梯形"></a>3. 梯形</h4><p>利用伪元素加旋转透视实现梯形：</p>
<p><img data-src="shape3.png"></p>
<h4 id="4-五边形"><a href="#4-五边形" class="headerlink" title="4. 五边形"></a>4. 五边形</h4><p>梯形加上三角形，很容易就组合成一个五边形，这里需要借助一个伪元素实现：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.pentagon</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">60px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">40px</span> solid transparent; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pentagon</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">60px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">70px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">70px</span> solid transparent;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape4.png"></p>
<h4 id="5-六边形"><a href="#5-六边形" class="headerlink" title="5. 六边形"></a>5. 六边形</h4><p>看看上面的梯形，如果两个反方向且底边同样大小的梯形，叠加在一起，是不是就能得到一个六边形</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.hexagon</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">120px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">60px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hexagon</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">60px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><img data-src="shape5.png"></p>
<h4 id="6-八边形"><a href="#6-八边形" class="headerlink" title="6. 八边形"></a>6. 八边形</h4><p>六边形都解决了，八边形也不在话下，一个矩形加上两个梯形，可以合成一个八边形。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.octagon</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.octagon</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">30px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.octagon</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">30px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape6.png"></p>
<h4 id="7-五角星"><a href="#7-五角星" class="headerlink" title="7. 五角星"></a>7. 五角星</h4><p>好的，探索完多边形，我们继续探索X角星——-这里使用 3 个三角形叠加旋转在一起实现。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.star</span> &#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">50px</span> <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">position</span>: relative;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">border-right</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line">   <span class="attribute">border-bottom</span>: <span class="number">70px</span>  solid yellowgreen;</span><br><span class="line">   <span class="attribute">border-left</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line">   <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">35deg</span>) <span class="built_in">scale</span>(.<span class="number">6</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.star</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">80px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">30px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">30px</span> solid transparent;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">65px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">35deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.star</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">color</span>: yellowgreen;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">105px</span>;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">70px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">70deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape7.png"></p>
<h4 id="8-六角星"><a href="#8-六角星" class="headerlink" title="8. 六角星"></a>8. 六角星</h4><p>六角星呢？想象一下，一个向上的三角形 ▲，叠加上一个向下的三角形 ▼，就可以得到一个六边形：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.sixstar</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">50px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">50px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">100px</span> solid yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sixstar</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">50px</span> solid transparen;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">50px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">100px</span> solid yellowgreen;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><img data-src="shape8.png"></p>
<h4 id="9-八角星"><a href="#9-八角星" class="headerlink" title="9. 八角星"></a>9. 八角星</h4><p>八角星呢？八个角那么多呢。其实使用两个矩形进行旋转拼接就可以了。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.eightstar</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.eightstar</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape9.png"></p>
<h4 id="10-十二角星"><a href="#10-十二角星" class="headerlink" title="10. 十二角星"></a>10. 十二角星</h4><p>好。最后多角星再来一个十二级角星。在八角星的基础上，再增加一个矩形，就能得到十二角啦。也就是要过第一个伪元素。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.twelvestar</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.twelvestar</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.twelvestar</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">60deg</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape10.png"></p>
<h4 id="11-椭圆"><a href="#11-椭圆" class="headerlink" title="11. 椭圆"></a>11. 椭圆</h4><p>最后，再来使用传统的方法画一个椭圆，过去 CSS3 画椭圆，基本上只能借助 border 实现。</p>
<p>这里使用 border 画一个蛋的形状：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.ellipse</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">160px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>` <span class="number">50%</span> <span class="number">50%</span> <span class="number">50%</span> / <span class="number">60%</span> <span class="number">60%</span> <span class="number">40%</span> <span class="number">40%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape11.png"></p>
<h4 id="12-爱心"><a href="#12-爱心" class="headerlink" title="12. 爱心"></a>12. 爱心</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#heart</span> &#123; </span><br><span class="line"><span class="attribute">position</span>: relative; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">90px</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#heart</span><span class="selector-pseudo">:before</span>, </span><br><span class="line"><span class="selector-id">#heart</span><span class="selector-pseudo">:after</span> &#123; </span><br><span class="line"><span class="attribute">position</span>: absolute; </span><br><span class="line"><span class="attribute">content</span>: <span class="string">&quot;&quot;</span>; </span><br><span class="line"><span class="attribute">left</span>: <span class="number">50px</span>; </span><br><span class="line"><span class="attribute">top</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">80px</span>; </span><br><span class="line"><span class="attribute">background</span>: red; </span><br><span class="line"><span class="attribute">-moz-border-radius</span>: <span class="number">50px</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">50px</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line"><span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-webkit-transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">-moz-transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">-ms-transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">-o-transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#heart</span><span class="selector-pseudo">:after</span> &#123; </span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-webkit-transform-origin</span>: <span class="number">100%</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">-moz-transform-origin</span>: <span class="number">100%</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">-ms-transform-origin</span>: <span class="number">100%</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">-o-transform-origin</span>: <span class="number">100%</span> <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">transform-origin </span>:<span class="number">100%</span> <span class="number">100%</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shape13.png"></p>
<h4 id="13-无穷大"><a href="#13-无穷大" class="headerlink" title="13. 无穷大"></a>13. 无穷大</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#infinity</span> &#123; </span><br><span class="line"><span class="attribute">position</span>: relative; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">212px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">100px</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#infinity</span><span class="selector-pseudo">:before</span>, </span><br><span class="line"><span class="selector-id">#infinity</span><span class="selector-pseudo">:after</span> &#123; </span><br><span class="line"><span class="attribute">content</span>: <span class="string">&quot;&quot;</span>; </span><br><span class="line"><span class="attribute">position</span>: absolute; </span><br><span class="line"><span class="attribute">top</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">60px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">60px</span>; </span><br><span class="line"><span class="attribute">border</span>: <span class="number">20px</span> solid red; </span><br><span class="line"><span class="attribute">-moz-border-radius</span>: <span class="number">50px</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">50px</span>; </span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">50px</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">50px</span>; </span><br><span class="line"><span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>); </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#infinity</span><span class="selector-pseudo">:after</span> &#123; </span><br><span class="line"><span class="attribute">left</span>: auto; </span><br><span class="line"><span class="attribute">right</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">-moz-border-radius</span>: <span class="number">50px</span> <span class="number">50px</span> <span class="number">50px</span> <span class="number">0</span>; </span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">50px</span> <span class="number">50px</span> <span class="number">50px</span> <span class="number">0</span>; </span><br><span class="line"><span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><img data-src="shape14.png"></p>
<h4 id="14-食逗人（Pac-Man）"><a href="#14-食逗人（Pac-Man）" class="headerlink" title="14. 食逗人（Pac-Man）"></a>14. 食逗人（Pac-Man）</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#pacman</span> &#123; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">0px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">0px</span>; </span><br><span class="line"><span class="attribute">border-right</span>: <span class="number">60px</span> solid transparent; </span><br><span class="line"><span class="attribute">border-top</span>: <span class="number">60px</span> solid red; </span><br><span class="line"><span class="attribute">border-left</span>: <span class="number">60px</span> solid red; </span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">60px</span> solid red; </span><br><span class="line"><span class="attribute">border-top-left-radius</span>: <span class="number">60px</span>; </span><br><span class="line"><span class="attribute">border-top-right-radius</span>: <span class="number">60px</span>; </span><br><span class="line"><span class="attribute">border-bottom-left-radius</span>: <span class="number">60px</span>; </span><br><span class="line"><span class="attribute">border-bottom-right-radius</span>: <span class="number">60px</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><img data-src="shape15.png"></p>
<h4 id="15-提示对话框"><a href="#15-提示对话框" class="headerlink" title="15. 提示对话框"></a>15. 提示对话框</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#talkbubble</span> &#123; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">120px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">80px</span>; </span><br><span class="line"><span class="attribute">background</span>: red; </span><br><span class="line"><span class="attribute">position</span>: relative; </span><br><span class="line"><span class="attribute">-moz-border-radius</span>: <span class="number">10px</span>; </span><br><span class="line"><span class="attribute">-webkit-border-radius</span>: <span class="number">10px</span>; </span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#talkbubble</span><span class="selector-pseudo">:before</span> &#123; </span><br><span class="line"><span class="attribute">content</span>:<span class="string">&quot;&quot;</span>; </span><br><span class="line"><span class="attribute">position</span>: absolute; </span><br><span class="line"><span class="attribute">right</span>: <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">top</span>: <span class="number">26px</span>; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">border-top</span>: <span class="number">13px</span> solid transparent; </span><br><span class="line"><span class="attribute">border-right</span>: <span class="number">26px</span> solid red; </span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">13px</span> solid transparent; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><img data-src="shape16.png"></p>
<h4 id="16-阴阳八卦"><a href="#16-阴阳八卦" class="headerlink" title="16. 阴阳八卦"></a>16. 阴阳八卦</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#yin-yang</span> &#123; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">96px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">48px</span>; </span><br><span class="line"><span class="attribute">background</span>: <span class="number">#eee</span>; </span><br><span class="line"><span class="attribute">border-color</span>: red; </span><br><span class="line"><span class="attribute">border-style</span>: solid; </span><br><span class="line"><span class="attribute">border-width</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">50px</span> <span class="number">2px</span>; </span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">position</span>: relative; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#yin-yang</span><span class="selector-pseudo">:before</span> &#123; </span><br><span class="line"><span class="attribute">content</span>: <span class="string">&quot;&quot;</span>; </span><br><span class="line"><span class="attribute">position</span>: absolute; </span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>; </span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>; </span><br><span class="line"><span class="attribute">background</span>: <span class="number">#eee</span>; </span><br><span class="line"><span class="attribute">border</span>: <span class="number">18px</span> solid red; </span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">100%</span>; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">12px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">12px</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#yin-yang</span><span class="selector-pseudo">:after</span> &#123; </span><br><span class="line"><span class="attribute">content</span>: <span class="string">&quot;&quot;</span>; </span><br><span class="line"><span class="attribute">position</span>: absolute; </span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>; </span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>; </span><br><span class="line"><span class="attribute">background</span>: red; </span><br><span class="line"><span class="attribute">border</span>: <span class="number">18px</span> solid <span class="number">#eee</span>; </span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">100%</span>; </span><br><span class="line"><span class="attribute">width</span>: <span class="number">12px</span>; </span><br><span class="line"><span class="attribute">height</span>: <span class="number">12px</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><img data-src="shape17.png"></p>
<h3 id="CSS3新绘制方式"><a href="#CSS3新绘制方式" class="headerlink" title="CSS3新绘制方式"></a>CSS3新绘制方式</h3><blockquote>
<p>上面所讲述的是使用传统 CSS3 的方式绘制几何图形，前人栽树后人乘凉，之前的大牛们在 CSS 绘制几何图形上已经做了非常深入的研究，更多的 CSS 图形你可以戳这里：The Shapes of CSS 。接下来我们将要了解一些更高级的绘制几何图形的方法。</p>
</blockquote>
<ul>
<li>clip-path</li>
<li>shape-outside</li>
</ul>
<h4 id="1-clip-path"><a href="#1-clip-path" class="headerlink" title="1. clip-path"></a>1. clip-path</h4><p>CSS 新属性 <code>clip-path</code>，意味裁剪路径的意思，让我们可以很便捷的生成各种几何图形。</p>
<p>clip-path 通过定义特殊的路径，实现我们想要的图形。而这个路径，正是 SVG 中的 path 。</p>
<p>看看它的 API：</p>
<p><img data-src="ref1.png"></p>
<p>看上去很多，其实很好理解，如果接触过 SVG 的 path，其实就是照搬 SVG 的 path 的一些定义。换言之，如果没有接触过 SVG，看完本文后再去学习 SVG 路径 ，也会十分容易上手。</p>
<p>根据不同的语法，我们可以生成不同的图形。</p>
<p>例如 <code>clip-path: circle(50px at 50px 50px)</code> 表示在元素的 （50px, 50px）处，裁剪生成一个半径为 50px 的圆。</p>
<p>而整个 <code>clip-path</code> 属性，最为重要的当属 <code>polygon</code>，可以利用 <code>polygon</code> 生成任意多边形。clip-path 示例</p>
<p>下面分别列举使用 clip-path 生成一个圆形和一个十边形。</p>
<p><img data-src="shape12.png"></p>
<p> <code>clip-path: polygon(50% 0%, 80% 10%, 100% 35%, 100% 70%, 80% 90%, 50% 100%, 20% 90%, 0% 70%, 0% 35%, 20% 10%)</code> 中，依次列出了 10 个坐标点。我们的图形就是依次连接这 10 个坐标点形成一个裁切图形。</p>
<p>当然，这里采用的是百分比，也可以使用具体的数值。</p>
<h4 id="2-clip-path-动画"><a href="#2-clip-path-动画" class="headerlink" title="2. clip-path 动画"></a>2. clip-path 动画</h4><p>clip-path 另外一个强大之处在于可以进行 CSS transtion 与 CSS animation，也就是过渡和动画。</p>
<p>效果见<a href="https://codepen.io/Chokcoco/pen/LLNWyZ?editors=1100">这儿</a></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">.polygon-animate</span> &#123;</span><br><span class="line">    <span class="attr">position:</span> <span class="string">absolute;</span></span><br><span class="line">    <span class="attr">width:</span> <span class="string">200px;</span></span><br><span class="line">    <span class="attr">height:</span> <span class="string">200px;</span></span><br><span class="line">    <span class="attr">top:</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    <span class="attr">left:</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    <span class="attr">transform:</span> <span class="string">translate(-50%</span>, <span class="number">-50</span><span class="string">%);</span></span><br><span class="line">    <span class="attr">background-color:</span> <span class="string">crimson;</span></span><br><span class="line">    <span class="attr">transition:</span> <span class="string">.3s;</span></span><br><span class="line">    <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">        <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">0</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">        <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span></span><br><span class="line">    <span class="string">);</span></span><br><span class="line">    <span class="attr">animation:</span> <span class="string">polygon-ani</span> <span class="string">5s</span> <span class="string">linear</span> <span class="string">infinite;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">@keyframes</span> <span class="string">polygon-ani</span> &#123;</span><br><span class="line">    <span class="number">10</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-color:</span> <span class="string">darkorange;</span></span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">14</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">50</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">24</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-color:</span> <span class="string">lemonchiffon;</span></span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">82</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">82</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">18</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">28</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">82</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">82</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">18</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">38</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">38</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-color:</span> <span class="string">darkturquoise;</span></span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">25</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">25</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">25</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">42</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">25</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">75</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">25</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">25</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">52</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-color:</span> <span class="string">darkcyan;</span></span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">90</span><span class="string">%</span> <span class="number">20</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">60</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">75</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">25</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">25</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">60</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">10</span><span class="string">%</span> <span class="number">20</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">56</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">90</span><span class="string">%</span> <span class="number">20</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">60</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">75</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">25</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">25</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">60</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">10</span><span class="string">%</span> <span class="number">20</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">66</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-color:</span> <span class="string">deepskyblue;</span></span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">30</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">70</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">70</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">30</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">70</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">70</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">30</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">70</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">30</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">70</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">30</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">70</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">70</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">30</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">70</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">70</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">30</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">70</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">30</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">80</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-color:</span> <span class="string">indigo;</span></span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">83</span><span class="string">%</span> <span class="number">12</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">43</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">94</span><span class="string">%</span> <span class="number">78</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">68</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">32</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">6</span><span class="string">%</span> <span class="number">78</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">43</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">17</span><span class="string">%</span> <span class="number">12</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">84</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">83</span><span class="string">%</span> <span class="number">12</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">43</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">94</span><span class="string">%</span> <span class="number">78</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">68</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">32</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">6</span><span class="string">%</span> <span class="number">78</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">43</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">17</span><span class="string">%</span> <span class="number">12</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">94</span><span class="string">%</span> &#123;</span><br><span class="line">        <span class="attr">background-color:</span> <span class="string">crimson;</span></span><br><span class="line">        <span class="attr">clip-path:</span> <span class="string">polygon(</span></span><br><span class="line">            <span class="number">50</span><span class="string">%</span> <span class="number">0</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">0</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span>,</span><br><span class="line">            <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%</span></span><br><span class="line">        <span class="string">);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>图形变换动画</strong></p>
<p>除此之外，我们还可以尝试，将一个完整的图形，分割成多个小图形，这也是 <code>clip-path</code> 的魅力所在，纯 CSS 的图形变换：</p>
<p><a href="https://codepen.io/Chokcoco/pen/yXOjZm">多边形切换传送门</a></p>
<p><a href="https://codepen.io/Chokcoco/pen/XgJRzO">N边形切换传送门</a></p>
<p><a href="https://codepen.io/Chokcoco/pen/NgqGOo">VueN边形切换</a></p>
<h4 id="3-shape-outside"><a href="#3-shape-outside" class="headerlink" title="3. shape-outside"></a>3. shape-outside</h4><p>最后再来看看 <code>shape-outside</code>，另外一个有趣的有能力生成几何图形的属性。</p>
<p><code>shape-outside</code> 是啥？它也有制造各种几何图形的能力，但是它只能和浮动 <code>float</code> 一起使用。</p>
<p>虽然使用上有所限制，但是它赋予了我们一种更为自由的图文混排的能力。</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/shape-outside">MDN文档传送门</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 小知识点汇总</title>
    <url>/2020/09/17/css-knowledge-points-summary/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT-OUTLINE"></a>CONTENT-OUTLINE</h2><blockquote>
<p>汇总一些日常碰见的<code>CSS</code>小问题</p>
<p>–  盒子模型 <code>box-size</code></p>
<p>–  CSS <code>BFC</code></p>
<p>–  使用外部字体<code>@Font-Face</code></p>
<p>–  禁用输入法<code>（chrome、opera、Safari尚未支持）</code></p>
<p>–  高度塌陷问题</p>
<p>–  <code>margin-top</code>失效问题</p>
</blockquote>
<a id="more"></a>

<h2 id="一、盒子模型"><a href="#一、盒子模型" class="headerlink" title="一、盒子模型"></a>一、盒子模型</h2><p><strong>定义：</strong><code>box-sizing</code>  允许您以特定的方式定义匹配某个区域的特定元素(W3C上的原话 )</p>
<p><strong>语法：</strong>box-sizing:content-box|border-box</p>
<p><code>content-box:</code></p>
<p>宽度和高度分别应用到元素的内容框。</p>
<p>在宽度和高度之外绘制元素的内边距和边框。</p>
<p><code>border-box:</code></p>
<p>为元素设定的宽度和高度决定了元素的边框盒。</p>
<p>就是说，为元素指定的任何内边距和边框都将在已设定的宽度和高度内进行绘制。</p>
<p>通过从已设定的宽度和高度分别减去边框和内边距才能得到内容的宽度和高度。</p>
<p><img data-src="css-box-sizing.png"></p>
<p><strong>浏览器兼容性：</strong></p>
<p><code>Internet Explorer</code>、<code>Opera</code> 以及 <code>Chrome</code> 支持 box-sizing 属性。</p>
<p><code>Firefox</code> 支持替代的 -moz-box-sizing 属性。</p>
<p><strong>个人理解：</strong></p>
<p>content-box:</p>
<blockquote>
<p>padding值和border值不计算到内容（content）的宽度之内</p>
<p>即：一个盒子模型的总宽度=margin+padding+border+width;</p>
</blockquote>
<p>border-box:</p>
<blockquote>
<p>content的值包含了padding值和border值</p>
<p>即：一个盒子的总宽度=margin+width.</p>
</blockquote>
<h2 id="二、CSS-BFC"><a href="#二、CSS-BFC" class="headerlink" title="二、CSS  BFC"></a>二、CSS  BFC</h2><blockquote>
<p><a href="https://www.jianshu.com/p/828023418450">原文传送门</a></p>
</blockquote>
<p><code>block formatting context </code> 块级格式化上下文<br><code>BFC</code>  是一个独立的渲染区域，只有block-level box参与，它规定了内部的block-level box如何布局，并且与这个区域外部毫不相干。<br><code>BFC</code>  就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之也如此，包括浮动和外边距合并等等，有了这个特性我们布局的时候就不会出现意外情况了。</p>
<h3 id="哪些元素会产生BFC"><a href="#哪些元素会产生BFC" class="headerlink" title="哪些元素会产生BFC"></a>哪些元素会产生BFC</h3><p><code>display</code>属性为<code>block</code>、<code>list-item</code>、<code>table</code>的元素，会产生<code>BFC</code>  。（最常用的就是块级元素）</p>
<h3 id="什么情况下会触发BFC"><a href="#什么情况下会触发BFC" class="headerlink" title="什么情况下会触发BFC"></a>什么情况下会触发BFC</h3><ol>
<li>设置了float属性，并且不为none</li>
<li>position属性为absolute或fixed</li>
<li>display为<code>inline-block</code>、<code>table-cell</code>、<code>table-caption</code>、<code>flex</code>、<code>inline-flex</code></li>
<li>overflow 除了 visible 以外的值<code>（hidden，auto，scroll）</code></li>
</ol>
<h3 id="BFC元素所具有的特性"><a href="#BFC元素所具有的特性" class="headerlink" title="BFC元素所具有的特性"></a>BFC元素所具有的特性</h3><ol>
<li>在bfc中，盒子从顶端开始垂直地一个接一个的排列；</li>
<li>盒子垂直方向的距离由margin决定，<strong>属于同一个BFC的盒子的margin会重叠；</strong></li>
<li>在bfc中，每一个盒子的左边缘会触碰到父容器的左边缘内部，也就是说在没有margin和padding时，父border的内边和子border的外边重叠；</li>
<li>bfc的区域不会与浮动盒子产生交集，而是紧贴浮动边缘；</li>
<li><strong>如果父盒子没有设置高度，但子盒子中有浮动元素，那么在计算bfc的高度时， 会计算上浮动盒子的高度。</strong></li>
</ol>
<h4 id="特性解读"><a href="#特性解读" class="headerlink" title="特性解读"></a>特性解读</h4><h5 id="第二条解读"><a href="#第二条解读" class="headerlink" title="第二条解读"></a>第二条解读</h5><p>在常规文档流中，两个兄弟盒子之间的垂直距离是由他们的外边距所决定的，但不是他们的两个外边距之和，而是以较大的为准。</p>
<p><img data-src="css-bfc-6.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 这里我门可以看到，第一个子盒子有上边距（不会发生margin穿透的问题）；两个子盒子的垂直距离为20px而不是30px，因为垂直外边距会折叠，间距以较大的为准。</p>
<p> 那么有没有方法让垂直外边距不折叠呢？答案是：有。特性的第5条就说了：bfc就是页面上的一个独立容器，容器里面的子元素不会影响外面元素，同样外面的元素不会影响到BFC内的元素。所以就让box1或box2再处于另一个BFC中就行了。</p>
<p><img data-src="css-bfc-7.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="BFC的主要用途"><a href="#BFC的主要用途" class="headerlink" title="BFC的主要用途"></a>BFC的主要用途</h3><h4 id="1-清除元素内部浮动"><a href="#1-清除元素内部浮动" class="headerlink" title="1. 清除元素内部浮动    "></a>1. 清除元素内部浮动    <i class="fas fa-star" style="color:#e97171"></i></h4><p>    只要把父元素设置为 <code>BFC</code> 就可以清除子元素的浮动，最常见的就是给父元素添加<code>overflow：hidden</code>属性。<br>    <strong>其实我有一段时间不是很明白“清除子元素浮动”这句话，人家设置的好好的浮动，你干嘛给人家清除呢，那不就是不生效了么？其实清除浮动的意思不是清除你设置的元素的浮动属性，而是清除设置了浮动属性之后给别的元素带来的影响。</strong>举个栗子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.son1</span>, <span class="selector-class">.son2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.son2</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: purple;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正常情况下的样子是上下块撑开父元素的高度</p>
<p><img data-src="css-bfc-1.png"></p>
<p>当给两个子元素设置了float属性之后，子元素不再占据父元素的空间，此时父元素的高度就为0</p>
<p><img data-src="css-bfc-2.png"></p>
<p>当设置父元素 <code>BFC</code> 后，此时就清除了子元素浮动带来的影响，什么影响呢，就是不撑开父元素的高度的影响，那么父元素的高度就是子元素的高度</p>
<blockquote>
<p>为父元素添加  <code>overflow: hidden;</code></p>
</blockquote>
<p><img data-src="css-bfc-3.png"></p>
<h4 id="2-解决外边距合并问题"><a href="#2-解决外边距合并问题" class="headerlink" title="2. 解决外边距合并问题"></a>2. 解决外边距合并问题</h4><p>我们知道，两个盒子在一起时，当有相邻的外边距时，会取外边距较大的那一个，也就是外边距会合并，但这种情况只发生在同属一个bfc的两个盒子中间，换言之，要想解决外边距合并问题，只要把两个盒子放在不同的<code>BFC</code>中即可。</p>
<h4 id="3-制作右侧盒子自适应宽度的问题"><a href="#3-制作右侧盒子自适应宽度的问题" class="headerlink" title="3. 制作右侧盒子自适应宽度的问题"></a>3. 制作右侧盒子自适应宽度的问题</h4><p><strong>左侧盒子宽度固定，右侧宽度不固定</strong>：当在父元素中只设定一个盒子浮动，另一个不浮动时，会造成第二个盒子在第一个盒子的下方，被覆盖掉一部分（但文字不会被覆盖）。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.father2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.s2</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: purple;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="css-bfc-4.png"></p>
<p>给第2个元素设定  <code>BFC</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.s2</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: purple;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">    <span class="attribute">word-break</span>: break-all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="css-bfc-5.png"></p>
<p>当增加第一个块的宽度时，第二个块的宽度会自动缩小，实现宽度自适应。</p>
<h2 id="三、使用外部字体"><a href="#三、使用外部字体" class="headerlink" title="三、使用外部字体"></a>三、使用外部字体</h2><p>先说自己遇到的问题：有个vue项目需要用给定的字体包，一直不能正确显示</p>
<p>刚开始的时候，字体包 是放在<code>public</code>下，并在<code>src</code>中的 <code>css文件</code>中使用绝对路径引用，像这样</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span>&#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;MHei-PRC-Heavy&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;/public/fonts/MHeiPRC-Heavy.ttf&quot;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="font-face-1.png"></p>
<p>但一直报错</p>
<p><img data-src="font-face-2.png"></p>
<p>后来的<strong>解决办法</strong>是 把<code>fonts文件</code>移到<code>asset</code>中，然后在引用时候使用<code>相对路径</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span>&#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;MHei-PRC-Heavy&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;../assets/fonts/MHeiPRC-Heavy.ttf&quot;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外，在<code>@font-face</code>中使用<code>font-weight</code>不生效（未解决）</p>
<p>下面是关于<code>@font-face</code>的内容  <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@font-face">MDN文档</a></p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><blockquote>
<p>参考自 <a href="https://www.jianshu.com/p/2fb8ef458400">font-face 详解</a></p>
</blockquote>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  [ font-family: &lt;family-name&gt;; ] ||</span><br><span class="line">  [ src: &lt;src&gt;; ] ||</span><br><span class="line">  [ unicode-range: &lt;unicode-range&gt;; ] ||</span><br><span class="line">  [ font-variant: &lt;font-variant&gt;; ] ||</span><br><span class="line">  [ font-feature-settings: &lt;font-feature-settings&gt;; ] ||</span><br><span class="line">  [ font-variation-settings: &lt;font-variation-settings&gt;; ] ||</span><br><span class="line">  [ font-stretch: &lt;font-stretch&gt;; ] ||</span><br><span class="line">  [ font-weight: &lt;font-weight&gt;; ] ||</span><br><span class="line">  <span class="selector-attr">[ font-style: &lt;font-style&gt;; ]</span></span><br><span class="line">&#125;where &lt;family-name&gt; = &lt;string&gt; | &lt;custom-ident&gt;+</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: &lt;webFontName&gt;;</span><br><span class="line">    <span class="attribute">src</span>: &lt;source&gt; [&lt;format&gt;][,&lt;source&gt; [&lt;format&gt;]]*;</span><br><span class="line">    [font-weight: &lt;weight&gt;];</span><br><span class="line">    <span class="selector-attr">[font-style: &lt;style&gt;]</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>webFontName</code>: 引入的自定义字体名称，将会为指定的元素添加 <code>font-family: webFontName</code></p>
</li>
<li><p><code>source</code>: 字体路径</p>
</li>
<li><p><code>format</code>: 字体格式，用于帮助浏览器识别</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="literal">true</span>type  opentype  <span class="literal">true</span>type-aat   embedded-opentype   svg …</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>weight</code>: 字体是否粗体</p>
</li>
<li><p><code>style</code>: 字体样式</p>
</li>
</ul>
<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><ol>
<li><code>truetype - ttf</code><ul>
<li>Windows 和 Mac 最常见字体</li>
<li>RAW 格式，不为任何网站优化</li>
<li>IE9+、Firefox3.5+、Chrome4+、Safari3+、Opera10+、iOS Mobile Safari4.2+</li>
</ul>
</li>
<li><code>opentype - otf</code><ul>
<li>原始字体格式，内置在 truetype 基础之上</li>
<li>提供更多功能</li>
<li>Firefox3.5+、Chrome4.0+、Safari3.1+、Opera10.0+、iOS Mobile Safari4.2+</li>
</ul>
</li>
<li><code>web-open-font-format - woff</code><ul>
<li>Web 字体最佳格式</li>
<li>是一个开放的 truetype、opentype 压缩版本</li>
<li>支持元数据包的分离</li>
<li>IE9+、Firefox3.5+、Chrome6+、Safari3.6+、Opera11.1+</li>
</ul>
</li>
<li><code>embedded-opentype - eot</code><ul>
<li>IE 专用字体</li>
<li>可以从 truetype 创建此格式</li>
<li>IE4+</li>
</ul>
</li>
<li><code>svg - svg</code><ul>
<li>基于 svg 渲染</li>
<li>Chrome4+、Safari3.1+、Opera10.0+、iOS Mobile Safari3.2+</li>
</ul>
</li>
</ol>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li>获取自定义字体的原始文件，可前往 <a href="https://www.dafont.com/">DaFont</a> 下载</li>
<li>在 <a href="https://www.fontsquirrel.com/fontface/generator">Font Squirrel</a> 将字体转换为兼容各浏览器的 Web 字体</li>
<li>按上述兼容性语法指定 @font-face 中的字体</li>
<li>在指定元素中调用该自定义字体</li>
</ul>
<h3 id="使用注意"><a href="#使用注意" class="headerlink" title="使用注意"></a>使用注意</h3><h4 id="1-字体文件名简写"><a href="#1-字体文件名简写" class="headerlink" title="1. 字体文件名简写"></a>1. 字体文件名简写</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">　　<span class="attribute">font-family</span>: <span class="string">&#x27;YT&#x27;</span>;   <span class="comment">/*声明一个名为yt的字体变量*/</span></span><br><span class="line">　　<span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;YourWebFontName.eot&#x27;</span>)，<span class="built_in">local</span>(<span class="string">&#x27;YourFontName.eot&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">// 然后在任何需要使用YT字体的地方就可以直接使用以下：</span><br><span class="line"><span class="selector-tag">h1</span>&#123;<span class="attribute">font-family</span>:YT;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong></p>
<ul>
<li><code>src</code>属性定义字体的下载地址，<code>local</code>表示本机地址，<code>url</code>表示网址（比如使用服务器上下载的字体）</li>
<li>如果在<code>src</code>上定义了多种字体，他们也是候选关系，如上段代码</li>
<li>如果修改了src中定义的字体或者顺序，一定要关闭浏览器再打开才能看到修改后的效果，刷新是看不到的</li>
<li>在<code>@font-face</code>规则中,font-family的作用是声明字体变量，与普通选择器中的font-family是不一样的。</li>
</ul>
<h4 id="2-使用服务端字体"><a href="#2-使用服务端字体" class="headerlink" title="2. 使用服务端字体"></a>2. 使用服务端字体</h4><p>在<code>@font-face</code>规则中，如果src属性定义的字体是一个<code>url路径</code>，则网页加载时会自动从服务器下载字体文件，再显示出来。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;FZCYS&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;FZYaSongA-B-GB&#x27;</span>);</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;YourWebFontName.eot&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-font-face浏览器兼容"><a href="#3-font-face浏览器兼容" class="headerlink" title="3. @font-face浏览器兼容"></a>3. <code>@font-face</code>浏览器兼容</h4><p>由于每种浏览器对@font-face的兼容性不同，不同的浏览器对字体的支持格式不同，这就意味着在<code>@font-face</code>中我们至少需要.woff,.eot两种格式字体，甚至还需要.svg等字体达到更多种浏览版本的支持。</p>
<ul>
<li><code>.TTF</code>或<code>.OTF</code>，适用于Firefox 3.5、Safari、Opera；</li>
<li><code>.EOT</code>  适用于Internet Explorer 4.0+；</li>
<li><code>.SVG</code>  适用于Chrome、IPhone， 获取要使用字体的三种文件格式，确保能在主流浏览器中都能正常显示该字体。</li>
</ul>
<p>使用CSS3的<code>@font-face</code>属性可以实现在网页中嵌入任意字体，但是IE只支持微软自有的EOT格式字体，而其他浏览器都不支持这一字体格式，其它浏览器可以设置TTF(TrueType)和OTF(OpenType)两种字体作为自定义字体</p>
<p>下面要解决的是如何获取到某种字体的这三种格式文件。一般地，我们在手头上（或在设计资源站点已经找到）有该字体的某种格式文件，最常见的是.TTF 文件，我们需要通过这种文件格式转换为其余两种文件格式。字体文件格式的转换可以通过网站<a href="https://www.fontsquirrel.com/tools/webfont-generator">FontsQuirrel</a>或 onlinefontconverter提供的在线字体转换服务获取。获取到三种格式的字体文件后，</p>
<p>下一步要在样式表中声明该字体，并在需要的地方使用该字体。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&#x27;YourWebFontName&#x27;</span>;</span><br><span class="line"><span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;YourWebFontName.eot&#x27;</span>); <span class="comment">/* IE9 Compat Modes */</span></span><br><span class="line"><span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;YourWebFontName.eot?#iefix&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>), <span class="comment">/* IE6-IE8 */</span></span><br><span class="line">     <span class="built_in">url</span>(<span class="string">&#x27;YourWebFontName.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>), <span class="comment">/* Modern Browsers */</span></span><br><span class="line">     <span class="built_in">url</span>(<span class="string">&#x27;YourWebFontName.ttf&#x27;</span>)  <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>), <span class="comment">/* Safari, Android, iOS */</span></span><br><span class="line">     <span class="built_in">url</span>(<span class="string">&#x27;YourWebFontName.svg#YourWebFontName&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;svg&#x27;</span>); <span class="comment">/* Legacy iOS */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四、禁用输入法"><a href="#四、禁用输入法" class="headerlink" title="四、禁用输入法"></a>四、禁用输入法</h2><h3 id="1-CSS3-ime-mode"><a href="#1-CSS3-ime-mode" class="headerlink" title="1. CSS3   ime-mode"></a>1. CSS3   <code>ime-mode</code></h3><blockquote>
<p>IE浏览器从IE5开始就支持该属性，FireFox浏览器从FireFox3.0开始也支持该ime-mode属性。不过chrome、opera、Safari浏览器还没有开始支持该属性。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">名称:</th>
<th>ime-mode</th>
</tr>
</thead>
<tbody><tr>
<td align="left">值:</td>
<td>auto | normal | active | inactive | disabled | inherit</td>
</tr>
<tr>
<td align="left">初始值:</td>
<td>auto</td>
</tr>
<tr>
<td align="left">应用元素:</td>
<td>text fields（文本字段）</td>
</tr>
<tr>
<td align="left">继承性:</td>
<td>no</td>
</tr>
</tbody></table>
<ul>
<li>auto : 默认值，不影响当前输入法编辑器的状态 </li>
<li>normal : 输入法编辑器的状态应该是normal，这个值可以用于用户样式表来覆盖页面的设置。IE浏览器不支持该属性 </li>
<li>active : 输入法编辑器的状态初始时是激活的；输入将一直使用该输入法直到用户切换输入法。该属性在Linux操作系统下不支持 </li>
<li>inactive : 输入法编辑器的状态初始时是非激活状态；除非用户激活输入法 </li>
<li>disabled : 禁用输入法编辑器；该输入法编辑器也许不会被用户激活 </li>
</ul>
<h3 id="2-替代方法"><a href="#2-替代方法" class="headerlink" title="2. 替代方法"></a>2. 替代方法</h3><p>由于第一种方法不被广泛支持，因此另一种方法就是  <strong>使用<code>readonly</code>禁止掉文本框弹出输入法</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;selectCarBtn&quot;</span> <span class="attr">readonly</span>=<span class="string">&quot;readonly&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入车牌号&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="五、高度塌陷"><a href="#五、高度塌陷" class="headerlink" title="五、高度塌陷"></a>五、高度塌陷</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>高度塌陷问题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.div-outer</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">border</span>: <span class="selector-tag">solid</span> 2<span class="selector-tag">px</span> <span class="selector-id">#223344</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.div1</span> &#123;</span></span><br><span class="line">                width: 200px;</span><br><span class="line">                height: 100px;</span><br><span class="line"><span class="css">                <span class="selector-tag">border</span>: <span class="selector-tag">solid</span> 2<span class="selector-tag">px</span> <span class="selector-id">#667788</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line">                width: 200px;</span><br><span class="line">                height: 100px;</span><br><span class="line"><span class="css">                <span class="selector-tag">border</span>: <span class="selector-tag">solid</span> 2<span class="selector-tag">px</span> <span class="selector-id">#667788</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.div3</span> &#123;</span></span><br><span class="line">                width: 200px;</span><br><span class="line">                height: 100px;</span><br><span class="line"><span class="css">                <span class="selector-tag">border</span>: <span class="selector-tag">solid</span> 2<span class="selector-tag">px</span> <span class="selector-id">#667788</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div-outer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div1&quot;</span>&gt;</span>div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div2&quot;</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div3&quot;</span>&gt;</span>div3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>页面效果如下：</p>
<p><img data-src="css-gdtx-0.jpg"></p>
<p>在div-outer内部的三个div默认每个div会占一行，所以三个div会成列显示。</p>
<hr>

<p>现在对div1设置<code>float: left</code>，页面如图所示</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*操作一*/</span></span><br><span class="line"><span class="selector-class">.div1</span>&#123; <span class="attribute">float</span>: left; &#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="css-gdtx-2.png"></p>
<p>可以看到div2和div3重合了</p>
<hr>

<p>对div1设置float: left属性，div1脱离文档流，但是仍占据位置，div2和div3重合是因为div2位置不变，div3也在div2的位置。但是发现这样理解是不对的，正确的理解是<strong>div2被div1挤到了现在div3的位置</strong>。</p>
<p>因为如果对div1设置<code>float: right</code>，页面如图所示</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*操作二*/</span></span><br><span class="line"><span class="selector-class">.div1</span>&#123; <span class="attribute">float</span>: right; &#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="css-gdtx-1.png"></p>
<p>所以如果对div1设置float: left时，div2会被div1挤到现在div3的位置。</p>
<h3 id="对css高度塌陷问题的理解"><a href="#对css高度塌陷问题的理解" class="headerlink" title="对css高度塌陷问题的理解"></a>对css高度塌陷问题的理解</h3><p>如果对div1，div2，div3都设置float: left，但是父元素div-outer没有设置宽度和高度，页面如图所示</p>
<p><img data-src="css-gdtx-3.png"></p>
<p>如果没有设置父元素高度，父元素的高度默认是auto，会随子元素的高度而改变，如果对div1，div2，div3都设置float: left，那么此时父元素高度为0，这就是<strong>浮动塌陷</strong>。</p>
<p><strong>解决办法一：添加一个新的div</strong></p>
<p>设置该div为 <code>clear：both;</code>  的空div</p>
<p><strong>解决办法二：设置父元素属性</strong></p>
<p>对父元素设置属性overflow: hidden或overflow: auto，</p>
<p>设置overflow: hidden的意思是，overflow规定当内容溢出元素框时发生的事情</p>
<p><img data-src="css-gdtx-4.png"></p>
<p>因为父元素没有指定高度，默认是auto，所以需要计算父元素包含的内容的高度，这样子元素浮动的高度就被计算进去，解决了浮动塌陷。</p>
<p><strong>解决办法三：设置父元素display:table</strong></p>
<p><strong>解决办法四：内墙法</strong></p>
<h2 id="六、margin-top失效问题"><a href="#六、margin-top失效问题" class="headerlink" title="六、margin-top失效问题"></a>六、<code>margin-top</code>失效问题</h2><h3 id="现象："><a href="#现象：" class="headerlink" title="现象："></a>现象：</h3><p>当两个空的块级元素嵌套时，如果内部的块设置有margin-top属性，而且父元素没有下边解决方法所述的特征，那么内部块的margin-top属性会绑架父元素（即将margin-top传递凌驾给了父元素）。</p>
<blockquote>
<p>就好比一个小兵，看到上级有漏洞，就假传圣旨，利用漏洞扩张自己的权利。只要设置父元素的border（栅栏）或者padding（隔离墙），就能管住这个调皮的下属。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parrent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#parrent</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">width</span><span class="selector-pseudo">:500px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">height</span><span class="selector-pseudo">:300px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background</span><span class="selector-pseudo">:teal</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-id">#box1</span>&#123; </span></span><br><span class="line"><span class="css">    <span class="selector-tag">width</span><span class="selector-pseudo">:100px</span>; </span></span><br><span class="line"><span class="css">    <span class="selector-tag">height</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background</span><span class="selector-pseudo">:aqua</span>; </span></span><br><span class="line"><span class="css">    <span class="selector-tag">margin</span><span class="selector-pseudo">:20px</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img data-src="css-margin-1.png"></p>
<p><strong>这个现象并不是bug，而是有理论依据的</strong>：</p>
<blockquote>
<p>《on having layout》</p>
</blockquote>
<p><code>hasLayout</code> 会影响一个盒子和其子孙的边距重叠。<strong>根据规范，一个盒子如果没有上补白和上边框，那么它的上边距应该和其文档流中的第一个孩子元素的上边距重叠。</strong></p>
<p>但值得一提的是，只有在<code>Fire Fox</code>和<code>Chrome</code>下才会出现这种margin-top绑架父节点的情况，在IE6 IE7中均显示正常，但这恰恰说明了他们是不符合规范的，而FF合Chrome则是严格遵守规范的。</p>
<h3 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h3><ol>
<li>设置父元素或者自身的display:inline-block;</li>
<li><strong>设置父元素的border</strong>:1px aqua solid;(&gt;0)</li>
<li><strong>设置父元素的padding</strong>:1px;(&gt;0)</li>
<li>给父元素设置overflow:hidden;</li>
<li>给父元素或者自身设置position:absolute;</li>
<li>设置父元素非空，填充一定的内容。</li>
</ol>
<h2 id="七、css-overflow-隐藏滚动条"><a href="#七、css-overflow-隐藏滚动条" class="headerlink" title="七、css overflow 隐藏滚动条"></a>七、<code>css overflow</code> 隐藏滚动条</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#fuchuang-3</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1080px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1920px</span>;</span><br><span class="line">  <span class="attribute">transform-origin</span>: left top;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  ......</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#fuchuang-3</span><span class="selector-pseudo">::-webkit-scrollbar</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="八、base64格式"><a href="#八、base64格式" class="headerlink" title="八、base64格式"></a>八、<code>base64</code>格式</h2><blockquote>
<p><a href="https://www.cnblogs.com/Renyi-Fan/p/9588306.html">大佬文章传送门</a></p>
<p>图片转<code>base64</code>格式工具  <strong>FeHelper</strong></p>
</blockquote>
<h3 id="1、Base64编码表"><a href="#1、Base64编码表" class="headerlink" title="1、Base64编码表"></a>1、Base64编码表</h3><table>
<thead>
<tr>
<th>码值</th>
<th>字符</th>
<th>码值</th>
<th>字符</th>
<th>码值</th>
<th>字符</th>
<th>码值</th>
<th>字符</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>A</td>
<td>16</td>
<td>Q</td>
<td>32</td>
<td>g</td>
<td>48</td>
<td>w</td>
</tr>
<tr>
<td>1</td>
<td>B</td>
<td>17</td>
<td>R</td>
<td>33</td>
<td>h</td>
<td>49</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>C</td>
<td>18</td>
<td>S</td>
<td>34</td>
<td>i</td>
<td>50</td>
<td>y</td>
</tr>
<tr>
<td>3</td>
<td>D</td>
<td>19</td>
<td>T</td>
<td>35</td>
<td>j</td>
<td>51</td>
<td>z</td>
</tr>
<tr>
<td>4</td>
<td>E</td>
<td>20</td>
<td>U</td>
<td>36</td>
<td>k</td>
<td>52</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>F</td>
<td>21</td>
<td>V</td>
<td>37</td>
<td>l</td>
<td>53</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>G</td>
<td>22</td>
<td>W</td>
<td>38</td>
<td>m</td>
<td>54</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>H</td>
<td>23</td>
<td>X</td>
<td>39</td>
<td>n</td>
<td>55</td>
<td>3</td>
</tr>
<tr>
<td>8</td>
<td>I</td>
<td>24</td>
<td>Y</td>
<td>40</td>
<td>o</td>
<td>56</td>
<td>4</td>
</tr>
<tr>
<td>9</td>
<td>J</td>
<td>25</td>
<td>Z</td>
<td>41</td>
<td>p</td>
<td>57</td>
<td>5</td>
</tr>
<tr>
<td>10</td>
<td>K</td>
<td>26</td>
<td>a</td>
<td>42</td>
<td>q</td>
<td>58</td>
<td>6</td>
</tr>
<tr>
<td>11</td>
<td>L</td>
<td>27</td>
<td>b</td>
<td>43</td>
<td>r</td>
<td>59</td>
<td>7</td>
</tr>
<tr>
<td>12</td>
<td>M</td>
<td>28</td>
<td>c</td>
<td>44</td>
<td>s</td>
<td>60</td>
<td>8</td>
</tr>
<tr>
<td>13</td>
<td>N</td>
<td>29</td>
<td>d</td>
<td>45</td>
<td>t</td>
<td>61</td>
<td>9</td>
</tr>
<tr>
<td>14</td>
<td>O</td>
<td>30</td>
<td>e</td>
<td>46</td>
<td>u</td>
<td>62</td>
<td>+</td>
</tr>
<tr>
<td>15</td>
<td>P</td>
<td>31</td>
<td>f</td>
<td>47</td>
<td>v</td>
<td>63</td>
<td>/</td>
</tr>
</tbody></table>
<p><strong>编码说明</strong></p>
<p>​        Base64编码要求把3个8位字节（<code>3*8=24</code>）转化为4个6位的字节（<code>4*6=24</code>），之后在6位的前面补两个0，形成8位一个字节的形式。 如果剩下的字符不足3个字节，则用0填充，输出字符使用’=’，因此编码后输出的文本末尾可能会出现1或2个’=’。</p>
<p>　　为了保证所输出的编码位可读字符，Base64制定了一个编码表，以便进行统一转换。编码表的大小为<code>2^6=64</code>，这也是Base64名称的由来。</p>
<h3 id="2、base64做图片src属性的地址"><a href="#2、base64做图片src属性的地址" class="headerlink" title="2、base64做图片src属性的地址"></a>2、base64做图片src属性的地址</h3><p>使用<code>base64</code>格式图片，这种方法可以在页面文件中嵌入图片，嵌入方法同引入外部图片</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOus </span></span></span><br><span class="line"><span class="tag"><span class="string">bgAAAAeFBMVEUAwAD///+U5ZTc9twOww7G8MYwzDCH4==&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>src或 url() 中有一大串编码。它把一些 8-bit 数据翻译成标准 ASCII 字符，网上有很多免费的base64 编码和解码的工具， 后面跟的一串代码就相当于链接地址。</p>
<h3 id="3、Data-URL-scheme-支持的类型有哪些？"><a href="#3、Data-URL-scheme-支持的类型有哪些？" class="headerlink" title="3、Data URL scheme 支持的类型有哪些？"></a>3、Data URL scheme 支持的类型有哪些？</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span>:,文本数据 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/plain,文本数据 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/html,<span class="type">HTML</span>代码 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/html;base64,base64编码的<span class="type">HTML</span>代码 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/css,<span class="type">CSS</span>代码 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/css;base64,base64编码的<span class="type">CSS</span>代码 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/<span class="type">JavaScript</span>,<span class="type">Javascript</span>代码 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/javascript;base64,base64编码的<span class="type">Javascript</span>代码 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/gif;base64,base64编码的gif图片数据 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/png;base64,base64编码的png图片数据 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/jpeg;base64,base64编码的jpeg图片数据 </span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/x-icon;base64,base64编码的icon图片数据</span></span><br></pre></td></tr></table></figure>

<h3 id="4、将图片转化为base64格式的方法？"><a href="#4、将图片转化为base64格式的方法？" class="headerlink" title="4、将图片转化为base64格式的方法？"></a>4、将图片转化为base64格式的方法？</h3><p>a、利用canvas 将图片转化为base64 编码格式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">dataURL = canvas.toDataURL(<span class="string">&quot;image/jpeg&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>b、利用 html5 的 FileReader 将图片转化base64格式 FileReader 是H5提供的一个处理文件的API，</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reader=<span class="keyword">new</span> FileReader();  </span><br><span class="line">reader.readAsBinaryString(file);  </span><br></pre></td></tr></table></figure>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 布局</title>
    <url>/2020/09/10/css-layout/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>这篇文章来一次查漏补缺，回顾<code>CSS布局</code></p>
<p>列举的布局如下：</p>
<p>–  弹性布局<code>Flex</code></p>
<p>–  <code>Grid</code> 网格布局</p>
<p>–  浮动布局</p>
<p>–  圣杯布局</p>
<p>–  双飞翼布局</p>
<p>–  水平居中对齐</p>
</blockquote>
<a id="more"></a>

<h2 id="一、CSS3弹性盒布局方式"><a href="#一、CSS3弹性盒布局方式" class="headerlink" title="一、CSS3弹性盒布局方式"></a>一、CSS3弹性盒布局方式</h2><p>弹性盒子是CSS3的一种新布局模式。</p>
<p>CSS3 弹性盒（ <code>Flexible Box</code> 或 <code>flexbox</code>），是一种当页面需要适应不同的屏幕大小以及设备类型时确保元素拥有恰当的行为的布局方式。</p>
<p>引入弹性盒布局模型的目的是提供一种更加有效的方式来对一个容器中的子元素进行排列、对齐和分配空白空间。</p>
<p><strong>浏览器支持</strong></p>
<blockquote>
<p>表格中的数字表示支持该属性的第一个浏览器的版本号。</p>
<p>紧跟在数字后面的 <code>-webkit-</code> 或 <code>-moz-</code> 为指定浏览器的前缀。</p>
</blockquote>
<p><img data-src="support.png"></p>
<p><strong>注意：</strong> </p>
<ul>
<li>弹性盒子由弹性容器(<code>Flex container</code>)和弹性子元素(<code>Flex item</code>)组成。</li>
<li>弹性容器通过设置 <code>display</code> 属性的值为 <code>flex</code> 或 <code>inline-flex</code>将其定义为弹性容器。</li>
<li>弹性容器内包含了一个或多个弹性子元素。</li>
<li>弹性容器外及弹性子元素内是正常渲染的。弹性盒子只定义了弹性子元素如何在弹性容器内布局。</li>
</ul>
<p><img data-src="flex0.png"></p>
<h3 id="1-Flex-容器属性（设置在容器上）"><a href="#1-Flex-容器属性（设置在容器上）" class="headerlink" title="1. Flex 容器属性（设置在容器上）"></a>1. <code>Flex</code> 容器属性（设置在容器上）</h3><p><code>flex-direction</code>     指定弹性容器中子元素排列方式</p>
<p><code>flex-wrap</code>     设置弹性盒子的子元素超出父容器时是否换行</p>
<p><code>flex-flow</code>     <u>flex-direction</u> 和 <u>flex-wrap</u> 的简写</p>
<p><code>align-items</code>    设置弹性盒子元素在侧轴（纵轴）方向上的对齐方式</p>
<p><code>align-content</code>    修改 flex-wrap 属性的行为，类似 align-items, 但不是设置子元素对齐，而是设置行对齐  </p>
<p><code>justify-content</code>    设置弹性盒子元素在主轴（横轴）方向上的对齐方式</p>
<h4 id="1-1-flex-direction-属性"><a href="#1-1-flex-direction-属性" class="headerlink" title="1.1 flex-direction 属性"></a>1.1 flex-direction 属性</h4><p>决定项目的方向。</p>
<p><strong>注意：</strong>如果元素不是弹性盒对象的元素，则 <code>flex-direction</code> 属性不起作用。</p>
<p><img data-src="flex1.png"></p>
<p><strong>属性值</strong></p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>row</td>
<td>默认值。主轴为水平方向，起点在左端</td>
</tr>
<tr>
<td>row-reverse</td>
<td>主轴为水平方向，起点在右端</td>
</tr>
<tr>
<td>column</td>
<td>主轴为垂直方向，起点在上沿</td>
</tr>
<tr>
<td>column-reverse</td>
<td>主轴为垂直方向，起点在下沿</td>
</tr>
</tbody></table>
<h4 id="1-2-flex-wrap-属性"><a href="#1-2-flex-wrap-属性" class="headerlink" title="1.2 flex-wrap 属性"></a>1.2 flex-wrap 属性</h4><p><code>flex-wrap</code> 属性规定flex容器是单行或者多行，同时横轴的方向决定了新行堆叠的方向。</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>nowrap</td>
<td>默认值。规定元素不拆行或不拆列。</td>
</tr>
<tr>
<td>wrap</td>
<td>规定元素在必要的时候拆行或拆列。</td>
</tr>
<tr>
<td>wrap-reverse</td>
<td>规定元素在必要的时候拆行或拆列，但是以相反的顺序。</td>
</tr>
</tbody></table>
<p><img data-src="flex2.png"></p>
<h4 id="1-3-flex-flow-属性"><a href="#1-3-flex-flow-属性" class="headerlink" title="1.3 flex-flow 属性"></a>1.3 flex-flow 属性</h4><p><code>flex-flow</code>属性是<code>flex-direction</code>属性和<code>flex-wrap</code>属性的简写形式，默认值为<code>row nowrap</code>。</p>
<h4 id="1-4-align-items属性"><a href="#1-4-align-items属性" class="headerlink" title="1.4 align-items属性"></a>1.4 align-items属性</h4><p><code>align-items</code> 属性定义flex子项在flex容器的当前行的侧轴（纵轴）方向上的对齐方式。</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>stretch</td>
<td>默认值。项目被拉伸以适应容器。如果项目未设置高度或设为auto，将占满整个容器的高度。</td>
</tr>
<tr>
<td>center</td>
<td>项目位于容器的中心。</td>
</tr>
<tr>
<td>flex-start</td>
<td>项目位于容器的开头。</td>
</tr>
<tr>
<td>flex-end</td>
<td>项目位于容器的结尾。</td>
</tr>
<tr>
<td>baseline</td>
<td>项目位于容器的基线上。</td>
</tr>
</tbody></table>
<p><img data-src="flex3.png"></p>
<h4 id="1-5-justify-content属性"><a href="#1-5-justify-content属性" class="headerlink" title="1.5 justify-content属性"></a>1.5 justify-content属性</h4><p><code>justify-content</code> 用于设置或检索弹性盒子元素在主轴（横轴）方向上的对齐方式。</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>flex-start</td>
<td>默认值。项目位于容器的开头。</td>
</tr>
<tr>
<td>flex-end</td>
<td>项目位于容器的结尾。</td>
</tr>
<tr>
<td>center</td>
<td>项目位于容器的中心。</td>
</tr>
<tr>
<td>space-between</td>
<td>两端对齐，项目之间的间隔都相等</td>
</tr>
<tr>
<td>space-around</td>
<td>项目位于各行之前、之间、之后都留有空白的容器内。</td>
</tr>
</tbody></table>
<blockquote>
<p>space-around：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。    </p>
</blockquote>
<p><img data-src="flex4.png"></p>
<h3 id="2-Flex-弹性子元素属性"><a href="#2-Flex-弹性子元素属性" class="headerlink" title="2. Flex 弹性子元素属性"></a>2. <code>Flex</code> 弹性子元素属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td>order</td>
<td align="left">设置弹性盒子的子元素排列顺序。</td>
</tr>
<tr>
<td>flex-grow</td>
<td align="left">设置或检索弹性盒子元素的扩展比率。</td>
</tr>
<tr>
<td>flex-shrink</td>
<td align="left">指定了 flex 元素的收缩规则。flex 元素仅在默认宽度之和大于容器的时候才会发生收缩，其收缩的大小是依据 flex-shrink 的值。</td>
</tr>
<tr>
<td>flex-basis</td>
<td align="left">用于设置或检索弹性盒伸缩基准值。</td>
</tr>
<tr>
<td>flex</td>
<td align="left">设置弹性盒子的子元素如何分配空间。</td>
</tr>
<tr>
<td>align-self</td>
<td align="left">在弹性子元素上使用。覆盖容器的 align-items 属性。</td>
</tr>
</tbody></table>
<h4 id="2-1-order属性"><a href="#2-1-order属性" class="headerlink" title="2.1 order属性"></a>2.1 order属性</h4><p><code>&lt;integer&gt;</code>：用整数值来定义排列顺序，数值小的排在前面。可以为负值，默认为0。</p>
<p><img data-src="flex5.png"></p>
<h4 id="2-2-flex-grow属性"><a href="#2-2-flex-grow属性" class="headerlink" title="2.2 flex-grow属性"></a>2.2 flex-grow属性</h4><p><code>&lt;integer&gt;</code>：一个数字，规定项目将相对于其他灵活的项目进行扩展的量。默认值是 0。</p>
<blockquote>
<p><code>flex-grow</code>属性定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大。</p>
<p>如果所有项目的<code>flex-grow</code>属性都为1，则它们将等分剩余空间（如果有的话）。　　</p>
<p>如果一个项目的<code>flex-grow</code>属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍。</p>
</blockquote>
<p><img data-src="flex6.png"></p>
<h4 id="2-3-flex-shrink属性"><a href="#2-3-flex-shrink属性" class="headerlink" title="2.3 flex-shrink属性"></a>2.3 flex-shrink属性</h4><p><code>&lt;integer&gt;</code>：一个数字，规定项目将相对于其他灵活的项目进行收缩的量。默认值是 1。</p>
<blockquote>
<p><code>flex-shrink</code>属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p>
<p>如果所有项目的<code>flex-shrink</code>属性都为1，当空间不足时，都将等比例缩小。</p>
<p>如果一个项目的<code>flex-shrink</code>属性为0，其他项目都为1，则空间不足时，前者不缩小。</p>
<p>负值对该属性无效。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">flex-shrink</span>: &lt;<span class="selector-tag">number</span>&gt;; <span class="comment">/* default 1 */</span></span><br></pre></td></tr></table></figure>

<p><img data-src="flex7.png"></p>
<h4 id="2-4-flex-basis属性"><a href="#2-4-flex-basis属性" class="headerlink" title="2.4 flex-basis属性"></a>2.4 flex-basis属性</h4><p><code>flex-basis</code>属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.flex-container</span> <span class="selector-class">.flex-item</span> &#123; <span class="attribute">flex-basis</span>: &lt;integer&gt; | auto; &#125;</span><br></pre></td></tr></table></figure>

<p><code>&lt;integer&gt;</code>：一个长度单位或者一个百分比，规定元素的初始长度。<br> <code>auto</code>：默认值。长度等于元素的长度。如果该项目未指定长度，则长度将根据内容决定。</p>
<blockquote>
<p>浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小。</p>
<p>它可以设为跟width或height属性一样的值（比如350px），则项目将占据固定空间。</p>
</blockquote>
<h4 id="2-5-flex属性"><a href="#2-5-flex属性" class="headerlink" title="2.5 flex属性"></a>2.5 flex属性</h4><p>flex 属性用于设置或检索弹性盒模型对象的子元素如何分配空间。</p>
<p>flex 属性是 <code>flex-grow</code>、<code>flex-shrink</code> 和 <code>flex-basis</code> 属性的简写属性，默认值为<code>0 1 auto</code>。后两个属性可选。</p>
<blockquote>
<p>该属性有两个快捷值：auto (1 1 auto) 和 none (0 0 auto)。</p>
<p>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值。</p>
</blockquote>
<p><strong>特殊值</strong>： <code>flex: 1;</code>  等价于  <code>flex: 1 1</code>   但不等于  <code>flex: auto;</code></p>
<p>其含义为为<strong>均分</strong>，详细解释见<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex">MDN文档</a>和<a href="https://zhuanlan.zhihu.com/p/136223806">知乎解答文档</a></p>
<p><img data-src="flex9.png"></p>
<h4 id="2-6-align-self属性"><a href="#2-6-align-self属性" class="headerlink" title="2.6     align-self属性"></a>2.6     align-self属性</h4><p><code>align-self</code> 属性允许单个项目有与其他项目不一样的对齐方式，可覆盖<code>align-items</code>属性。</p>
<blockquote>
<p>默认值为auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.flex-container</span> <span class="selector-class">.flex-item</span> &#123;</span><br><span class="line">    <span class="attribute">align-self</span>: auto | stretch | center | flex-start | flex-end | baseline | initial | inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>auto</td>
<td>默认值。元素继承了它的父容器的 align-items 属性。如果没有父容器则为 “stretch”。</td>
</tr>
<tr>
<td>stretch</td>
<td>元素被拉伸以适应容器。</td>
</tr>
<tr>
<td>center</td>
<td>元素位于容器的中心。</td>
</tr>
<tr>
<td>flex-start</td>
<td>元素位于容器的开头。</td>
</tr>
<tr>
<td>flex-end</td>
<td>元素位于容器的结尾。</td>
</tr>
<tr>
<td>baseline</td>
<td>元素位于容器的基线上。</td>
</tr>
<tr>
<td>initial</td>
<td>设置该属性为它的默认值。</td>
</tr>
<tr>
<td>inherit</td>
<td>从父元素继承该属性。</td>
</tr>
</tbody></table>
<p><img data-src="flex8.png"></p>
<h2 id="二、Grid-网格布局"><a href="#二、Grid-网格布局" class="headerlink" title="二、Grid 网格布局"></a>二、<code>Grid</code> 网格布局</h2><blockquote>
<p>转载<a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html">阮一峰CSS Grid 网格布局教程</a>，写的很不错，牛啊！</p>
<p>这篇文章也可做为参考  <a href="https://www.cnblogs.com/jcxfighting/p/10711210.html">传送门</a></p>
</blockquote>
<p>网格布局（Grid）是最强大的 CSS 布局方案。</p>
<p>它将网页划分成一个个网格，可以任意组合不同的网格，做出各种各样的布局。以前，只能通过复杂的 CSS 框架达到的效果，现在浏览器内置了。</p>
<p><img data-src="grid0.png"></p>
<p>上图这样的布局，就是 Grid 布局的拿手好戏。</p>
<p>Grid 布局与 <a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">Flex 布局</a>有一定的相似性，都可以指定容器内部多个项目的位置。但是，它们也存在重大区别。</p>
<p>Flex 布局是轴线布局，只能指定”项目”针对轴线的位置，可以看作是<strong>一维布局</strong>。Grid 布局则是将容器划分成”行”和”列”，产生单元格，然后指定”项目所在”的单元格，可以看作是<strong>二维布局</strong>。Grid 布局远比 Flex 布局强大。</p>
<h2 id="三、浮动布局"><a href="#三、浮动布局" class="headerlink" title="三、浮动布局"></a>三、浮动布局</h2><blockquote>
<p>这是一篇有逻辑的学习记录</p>
</blockquote>
<p>div是块级元素，在页面中独占一行，自上而下排列，也就是传说中的流</p>
<blockquote>
<p>无论多么复杂的布局，其基本出发点均是：<strong>“如何在一行显示多个div元素”。</strong> 显然标准流已经无法满足需求，这就要用到浮动。</p>
</blockquote>
<p><strong>浮动可以理解为让某个div元素脱离标准流，漂浮在标准流之上，和标准流不是一个层次。</strong></p>
<p><strong>浮动之后的位置</strong>：假如元素A和元素B均浮动，则A和B在同一行；若仅B浮动，则B的顶端对齐A的底端。</p>
<p><strong>浮动之后的顺序</strong>：<strong>靠近页面边缘的一端是前，远离页面边缘的一端是后。</strong> </p>
<p><img data-src="float-1.png"></p>
<p><strong>清除浮动</strong>：<strong>清除浮动可以理解为打破横向排列</strong>（元素浮动之前，也就是在标准流中，是竖向排列的，而浮动之后可以理解为横向排列）<span style="color:red;">对于CSS的清除浮动(clear)，一定要牢记：这个规则只能影响使用清除的元素本身，不能影响其他元素。</span></p>
<figure class="highlight nsis"><table><tr><td class="code"><pre><span class="line">语法：        </span><br><span class="line">    clear : <span class="literal">none</span> | <span class="literal">left</span> | <span class="literal">right</span> | <span class="literal">both</span>    </span><br><span class="line">取值：</span><br><span class="line">    <span class="literal">none</span>  :  默认值。允许两边都可以有浮动对象    </span><br><span class="line">    <span class="literal">left</span>  :  不允许左边有浮动对象    </span><br><span class="line">    <span class="literal">right</span> :  不允许右边有浮动对象    </span><br><span class="line">    <span class="literal">both</span>  :  不允许有浮动对象</span><br></pre></td></tr></table></figure>

<p><span style="color:red;">最后补充一点</span>，正如下面<strong>圣杯布局的<code>float</code>实现方式</strong>一样，当同一行元素由于行宽不足而主动排列在下一行的时候，可以通过设置<strong>负外边距<code>Margin</code>**，使其回到上一行，在</strong>利用<code>position</code>对位置进行微调**。</p>
<h2 id="四、圣杯布局"><a href="#四、圣杯布局" class="headerlink" title="四、圣杯布局"></a>四、圣杯布局</h2><p>所谓的<code>圣杯布局</code>就是左右两边大小固定不变，中间宽度自适应。我们可以用<code>浮动</code>、<code>定位</code>以及<code>flex</code>这三种方式来实现</p>
<p> 一般这种布局方式适用于各种移动端顶部搜索部分，这是最常见的，如京东手机版主页面顶部搜索：</p>
<p><img data-src="shengbei.png"></p>
<blockquote>
<p>可以看到左边有个菜单按钮，中间是搜索框，右边是登录两个文字，左右大小是固定的，而中间部分则是随着手机屏幕尺寸的大小而自适应</p>
</blockquote>
<h3 id="第一种方法-flex实现"><a href="#第一种方法-flex实现" class="headerlink" title="第一种方法 flex实现"></a>第一种方法 <code>flex</code>实现</h3><blockquote>
<p>需要理解<code>flex</code>的用法</p>
<p> <code>*</code>  <code>vh</code> 为相对于视口的高度。视口被均分为100单位的vh</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;container&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span>头部<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;left&#x27;</span>&gt;</span>左<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;center&#x27;</span>&gt;</span>中<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;right&#x27;</span>&gt;</span>右<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span>底部<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">    <span class="selector-class">.container</span>&#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">        <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">header</span>&#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">section</span>&#123;</span><br><span class="line">        <span class="attribute">flex</span>:<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">background</span>: pink;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">footer</span>&#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.left</span>&#123;</span><br><span class="line">        <span class="attribute">background</span>: red;</span><br><span class="line">        <span class="attribute">flex</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.center</span>&#123;</span><br><span class="line">        <span class="attribute">flex</span>:<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">background</span>: blue;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.right</span>&#123;</span><br><span class="line">        <span class="attribute">flex</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">background</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="shengbei-flex.png"></p>
<h3 id="第二种-position实现"><a href="#第二种-position实现" class="headerlink" title="第二种  position实现"></a>第二种  <code>position</code>实现</h3><blockquote>
<p><strong>思路</strong>：给容器设置左右内<code>padding</code>，让中间部分占满所有剩余空间，左右设置<code>absolute</code>使其左右分布</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span>z中间<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>左<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>右<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">400px</span>);</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: pink</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: yellow ;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: blue ;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shengbei-position.png"></p>
<h3 id="第三种方法-float实现"><a href="#第三种方法-float实现" class="headerlink" title="第三种方法 float实现"></a>第三种方法 <code>float</code>实现</h3><p><strong>经典实现方式：</strong></p>
<blockquote>
<p>应遵循以下要点</p>
<ul>
<li>两侧宽度固定，中间宽度自适应</li>
<li>中间部分在DOM结构上优先，以便先行渲染</li>
<li>允许三列中的任意一列成为最高列</li>
<li>只需要使用一个额外的<code>&lt;div&gt;</code>标签</li>
</ul>
</blockquote>
<p>有一个跟完美解释  <code>圣杯布局</code>  的文章：<a href="https://www.cnblogs.com/niujifei/p/11269093.html">传送门</a></p>
<h4 id="HTML结构"><a href="#HTML结构" class="headerlink" title="HTML结构"></a>HTML结构</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>#header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center &quot;</span>&gt;</span>#center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>#left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>#right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>#footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="CSS结构"><a href="#CSS结构" class="headerlink" title="CSS结构"></a>CSS结构</h4><p><strong>1. 假设左侧的固定宽度为200px，右侧的固定宽度为150px，则首先在<code>container</code>上设置：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">200px</span>; </span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为左右两列预留出相应的空间，得到如下示意图：</p>
<p><img data-src="shengbei-float-1.png"></p>
<p><strong>2. 随后分别为三列设置宽度与浮动，同时对<code>footer</code>设置清除浮动：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">.container div&#123;</span><br><span class="line">    float: left;</span><br><span class="line">&#125;</span><br><span class="line">.center&#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    background-color: #85D989;</span><br><span class="line">&#125;</span><br><span class="line">.left&#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    background-color: pink;</span><br><span class="line">&#125;</span><br><span class="line">.right&#123;</span><br><span class="line">    width: 150px;</span><br><span class="line">    background-color: blueviolet;</span><br><span class="line">&#125;</span><br><span class="line">.footer&#123;</span><br><span class="line">    clear: both;</span><br><span class="line">    background-color: darkslategray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img data-src="shengbei-float-2.png"></p>
<blockquote>
<p>注意：根据浮动的特性，由于<code>center</code>的宽度为100%，即占据了第一行的所有空间，所以<code>left</code>和<code>right</code>被“挤”到了第二行    </p>
</blockquote>
<h5 id="此处上下为核心关键"><a href="#此处上下为核心关键" class="headerlink" title="此处上下为核心关键"></a><strong>此处上下为核心关键</strong></h5><p><strong>3. 接下来的工作是将<code>left</code>放置到之前预留出的位置上，这里使用  <code>负外边距</code>  ：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img data-src="shengbei-float-3.png"></p>
<p><strong>4. 随后还需要使用定位(position)方法：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里使用<code>position: relative</code>和<code>right: 200px</code>将<code>left</code>的位置在原有位置基础上左移200px，以完成<code>left</code>的放置：</p>
<p><img data-src="shengbei-float-4.png"></p>
<p><strong>5. 最终效果</strong></p>
<p><img data-src="shengbei-float-5.png"></p>
<p>至此，布局效果完成。不过还需要考虑最后一步，那就是<strong>页面的最小宽度</strong>：要想保证该布局效果正常显示，由于两侧都具有固定的宽度，所以需要给定页面一个最小的宽度，</p>
<p>但这并不只是简单的200+150=350px。回想之前<code>left</code>使用了<code>position: relative</code>，所以就意味着在<code>center</code>开始的区域，还存在着一个<code>left</code>的宽度。所以页面的最小宽度应该设置为200+150+200=550px：</p>
<h4 id="完整代码结构"><a href="#完整代码结构" class="headerlink" title="完整代码结构"></a>完整代码结构</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line">    *&#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding: 0;</span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#FFF9E9</span>;</span></span><br><span class="line">        font-size: 45px;</span><br><span class="line">    &#125;</span><br><span class="line">    div&#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">       padding-left: 200px; </span><br><span class="line">       padding-right: 150px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-tag">div</span>&#123;</span></span><br><span class="line">        float: left;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.center</span>&#123;</span></span><br><span class="line">        width: 100%;</span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#85D989</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.left</span>&#123;</span></span><br><span class="line">        width: 200px;</span><br><span class="line">        background-color: pink;</span><br><span class="line">        margin-left: -100%;</span><br><span class="line">        position: relative;</span><br><span class="line">        right: 200px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.right</span>&#123;</span></span><br><span class="line">        width: 150px;</span><br><span class="line">        background-color: blueviolet;</span><br><span class="line">        margin-left: -150px;</span><br><span class="line">        position: relative;</span><br><span class="line">        left: 150px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.footer</span>&#123;</span></span><br><span class="line">        clear: both;</span><br><span class="line">        background-color: darkslategray;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.header</span>&#123;</span></span><br><span class="line">        background-color: darkslategray;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>#header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center &quot;</span>&gt;</span>#center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>#left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>#right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>#footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="五、双飞翼布局"><a href="#五、双飞翼布局" class="headerlink" title="五、双飞翼布局"></a>五、双飞翼布局</h2><blockquote>
<p>参考自<a href="https://www.jianshu.com/p/81ef7e7094e8">圣杯布局和双飞翼布局的理解与思考</a>，博主写的很有逻辑</p>
</blockquote>
<h3 id="DOM结构"><a href="#DOM结构" class="headerlink" title="DOM结构"></a>DOM结构</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;left&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;right&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>双飞翼布局的DOM结构与圣杯布局的区别是用<code>container</code>仅包裹住<code>center</code>，另外将<code>.column</code>类从<code>center</code>移至<code>container</code>上。</p>
<h3 id="CSS代码"><a href="#CSS代码" class="headerlink" title="CSS代码"></a>CSS代码</h3><p>按照与圣杯布局相同的思路，首先设置各列的宽度与浮动，并且为左右两列预留出空间，以及为<code>footer</code>设置浮动清除：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="shuangfeiyi-1.png"></p>
<p>以上代码将<code>container</code>,<code>left</code>,<code>right</code>设置为<code>float: left</code>，而在<code>container</code>内部，<code>center</code>由于没有设置浮动，所以其宽度默认为<code>container</code>的100%宽度，通过对其设置<code>margin-left</code>和<code>margin-right</code>为左右两列预留出了空间。</p>
<p>将<code>left</code>、<code>right</code>放置到预留位置</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>; </span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>; </span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后计算最小页面宽度：由于双飞翼布局没有用到<code>position:relative</code>进行定位，所以最小页面宽度应该为200+150=350px。但是当页面宽度缩小到350px附近时，会挤占中间栏的宽度，使得其内容被右侧栏覆盖</p>
<p>因此在设置最小页面宽度时，应该适当增加一些宽度以供中间栏使用（假设为150px），则有：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>布局整体代码为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.column</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="selector-id">#center</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="selector-id">#left</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>; </span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="selector-id">#right</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>; </span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="总结与思考"><a href="#总结与思考" class="headerlink" title="总结与思考"></a>总结与思考</h3><p>通过对圣杯布局和双飞翼布局的介绍可以看出，圣杯布局在DOM结构上显得更加直观和自然，且在日常开发过程中，更容易形成这样的DOM结构（通常<code>&lt;aside&gt;</code>和<code>&lt;article&gt;</code>/<code>&lt;section&gt;</code>一起被嵌套在<code>&lt;main&gt;</code>中）；而双飞翼布局在实现上由于不需要使用定位，所以更加简洁，且允许的页面最小宽度通常比圣杯布局更小。</p>
<p>其实通过思考不难发现，两者在代码实现上都额外引入了一个<code>&lt;div&gt;</code>标签，其目的都是为了既能保证中间栏产生浮动（浮动后还<strong>必须</strong>显式设置宽度），又能限制自身宽度为两侧栏留出空间。</p>
<h2 id="六、水平居中"><a href="#六、水平居中" class="headerlink" title="六、水平居中"></a>六、水平居中</h2><h3 id="五种基础实现方式"><a href="#五种基础实现方式" class="headerlink" title="五种基础实现方式"></a>五种基础实现方式</h3><h4 id="1-text-align"><a href="#1-text-align" class="headerlink" title="1. text-align"></a>1. <code>text-align</code></h4><p>text-align 是入门最常用的属性，根据字面意思是文本对齐用的。</p>
<p>只需在父级标签上设置即可，虽然内部的子元素不管是块级元素 or 非块级元素都可以使用，但需注意块级元素会占用整行的宽度，文本是在这个宽度中作水平居中。</p>
<h4 id="2-定宽-margin-auto"><a href="#2-定宽-margin-auto" class="headerlink" title="2. 定宽 margin auto"></a>2. 定宽 <code>margin auto</code></h4><p>这也是常见的水平居中方式，通过设置子元素的 margin 属性来控制距离父元素的距离。</p>
<p><strong>需要注意：</strong>子元素如果是块级元素，就最好设置宽度，不然就会占满于父元素，在通过 text-align 文本居中对齐就没有意义了。对于非块级元素必须要设置宽度。</p>
<h4 id="3-flex-方式"><a href="#3-flex-方式" class="headerlink" title="3. flex 方式"></a>3. flex 方式</h4><p>通过设置浮动布局来实现居中，这是相对上两种方法某种程度上最简单的实现，因为在其基础上可以做更多布局的扩展，不用担心破坏布局。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">justify-content</span>: <span class="selector-tag">center</span>;</span><br></pre></td></tr></table></figure>

<h4 id="4-position-浮动-不建议"><a href="#4-position-浮动-不建议" class="headerlink" title="4. position + 浮动(不建议)"></a>4. position + 浮动(不建议)</h4><blockquote>
<p>现在这两种是比较有趣的定位方式，实际场景不建议使用，我是不愿意别人这样写，脑袋还要转个弯，来理解这样布局的计算方式</p>
</blockquote>
<p>如果元素是块级元素，通过 float 浮动属性，将它的宽度“抹去”。然后通过对于上级元素的相对定位通过错位修正的方式来居中。</p>
<p>让父元素的左侧从中间开始定位，子元素再根据自己的实际宽度往左偏移一半达到水平居中的目的。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 通过浮动让元素失去宽度 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;left: 50%;float: left;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 相对父级元素，反方向修正 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:relative; left:-50%; float: left;&quot;</span>&gt;</span></span><br><span class="line">            居中</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-position-transform-不建议"><a href="#5-position-transform-不建议" class="headerlink" title="5. position + transform (不建议)"></a>5. position + transform (不建议)</h4><p>思路同上，不同的是这次设置子元素为绝对定位，并距离左侧偏离一半，最后通过 <strong>transform</strong> 根据元素的实际宽度往左再偏移一半，达到居中效果。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 相对父级元素，反方向修正 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute; left:50%; </span></span></span><br><span class="line"><span class="tag"><span class="string">                                 transform: translateX(-50%);&quot;</span>&gt;</span></span><br><span class="line">            居中</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML基本问题</title>
    <url>/2020/08/28/HTML-Bacics/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>总结了关于<code>HTML</code>的基本问题</p>
<p>–  <code>HTML</code> 新特性</p>
<p>–  浏览器标准模式和怪异模式</p>
<p>–  <code>HTML</code>和<code>XHTML</code>的区别</p>
<p>–  使用<code>data-*</code></p>
<p>–  <code>HTML</code>模板引擎</p>
</blockquote>
<a id="more"></a>

<h2 id="一、HTML新特性"><a href="#一、HTML新特性" class="headerlink" title="一、HTML新特性"></a>一、HTML新特性</h2><blockquote>
<p>参考自<a href="https://www.cnblogs.com/gaosirs/p/10756524.html">该文章</a></p>
</blockquote>
<h3 id="1-语义化标签"><a href="#1-语义化标签" class="headerlink" title="1. 语义化标签"></a>1. 语义化标签</h3><p>语义化标签 为页面提供了更好的<strong>页面结构</strong>。</p>
<table>
<thead>
<tr>
<th align="center">描述</th>
<th align="center">属性</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>&lt;header&gt;&lt;/header&gt;</code></td>
<td align="center">定义文档的头部区域</td>
</tr>
<tr>
<td align="center"><code>&lt;footer&gt;&lt;/footer&gt;</code></td>
<td align="center">定义文档的尾部区域</td>
</tr>
<tr>
<td align="center"><code>&lt;nav&gt;&lt;/nav&gt;</code></td>
<td align="center">定义文档的导航区域</td>
</tr>
<tr>
<td align="center"><code>&lt;section&gt;&lt;/section&gt;</code></td>
<td align="center">定义文档的段落</td>
</tr>
<tr>
<td align="center"><code>&lt;article&gt;&lt;/article&gt;</code></td>
<td align="center">定义页面独立的内容区域</td>
</tr>
<tr>
<td align="center"><code>&lt;aside&gt;&lt;/aside&gt;</code></td>
<td align="center">定义页面侧边栏内容</td>
</tr>
<tr>
<td align="center"><code>&lt;command&gt;&lt;/command&gt;</code></td>
<td align="center">定义命令按钮</td>
</tr>
<tr>
<td align="center"><code>&lt;details&gt;&lt;/details&gt;</code></td>
<td align="center">标签包含 details 元素的标题</td>
</tr>
<tr>
<td align="center"><code>&lt;dialog&gt;&lt;/dialog&gt;</code></td>
<td align="center">定义对话框</td>
</tr>
</tbody></table>
<h3 id="2-增强型表单"><a href="#2-增强型表单" class="headerlink" title="2. 增强型表单"></a>2. 增强型表单</h3><p>HTML5 提供了多个新的<strong>表单输入类型</strong>。</p>
<table>
<thead>
<tr>
<th>输入类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>color</td>
<td>主要用于选取颜色</td>
</tr>
<tr>
<td>date</td>
<td>从一个日期选择器选择一个日期</td>
</tr>
<tr>
<td>datetime</td>
<td>选择一个日期（UTC 时间）</td>
</tr>
<tr>
<td>datetime-local</td>
<td>选择一个日期和时间 (无时区)</td>
</tr>
<tr>
<td>email</td>
<td>包含 e-mail 地址的输入域</td>
</tr>
<tr>
<td>month</td>
<td>选择一个月份</td>
</tr>
<tr>
<td>number</td>
<td>数值的输入域</td>
</tr>
<tr>
<td>range</td>
<td>一定范围内数字值的输入域</td>
</tr>
<tr>
<td>search</td>
<td>用于搜索域</td>
</tr>
<tr>
<td>tel</td>
<td>定义输入电话号码字段</td>
</tr>
<tr>
<td>time</td>
<td>选择一个时间</td>
</tr>
<tr>
<td>url</td>
<td>URL 地址的输入域</td>
</tr>
<tr>
<td>week</td>
<td>选择周和年</td>
</tr>
</tbody></table>
<p> 同时，还增加了<strong>新的表单属性</strong>：</p>
<ol>
<li><p>placehoder 属性，简短的提示在用户输入值前会显示在输入域上。即我们常见的输入框默认提示，在用户输入后消失。</p>
</li>
<li><p>required  属性，是一个 boolean 属性。要求填写的输入域不能为空</p>
</li>
<li><p>pattern 属性，描述了一个正则表达式用于验证<code>&lt;input&gt;</code> 元素的值。</p>
</li>
<li><p>min 和 max 属性，设置元素最小值与最大值。</p>
</li>
<li><p>step 属性，为输入域规定合法的数字间隔。</p>
</li>
<li><p>height 和 width 属性，用于 image 类型的 <code>&lt;input&gt;</code> 标签的图像高度和宽度。</p>
</li>
<li><p>autofocus 属性，是一个 boolean 属性。规定在页面加载时，域自动地获得焦点。</p>
</li>
<li><p>multiple 属性 ，是一个 boolean 属性。规定<code>&lt;input&gt;</code> 元素中可选择多个值。　　</p>
</li>
</ol>
<h3 id="3-音频和视频"><a href="#3-音频和视频" class="headerlink" title="3. 音频和视频"></a>3. 音频和视频</h3><p>HTML5 提供了 <strong>音频和视频</strong> 。</p>
<p>音频：<code>&lt;audio&gt;</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;xxx.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/ogg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;xxx.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line">您的浏览器不支持 audio 元素。</span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>视频：<code>&lt;video&gt;</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;xxx.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;xxx.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/ogg&quot;</span>&gt;</span></span><br><span class="line">您的浏览器不支持Video标签。</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-canvas-绘图"><a href="#4-canvas-绘图" class="headerlink" title="4. canvas 绘图"></a>4. canvas 绘图</h3><blockquote>
<p>供欣赏的<code>canvas</code><a href="https://www.html5tricks.com/tag/html5-canvas/">作品</a></p>
<p>jQuery/HTML5/CSS3<a href="http://www.htmleaf.com/html5/html5-canvas/">资料库</a></p>
</blockquote>
<blockquote>
<p><a href="https://www.jianshu.com/p/7593eb9e53c2">Canvas教程</a></p>
<p><a href="https://www.w3school.com.cn/html5/html_5_canvas.asp">W3School教程</a></p>
<p><a href="https://www.cnblogs.com/gengzhen/p/11915071.html">Canvas绘图基础</a></p>
</blockquote>
<h3 id="5-SVG-绘图"><a href="#5-SVG-绘图" class="headerlink" title="5. SVG 绘图"></a>5. SVG 绘图</h3><blockquote>
<p>嵌入和使用SVG:</p>
<p><a href="https://segmentfault.com/a/1190000010942431">HTML中嵌入SVG图片的N种方式</a></p>
<p><a href="https://www.w3school.com.cn/svg/svg_inhtml.asp">HTML 页面中的 SVG</a></p>
<p><a href="https://www.jianshu.com/p/132b58273e27">HTML5之SVG的使用</a></p>
</blockquote>
<h4 id="SVG-与-Canvas两者间的区别"><a href="#SVG-与-Canvas两者间的区别" class="headerlink" title="SVG 与 Canvas两者间的区别"></a>SVG 与 Canvas两者间的区别</h4><p>SVG 是一种使用 XML 描述 2D 图形的语言。</p>
<p>Canvas 通过 JavaScript 来绘制 2D 图形。</p>
<p>SVG 基于 XML，这意味着 SVG DOM 中的每个元素都是可用的。您可以为某个元素附加 JavaScript 事件处理器。</p>
<p>在 SVG 中，每个被绘制的图形均被视为对象。如果 SVG 对象的属性发生变化，那么浏览器能够自动重现图形。</p>
<p>Canvas 是逐像素进行渲染的。在 canvas 中，一旦图形被绘制完成，它就不会继续得到浏览器的关注。如果其位置发生变化，那么整个场景也需要重新绘制，包括任何或许已被图形覆盖的对象。</p>
<h3 id="6-地理定位（Geolocation）"><a href="#6-地理定位（Geolocation）" class="headerlink" title="6. 地理定位（Geolocation）"></a>6. 地理定位（Geolocation）</h3><p>HTML5 Geolocation（地理定位）用于定位用户的位置。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">window</span><span class="selector-class">.navigator</span><span class="selector-class">.geolocation</span> &#123;</span><br><span class="line">    <span class="attribute">getCurrentPosition</span>:  fn  用于获取当前的位置数据</span><br><span class="line">    watchPosition: fn  监视用户位置的改变</span><br><span class="line">    clearWatch: fn  清除定位监视</span><br><span class="line">&#125;　　　</span><br></pre></td></tr></table></figure>

<p>获取用户定位信息：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">navigator.geolocation.getCurrentPosition(</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>)</span>&#123;</span><br><span class="line">　　　　<span class="built_in">console</span>.log(<span class="string">&#x27;用户定位数据获取成功&#x27;</span>)</span><br><span class="line">　　　　<span class="comment">//console.log(arguments);</span></span><br><span class="line">　　　　<span class="built_in">console</span>.log(<span class="string">&#x27;定位时间：&#x27;</span>,pos.timestamp)</span><br><span class="line">　　　　<span class="built_in">console</span>.log(<span class="string">&#x27;经度：&#x27;</span>,pos.coords.longitude)</span><br><span class="line">　　　　<span class="built_in">console</span>.log(<span class="string">&#x27;纬度：&#x27;</span>,pos.coords.latitude)</span><br><span class="line">　　　　<span class="built_in">console</span>.log(<span class="string">&#x27;海拔：&#x27;</span>,pos.coords.altitude)</span><br><span class="line">　　　　<span class="built_in">console</span>.log(<span class="string">&#x27;速度：&#x27;</span>,pos.coords.speed)</span><br><span class="line"></span><br><span class="line">&#125;,    <span class="comment">//定位成功的回调</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123; </span><br><span class="line">　　　　<span class="built_in">console</span>.log(<span class="string">&#x27;用户定位数据获取失败&#x27;</span>)</span><br><span class="line">　　　　<span class="comment">//console.log(arguments);</span></span><br><span class="line"></span><br><span class="line">&#125;        <span class="comment">//定位失败的回调</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="7-拖放API"><a href="#7-拖放API" class="headerlink" title="7. 拖放API"></a>7. 拖放API</h3><p>在 HTML5 中，拖放是标准的一部分，任何元素都能够拖放。</p>
<blockquote>
<p>转载来自<a href="https://www.cnblogs.com/ijjyo/p/4300717.html">很不错的拖放API解释…</a></p>
</blockquote>
<h4 id="7-1-HTML拖放实例"><a href="#7-1-HTML拖放实例" class="headerlink" title="7.1 HTML拖放实例"></a>7.1 HTML拖放实例</h4><p>​    下面的例子是一个简单的拖放实例：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">allowDrop</span>(<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line">                ev.preventDefault();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">drag</span>(<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                ev.dataTransfer.setData(<span class="string">&quot;Text&quot;</span>, ev.target.id);</span></span><br><span class="line">            &#125;</span><br><span class="line">    </span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">drop</span>(<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line">                ev.preventDefault();</span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> data = ev.dataTransfer.getData(<span class="string">&quot;Text&quot;</span>);</span></span><br><span class="line"><span class="javascript">                ev.target.appendChild(<span class="built_in">document</span>.getElementById(data));</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">ondrop</span>=<span class="string">&quot;drop(event)&quot;</span> <span class="attr">ondragover</span>=<span class="string">&quot;allowDrop(event)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 500px;height: 500px;background-color: #FBB929;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;drag1&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://www.baidu.com/img/baidu_jgylogo3.gif&quot;</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">ondragstart</span>=<span class="string">&quot;drag(event)&quot;</span> <span class="attr">width</span>=<span class="string">&quot;336&quot;</span> <span class="attr">height</span>=<span class="string">&quot;69&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="7-1-1-设置元素为可拖放"><a href="#7-1-1-设置元素为可拖放" class="headerlink" title="7.1.1 设置元素为可拖放"></a>7.1.1 设置元素为可拖放</h5><p>首先，为了使元素可拖动，把 draggable 属性设置为 true ：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="7-1-2-拖动什么-ondragstart-和-setData"><a href="#7-1-2-拖动什么-ondragstart-和-setData" class="headerlink" title="7.1.2 拖动什么 - ondragstart 和 setData()"></a>7.1.2 拖动什么 - ondragstart 和 setData()</h5><p>然后，规定当元素被拖动时，会发生什么。</p>
<p>在上面的例子中，ondragstart 属性调用了一个函数，drag(<em>event</em>)，它规定了被拖动的数据。</p>
<p>dataTransfer.setData() 方法设置被拖数据的数据类型和值：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> drag(ev)&#123;</span><br><span class="line">    ev.dataTransfer.set<span class="constructor">Data(<span class="string">&quot;Text&quot;</span>,<span class="params">ev</span>.<span class="params">target</span>.<span class="params">id</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，数据类型是 “Text”，值是可拖动元素的 id (“drag1”)。</p>
<h5 id="7-1-3-放到何处-ondragover"><a href="#7-1-3-放到何处-ondragover" class="headerlink" title="7.1.3 放到何处 - ondragover"></a>7.1.3 放到何处 - ondragover</h5><p>ondragover 事件规定在何处放置被拖动的数据。</p>
<p>默认地，无法将数据/元素放置到其他元素中。如果需要设置允许放置，我们必须阻止对元素的默认处理方式。</p>
<p>这要通过调用 ondragover 事件的 <em>event</em>.preventDefault() 方法：</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">event</span>.preventDefault()</span><br></pre></td></tr></table></figure>

<h5 id="7-1-4-进行放置-ondrop"><a href="#7-1-4-进行放置-ondrop" class="headerlink" title="7.1.4 进行放置 - ondrop"></a>7.1.4 进行放置 - ondrop</h5><p>当放置被拖数据时，会发生 drop 事件。</p>
<p>在上面的例子中，ondrop 属性调用了一个函数，drop(<em>event</em>)：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> drop(ev)</span><br><span class="line">&#123;</span><br><span class="line">ev.prevent<span class="constructor">Default()</span>;</span><br><span class="line">var data=ev.dataTransfer.get<span class="constructor">Data(<span class="string">&quot;Text&quot;</span>)</span>;</span><br><span class="line">ev.target.append<span class="constructor">Child(<span class="params">document</span>.<span class="params">getElementById</span>(<span class="params">data</span>)</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>调用 preventDefault() 来避免浏览器对数据的默认处理（drop 事件的默认行为是以链接形式打开）</li>
<li>通过 dataTransfer.getData(“Text”) 方法获得被拖的数据。该方法将返回在 setData() 方法中设置为相同类型的任何数据。</li>
<li>被拖数据是被拖元素的 id (“drag1”)</li>
<li>把被拖元素追加到放置元素（目标元素）中</li>
</ul>
<h4 id="7-2-拖放-Drag-和-Drop-各属性生命周期"><a href="#7-2-拖放-Drag-和-Drop-各属性生命周期" class="headerlink" title="7.2 拖放(Drag 和 Drop)各属性生命周期"></a>7.2 拖放(Drag 和 Drop)各属性生命周期</h4><table>
<thead>
<tr>
<th>拖动生命周期</th>
<th>属性</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>拖动开始</td>
<td>ondragstart</td>
<td>script</td>
<td>在拖动操作开始时执行脚本（对象是被拖拽元素）</td>
</tr>
<tr>
<td>拖动过程中</td>
<td>ondrag</td>
<td>script</td>
<td>只要脚本在被拖动就允许脚本（对象是被拖拽元素）</td>
</tr>
<tr>
<td>拖动过程中</td>
<td>ondragenter</td>
<td>script</td>
<td>当元素被拖动到一个合法的放置目标时，执行脚本（对象是目标元素）</td>
</tr>
<tr>
<td>拖动过程中</td>
<td>ondragover</td>
<td>script</td>
<td>只要元素正在合法的放置目标上拖动时，就执行脚本（对象是目标元素）</td>
</tr>
<tr>
<td>拖动过程中</td>
<td>ondragleave</td>
<td>script</td>
<td>当元素离开合法的放置目标时（对象是目标元素）</td>
</tr>
<tr>
<td>拖动结束</td>
<td>ondrop</td>
<td>script</td>
<td>将被拖拽元素放在目标元素内时运行脚本（对象是目标元素）</td>
</tr>
<tr>
<td>拖动结束</td>
<td>ondragend</td>
<td>script</td>
<td>在拖动操作结束时运行脚本（对象是被拖拽元素）</td>
</tr>
</tbody></table>
<p><strong>写在哪呢？</strong></p>
<p>其实参照上表“描述”中括号内的提示即可知道，不过为了能更直观的了解到，特呈上代码：</p>
<p><strong>被拖放元素</strong></p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;span <span class="attribute">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attribute">id</span>=<span class="string">&quot;Span1&quot;</span> </span><br><span class="line">    <span class="attribute">ondragstart</span>=<span class="string">&quot;fooDragStart(this, event)&quot;</span> </span><br><span class="line">    <span class="attribute">ondrag</span>=<span class="string">&quot;fooDrag(this, event)&quot;</span> </span><br><span class="line">    <span class="attribute">ondragend</span>=<span class="string">&quot;fooDragEnd(this, event)&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p><strong>目标元素</strong></p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span>  <span class="built_in">id</span>=<span class="string">&quot;div1&quot;</span> ondrop=<span class="string">&quot;fooDrop(this, event)&quot;</span></span><br><span class="line">                ondragenter=<span class="string">&quot;fooDragEnter(this, event)&quot;</span> </span><br><span class="line">                ondragleave=<span class="string">&quot;fooDragLeave(this, event)&quot;</span></span><br><span class="line">                ondragover=<span class="string">&quot;fooDragOver(this,event)&quot;</span>&gt;</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="7-3-执行顺序"><a href="#7-3-执行顺序" class="headerlink" title="7.3 执行顺序"></a>7.3 执行顺序</h4><p>下面，我将展示将一张图片放入div中的整个script执行过程：</p>
<p><strong>执行元素介绍</strong></p>
<p><img data-src="pic1.jpg"></p>
<p><strong>执行结果</strong></p>
<ul>
<li>成功将图片拖入div中</li>
</ul>
<p><img data-src="pic2.jpg"></p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">on</span>DragStart，当元素被拖动到一个合法的放置目标时，执行脚本（对象是目标元素）</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>DragEnter，在拖动操作开始时执行脚本</span><br><span class="line"><span class="keyword">on</span>DragOver，只要元素正在合法的放置目标上拖动时，就执行脚本（对象是目标元素）</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>DragOver，只要元素正在合法的放置目标上拖动时，就执行脚本（对象是目标元素）</span><br><span class="line"><span class="keyword">on</span>Drop，在拖动操作结束时运行脚本-------------------------------------</span><br><span class="line"><span class="keyword">on</span>DragEnd，在拖动操作结束时运行脚本</span><br></pre></td></tr></table></figure>

<ul>
<li>已拖放，可最终未放入div中</li>
</ul>
<p><img data-src="pic3.jpg"></p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">on</span>DragStart，当元素被拖动到一个合法的放置目标时，执行脚本（对象是目标元素）</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>DragEnter，在拖动操作开始时执行脚本</span><br><span class="line"><span class="keyword">on</span>DragOver，只要元素正在合法的放置目标上拖动时，就执行脚本（对象是目标元素）</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>DragOver，只要元素正在合法的放置目标上拖动时，就执行脚本（对象是目标元素）</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>DragLeave，当元素离开合法的放置目标时（对象是目标元素）---------------------</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>Drag，只要脚本在被拖动就允许脚本</span><br><span class="line"><span class="keyword">on</span>DragEnd，在拖动操作结束时运行脚本</span><br></pre></td></tr></table></figure>

<p>由上两个执行顺序的Log能看出：</p>
<blockquote>
<ol>
<li>只有将“被拖拽元素”放入“目标元素”才会执行“onDrop”属性的方法；</li>
<li>“onDrag”的事件只要鼠标按住并且拖动就会持续不断的执行；</li>
<li>“onDragOver”的事件是只要鼠标按住、拖动“被拖拽元素”在“目标元素”上滑过就会持续不断的执行；</li>
<li>“onDragEnd”的事件无论如何，只要按住的鼠标放开了，就会执行</li>
</ol>
</blockquote>
<h4 id="7-4-深入"><a href="#7-4-深入" class="headerlink" title="7.4 深入"></a>7.4 深入</h4><p>一些深入的比如“<code>文件的拖放</code>”、“<code>从浏览器拖放到桌面</code>”以及“<code>从桌面拖放到浏览器</code>”等</p>
<h4 id="7-5-扩展"><a href="#7-5-扩展" class="headerlink" title="7.5 扩展"></a>7.5 扩展</h4><h5 id="7-5-1-MIME类型"><a href="#7-5-1-MIME类型" class="headerlink" title="7.5.1 MIME类型"></a>7.5.1 MIME类型</h5><blockquote>
<p>  ·text/plain：文本文字</p>
<p>  ·text/html：HTML文字</p>
<p>  ·text/xml：XML文字</p>
<p>  ·text/uri-list：URL列表，每个URL为一行</p>
</blockquote>
<h5 id="7-5-2-JS的dataTransfer对象"><a href="#7-5-2-JS的dataTransfer对象" class="headerlink" title="7.5.2 JS的dataTransfer对象"></a>7.5.2 JS的dataTransfer对象</h5><p>​    提供对于预定义的剪贴板格式的访问,以便在拖拽中使用。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
<th>参数</th>
</tr>
</thead>
<tbody><tr>
<td>dropEffect</td>
<td>设置或返回拖放目标上允许发生的拖放行为和要显示的光标类型</td>
<td>copy 复制样式被显示link 链接样式被显示move 移动样式被显示none 默认,没有鼠标样式被定义</td>
</tr>
<tr>
<td>effectAllowed</td>
<td>设置或返回被拖动元素允许发生的拖动行为与该对象的源元素。</td>
<td>copy 选项被复制link 选项被dataTransfer作为link方式保存move 当放置时,对象被移动至目标对象copylink 选项是被复制还是被作为link方式保存关键在于目标对象linkmove 选项是被作为link方式保存还是被移动关键在于目标对象all 所有效果都被支持none 不支持任何效果uninitialized 默认不能通过这个属性传递任何值</td>
</tr>
<tr>
<td>types</td>
<td>存入数据的种类，字符串的伪数组</td>
<td></td>
</tr>
<tr>
<td>clearData()</td>
<td>清除DataTransfer对象中存放的数据，如果省略参数format，则清楚全部数据</td>
<td></td>
</tr>
<tr>
<td>setData(format,data)</td>
<td>将指定格式的数据赋值给dataTransfer对象</td>
<td>参数format定义数据的格式也就是数据的类型，data为待赋值的数据</td>
</tr>
<tr>
<td>getData(format,data)</td>
<td>从dataTransfer对象中获取指定格式的数据</td>
<td>format代表数据格式，data为数据。</td>
</tr>
<tr>
<td>setDragImage(Element image，long x,long y)</td>
<td>用img元素来设置拖放图标(部分浏览器中可以用canvas等其他元素来设置)</td>
<td>element设置自定义图标，x设置图标与鼠标在水平方向上的距离，y设置图标与鼠标在垂直方向上的距离。</td>
</tr>
</tbody></table>
<p>​    effectAllowed定义了在源对象上的操作,可定义在ondragstart事件中。 </p>
<p>​    dropEffect定义了在目标对象上的操作,可定义在ondrop,ondragenter,ondragover事件中。 </p>
<p>​    effectAllowed可以定义all操作,但是dropEffect可以定义copy操作。</p>
<h3 id="8-Web-Storage"><a href="#8-Web-Storage" class="headerlink" title="8 Web Storage"></a>8 Web Storage</h3><p>使用HTML5可以在本地存储用户的浏览数据。</p>
<p>客户端存储数据的两个对象为：</p>
<p><strong>localStorage ：</strong>没有时间限制的数据存储</p>
<p><strong>sessionStorage ：</strong> 针对一个 session 的数据存储, 当用户关闭浏览器窗口后，数据会被删除。</p>
<p>不管是 <strong>localStorage</strong>，还是 <strong>sessionStorage</strong>，可使用的API都相同，常用的有如下几个（以localStorage为例）：</p>
<p>　　1、保存数据：localStorage.setItem(key,value);</p>
<p>　　2、读取数据：localStorage.getItem(key);</p>
<p>　　3、删除单个数据：localStorage.removeItem(key);</p>
<p>　　4、删除所有数据：localStorage.clear();</p>
<p>　　5、得到某个索引的key：localStorage.key(index);</p>
<h3 id="9-WebSocket"><a href="#9-WebSocket" class="headerlink" title="9. WebSocket"></a>9. WebSocket</h3><blockquote>
<p>可参考 <a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html">阮一峰日志</a> 深入学习</p>
<p>其中用到的<a href="https://jsbin.com/muqamiqimu/edit?js,console">演示平台</a> <code>jsbin.com</code></p>
<p>以及其使用<a href="https://www.cnblogs.com/rammstein/p/4042842.html">教程</a></p>
</blockquote>
<p><strong>WebSocket</strong> 是HTML5开始提供的一种在单个 TCP 连接上进行全双工通讯的协议。</p>
<blockquote>
<p><a href="https://baike.baidu.com/item/RS-422">RS-422</a>标准就是<a href="https://baike.baidu.com/item/%E5%85%A8%E5%8F%8C%E5%B7%A5/310007">全双工</a>通信标准。全双工（Full Duplex）是 在微处理器与外围设备之间采用发送线和接受线各自独立的方法，可以使数据在两个方向上同时进行传送操作。指在发送数据的同时也能够接收数据，两者同步进行，这好像我们平时打电话一样，说话的同时也能够听到对方的声音。网卡一般都支持全双工。</p>
<p><a href="https://baike.baidu.com/item/%E5%85%A8%E5%8F%8C%E5%B7%A5%E4%BB%A5%E5%A4%AA%E7%BD%91">全双工以太网</a>使用两条电缆线，而不是像<a href="https://baike.baidu.com/item/%E5%8D%8A%E5%8F%8C%E5%B7%A5/309852">半双工</a>方式那样使用一对电缆线。全双工方式在发送设备的发送方和接收设备的接收方之间采取点到点的连接，这意味着在全双工的传送方式下，可以得到更高的<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E9%80%9F%E5%BA%A6">数据传输速度</a>。</p>
</blockquote>
<p>在WebSocket22通过 <strong>send()</strong> 方法来向服务器发送数据，并通过 <strong>onmessage</strong> 事件来接收服务器返回的数据。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>W3Cschool教程(w3cschool.cn)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">      <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">         <span class="function"><span class="keyword">function</span> <span class="title">WebSocketTest</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="string">&quot;WebSocket&quot;</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span></span><br><span class="line"><span class="javascript">               alert(<span class="string">&quot;您的浏览器支持 WebSocket!&quot;</span>);</span></span><br><span class="line">               </span><br><span class="line"><span class="javascript">               <span class="comment">// 打开一个 web socket</span></span></span><br><span class="line"><span class="javascript">               <span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">&quot;ws://localhost:9998/echo&quot;</span>);</span></span><br><span class="line">                </span><br><span class="line"><span class="javascript">               ws.onopen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                  <span class="comment">// Web Socket 已连接上，使用 send() 方法发送数据</span></span></span><br><span class="line"><span class="javascript">                  ws.send(<span class="string">&quot;发送数据&quot;</span>);</span></span><br><span class="line"><span class="javascript">                  alert(<span class="string">&quot;数据发送中...&quot;</span>);</span></span><br><span class="line">               &#125;;</span><br><span class="line">                </span><br><span class="line"><span class="javascript">               ws.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">evt</span>) </span>&#123; </span></span><br><span class="line"><span class="javascript">                  <span class="keyword">var</span> received_msg = evt.data;</span></span><br><span class="line"><span class="javascript">                  alert(<span class="string">&quot;数据已接收...&quot;</span>);</span></span><br><span class="line">               &#125;;</span><br><span class="line">                </span><br><span class="line"><span class="javascript">               ws.onclose = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span></span><br><span class="line"><span class="javascript">                  <span class="comment">// 关闭 websocket</span></span></span><br><span class="line"><span class="javascript">                  alert(<span class="string">&quot;连接已关闭...&quot;</span>); </span></span><br><span class="line">               &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line"><span class="javascript">            <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">               <span class="comment">// 浏览器不支持 WebSocket</span></span></span><br><span class="line"><span class="javascript">               alert(<span class="string">&quot;您的浏览器不支持 WebSocket!&quot;</span>);</span></span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">   <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;sse&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:WebSocketTest()&quot;</span>&gt;</span>运行 WebSocket<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">   <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="二、浏览器标准模式和怪异模式"><a href="#二、浏览器标准模式和怪异模式" class="headerlink" title="二、浏览器标准模式和怪异模式"></a>二、浏览器标准模式和怪异模式</h2><blockquote>
<p>转自<a href="https://www.jianshu.com/p/dcab7cde8c04">简书</a></p>
</blockquote>
<h3 id="标准模式和怪异模式的来由"><a href="#标准模式和怪异模式的来由" class="headerlink" title="标准模式和怪异模式的来由"></a>标准模式和怪异模式的来由</h3><p>在HTML与CSS的标准化未完成之前，各个浏览器对于HTML和CSS的解析有各自不同的实现，而有很多旧的网页都是按照这些非标准的实现去设计的。在HTML与CSS标准确定之后，浏览器一方面要按照标准去实现对HTML与CSS的支持，另一方面又要保证对非标准的旧网页设计的后向兼容性。因此，现代的浏览器一般都有两种渲染模式：<strong>标准模式</strong>和<strong>怪异模式</strong>。在<strong>标准模式</strong>下，浏览器按照HTML与CSS标准对文档进行解析和渲染；而在<strong>怪异模式</strong>下，浏览器则按照旧有的非标准的实现方式对文档进行解析和渲染。这样的话，对于旧有的网页，浏览器启动怪异模式，就能够使得旧网页正常显示；对于新的网页，则可以启动标准模式，使得新网页能够使用HTML与CSS的标准特性。</p>
<h3 id="浏览器如何确定使用哪种渲染模式"><a href="#浏览器如何确定使用哪种渲染模式" class="headerlink" title="浏览器如何确定使用哪种渲染模式"></a>浏览器如何确定使用哪种渲染模式</h3><p>知道了这两种渲染模式的来由，那剩下的问题就是浏览器如何能够确定应该使用哪种模式了。其实归根结底就是，浏览器如何能将旧网页与新网页区分开来。<br> 平常编写网页的时候，一般都会见到HTML文档的头部会有文档类型声明：<code>DOCTYPE</code>。当浏览器遇到正确的文档声明时，浏览器就会启动标准模式，按照制定的文档类型标准解析和渲染文档。而对于旧有的网页，由于网页编写的当时标准还没有确定，所以一般是不会有文档类型声明的。所以，对于没有文档类型声明或者文档类型声明不正确的文档，浏览器就会认为它是一个旧的HTML文档，就会使用怪异模式解析和渲染该文档。关于<code>DOCTYPE</code>的更详细说明，请戳这里 <a href="https://www.jb51.net/web/34217.html">DOCTYPE声明作用及用法详解</a>。</p>
<h3 id="标准模式与怪异模式的两个常见区别"><a href="#标准模式与怪异模式的两个常见区别" class="headerlink" title="标准模式与怪异模式的两个常见区别"></a>标准模式与怪异模式的两个常见区别</h3><ul>
<li><strong>盒模型的处理差异：</strong>标准CSS盒模型的宽度和高度等于内容区的高度和宽度，不包含内边距和边框，而IE6之前的浏览器实现的盒模型的宽高计算方式是包含内边距和边框的。因此，对于IE，怪异模式和标准模式下的盒模型宽高计算方式是不一样的；</li>
<li><strong>行内元素的垂直对齐：</strong>很多早期的浏览器对齐图片至包含它们的盒子的下边框，虽然CSS的规范要求它们被对齐至盒内文本的基线。标准模式下，基于Gecko的浏览器将会对齐至基线，而在quirks模式下它们会对齐至底部。最直接的例子就是图片的显示。在标准模式下，图片并不是与父元素的下边框对齐的，如果仔细观察，你会发现图片与父元素下边框之间存在一点小空隙。那是因为标准模式下，图片是基线对齐的。而怪异模式下，则不存在这个问题。具体请看这篇文章 <a href="https://www.zhangxinxu.com/wordpress/2015/08/css-deep-understand-vertical-align-and-line-height/?shrink=1">CSS深入理解vertical-align和line-height的基友关系</a>。</li>
</ul>
<h2 id="三、HTML与XHTML的区别"><a href="#三、HTML与XHTML的区别" class="headerlink" title="三、HTML与XHTML的区别"></a>三、HTML与XHTML的区别</h2><blockquote>
<p><code>HTML</code>(文本标记语言)是英文HyperText Markup Language的简称，用于创建网页的标准标记语言，html并不是编程语言，HTML 运行在浏览器上由浏览器来解析翻译给网站访客，它是建设网站的基础。Html5代表了下一代html的发展，html5功能已经很强大。</p>
<p><code>XHTML</code>(可扩展标识语言)是The Extensible Markup Language的简写,XHTML 1.0在2000年1月26日成为W3C的推荐标准。XHTML1.0是源自W3C的最新的HTML标准，是Web的语言，是M站软件幵发必不可少的Web构件之一，每一个Web开发者都需要对它熟练掌握。</p>
</blockquote>
<p><strong>功能区别：</strong></p>
<ul>
<li>HTML对于各大浏览器兼容性较差(pc端浏览器、手机端浏览器、PAD)，对于网页页面编写技巧要求比较高，现在web前端开发的静态网页，一般都是html4.0，HTML5就另当别论了。</li>
<li>XHTML可以很好处理各大浏览器的兼容(pc端浏览器、手机端浏览器、PAD)，看起来与HTML有些相象但是和HTML有不少的区别，XHTML的语法较为严谨，习惯松散结构的HTML编写者刚开始接触XHTML有些不习惯。XHTML结合了部分XML的强大功能及大多数HTML的简单特性。</li>
</ul>
<p><strong>书写习惯区别</strong></p>
<ul>
<li>HTML标签不区分大小写XHTML所有标签都必须小写。</li>
<li>XHTML标签必须成双成对.</li>
<li>html对标签顺序要求不严格，XHTML标签顺序必须正确</li>
</ul>
<h2 id="四、使用data"><a href="#四、使用data" class="headerlink" title="四、使用data-*"></a>四、使用data-*</h2><ul>
<li>data-* 属性用于存储页面或应用程序的私有自定义数据。</li>
<li>data-* 属性赋予我们在所有 HTML 元素上嵌入自定义 data 属性的能力。</li>
<li>存储的（自定义）数据能够被页面的 JavaScript 中利用，以创建更好的用户体验（不进行 Ajax 调用或服务器端数据库查询）。</li>
</ul>
<p>data-* 属性包括两部分：</p>
<p>   <strong>语法  &lt;*element* data-*=”*somevalue*”&gt;</strong></p>
<ul>
<li>属性名不应该包含任何大写字母，并且在前缀 “data-“ 之后必须有至少一个字符</li>
<li>属性值可以是任意字符串</li>
</ul>
<blockquote>
<p>注释：用户代理会完全忽略前缀为 “data-“ 的自定义属性。</p>
</blockquote>
<p><strong>Example</strong>:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">showDetails</span>(<span class="params">animal</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> animalType = animal.getAttribute(<span class="string">&quot;data-animal-type&quot;</span>);</span></span><br><span class="line"><span class="javascript">alert(animal.innerHTML + <span class="string">&quot;是一种&quot;</span> + animalType + <span class="string">&quot;。&quot;</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>物种<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>点击某个物种来查看其类别：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">onclick</span>=<span class="string">&quot;showDetails(this)&quot;</span> <span class="attr">id</span>=<span class="string">&quot;owl&quot;</span> <span class="attr">data-animal-type</span>=<span class="string">&quot;鸟类&quot;</span>&gt;</span>喜鹊<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">onclick</span>=<span class="string">&quot;showDetails(this)&quot;</span> <span class="attr">id</span>=<span class="string">&quot;salmon&quot;</span> <span class="attr">data-animal-type</span>=<span class="string">&quot;鱼类&quot;</span>&gt;</span>金枪鱼<span class="tag">&lt;/<span class="name">li</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">onclick</span>=<span class="string">&quot;showDetails(this)&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tarantula&quot;</span> <span class="attr">data-animal-type</span>=<span class="string">&quot;蜘蛛&quot;</span>&gt;</span>蝇虎<span class="tag">&lt;/<span class="name">li</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>优势</strong></p>
<ul>
<li>自定义属性，可以被js很好的操作</li>
<li>H5的新属性</li>
<li>通过js的element.dataset.<em>或jQuery的data(‘</em>‘)拿到，*可以为url等字符</li>
<li>框架的数据绑定，例如<code>data-ng-if=&quot;cs==1&quot;</code></li>
</ul>
<p><strong>使用</strong></p>
<p> data-toggle 这种以 <strong>data-</strong> 开头的格式放在元素上表示元素携带的数据，如：</p>
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><span class="line">&lt;``img` `id``=``<span class="string">&quot;img&quot;</span>` `src``=``<span class="string">&quot;small.jpg&quot;</span>` `data-bigimg``=``<span class="string">&quot;big.jpg&quot;</span>` `/&gt;</span><br></pre></td></tr></table></figure>

<p>JQuery的 <strong>data()</strong> 方法可以直接操作，如：</p>
<figure class="highlight julia"><table><tr><td class="code"><pre><span class="line">//获取：<span class="string">``</span>var<span class="string">` `</span>bigImage = $(<span class="string">``</span><span class="string">&quot;#img&quot;</span><span class="string">``</span>).data(<span class="string">``</span><span class="string">&quot;bigimg&quot;</span><span class="string">``</span>);<span class="string">``</span>//注意，这里不用加 data-</span><br><span class="line">//设置：<span class="string">``</span>$(<span class="string">``</span><span class="string">&quot;#img&quot;</span><span class="string">``</span>).data(<span class="string">``</span><span class="string">&quot;bigimg&quot;</span><span class="string">``</span>,<span class="string">``</span><span class="string">&quot;newBig.jpg&quot;</span><span class="string">``</span>);<span class="string">``</span>//注意，这里也不用加 data-</span><br></pre></td></tr></table></figure>

<p>用这种 <code>$(&quot;[data-bigimg]&quot;)</code> 的方式可以选择所有具有 <code>data-bigimg</code> 这个属性的元素。</p>
<p>也可以直接通过<code>$(&quot;#img&quot;).attr(&quot;data-bigimg&quot;);</code> 来获取和设置</p>
<h2 id="五、HTML模板引擎"><a href="#五、HTML模板引擎" class="headerlink" title="五、HTML模板引擎"></a>五、HTML模板引擎</h2><blockquote>
<p>模板引擎（这里特指用于Web开发的模板引擎）是为了使用户界面与业务数据（内容）分离而产生的，它可以生成特定格式的文档，用于网站的模板引擎就会生成一个标准的<a href="https://baike.baidu.com/item/HTML/97049">HTML</a>文档。</p>
</blockquote>
<blockquote>
<p>其他待补充</p>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>Html</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML标签</title>
    <url>/2020/08/31/HTML-tags/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>总结了一下关于HTML标签的内容</p>
<p>–  <code>HTML5</code>废弃标签</p>
<p>–  <code>HTML5</code>新增语义化标签</p>
<p>–  <code>&lt;a&gt;</code>标签</p>
<p>–  <code>&lt;table&gt;</code>标签</p>
<p>–  <code>HTML</code>语义化</p>
</blockquote>
<a id="more"></a>

<h2 id="一、Html5废弃标签"><a href="#一、Html5废弃标签" class="headerlink" title="一、Html5废弃标签"></a>一、Html5废弃标签</h2><h3 id="第一类：表现性元素"><a href="#第一类：表现性元素" class="headerlink" title="第一类：表现性元素"></a>第一类：表现性元素</h3><ul>
<li>basefont</li>
<li>big</li>
<li>center</li>
<li>font</li>
<li>s</li>
<li>strike</li>
<li>tt</li>
<li>u</li>
</ul>
<p>建议用语义正确的元素代替他们，并使用CSS来确保渲染后的效果</p>
<h3 id="第二类：框架类元素"><a href="#第二类：框架类元素" class="headerlink" title="第二类：框架类元素"></a>第二类：框架类元素</h3><p>因框架有很多可用性及可访问性问题，HTML5规范将以下元素移除。</p>
<ul>
<li>frame</li>
<li>frameset</li>
<li>noframes</li>
</ul>
<p>但html5支持iframe。</p>
<h3 id="第三类：属性类"><a href="#第三类：属性类" class="headerlink" title="第三类：属性类"></a>第三类：属性类</h3><p>很多表现性的属性也被新规范移除，如下：</p>
<ul>
<li>align</li>
<li>body标签上的link、vlink、alink、text属性</li>
<li>bgcolor</li>
<li>height和width</li>
<li>iframe元素上的scrolling属性</li>
<li>valign</li>
<li>hspace和vspace</li>
<li>table标签上的cellpadding、cellspacing和border属性</li>
<li>header标签上的profile属性</li>
<li>链接标签a上的target属性</li>
<li>img和iframe元素的longdesc属性</li>
</ul>
<h3 id="第四类：其他"><a href="#第四类：其他" class="headerlink" title="第四类：其他"></a>第四类：其他</h3><ul>
<li>abbr取代acronym（用于表示缩写）</li>
<li>object取代了applet</li>
<li>ul取代了dir</li>
</ul>
<blockquote>
<p>另附上直观的：<a href="http://demo.yanue.net/HTML5element/">html5元素周期表</a></p>
</blockquote>
<h2 id="二、HTML5新增的语义化标签"><a href="#二、HTML5新增的语义化标签" class="headerlink" title="二、HTML5新增的语义化标签"></a>二、HTML5新增的语义化标签</h2><p>主要有：<code> &lt;article&gt;、&lt;section&gt;、&lt;nav&gt;、&lt;aside&gt;、&lt;header&gt;、&lt;footer&gt;、&lt;time&gt;</code>等等…</p>
<p><img data-src="pic1.png"></p>
<h3 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h3><ul>
<li>为了在没有CSS的情况下，页面也能呈现出很好地内容结构、代码结构</li>
<li>比<code>&lt;div&gt;</code>标签有更加丰富的含义，方便开发与维护</li>
<li>方便搜索引擎能识别页面结构，有利于<code>SEO</code></li>
<li>方便其他设备解析（如移动设备、盲人阅读器等）</li>
<li>有利于合作，遵守W3C标准</li>
</ul>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><ul>
<li>尽可能少的使用无语义的标签div和span</li>
<li>在语义不明显时，既可以使用div或者p时，尽量用p，因为p在默认情况下有上下间距，对兼容特殊终端有利</li>
<li>不要使用纯样式标签，如：b、font、u等，改用css设置</li>
<li>需要强调的文本，可以包含在strong或者em标签中</li>
<li>使用表格时，标题要用caption，表头用thead，主体部分用tbody包围，尾部用tfoot包围。表头和一般单元格要区分开，表头用th，单元格用td</li>
<li>表单域要用fieldset标签包起来，并用legend标签说明表单的用途</li>
<li>每个input标签对应的说明文本都需要使用label标签，并且通过为input设置id属性</li>
</ul>
<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><h4 id="1-header与hgroup"><a href="#1-header与hgroup" class="headerlink" title="1. header与hgroup"></a>1. <code>header</code>与<code>hgroup</code></h4><p>放在页面或布局的顶部，一般放置导航栏或标题，如：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>**信息科技有限公司<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一个文档中可以包含一对或者一对以上的<code>&lt;header&gt;</code>标签。<br> 标签的位置是次要的，不一定非要显示在页面的上方，我们可以为任何需要的区块标签添加<code>&lt;header&gt;</code>元素，例如下面将要讲解的<code>&lt;article&gt;</code>、<code>&lt;section&gt;</code>等标签。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hgroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一篇介绍HTML 5语义化标签和更简洁的结构<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>HTML 5<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hgroup</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果有连续多个h1-h6标签就用hgroup</li>
<li>如果有连续多个标题和其他文章数据，h1-h6标签就用hgroup包住，和其他文章元数据一起放入header标签</li>
</ul>
<h4 id="2-nav"><a href="#2-nav" class="headerlink" title="2. nav"></a>2. nav</h4><p>表示页面的导航，也可以在<code>&lt;header&gt;</code>标签中使用，还可以显示在侧边栏中。一个页面之中可以有多个<code>&lt;nav&gt;</code>标签。<br> 为了方便搜索引擎解析，最好是将主要的链接放在nav中。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h1</span>&gt;</span>**信息科技有限公司<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;example.html&quot;</span>&gt;</span>客户案例<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;service_one.html&quot;</span>&gt;</span>技术服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>          </span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;aboutus_one.html&quot;</span>&gt;</span>关于我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;connection.html&quot;</span>&gt;</span>联系我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-aside"><a href="#3-aside" class="headerlink" title="3. aside"></a>3. aside</h4><p>所包含的内容不是页面的主要内容、具有独立性，是对页面的补充。<br><code> &lt;aside&gt;</code>一般使用在页面、文章的侧边栏、广告、友情链接等区域。</p>
<h4 id="4-footer"><a href="#4-footer" class="headerlink" title="4. footer"></a>4. footer</h4><p>一般被放置在页面或者页面中某个区块的底部，包含版权信息、联系方式等信息。一个页面也可以有多个footer</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">small</span>&gt;</span></span><br><span class="line">        版权所有 © 2016-2017 **信息科技有限公司</span><br><span class="line">    <span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-article"><a href="#5-article" class="headerlink" title="5. article"></a>5. article</h4><p><code>&lt;article&gt;</code>元素应该使用在相对比较独立、完整的的内容区块，所以我们可以在一篇博客、一个论坛帖子、一篇新闻报道或者一个用户评论中使用<code>&lt;article&gt;</code>元素。article可以互相嵌套。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h1</span>&gt;</span>HTML5学习之语义化标签<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>....正文.....<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">footer</span>&gt;</span>版权所有*伪版必究<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-section"><a href="#6-section" class="headerlink" title="6. section"></a>6. section</h4><p>一组或者一节内容。</p>
<p><strong><code>&lt;div&gt;</code>、<code>&lt;section&gt;</code>、<code>&lt;article&gt;</code>三者的比较：</strong></p>
<p><code>&lt;div&gt;</code>：应用广泛，任意一个区域<br><code>&lt;section&gt;</code>：包含的内容是一个明确的主题，通常有标题区域<br><code>&lt;article&gt;</code>：如果我们的页面中需要一个单独的模块来实现一个单独的功能，就用<code>&lt;article&gt;</code>，其他的时候都用<code>&lt;section&gt;</code></p>
<h4 id="7-time"><a href="#7-time" class="headerlink" title="7. time"></a>7. time</h4><p>可以带格式的时间标签</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;2017-07-03&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-mark"><a href="#8-mark" class="headerlink" title="8. mark"></a>8. mark</h4><p>高亮</p>
<h4 id="9-address"><a href="#9-address" class="headerlink" title="9. address"></a>9. address</h4><p>address代表区块容器，必须是作为联系信息出现，邮编地址、邮件地址等等,一般出现在footer。</p>
<h2 id="三、-lt-a-gt-标签"><a href="#三、-lt-a-gt-标签" class="headerlink" title="三、&lt;a&gt;标签"></a>三、<code>&lt;a&gt;</code>标签</h2><figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">click</span>=<span class="string">&quot;function()</span></span></span><span class="template-variable">&#123;&#125;</span><span class="xml"><span class="tag"><span class="string">&quot;</span> /&gt;</span>=</span></span><br></pre></td></tr></table></figure>

<h3 id="1-a-标签样式"><a href="#1-a-标签样式" class="headerlink" title="1. a 标签样式"></a>1. a 标签样式</h3><p> 一组专门的预定义的类称为伪类用于处理超链接的状态，超链接的文字的状态可以通过伪类选择器+样式类进行控制  <code>&lt;a class=&quot;mycls&quot; &gt;&lt;/a&gt;</code></p>
<ul>
<li><p>所有状态下的链接 <code>.mycls&#123;color:red&#125;</code></p>
</li>
<li><p><code>a:link</code> 未访问的连接<code> .mycls a:link&#123;color:blue&#125;</code></p>
</li>
<li><p><code>a:visited</code> 已访问的链接<code>.mycls a:visited&#123;color: visited&#125;</code></p>
</li>
<li><p><code>a:active</code>  激活时（链接获取焦点）链接的颜色<code> .mycls a:active&#123;color:blue&#125;</code></p>
</li>
</ul>
<p>一般情况下 a:hiver和a:visited的颜色是一种的，这4个状态的过程是： <code>a:link -&gt;a:hover-&gt;a:active-&gt;a:visited</code><br>另外，a：active不能设置有无下划线（总是有的）</p>
<pre><code> &lt;style&gt;
    a &#123;font-size:16px&#125; 
    a:link &#123;color: blue; text-decoration:none;&#125; //未访问：蓝色、无下划线 
    a:active:&#123;color: red; &#125; //激活：红色 
    a:visited &#123;color:purple;text-decoration:none;&#125; //已访问：purple、无下划线 
    a:hover &#123;color: red; text-decoration:underline;&#125; //鼠标移近：红色、下划线 
  &lt;/style&gt;</code></pre>
<h3 id="2-target的属性"><a href="#2-target的属性" class="headerlink" title="2. target的属性"></a>2. target的属性</h3><p><code>&lt;a&gt;</code>标签的target属性规定在何处打开链接文档<br>如下面这行表示在新的窗口中打开文档<br><code> &lt;a href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot;&gt; visit w3school &lt;/a&gt;</code></p>
<p>可选值：<code>_blank</code>、<code>_parent</code>、<code>_self</code>、<code>_top</code>、<code>*framename*</code></p>
<p><strong>_blank</strong>        浏览器总在一个新打开，未命名的窗口中载入目标文档 </p>
<p><strong>_self</strong>        这个目标的值对所有没有指定目标的<code>&lt;a&gt;</code>标签是默认目标。它使得目标文档载入并显示在相同的框架或者窗口中作为源文档。这个目标是多余的且不必要的，除非和文档标题<code>&lt;base&gt;</code>标签中的target属性一起使用    </p>
<p><strong>_parent</strong>        在父框架集中打开被链接的文档</p>
<p><strong>_top</strong>              在整个窗口打开被链接文档</p>
<p><strong>framename</strong>   在指定的框架中打开被链接文档</p>
<h3 id="3-name属性"><a href="#3-name属性" class="headerlink" title="3. name属性"></a>3. name属性</h3><p><code>name</code>属性规定锚(anchor)的名称，可以使用<code>name</code>属性创建html页面中的书签，书签不会以任何独特方式显示，它对读者可以是不可见的。<br>当使用<code>命名锚</code>(named anchors)时，我们可以创建直接跳转至该命名锚(比如页面中某个小节)的链接,这样使用者就无需不停滚动页面来寻找需要的信息了。<br><strong>命名语法</strong><br><code>&lt;a name=&quot;label&quot;&gt;锚(显示在页面上的文本)&lt;/a&gt;</code></p>
<ul>
<li>锚名称可以是任何名字</li>
<li>可以使用id属性来代替name属性，命名锚同样有效</li>
</ul>
<p><strong>例子</strong><br>  1)我们在html文档中对锚进行命名(创建一个书签)<br>  <code>&lt;a name=&quot;tips&quot;&gt;基本的注意事项 - 有用的提示&lt;/a&gt;</code><br>  2）在同一个文档中创建指向该锚的链接<br>  <code>&lt;a href=&quot;tips&quot;&gt;有用的提示&lt;/a&gt;</code><br>  3)也可以在其他页面中创建指向，该锚的链接<br>  <code>&lt;a href=&quot;http://mypro#trip&quot;&gt;有用的提示&lt;a&gt;</code></p>
<h3 id="4-标签事件"><a href="#4-标签事件" class="headerlink" title="4. 标签事件"></a>4. 标签事件</h3><p>将<code>&lt;a&gt;</code>标签的<code>href</code>属性值设置为”#”，并设置<code>onclick</code>属性。<br>在这种处理方式下，用户可以很明显地看出哪些文字是超链接。<br>在单击该超链接时，也可以执行onclick属性值中的JavaScript语句，并且不会跳转网页。</p>
<blockquote>
<p>但是，由于href的属性值为”#”，浏览器会自动跳 转到当前网页的顶部。<br>如果当前网页内容比较多，浏览器窗口出现下拉滚动条时，可以很明显地看到跳转，而这种跳转往往不是网页设计者的本意。</p>
</blockquote>
<p>在没有为<code>&lt;a&gt;</code>标签设置onclick属性时，如果单击了该超链接，浏览器会加载href属性中的URL。<br>如果href属性值并不是一 个URL，而是一个JavaScript语句的话，那么浏览器就会执行该语句。<br>因此，可以直接将JavaScript语句写在<code>&lt;a&gt;</code>标签的 href属性值中，让href属性代替onclick属性。</p>
<p><strong>在这种处理方式下，既可以响应click事件，又可以不让网页跳转。</strong></p>
<p><strong>注意</strong>：在 a 标签的属性值中添加JavaScript语句之前，必须要先使用”javascript:”语句来声明href属性值中的语句为<code>javaScript</code>语句，否则浏览器就会将href属性值中的JavaScript语句当成URL进行加载。<br><code>&lt;a  href=&quot;javascript:showFlag()&quot;&gt;ssgao&lt;/a&gt;  </code>   执行showFlag()方法<br><code>&lt;a  href=&quot;&quot; onclick=&quot;showFlag();&quot;&gt;ssgao&lt;/a&gt;</code>    执行showFlag()方法，并会跳转到href指向的页面—-&gt;当<code>href=&quot;&quot;</code>刷新当前页面<br><code>&lt;a  href=&quot;&quot;&gt;ssgao&lt;/a&gt;</code>  刷新当前页面<br><code>&lt;a  href=&quot;#&quot; onclick=&quot;showFlag();&quot;&gt;ssgao&lt;/a&gt;</code>   执行showFlag()方法，并会跳转到页面顶部<br><code>&lt;a href=&quot;#&quot; onclick=&quot;javascript:方法;return false;&quot;&gt;提交&lt;/a&gt;</code><br><code>&lt;a href=&quot;javascript:void(0)&quot; onclick=&quot;javascript:方法;return false;&quot;&gt;提交&lt;/a&gt;</code><br>javascript:void(0)就不会向上跳了<br>还有一个方法是 #this<br><code>a href=&quot;#this&quot; onclick=&quot;javascript:方法&quot;</code></p>
<h3 id="5-回到顶部或底部"><a href="#5-回到顶部或底部" class="headerlink" title="5. 回到顶部或底部"></a>5. 回到顶部或底部</h3><h4 id="使用JS"><a href="#使用JS" class="headerlink" title="使用JS"></a>使用JS</h4><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;#带有滚动条的元素&quot;</span>).animate(&#123;<span class="attr">scrollTop</span>:<span class="number">0</span>&#125;,<span class="string">&#x27;fase&#x27;</span>); <span class="comment">//带有动画</span></span><br><span class="line">$(<span class="string">&quot;#带有滚动条的元素&quot;</span>).scrollTop(<span class="number">0</span>)；<span class="comment">//不带动画</span></span><br><span class="line">scrollTop 距离滚动元素顶部的位置</span><br></pre></td></tr></table></figure>

<h4 id="使用a标签的name属性-锚记"><a href="#使用a标签的name属性-锚记" class="headerlink" title="使用a标签的name属性(锚记)"></a>使用a标签的name属性(锚记)</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;a <span class="attribute">name</span>=<span class="string">&quot;top&quot;</span>&gt;top&lt;/a&gt;</span><br><span class="line">&lt;a <span class="attribute">href</span>=<span class="string">&quot;#top&quot;</span>&gt; 点击此处跳转到<span class="attribute">name</span>=top的a标签的位置    </span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_charset.asp">charset</a></td>
<td align="left"><em>char_encoding</em></td>
<td align="left"><span style="color:red;">HTML5 中不支持。</span>规定被链接文档的字符集。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_coords.asp">coords</a></td>
<td align="left"><em>coordinates</em></td>
<td align="left"><span style="color:red;">HTML5 中不支持。</span>规定链接的坐标。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_download.asp">download</a></td>
<td align="left"><em>filename</em></td>
<td align="left">规定被下载的超链接目标。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_href.asp">href</a></td>
<td align="left"><em>URL</em></td>
<td align="left">规定链接指向的页面的 URL。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_hreflang.asp">hreflang</a></td>
<td align="left"><em>language_code</em></td>
<td align="left">规定被链接文档的语言。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_media.asp">media</a></td>
<td align="left"><em>media_query</em></td>
<td align="left">规定被链接文档是为何种媒介/设备优化的。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_name.asp">name</a></td>
<td align="left"><em>section_name</em></td>
<td align="left"><span style="color:red;">HTML5 中不支持。</span>规定锚的名称。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_rel.asp">rel</a></td>
<td align="left"><em>text</em></td>
<td align="left">规定当前文档与被链接文档之间的关系。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_rev.asp">rev</a></td>
<td align="left"><em>text</em></td>
<td align="left"><span style="color:red;">HTML5 中不支持。</span>规定被链接文档与当前文档之间的关系。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_shape.asp">shape</a></td>
<td align="left">defaultrectcirclepoly</td>
<td align="left"><span style="color:red;">HTML5 中不支持。</span>规定链接的形状。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_target.asp">target</a></td>
<td align="left">_blank_parent_self_top<em>framename</em></td>
<td align="left">规定在何处打开链接文档。</td>
</tr>
<tr>
<td align="left"><a href="https://www.w3school.com.cn/tags/att_a_type.asp">type</a></td>
<td align="left"><em>MIME type</em></td>
<td align="left">规定被链接文档的的 MIME 类型。</td>
</tr>
</tbody></table>
<h2 id="四、HTML-lt-table-gt-标签功能"><a href="#四、HTML-lt-table-gt-标签功能" class="headerlink" title="四、HTML&lt;table&gt;标签功能"></a>四、HTML<code>&lt;table&gt;</code>标签功能</h2><p>绘制表格使用；如果是做后台管理的用户列表等类似 Excel 功能，这个标签是最佳的选择</p>
<h3 id="1-table基础"><a href="#1-table基础" class="headerlink" title="1. table基础"></a>1. <code>table</code>基础</h3><ul>
<li><code>&lt;table&gt;</code> 标签定义 HTML 表格</li>
<li>一个 HTML 表格包括 <code>&lt;table&gt;</code> 元素，一个或多个 <code>&lt;tr&gt;</code>、<code>&lt;th&gt;</code> 以及 <code>&lt;td&gt;</code> 元素。</li>
<li><code>&lt;tr&gt;</code> 元素定义表格行</li>
<li><code>&lt;th&gt;</code> 元素定义表头</li>
<li><code>&lt;td&gt;</code> 元素定义表格单元</li>
</ul>
<p><strong>更复杂的 HTML 表格也可能包括</strong></p>
<ul>
<li><code>&lt;caption&gt;</code></li>
<li><code>&lt;col&gt;</code></li>
<li><code>&lt;colgroup&gt;</code></li>
<li><code>&lt;thead&gt;</code></li>
<li><code>&lt;tfoot&gt;</code></li>
<li><code>&lt;tbody&gt;</code></li>
</ul>
<p><strong>HTML <code>&lt;table&gt; </code>标签用法</strong></p>
<p>一个简单的 HTML 表格，包含两列两行：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>网站名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>网址<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<p>虽然现在 DIV+CSS 布局非常流行，是取代 table 布局的好选择；</p>
<p>但是遇到 table 相关的东西，还是使用<code>table</code>标签更佳，请根据实际场景进行选择</p>
<hr>
<p><strong>HTML4 与 HTML5 之间的差异</strong></p>
<p>在 HTML5 中，仅支持 “border” 属性，并且只允许使用值 “1” 或 “”。</p>
<h3 id="2-表格样式案例"><a href="#2-表格样式案例" class="headerlink" title="2. 表格样式案例"></a>2. 表格样式案例</h3><h4 id="2-1-单像素CSS表格"><a href="#2-1-单像素CSS表格" class="headerlink" title="2.1 单像素CSS表格"></a>2.1 单像素CSS表格</h4><p><img data-src="table-1.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- CSS goes in the document HEAD or added to your external stylesheet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.gridtable</span> &#123;</span></span><br><span class="line">    font-family: verdana,arial,sans-serif;</span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span><span class="selector-pseudo">:11px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>:<span class="selector-id">#333333</span>;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#666666</span>;</span></span><br><span class="line">    border-collapse: collapse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.gridtable</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#666666</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#dedede</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.gridtable</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#666666</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#ffffff</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- Table goes in the document BODY --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;gridtable&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 1<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 2<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-带背景图的CSS样式表格"><a href="#2-2-带背景图的CSS样式表格" class="headerlink" title="2.2 带背景图的CSS样式表格"></a>2.2 带背景图的CSS样式表格</h4><p><img data-src="table-2.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- CSS goes in the document HEAD or added to your external stylesheet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.imagetable</span> &#123;</span></span><br><span class="line">    font-family: verdana,arial,sans-serif;</span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span><span class="selector-pseudo">:11px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>:<span class="selector-id">#333333</span>;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#999999</span>;</span></span><br><span class="line">    border-collapse: collapse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.imagetable</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line">    background:#b5cfd2 url(&#x27;cell-blue.jpg&#x27;);</span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#999999</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.imagetable</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line">    background:#dcddc0 url(&#x27;cell-grey.jpg&#x27;);</span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#999999</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- Table goes in the document BODY --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;imagetable&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 1<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 2<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-自动换整行颜色的CSS样式表格（需要用到JS）"><a href="#2-3-自动换整行颜色的CSS样式表格（需要用到JS）" class="headerlink" title="2.3 自动换整行颜色的CSS样式表格（需要用到JS）"></a>2.3 自动换整行颜色的CSS样式表格（需要用到JS）</h4><p><img data-src="table-3.png"></p>
<p>这个CSS表格会自动切换每一行的颜色，这种呈现方式，在我们编辑一个数据庞大的表格时，非常好用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Javascript goes in the document HEAD --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">altRows</span>(<span class="params">id</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span>(<span class="built_in">document</span>.getElementsByTagName)&#123; </span></span><br><span class="line">         </span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> table = <span class="built_in">document</span>.getElementById(id); </span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> rows = table.getElementsByTagName(<span class="string">&quot;tr&quot;</span>);</span></span><br><span class="line">          </span><br><span class="line">        for(i = 0; i &lt; rows.length; i++)&#123;         </span><br><span class="line">            if(i % 2 == 0)&#123;</span><br><span class="line"><span class="javascript">                rows[i].className = <span class="string">&quot;evenrowcolor&quot;</span>;</span></span><br><span class="line"><span class="javascript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                rows[i].className = <span class="string">&quot;oddrowcolor&quot;</span>;</span></span><br><span class="line">            &#125;     </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    altRows(<span class="string">&#x27;alternatecolor&#x27;</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- CSS goes in the document HEAD or added to your external stylesheet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.altrowstable</span> &#123;</span></span><br><span class="line">    font-family: verdana,arial,sans-serif;</span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span><span class="selector-pseudo">:11px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>:<span class="selector-id">#333333</span>;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#a9c6c9</span>;</span></span><br><span class="line">    border-collapse: collapse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.altrowstable</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#a9c6c9</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.altrowstable</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#a9c6c9</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.oddrowcolor</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>:<span class="selector-id">#d4e3e5</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.evenrowcolor</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>:<span class="selector-id">#c3dde0</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- Table goes in the document BODY --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;altrowstable&quot;</span> <span class="attr">id</span>=<span class="string">&quot;alternatecolor&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 1<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 2<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 1C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 2C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 3A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 3B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 3C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 4A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 4B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 4C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 5A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 5B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Text 5C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!--  The table code can be found here: http://www.textfixer/resources/css-tables.php#css-table03 --&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-4-鼠标悬停高亮的CSS样式表格-需要JS"><a href="#2-4-鼠标悬停高亮的CSS样式表格-需要JS" class="headerlink" title="2.4 鼠标悬停高亮的CSS样式表格 (需要JS)"></a>2.4 鼠标悬停高亮的CSS样式表格 (需要JS)</h4><p><img data-src="table-4.png"></p>
<p>纯CSS显示表格高亮在IE中显示有问题，所以这边使用了JS来做高亮。</p>
<p><strong>注意</strong>：不要定义格子的背景色。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- CSS goes in the document HEAD or added to your external stylesheet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.hovertable</span> &#123;</span></span><br><span class="line">    font-family: verdana,arial,sans-serif;</span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span><span class="selector-pseudo">:11px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>:<span class="selector-id">#333333</span>;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#999999</span>;</span></span><br><span class="line">    border-collapse: collapse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.hovertable</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>:<span class="selector-id">#c3dde0</span>;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#a9c6c9</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.hovertable</span> <span class="selector-tag">tr</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>:<span class="selector-id">#d4e3e5</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">table</span><span class="selector-class">.hovertable</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line">    border-width: 1px;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    border-style: solid;</span><br><span class="line"><span class="css">    <span class="selector-tag">border-color</span>: <span class="selector-id">#a9c6c9</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- Table goes in the document BODY --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;hovertable&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 1<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 2<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Info Header 3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">onmouseover</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#ffff66&#x27;;&quot;</span> <span class="attr">onmouseout</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#d4e3e5&#x27;;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 1A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 1B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 1C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">onmouseover</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#ffff66&#x27;;&quot;</span> <span class="attr">onmouseout</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#d4e3e5&#x27;;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 2A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 2B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 2C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">onmouseover</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#ffff66&#x27;;&quot;</span> <span class="attr">onmouseout</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#d4e3e5&#x27;;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 3A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 3B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 3C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">onmouseover</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#ffff66&#x27;;&quot;</span> <span class="attr">onmouseout</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#d4e3e5&#x27;;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 4A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 4B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 4C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">onmouseover</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#ffff66&#x27;;&quot;</span> <span class="attr">onmouseout</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;#d4e3e5&#x27;;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 5A<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 5B<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Item 5C<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h2 id="五、HTML-语义化"><a href="#五、HTML-语义化" class="headerlink" title="五、HTML 语义化"></a>五、HTML 语义化</h2><h3 id="1-什么是HTML语义化标签"><a href="#1-什么是HTML语义化标签" class="headerlink" title="1. 什么是HTML语义化标签"></a>1. 什么是HTML语义化标签</h3><p>语义化的标签，说明让标签有自己的含义。</p>
<p><code>&lt;p&gt;一行文字&lt;/p&gt;</code></p>
<p><code>&lt;span&gt;一行文字&lt;/span&gt;</code></p>
<p>如上代码，p 标签与 span 标签都区别之一就是，p 标签的含义是：段落。而 span 标签责没有独特的含义。</p>
<h3 id="2-语义化标签的特点"><a href="#2-语义化标签的特点" class="headerlink" title="2. 语义化标签的特点"></a>2. 语义化标签的特点</h3><ul>
<li><p>代码结构清晰，方便阅读，有利于团队合作开发。</p>
</li>
<li><p>方便其他设备解析（如屏幕阅读器、盲人阅读器、移动设备）以语义的方式来渲染网页。</p>
</li>
<li><p>有利于搜索引擎优化（SEO）。</p>
</li>
<li><p>便于团队开发和维护，语义化更具可读性，遵循W3C标准的团队都遵循这个标准，可以减少差异化。</p>
</li>
</ul>
<h3 id="3-常见的语义化标签"><a href="#3-常见的语义化标签" class="headerlink" title="3. 常见的语义化标签"></a>3. 常见的语义化标签</h3><p>因此我们在写页面结构时，应尽量使用有 语义的HTML 标签</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>：页面主体内容。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hn</span>&gt;</span>：h1~h6，分级标题，`<span class="tag">&lt;<span class="name">h1</span>&gt;</span>` 与 `<span class="tag">&lt;<span class="name">title</span>&gt;</span>` 协调有利于搜索引擎优化。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>：无序列表。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span>：有序列表。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span>：页眉通常包括网站标志、主导航、全站链接以及搜索框。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span>：标记导航，仅对文档中重要的链接群使用。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span>：页面主要内容，一个页面只能使用一次。如果是web应用，则包围其主要功能。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span>：定义外部的内容，其中的内容独立于文档的其余部分。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span>：定义文档中的节（section、区段）。比如章节、页眉、页脚或文档中的其他部分。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span>：定义其所处内容之外的内容。如侧栏、文章的一组链接、广告、友情链接、相关产品列表等。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>：页脚，只有当父级是body时，才是整个页面的页脚。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">small</span>&gt;</span>：呈现小号字体效果，指定细则，输入免责声明、注解、署名、版权。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>：和 em 标签一样，用于强调文本，但它强调的程度更强一些。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>：将其中的文本表示为强调的内容，表现为斜体。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mark</span>&gt;</span>：使用黄色突出显示部分文本。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span>：规定独立的流内容（图像、图表、照片、代码等等）（默认有40px左右margin）。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>：定义 figure 元素的标题，应该被置于 figure 元素的第一个或最后一个子元素的位置。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">cite</span>&gt;</span>：表示所包含的文本对某个参考文献的引用，比如书籍或者杂志的标题。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquoto</span>&gt;</span>：定义块引用，块引用拥有它们自己的空间。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">q</span>&gt;</span>：短的引述（跨浏览器问题，尽量避免使用）。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span>&gt;</span>：datetime属性遵循特定格式，如果忽略此属性，文本内容必须是合法的日期或者时间格式。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">abbr</span>&gt;</span>：简称或缩写。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dfn</span>&gt;</span>：定义术语元素，与定义必须紧挨着，可以在描述列表dl元素中使用。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">del</span>&gt;</span>：移除的内容。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span>&gt;</span>：添加的内容。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span>&gt;</span>：标记代码。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">meter</span>&gt;</span>：定义已知范围或分数值内的标量测量。（Internet Explorer 不支持 meter 标签）</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span>&gt;</span>：定义运行中的进度（进程）。</span><br></pre></td></tr></table></figure>



<blockquote>
<p>参考<a href="http://yanue.net/">半叶寒羽</a> » <a href="http://yanue.net/post-106.html">HTML5废弃的标签及属性</a></p>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>Html</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML渲染</title>
    <url>/2020/08/29/HTML-render/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>下面，总结了关于页面渲染的相关内容</p>
<p>–  <code>HTML</code>渲染或者说 <code>JavaScript</code>页面渲染原理</p>
<p>–  渲染优化方案</p>
</blockquote>
<a id="more"></a>

<h2 id="一、HTML渲染过程"><a href="#一、HTML渲染过程" class="headerlink" title="一、HTML渲染过程"></a>一、HTML渲染过程</h2><h3 id="1-HTML解析过程"><a href="#1-HTML解析过程" class="headerlink" title="1. HTML解析过程"></a>1. HTML解析过程</h3><ol>
<li><p><strong>构建DOM树</strong>：将HTML构建成一个DOM树，也就是构建节点，把所有的节点都构建出来</p>
</li>
<li><p><strong>构建CSSOM树</strong>：解析css去构建CSSOM树</p>
</li>
<li><p><strong>根据DOM树和CSSOM树构建render树</strong>：DOM树和CSSOM树已经构建完毕，浏览器会根据这两个来构造render树，浏览器就知道了有哪些节点、各个节点的CSS定义以及他们的从属关系</p>
</li>
<li><p><strong>布局</strong>：有了render树就开始布局Layout，开始计算各个节点的位置和样式</p>
</li>
<li><p><strong>绘制</strong>：遍历render树，在页面上绘制每个节点</p>
</li>
<li><p><strong><em>重排reflow</em></strong>：当render树绘制完成之后，比如JavaScript改变样式或添加节点，这时候render树就需要重新计算</p>
</li>
<li><p><strong><em>重绘repaint</em></strong>：既然重排了，最后当然得重新绘制页面。</p>
</li>
</ol>
<h3 id="2-浏览器渲染页面详解"><a href="#2-浏览器渲染页面详解" class="headerlink" title="2. 浏览器渲染页面详解"></a>2. 浏览器渲染页面详解</h3><blockquote>
<p>找了一篇已经很全的文章，所以不继续造轮子了，接下来分享一下<a href="https://segmentfault.com/a/1190000010298038">这篇文章</a>，同时感谢原作者</p>
</blockquote>
<p>由一道面试题引发的思考：</p>
<p><strong>从用户输入浏览器输入url到页面最后呈现 有哪些过程？</strong><br><em>一道很常规的题目，考的是基本网络原理，和浏览器加载css，js过程。</em></p>
<p><strong><em>答案大致如下：</em></strong></p>
<blockquote>
<ol>
<li><p>用户输入URL地址</p>
</li>
<li><p>浏览器解析URL解析出主机名</p>
</li>
<li><p>浏览器将主机名转换成服务器ip地址（浏览器先查找本地DNS缓存列表 没有的话 再向浏览器默认的DNS服务器发送查询请求 同时缓存）</p>
</li>
<li><p>浏览器将端口号从URL中解析出来</p>
</li>
<li><p>浏览器建立一条与目标Web服务器的TCP连接（三次握手）</p>
</li>
<li><p>浏览器向服务器发送一条HTTP请求报文</p>
</li>
<li><p>服务器向浏览器返回一条HTTP响应报文</p>
</li>
<li><p>关闭连接 浏览器解析文档</p>
</li>
<li><p>如果文档中有资源 重复6 7 8 动作 直至资源全部加载完毕</p>
</li>
</ol>
</blockquote>
<p><strong>通过研究，了解一些基本常识的原理：</strong></p>
<ol>
<li>为什么要将js放到页脚部分</li>
<li>引入样式的几种方式的权重</li>
<li>css属性书写顺序建议</li>
<li>何种类型的DOM操作是耗费性能的</li>
</ol>
<h4 id="2-1-浏览器渲染主要流程"><a href="#2-1-浏览器渲染主要流程" class="headerlink" title="2.1 浏览器渲染主要流程"></a>2.1 浏览器渲染主要流程</h4><p>不同的浏览器内核不同，所以渲染过程不太一样。</p>
<p><code>WebKit 主流程</code></p>
<p><img data-src="pic1.png"></p>
<p><code>Mozilla</code> 的 <code>Gecko</code> 呈现引擎主流程</p>
<p><img data-src="pic2.png"></p>
<p>由上面两张图可以看出，虽然主流浏览器渲染过程叫法有区别，但是主要流程还是相同的。</p>
<p><code>Gecko</code> 将视觉格式化元素组成的树称为“框架树”。每个元素都是一个框架。<br>WebKit 使用的术语是“呈现树”，它由“呈现对象”组成。</p>
<p>对于元素的放置，<code>WebKit</code> 使用的术语是“布局”，而 <code>Gecko</code> 称之为“重排”。</p>
<p>对于连接 DOM 节点和可视化信息从而创    建呈现树的过程，<code>WebKit</code> 使用的术语是“附加”。</p>
<p><strong>所以可以分析出基本过程：</strong></p>
<ol>
<li>HTML解析出DOM Tree</li>
<li>CSS解析出Style Rules</li>
<li>将二者关联生成Render Tree</li>
<li>Layout 根据Render Tree计算每个节点的信息</li>
<li>Painting 根据计算好的信息绘制整个页面</li>
</ol>
<h4 id="2-2-HTML-解析"><a href="#2-2-HTML-解析" class="headerlink" title="2.2 HTML 解析"></a>2.2 HTML 解析</h4><p><code>HTML Parser</code>的任务是将HTML标记解析成<code>DOM Tree</code><br>这个解析可以参考React解析DOM的过程，但是这里面有很多别的规则和操作，比如容错机制，识别<code>&lt;/br&gt;</code>和<code>&lt;br&gt;</code>等等。<br>感兴趣的可以参考 <a href="https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/">《How Browser Work》</a>，<a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/">中文翻译</a><br>举个例子：一段HTML</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Web page parsing<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Web page parsing<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is an example Web page.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>经过解析之后的DOM Tree差不多就是</p>
<p><img data-src="pic3.png"></p>
<p>将文本的HTML文档，提炼出关键信息，嵌套层级的树形结构，便于计算拓展。这就是HTML Parser的作用。</p>
<h4 id="2-3-CSS解析"><a href="#2-3-CSS解析" class="headerlink" title="2.3 CSS解析"></a>2.3 CSS解析</h4><p><code>CSS Parser</code>将CSS解析成<code>Style Rules</code>，<code>Style Rules</code>也叫<code>CSSOM（CSS Object Model）</code>。<br><code>StyleRules</code>也是一个树形结构，根据CSS文件整理出来的类似<code>DOM Tree</code>的树形结构：</p>
<p><img data-src="pic4.png"></p>
<p>与<code>HTML Parser</code>相似，<code>CSS Parser</code>作用就是将很多个CSS文件中的样式合并解析出具有树形结构Style Rules。</p>
<h4 id="2-4-脚本处理"><a href="#2-4-脚本处理" class="headerlink" title="2.4 脚本处理"></a>2.4 脚本处理</h4><p>浏览器解析文档，当遇到<code>&lt;script&gt;</code>标签的时候，会立即解析脚本，停止解析文档（因为JS可能会改动DOM和CSS，所以继续解析会造成浪费）。<br>如果脚本是外部的，会等待脚本下载完毕，再继续解析文档。现在可以在script标签上增加属性 <code>defer</code>或者<code>async</code>。<br>脚本解析会将脚本中改变DOM和CSS的地方分别解析出来，追加到<code>DOM Tree</code>和<code>Style Rules</code>上。</p>
<h4 id="2-5-呈现树（Render-Tree）"><a href="#2-5-呈现树（Render-Tree）" class="headerlink" title="2.5 呈现树（Render Tree）"></a>2.5 呈现树（Render Tree）</h4><p><code>Render Tree</code>的构建其实就是<code>DOM Tree</code>和<code>CSSOM</code> <strong>Attach</strong>的过程。</p>
<p>呈现树是和 DOM 元素相对应的，但并非一一对应。Render Tree实际上就是一个计算好样式，与HTML对应的（包括哪些显示，那些不显示）的Tree。</p>
<blockquote>
<p>在 WebKit 中，解析样式和创建呈现树的过程称为“附加”。每个 DOM 节点都有一个<code>“attach”</code>方法。附加是同步进行的，将节点插入 DOM 树需要调用新的节点<code>“attach”</code>方法。</p>
</blockquote>
<p><img data-src="pic5.png"></p>
<h4 id="2-6-样式计算"><a href="#2-6-样式计算" class="headerlink" title="2.6 样式计算"></a>2.6 样式计算</h4><p>样式计算是个很复杂的问题。DOM中的一个元素可以对应样式表中的多个元素。样式表包括了所有样式：浏览器默认样式表，自定义样式表，inline样式元素，<strong>HTML可视化属性如：width=100。后者将转化以匹配CSS样式。</strong></p>
<blockquote>
<p>WebKit 节点会引用样式对象 (RenderStyle)。这些对象在某些情况下可以由不同节点共享。这些节点是同级关系，并且：</p>
<ol>
<li>这些元素必须处于相同的鼠标状态（例如，不允许其中一个是“:hover”状态，而另一个不是）</li>
<li>任何元素都没有 ID</li>
<li>标记名称应匹配</li>
<li>类属性应匹配</li>
<li>映射属性的集合必须是完全相同的</li>
<li>链接状态必须匹配</li>
<li>焦点状态必须匹配</li>
<li>任何元素都不应受属性选择器的影响，这里所说的“影响”是指在选择器中的任何位置有任何使用了属性选择器的选择器匹配</li>
<li>元素中不能有任何 inline 样式属性</li>
<li>不能使用任何同级选择器。WebCore 在遇到任何同级选择器时，只会引发一个全局开关，并停用整个文档的样式共享（如果存在）。这包括 + 选择器以及 :first-child 和 :last-child 等选择器。</li>
</ol>
</blockquote>
<p>为了简化样式计算，Firefox 还采用了另外两种树：规则树和样式上下文树。WebKit 也有样式对象，但它们不是保存在类似样式上下文树这样的树结构中，只是由 DOM 节点指向此类对象的相关样式。</p>
<p><img data-src="pic6.png"></p>
<p>样式上下文包含端值。要计算出这些值，应按照正确顺序应用所有的匹配规则，并将其从逻辑值转化为具体的值。<br>例如，<strong>如果逻辑值是屏幕大小的百分比，则需要换算成绝对的单位</strong>。规则树的点子真的很巧妙，它使得节点之间可以共享这些值，以避免重复计算，还可以节约空间。<br>所有匹配的规则都存储在树中。路径中的底层节点拥有较高的优先级。规则树包含了所有已知规则匹配的路径。规则的存储是延迟进行的。规则树不会在开始的时候就为所有的节点进行计算，而是只有当某个节点样式需要进行计算时，才会向规则树添加计算的路径。</p>
<p>*<strong>举个例子</strong> 一段HTML代码：*</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div <span class="keyword">class</span>=&quot;<span class="symbol">err</span>&quot; <span class="symbol">id</span>=&quot;<span class="symbol">div1</span>&quot;&gt;</span><br><span class="line">      &lt;<span class="symbol">p</span>&gt;</span><br><span class="line">        <span class="symbol">this</span> <span class="symbol">is</span> <span class="symbol">a</span> &lt;<span class="symbol">span</span> <span class="symbol">class</span>=&quot;<span class="symbol">big</span>&quot;&gt; <span class="symbol">big</span> <span class="symbol">error</span> &lt;/<span class="symbol">span</span>&gt;</span><br><span class="line">        <span class="symbol">this</span> <span class="symbol">is</span> <span class="symbol">also</span> <span class="symbol">a</span></span><br><span class="line">        &lt;<span class="symbol">span</span> <span class="symbol">class</span>=&quot;<span class="symbol">big</span>&quot;&gt; <span class="symbol">very</span>  <span class="symbol">big</span>  <span class="symbol">error</span>&lt;/<span class="symbol">span</span>&gt; <span class="symbol">error</span></span><br><span class="line">      &lt;/<span class="symbol">p</span>&gt;</span><br><span class="line">    &lt;/<span class="symbol">div</span>&gt;</span><br><span class="line">    &lt;<span class="symbol">div</span> <span class="symbol">class</span>=&quot;<span class="symbol">err</span>&quot; <span class="symbol">id</span>=&quot;<span class="symbol">div2</span>&quot;&gt;<span class="symbol">another</span> <span class="symbol">error</span>&lt;/<span class="symbol">div</span>&gt;</span><br><span class="line">  &lt;/<span class="symbol">body</span>&gt;</span><br><span class="line">&lt;/<span class="symbol">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>对应CSS规则如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">1. <span class="selector-tag">div</span> &#123;<span class="attribute">margin</span>:<span class="number">5px</span>;<span class="attribute">color</span>:black&#125;</span><br><span class="line">2. <span class="selector-class">.err</span> &#123;<span class="attribute">color</span>:red&#125;</span><br><span class="line">3. <span class="selector-class">.big</span> &#123;<span class="attribute">margin-top</span>:<span class="number">3px</span>&#125;</span><br><span class="line">4. <span class="selector-tag">div</span> <span class="selector-tag">span</span> &#123;<span class="attribute">margin-bottom</span>:<span class="number">4px</span>&#125;</span><br><span class="line">5. <span class="selector-id">#div1</span> &#123;<span class="attribute">color</span>:blue&#125;</span><br><span class="line">6. <span class="selector-id">#div2</span> &#123;<span class="attribute">color</span>:green&#125;</span><br></pre></td></tr></table></figure>

<p>则CSS形成的规则树如下图所示（节点的标记方式为“节点名 : 指向的规则序号”）</p>
<p><img data-src="pic7.png"></p>
<blockquote>
<p>下面的内容有点绕，但是很有逻辑</p>
</blockquote>
<p>假设我们解析 HTML 时遇到了第二个 <code>&lt;div&gt;</code> 标记，我们需要为此节点创建样式上下文，并填充其样式结构。<br>经过规则匹配，我们发现该 <code>&lt;div&gt;</code>的匹配规则是第 1、2 和 6 条。这意味着规则树中已有一条路径可供我们的元素使用，我们只需要再为其添加一个节点以匹配第 6 条规则（规则树中的 F 节点）。<br>我们将创建样式上下文并将其放入上下文树中。新的样式上下文将指向规则树中的 F 节点。</p>
<p>现在我们需要填充样式结构。首先要填充的是 margin 结构。由于最后的规则节点 (F) 并没有添加到 margin 结构，我们需要上溯规则树，直至找到在先前节点插入中计算过的缓存结构，然后使用该结构。我们会在指定 margin 规则的最上层节点（即 B 节点）上找到该结构。</p>
<p>我们已经有了 color 结构的定义，因此不能使用缓存的结构。由于 color 有一个属性，我们无需上溯规则树以填充其他属性。我们将计算端值（将字符串转化为 <code>RGB</code> 等）并在此节点上缓存经过计算的结构。</p>
<p>第二个<code>&lt;span&gt;</code>元素处理起来更加简单。我们将匹配规则，最终发现它和之前的 span 一样指向规则 G。由于我们找到了指向同一节点的同级，就可以共享整个样式上下文了，只需指向之前 span 的上下文即可。</p>
<p>对于包含了继承自父代的规则的结构，缓存是在上下文树中进行的（事实上 color 属性是继承的，但是 Firefox 将其视为 reset 属性，并缓存到规则树上）<br>所以生成的上下文树如下：</p>
<p><img data-src="pic8.png"></p>
<h4 id="2-7-以正确的层叠顺序应用规则"><a href="#2-7-以正确的层叠顺序应用规则" class="headerlink" title="2.7 以正确的层叠顺序应用规则"></a>2.7 以正确的层叠顺序应用规则</h4><p>样式对象具有与每个可视化属性一一对应的属性（均为 CSS 属性但更为通用）。如果某个属性未由任何匹配规则所定义，那么部分属性就可由父代元素样式对象继承。其他属性具有默认值。<br>如果定义不止一个，就会出现问题，需要通过层叠顺序来解决。</p>
<p>一些例子：</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="comment">*             &#123;&#125;  /* a=0 b=0 c=0 d=0 -&gt; specificity = 0,0,0,0 */</span></span><br><span class="line"><span class="keyword">li</span>            &#123;&#125;  <span class="comment">/* a=0 b=0 c=0 d=1 -&gt; specificity = 0,0,0,1 */</span></span><br><span class="line"><span class="keyword">li</span>:first-<span class="keyword">line</span> &#123;&#125;  <span class="comment">/* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */</span></span><br><span class="line">ul <span class="keyword">li</span>         &#123;&#125;  <span class="comment">/* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */</span></span><br><span class="line">ul ol+<span class="keyword">li</span>      &#123;&#125;  <span class="comment">/* a=0 b=0 c=0 d=3 -&gt; specificity = 0,0,0,3 */</span></span><br><span class="line">h1 + *[rel=up]&#123;&#125;  <span class="comment">/* a=0 b=0 c=1 d=1 -&gt; specificity = 0,0,1,1 */</span></span><br><span class="line">ul ol <span class="keyword">li</span>.red  &#123;&#125;  <span class="comment">/* a=0 b=0 c=1 d=3 -&gt; specificity = 0,0,1,3 */</span></span><br><span class="line"><span class="keyword">li</span>.red.level  &#123;&#125;  <span class="comment">/* a=0 b=0 c=2 d=1 -&gt; specificity = 0,0,2,1 */</span></span><br><span class="line">#x34y         &#123;&#125;  <span class="comment">/* a=0 b=1 c=0 d=0 -&gt; specificity = 0,1,0,0 */</span></span><br><span class="line">style=<span class="string">&quot;&quot;</span>          <span class="comment">/* a=1 b=0 c=0 d=0 -&gt; specificity = 1,0,0,0 */</span></span><br></pre></td></tr></table></figure>

<p>利用上面的方法，基本可以快速确定不同选择器的优先级。</p>
<h4 id="2-8-布局Layout"><a href="#2-8-布局Layout" class="headerlink" title="2.8 布局Layout"></a>2.8 布局Layout</h4><p>创建渲染树后，下一步就是<code>布局（Layout）</code>,或者叫<code>回流（reflow,relayout）</code>，这个过程就是通过渲染树中渲染对象的信息，计算出每一个渲染对象的位置和尺寸，将其安置在浏览器窗口的正确位置，而有些时候我们会在文档布局完成后对DOM进行修改，这时候可能需要重新进行布局，也可称其为<code>回流</code>，本质上还是一个布局的过程，每一个渲染对象都有一个布局或者回流方法，实现其布局或回流。</p>
<p><strong>对渲染树的布局可以分为全局和局部的</strong></p>
<ul>
<li>全局即对整个渲染树进行重新布局，如<u>当我们改变了窗口尺寸或方向</u>或者是<u>修改了根元素的尺寸或者字体大小</u>等；</li>
<li>而局部布局可以是对渲染树的某部分或某一个渲染对象进行重新布局。</li>
</ul>
<p>大多数web应用对DOM的操作都是比较频繁，这意味着经常需要对DOM进行布局和回流，而如果仅仅是一些小改变，就触发整个渲染树的回流，这显然是不好的，为了避免这种情况，浏览器使用了<code>脏位系统</code>，只有一个渲染对象改变了或者某渲染对象及其子渲染对象脏位值为”dirty”时，说明需要回流。</p>
<blockquote>
<p>表示需要布局的脏位值有两种：</p>
<ul>
<li>“dirty”–自身改变，需要回流</li>
<li>“children are dirty”–子节点改变，需要回流</li>
</ul>
</blockquote>
<p>布局是一个从上到下，从外到内进行的递归过程，从根渲染对象，即对应着HTML文档根元素，然后下一级渲染对象，如对应着元素，如此层层递归，依次计算每一个渲染对象的几何信息（位置和尺寸）。</p>
<p><strong>每一个渲染对象的布局流程基本如：</strong></p>
<ol>
<li><p>计算渲染对象的宽度（width）；</p>
</li>
<li><p>遍历此渲染对象的所有子级，依次：</p>
<p>2.1设置子级渲染对象的坐标</p>
<p>2.2判断是否需要触发子渲染对象的布局或回流方法，计算子渲染对象的高度（height）</p>
</li>
<li><p>设置此渲染对象的高度：根据子渲染对象的累积高，margin和padding的高度设置其高度；</p>
</li>
<li><p>设置此渲染对象脏位值为false。</p>
</li>
</ol>
<h4 id="2-9-绘制（Painting）"><a href="#2-9-绘制（Painting）" class="headerlink" title="2.9 绘制（Painting）"></a>2.9 绘制（Painting）</h4><p>在绘制阶段，系统会遍历呈现树，并调用呈现器的<code>“paint”</code>方法，将呈现器的内容显示在屏幕上。绘制工作是使用用户界面基础组件完成的。</p>
<p>CSS2 规范定义了绘制流程的顺序。绘制的顺序其实就是元素进入堆栈样式上下文的顺序。这些堆栈会从后往前绘制，因此这样的顺序会影响绘制。块呈现器的堆栈顺序如下：</p>
<ol>
<li>背景颜色</li>
<li>背景图片</li>
<li>边框</li>
<li>子代</li>
<li>轮廓</li>
</ol>
<p>这里还要说两个概念，一个是<code>Reflow</code>，另一个是<code>Repaint</code>。这两个不是一回事。<br><strong>Repaint</strong> ——屏幕的一部分要重画，比如某个CSS的背景色变了。但是元素的几何尺寸没有变。<br><strong>Reflow</strong> 元件的几何尺寸变了，我们需要重新验证并计算Render Tree。是Render Tree的一部分或全部发生了变化。这就是Reflow，或是Layout。（HTML使用的是flow based layout，也就是流式布局，所以，如果某元件的几何尺寸发生了变化，需要重新布局，也就叫reflow）reflow 会从<code>&lt;html&gt;</code>这个root frame开始递归往下，依次计算所有的结点几何尺寸和位置，在reflow过程中，可能会增加一些frame，比如一个文本字符串必需被包装起来。</p>
<blockquote>
<p>Reflow的成本比Repaint的成本高得多的多。DOM Tree里的每个结点都会有reflow方法，一个结点的reflow很有可能导致子结点，甚至父点以及同级结点的reflow。在一些高性能的电脑上也许还没什么，但是如果reflow发生在手机上，那么这个过程是非常痛苦和耗电的。</p>
</blockquote>
<p> 所以，下面这些动作有很大可能会是成本比较高的。</p>
<ul>
<li>当你增加、删除、修改DOM结点时，会导致Reflow或Repaint</li>
<li>当你移动DOM的位置，或是搞个动画的时候。</li>
<li>当你修改CSS样式的时候。</li>
<li>当你Resize窗口的时候（移动端没有这个问题），或是滚动的时候。</li>
<li>当你修改网页的默认字体时。</li>
<li>注：display:none会触发reflow，而visibility:hidden只会触发repaint，因为没有发现位置变化。</li>
</ul>
<p>基本上来说，reflow有如下的几个原因：</p>
<ul>
<li>Initial。网页初始化的时候。</li>
<li>Incremental。一些Javascript在操作DOM Tree时。</li>
<li>Resize。其些元件的尺寸变了。</li>
<li>StyleChange。如果CSS的属性发生变化了。</li>
<li>Dirty。几个Incremental的reflow发生在同一个frame的子树上。</li>
</ul>
<p>看几个例子：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;body&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;red&#x27;</span>); <span class="regexp">//</span> repaint</span><br><span class="line">$(<span class="string">&#x27;body&#x27;</span>).css(<span class="string">&#x27;margin&#x27;</span>, <span class="string">&#x27;2px&#x27;</span>); <span class="regexp">//</span> reflow, repaint</span><br><span class="line"></span><br><span class="line">var bstyle = document.body.style; <span class="regexp">//</span> cache</span><br><span class="line"></span><br><span class="line">bstyle.padding = <span class="string">&quot;20px&quot;</span>; <span class="regexp">//</span> reflow, repaint</span><br><span class="line">bstyle.border = <span class="string">&quot;10px solid red&quot;</span>; <span class="regexp">//</span>  再一次的 reflow 和 repaint</span><br><span class="line"></span><br><span class="line">bstyle.color = <span class="string">&quot;blue&quot;</span>; <span class="regexp">//</span> repaint</span><br><span class="line">bstyle.backgroundColor = <span class="string">&quot;#fad&quot;</span>; <span class="regexp">//</span> repaint</span><br><span class="line"></span><br><span class="line">bstyle.fontSize = <span class="string">&quot;2em&quot;</span>; <span class="regexp">//</span> reflow, repaint</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> new DOM element - reflow, repaint</span><br><span class="line">document.body.appendChild(document.createTextNode(<span class="string">&#x27;dude!&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>当然，我们的浏览器是聪明的，它不会像上面那样，你每改一次样式，它就reflow或repaint一次。一般来说，浏览器会把这样的操作积攒一批，然后做一次reflow，这又叫异步reflow或增量异步reflow。但是有些情况浏览器是不会这么做的，比如：resize窗口，改变了页面默认的字体，等。对于这些操作，浏览器会马上进行reflow。</p>
<p>但是有些时候，我们的脚本会阻止浏览器这么干，比如：如果我们请求下面的一些DOM值：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">offsetTop, offsetLeft, offsetWidth, offsetHeight</span><br><span class="line">scrollTop<span class="regexp">/Left/</span>Width/Height</span><br><span class="line">clientTop<span class="regexp">/Left/</span>Width/Height</span><br><span class="line">IE中的 getComputedStyle(), 或 currentStyle</span><br></pre></td></tr></table></figure>

<p>因为，如果我们的程序需要这些值，那么浏览器需要返回最新的值，而这样一样会flush出去一些样式的改变，从而造成频繁的reflow/repaint。</p>
<h4 id="2-10-Chrome调试工具查看页面渲染顺序"><a href="#2-10-Chrome调试工具查看页面渲染顺序" class="headerlink" title="2.10 Chrome调试工具查看页面渲染顺序"></a>2.10 Chrome调试工具查看页面渲染顺序</h4><p>页面的渲染详细过程可以通过chrome开发者工具中的timeline查看</p>
<p><img data-src="pic9.png"></p>
<ol>
<li>发起请求；</li>
<li>解析HTML；</li>
<li>解析样式；</li>
<li>执行JavaScript；</li>
<li>布局；</li>
<li>绘制</li>
</ol>
<h2 id="二、页面渲染优化"><a href="#二、页面渲染优化" class="headerlink" title="二、页面渲染优化"></a>二、页面渲染优化</h2><p>浏览器对上文介绍的关键渲染路径进行了很多优化，针对每一次变化产生尽量少的操作，还有优化判断重新绘制或布局的方式等等。<br>在改变文档根元素的字体颜色等视觉性信息时，会触发整个文档的重绘，而改变某元素的字体颜色则只触发特定元素的重绘；改变元素的位置信息会同时触发此元素（可能还包括其兄弟元素或子级元素）的布局和重绘。某些重大改变，如更改文档根元素的字体尺寸，则会触发整个文档的重新布局和重绘，据此及上文所述，推荐以下优化和实践：</p>
<ol>
<li>HTML文档结构层次尽量少，最好不深于六层；</li>
<li>脚本尽量后放，放最后即可；</li>
<li>少量首屏样式内联放在标签内；</li>
<li>样式结构层次尽量简单；</li>
<li>在脚本中尽量减少DOM操作，尽量缓存访问DOM的样式信息，避免过度触发<code>回流</code>；</li>
<li>减少通过JavaScript代码修改元素样式，尽量使用修改class名方式操作样式或动画；</li>
<li>动画尽量使用在绝对定位或固定定位的元素上；</li>
<li>隐藏在屏幕外，或在页面滚动时，尽量停止动画；</li>
<li>尽量缓存DOM查找，查找器尽量简洁；</li>
<li>涉及多域名的网站，可以开启域名预解析</li>
</ol>
<p><strong>补充</strong></p>
<p>HTML整个解析过程看起来很简单，但是我们要知道解析过程中css、Js和DOM的加载顺序。我们都知道HTML是自上往下解析的，在解析过程中：</p>
<p>1、如果遇到link和style，那就就会去下载这些外部的css资源，但是css跟DOM的构建是并行的，就是说不会阻塞DOM树的构建。</p>
<p>2、如果遇到script，那么页面就会把控制权交给JavaScript，直到脚本加载完毕或者是执行完毕。</p>
<p>3、页面的渲染是依靠render树，也就是说如果css没有加载完成，页面也不会渲染显示。</p>
<p>4、JavaScript执行过程中有可能需要改变样式，所以css加载也会阻塞JavaScript的加载。</p>
<p>5、JavaScript执行过程中如果操作DOM，但是DOM树又是在JavaScript之后才能构建，就会报错，找不到节点。</p>
<p>这就是HTML的渲染过程，因为DOM和css并行构建，我们会把css用外部引入，可以更快的构建DOM，因为JavaScript会阻塞DOM和css构建，且操作DOM一定要在DOM构建完成，我们选择把script放在最下面。如果我们过多的在render渲染完成后改变render，那么重排和重绘就会一直被动重发执行，这也会造成渲染速度变慢。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>浏览器渲染问题每一步都涉及到很多底层知识，每一步都有对应的算法。<br>文章中间很多语句都是直接复制的原文，自己的语言概况还是不及原文精彩。</p>
<p><strong>可参考原文链接</strong></p>
<p><a href="https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/">《How Browser Work》</a></p>
<p><a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/">浏览器的工作原理：新式网络浏览器幕后揭秘</a></p>
<p><a href="http://imweb.io/topic/56841c864c44bcc56092e3fa">浏览器渲染原理</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/25279069">浏览器 渲染,绘制流程及性能优化</a></p>
<p><a href="http://caibaojian.com/css-reflow-repaint.html">优化CSS重排重绘与浏览器性能</a></p>
<p><a href="http://web.jobbole.com/90961/">浅析前端页面渲染机制</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>Html</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-Next-Supplement</title>
    <url>/2020/08/20/Hexo-Next-Supplement/</url>
    <content><![CDATA[<h1 id="Hexo后续补充"><a href="#Hexo后续补充" class="headerlink" title="Hexo后续补充"></a>Hexo后续补充</h1><blockquote>
<p>本篇对 <a href="https://hammerzer.github.io/2020/08/18/The%20Starting%20Point%20of%20Blogs/">The-Starting-Point-of-Blogs</a> 进行一些补充</p>
</blockquote>
<a id="more"></a>

<h2 id="一、推送处理"><a href="#一、推送处理" class="headerlink" title="一、推送处理"></a>一、推送处理</h2><h3 id="1-静态资源压缩"><a href="#1-静态资源压缩" class="headerlink" title="1. 静态资源压缩"></a>1. 静态资源压缩</h3><blockquote>
<p>存在问题未解决</p>
</blockquote>
<p>在站点目录下：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$ npm install gulp -g</span><br></pre></td></tr></table></figure>

<p>安装gulp插件：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">npm install gulp-minify-css --save</span><br><span class="line">npm install gulp-uglify --save</span><br><span class="line">npm install gulp-htmlmin --save</span><br><span class="line">npm install gulp-htmlclean --save</span><br><span class="line">npm install gulp-imagemin --save</span><br></pre></td></tr></table></figure>

<p>在 <code>Hexo</code> 站点下添加 <code>gulpfile.js</code>文件，文件内容如下：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">var gulp = require(&#x27;gulp&#x27;);</span><br><span class="line">var minifycss = require(&#x27;gulp-minify-css&#x27;);</span><br><span class="line">var uglify = require(&#x27;gulp-uglify&#x27;);</span><br><span class="line">var htmlmin = require(&#x27;gulp-htmlmin&#x27;);</span><br><span class="line">var htmlclean = require(&#x27;gulp-htmlclean&#x27;);</span><br><span class="line">var imagemin = require(&#x27;gulp-imagemin&#x27;);</span><br><span class="line">// 压缩css文件</span><br><span class="line">gulp.task(&#x27;minify-css&#x27;, function() &#123;</span><br><span class="line">  return gulp.src(&#x27;./public/**/*.css&#x27;)</span><br><span class="line">  .pipe(minifycss())</span><br><span class="line">  .pipe(gulp.dest(&#x27;./public&#x27;));</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩html文件</span><br><span class="line">gulp.task(&#x27;minify-html&#x27;, function() &#123;</span><br><span class="line">  return gulp.src(&#x27;./public/**/*.html&#x27;)</span><br><span class="line">  .pipe(htmlclean())</span><br><span class="line">  .pipe(htmlmin(&#123;</span><br><span class="line">    removeComments: true,</span><br><span class="line">    minifyJS: true,</span><br><span class="line">    minifyCSS: true,</span><br><span class="line">    minifyURLs: true,</span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(&#x27;./public&#x27;))</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩js文件</span><br><span class="line">gulp.task(&#x27;minify-js&#x27;, function() &#123;</span><br><span class="line">    return gulp.src([&#x27;./public/**/.js&#x27;,&#x27;!./public/js/**/*min.js&#x27;])</span><br><span class="line">        .pipe(uglify())</span><br><span class="line">        .pipe(gulp.dest(&#x27;./public&#x27;));</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩 public/demo 目录内图片</span><br><span class="line">gulp.task(&#x27;minify-images&#x27;, function() &#123;</span><br><span class="line">    gulp.src(&#x27;./public/demo/**/*.*&#x27;)</span><br><span class="line">        .pipe(imagemin(&#123;</span><br><span class="line">           optimizationLevel: 5, //类型：Number  默认：3  取值范围：0-7（优化等级）</span><br><span class="line">           progressive: true, //类型：Boolean 默认：false 无损压缩jpg图片</span><br><span class="line">           interlaced: false, //类型：Boolean 默认：false 隔行扫描gif进行渲染</span><br><span class="line">           multipass: false, //类型：Boolean 默认：false 多次优化svg直到完全优化</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&#x27;./public/uploads&#x27;));</span><br><span class="line">&#125;);</span><br><span class="line">// 默认任务</span><br><span class="line">gulp.task(&#x27;default&#x27;, [</span><br><span class="line">  &#x27;minify-html&#x27;,&#x27;minify-css&#x27;,&#x27;minify-js&#x27;,&#x27;minify-images&#x27;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<p>只需要每次在执行 <code>generate</code> 命令后执行 <code>gulp</code> 就可以实现对静态资源的压缩，压缩完成后执行 <code>deploy</code> 命令同步到服务器：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">hexo</span> <span class="string">g</span></span><br><span class="line"><span class="attr">gulp</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">d</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>Tip</code>   可以把上面的三条命令编写进package.json的script，就可一键三连啦！</p>
</blockquote>
<h3 id="2-本地站点推送到GitHub上"><a href="#2-本地站点推送到GitHub上" class="headerlink" title="2. 本地站点推送到GitHub上"></a>2. 本地站点推送到GitHub上</h3><p>在站点更目录下：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>在 <code>Hexo</code> 站点的 <code>_config.yml</code> 中配置 <code>deploy</code>：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;repository url&gt; #your github.io.git</span><br><span class="line">  branch: master</span><br><span class="line">$ hexo clean</span><br><span class="line">$ hexo d --g</span><br></pre></td></tr></table></figure>

<p>hexo g # 生成本地 public 静态文件, hexo d # 部署到 Github 上, 也可以缩写成：hexo g –d 。</p>
<h4 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">$ hexo <span class="keyword">new</span> <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h4 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h4><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">$ hexo <span class="keyword">server</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h4 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line">$ hexo <span class="keyword">generate</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h4 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h4><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>hexo deploy</span><br></pre></td></tr></table></figure>

<h2 id="二、站点功能"><a href="#二、站点功能" class="headerlink" title="二、站点功能"></a>二、站点功能</h2><h3 id="1-文章加密访问"><a href="#1-文章加密访问" class="headerlink" title="1. 文章加密访问"></a>1. 文章加密访问</h3><p>打开 <code>themes/next/layout/_partials/head.swig</code>文件,在 <code>&#123;% if theme.pace %&#125;` 标签下的 `&#123;% endif %&#125;</code> 之前插入代码：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    (function()&#123;</span><br><span class="line">        if(&#x27;&#123;&#123; page.password &#125;&#125;&#x27;)&#123;</span><br><span class="line">            if (prompt(&#x27;请输入文章密码&#x27;) !== &#x27;&#123;&#123; page.password &#125;&#125;&#x27;)&#123;</span><br><span class="line">                alert(&#x27;密码错误&#x27;);</span><br><span class="line">                history.back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在文章上应用：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 2017观看影视</span><br><span class="line">date: 2017-09-25 16:10:03</span><br><span class="line">type:</span><br><span class="line">top:</span><br><span class="line">comments:</span><br><span class="line">categories: [影音, 影视]</span><br><span class="line">tags: [影音, 电影, 电视剧, 动画]</span><br><span class="line">password: 123456</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h3 id="2-添加热度"><a href="#2-添加热度" class="headerlink" title="2. 添加热度"></a>2. 添加热度</h3><ul>
<li><p>进入<a href="https://links.jianshu.com/go?to=https://leancloud.cn/">LeanCloud官网</a>，进行账号注册。登录后，进入控制台，创建应用，应用名为<code>Hexo</code></p>
</li>
<li><p>创建应用后，点击存储，创建<strong>Class</strong>，<strong>Class</strong>命名为<strong>Counter</strong>，并限制写入</p>
</li>
<li><p>查看<strong>AppID</strong>和<strong>AppKey</strong></p>
</li>
<li><p>打开<code>Blog/themes/next/layout/_macro/post.swig</code>，<code>command+F</code>搜索<code>leancloud-visitors-count</code>，在图片位置加入<code>&lt;span&gt;℃&lt;/span&gt;</code></p>
<p><img data-src="pic1.png"></p>
</li>
<li><p>编辑主题配置文件，<code>command+f</code>搜索<code>leancloud_visitors</code>，将其值设为：<code>ture</code>，将<strong>AppID</strong>和<strong>AppKey</strong>粘贴到相应位置：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># You can visit https://leancloud.cn get AppID and AppKey.</span></span><br><span class="line">leancloud_visitors:</span><br><span class="line">  <span class="built_in">enable</span>: ture</span><br><span class="line">  app_id: app_id</span><br><span class="line">  app_key: app_key</span><br></pre></td></tr></table></figure>

<h3 id="3-添加免登陆评论系统"><a href="#3-添加免登陆评论系统" class="headerlink" title="3. 添加免登陆评论系统"></a>3. 添加免登陆评论系统</h3><blockquote>
<p>参考自该<a href="https://blog.csdn.net/jiunian_2761/article/details/97388997">博文</a></p>
</blockquote>
<h4 id="3-1-为什么选择Valine"><a href="#3-1-为什么选择Valine" class="headerlink" title="3.1 为什么选择Valine"></a>3.1 为什么选择Valine</h4><p>在笔者进行评论系统选择时，我觉得我的需求就是方便，简洁，最重要一点是要支持<code>Markdown</code> ，对比之下，最终选定了这款Valine，当然，如果你不喜欢这样简洁的，可以参考 <a href="https://www.zhihu.com/question/267598518">Hexo（NexT 主题）评论系统哪个好？</a></p>
<h4 id="3-2-第一步，注册LeanClound-获取APP-ID-和-APP-Key"><a href="#3-2-第一步，注册LeanClound-获取APP-ID-和-APP-Key" class="headerlink" title="3.2  第一步，注册LeanClound,获取APP ID 和 APP Key"></a>3.2  第一步，注册LeanClound,获取APP ID 和 APP Key</h4><ul>
<li><p>Valine 是基于 <a href="https://leancloud.cn/">LeanCloud</a> 作为数据存储的，所以需要注册一个账号</p>
</li>
<li><p>注册完成后，我们找到<code>创建``应用</code></p>
<p><img data-src="pic2.png"></p>
</li>
<li><p>在这里填写你的应用名称,名称可以自己定义，然后下面选择<code>开发版</code> 点击<code>创建</code></p>
</li>
<li><p>然后点击应用进入设置，在设置页，我们首先点击存储，查看是否有<code>Comment</code>和 <code>Counter</code>，没有则创建，权限设为无限制。</p>
<p><img data-src="pic3.png"></p>
<p><img data-src="pic4.png"></p>
</li>
<li><p>然后点击设置 &gt; 安全中心 ,将除了数据存储的服务全部关闭</p>
</li>
<li><p>最后点击应用 Key 取得我们 <code>AppKey</code> 和 <code>App id</code></p>
</li>
</ul>
<h4 id="3-3-在Hexo-Next主题中配置"><a href="#3-3-在Hexo-Next主题中配置" class="headerlink" title="3.3. 在Hexo Next主题中配置"></a>3.3. 在Hexo Next主题中配置</h4><ul>
<li><p>首先打开 <a href="https://www.jsdelivr.com/package/npm/valine">https://www.jsdelivr.com/package/npm/valine</a> 获取最新的 valine.min.js 的cdn地址</p>
</li>
<li><p>然后我们修改主题配置文件，配置CDN：</p>
<figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="meta"># valine  </span></span><br><span class="line"><span class="meta"># See: https://github.com/xCss/Valine  </span></span><br><span class="line"><span class="meta"># Example:  </span></span><br><span class="line"><span class="meta"># valine: //cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js  </span></span><br><span class="line"><span class="meta"># valine: //cdnjs.cloudflare.com/ajax/libs/valine/1.3.4/Valine.min.js  valine: https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>再打开配置Valine功能：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Valine </span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn </span></span><br><span class="line"><span class="comment"># More info available at https://valine.js.org </span></span><br><span class="line"><span class="attr">valine:</span> <span class="comment"># 功能开关  </span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version  </span></span><br><span class="line">    <span class="attr">appid:</span>  <span class="comment"># Your leancloud application appid #LeanClound获得的appid  </span></span><br><span class="line">    <span class="attr">appkey:</span>  <span class="comment"># Your leancloud application appkey #LeanClound获得的appkey </span></span><br><span class="line">    <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># Mail notifier. See: https://github.com/xCss/Valine/wiki # 邮件提醒  </span></span><br><span class="line">    <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code   </span></span><br><span class="line">    <span class="attr">placeholder:</span> <span class="string">欢迎畅所欲言</span> <span class="comment"># Comment box placeholder  </span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">mm</span> <span class="comment"># Gravatar style #默认头像设置  </span></span><br><span class="line">    <span class="attr">guest_info:</span> <span class="string">nick,mail,link</span> <span class="comment"># Custom comment header  </span></span><br><span class="line">    <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># Pagination size  </span></span><br><span class="line">    <span class="attr">language:</span> <span class="string">zh-cn</span> <span class="comment"># Language, available values: en, zh-cn # 语言，设为zh-cn  # 是否开启当前文章阅读量统计  </span></span><br><span class="line">    <span class="attr">visitor:</span> <span class="literal">false</span> <span class="comment"># leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors&#x27; for counter compatibility. Article reading statistic https://valine.js.org/visitor.html  </span></span><br><span class="line">    <span class="attr">comment_count:</span> <span class="literal">true</span> <span class="comment"># If false, comment count will only be displayed in post page, not in home page </span></span><br></pre></td></tr></table></figure>


</li>
</ul>
<h4 id="3-4-指定文章（页面）评论功能是否开启"><a href="#3-4-指定文章（页面）评论功能是否开启" class="headerlink" title="3.4 指定文章（页面）评论功能是否开启"></a>3.4 指定文章（页面）评论功能是否开启</h4><p>  在 Hexo 博客中，评论的功能是在所有页面都默认开启的，但是有的时候我们在页面上不需要显示评论功能，例如分类，标记页面我们并不需要评论功能。</p>
<p>  我们可以在 Front-matter 中通过<code>comments</code>属性设置true或false控制该页面或者是文章的评论功能是否打开，如我设置标签页面的评论功能关闭：</p>
  <figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">title: 标签</span><br><span class="line">date: <span class="number">2019</span><span class="number">-07</span><span class="number">-18</span> <span class="number">15</span>:<span class="number">16</span>:<span class="number">50</span></span><br><span class="line">type: <span class="string">&quot;tags&quot;</span></span><br><span class="line">comments: <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="3-5-自定义头像"><a href="#3-5-自定义头像" class="headerlink" title="3.5 自定义头像"></a>3.5 自定义头像</h4><blockquote>
<p><a href="https://valine.js.org/avatar.html">valine官方文档</a></p>
</blockquote>
<blockquote>
<p>Valine 目前使用的是<a href="http://cn.gravatar.com/">Gravatar</a> 作为评论列表头像。</p>
<p>请自行登录或注册<a href="http://cn.gravatar.com/">Gravatar</a>，然后修改自己的头像。</p>
<p>评论的时候，留下在<a href="http://cn.gravatar.com/">Gravatar</a>注册时所使用的邮箱即可。</p>
</blockquote>
<p>默认值为:</p>
<p><img data-src="pic5.png"></p>
<h3 id="4-给博客添加网站地图sitemap"><a href="#4-给博客添加网站地图sitemap" class="headerlink" title="4. 给博客添加网站地图sitemap"></a>4. 给博客添加网站地图<code>sitemap</code></h3><blockquote>
<p>未实现</p>
</blockquote>
<blockquote>
<p>搜索引擎每天让蜘蛛在网站爬行来抓取页面，网站地图的作用就是给主动给蜘蛛喂数据</p>
</blockquote>
<p>网站地图位于网站根目录下，有<code>sitemap.html</code>和<code>sitemap.xml</code>两种格式。百度搜索引擎及多数搜索引擎使用html格式，谷歌使用xml格式。两步完成网站地图自动生成功能。</p>
<p>**安装<code>网站地图生成插件**</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-generator-sitemap <span class="comment">--save</span></span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install </span>hexo-generator-<span class="keyword">baidu-sitemap </span>--save</span><br></pre></td></tr></table></figure>

<p>重新启动hexo，系统会在<code>public</code>根目录下生成<code>sitemap.xml</code>文件。</p>
<p>具体收录参考<a href="https://www.cnblogs.com/brady-wang/p/8493346.html">此处</a></p>
<h2 id="三、常见问题"><a href="#三、常见问题" class="headerlink" title="三、常见问题"></a>三、常见问题</h2><h3 id="1-hexo开发环境迁移"><a href="#1-hexo开发环境迁移" class="headerlink" title="1. hexo开发环境迁移"></a>1. hexo开发环境迁移</h3><blockquote>
<p>参考自 <a href="https://www.cnblogs.com/study-everyday/p/8902136.html">该博主</a></p>
</blockquote>
<h4 id="1-1-环境准备"><a href="#1-1-环境准备" class="headerlink" title="1.1 环境准备"></a>1.1 环境准备</h4><p>安装 Git 客户端</p>
<p>安装 node JS</p>
<h4 id="1-2-在-github-官网添加新电脑产生的密钥"><a href="#1-2-在-github-官网添加新电脑产生的密钥" class="headerlink" title="1.2 在 github 官网添加新电脑产生的密钥"></a>1.2 在 github 官网添加新电脑产生的密钥</h4><h4 id="1-3-源文件拷贝"><a href="#1-3-源文件拷贝" class="headerlink" title="1.3 源文件拷贝"></a>1.3 源文件拷贝</h4><p>将你原来电脑上个人博客目录下必要文件拷到你的新电脑上（比如F:/Blog目录下），注意无需拷全部，只拷如下几个目录：</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">_config.yml</span><br><span class="line"><span class="keyword">package</span>.json </span><br><span class="line">scaffolds/ </span><br><span class="line"><span class="keyword">source</span>/ </span><br><span class="line">themes/</span><br></pre></td></tr></table></figure>

<h4 id="1-4-安装-hexo"><a href="#1-4-安装-hexo" class="headerlink" title="1.4 安装 hexo"></a>1.4 安装 hexo</h4><p>在 cmd 下输入下面指令安装 hexo：</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">npm install hexo-<span class="keyword">cli</span> -g</span><br></pre></td></tr></table></figure>

<h4 id="1-5-进入-F-Blog-目录（你拷贝到新电脑的目录），输入下面指令安装相关模块"><a href="#1-5-进入-F-Blog-目录（你拷贝到新电脑的目录），输入下面指令安装相关模块" class="headerlink" title="1.5 进入 F:/Blog 目录（你拷贝到新电脑的目录），输入下面指令安装相关模块"></a>1.5 进入 F:/Blog 目录（你拷贝到新电脑的目录），输入下面指令安装相关模块</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save  // 文章部署到 git 的模块</span></span><br><span class="line">（下面为选择安装）</span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-feed <span class="comment">--save  // 建立 RSS 订阅</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-sitemap <span class="comment">--save // 建立站点地图</span></span><br></pre></td></tr></table></figure>

<h4 id="1-6-测试"><a href="#1-6-测试" class="headerlink" title="1.6 测试"></a>1.6 测试</h4><p>这时候使用 <code>hexo s</code> 基本可以看到你新添加的文章了。</p>
<h4 id="1-7-部署发布文章"><a href="#1-7-部署发布文章" class="headerlink" title="1.7 部署发布文章"></a>1.7 部署发布文章</h4><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">hexo clean   <span class="regexp">//</span> 清除缓存 网页正常情况下可以忽略此条命令</span><br><span class="line">hexo g       <span class="regexp">//</span> 生成静态网页</span><br><span class="line">hexo d       <span class="regexp">//</span> 开始部署</span><br></pre></td></tr></table></figure>

<h4 id="1-8-Github-添加-SSH-Keys"><a href="#1-8-Github-添加-SSH-Keys" class="headerlink" title="1.8 Github 添加 SSH Keys"></a><a name="mark-one">1.8 Github 添加 SSH Keys</a></h4><blockquote>
<p>推荐该博主 <a href="https://www.himmy.cn/2019/07/06/github%E6%B7%BB%E5%8A%A0ssh-key/">GitHub添加SSH key</a></p>
</blockquote>
<h5 id="1-8-1-打开Git-Bash命令行窗口"><a href="#1-8-1-打开Git-Bash命令行窗口" class="headerlink" title="1.8.1 打开Git Bash命令行窗口"></a>1.8.1 打开Git Bash命令行窗口</h5><h5 id="1-8-2-检查是否已有SSH"><a href="#1-8-2-检查是否已有SSH" class="headerlink" title="1.8.2 检查是否已有SSH"></a>1.8.2 检查是否已有SSH</h5><p>如果没有，会返回如下信息，继续第三步创建SSH</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">$ cd ~/.ssh</span><br><span class="line">bash: cd: <span class="regexp">/c/U</span>sers<span class="regexp">/Him/</span>.ssh: No such <span class="keyword">file</span> or directory</span><br></pre></td></tr></table></figure>

<p>如果本地已经有创建SSH，会返回如下信息，表示本地已经有创建过SSH了，跳过第三步，直接看第四步</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ~/.ssh</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br></pre></td></tr></table></figure>

<h5 id="1-8-3-创建SSH-key"><a href="#1-8-3-创建SSH-key" class="headerlink" title="1.8.3 创建SSH key"></a>1.8.3 创建SSH key</h5><p>最后一个参数替换成你自己的GitHub注册邮箱</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;your_email@example.com&quot;</span></span><br><span class="line">Generating <span class="keyword">public</span>/<span class="keyword">private</span> rsa key <span class="built_in">pair</span>.</span><br></pre></td></tr></table></figure>

<p>接下来会提示你输入生成的key存放的路径，不设置直接回车的话会默认创建在C:/Users/你的用户账号/.ssh文件夹下</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">Enter <span class="keyword">file</span> in which to save the key (<span class="regexp">/c/U</span>sers<span class="regexp">/Him/</span>.ssh/id_rsa):</span><br><span class="line">Created directory <span class="string">&#x27;/c/Users/userpath/.ssh&#x27;</span>.</span><br></pre></td></tr></table></figure>

<p>再接下来会提示你输入密码，这个密码是用来每次提交的时候输入确认，可以不设置，直接回车两次</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">Enter</span> <span class="string">passphrase</span> <span class="string">(empty</span> <span class="string">for</span> <span class="literal">no</span> <span class="string">passphrase):</span></span><br><span class="line"><span class="attr">Enter same passphrase again:</span></span><br></pre></td></tr></table></figure>

<p>最后成功后会看到类似如下的输出，表示成功生成SSH key了，可以到C:/Users/你的用户账号/.ssh文件夹下看下</p>
<figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">Your identification has been saved in /c/Users/Him/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /c/Users/Him/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:RwvBINgH8CEt2KniltmykeyDsOseUYcwMzehFeyT86s 1225723686<span class="meta">@qq.com</span></span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|<span class="string"> o+%OO+o.        </span>|</span><br><span class="line">|<span class="string">..=+%*+ ..       </span>|</span><br><span class="line">|<span class="string"> ..+o+o.. .      </span>|</span><br><span class="line">|<span class="string">o.  o=.  o .     </span>|</span><br><span class="line">|<span class="string">o oolalala S o      </span>|</span><br><span class="line">|<span class="string"> +.+.. . .       </span>|</span><br><span class="line">|<span class="string">. .o    .        </span>|</span><br><span class="line">|<span class="string">  . .  .         </span>|</span><br><span class="line">|<span class="string">   . E.          </span>|</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure>

<h5 id="1-8-4-添加SSH-key到GitHub"><a href="#1-8-4-添加SSH-key到GitHub" class="headerlink" title="1.8.4 添加SSH key到GitHub"></a>1.8.4 添加SSH key到GitHub</h5><p>首先复制.ssh文件夹下id_rsa.pub文件的内容，可以直接用文本编辑器打开复制，也可以用如下命令行复制</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">$ clip &lt; ~<span class="regexp">/.ssh/i</span>d_rsa.pub</span><br></pre></td></tr></table></figure>

<p>然后进入<a href="https://github.com/settings/keys%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E7%99%BB%E5%BD%95%E8%A6%81%E5%85%88%E7%99%BB%E5%BD%95">https://github.com/settings/keys设置，如果没有登录要先登录</a></p>
<p>或者登录后依次点击右上角Settings，然后再点击SSH and GPG keys</p>
<p>输入<code>title</code> 和 <code>key</code></p>
<p>最后点击Add SSH key按钮保存</p>
<h5 id="1-8-5-测试SSH连接"><a href="#1-8-5-测试SSH连接" class="headerlink" title="1.8.5 测试SSH连接"></a>1.8.5 测试SSH连接</h5><p>输入如下命令</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh -T git<span class="variable">@github</span>.com</span><br></pre></td></tr></table></figure>

<p>会得到如下输出，询问是否确认连接，输入yes回车确认</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">The</span> authenticity of host &#x27;github.com (<span class="number">13.229.188.59</span>)&#x27; can&#x27;t be established.</span><br><span class="line"><span class="attribute">RSA</span> key fingerprint is SHA<span class="number">256</span>:nThbg<span class="number">6</span>kXUpJWGl<span class="number">7</span>mykeyCspRomTxdCARLviKw<span class="number">6</span>E<span class="number">5</span>SY<span class="number">8</span>.</span><br><span class="line"><span class="attribute">Are</span> you sure you want to continue connecting (yes/no)? yes</span><br></pre></td></tr></table></figure>

<p>最后连接成功会看到如下输出</p>
<figure class="highlight vhdl"><table><tr><td class="code"><pre><span class="line"><span class="literal">Warning</span>: Permanently added <span class="symbol">&#x27;github</span>.com,<span class="number">13.229</span>.<span class="number">188.59</span>&#x27; (RSA) <span class="keyword">to</span> the list <span class="keyword">of</span> known hosts.</span><br><span class="line">Hi ghxiaoxiao! You<span class="symbol">&#x27;ve</span> successfully authenticated, but GitHub does <span class="keyword">not</span> provide shell <span class="keyword">access</span>.</span><br></pre></td></tr></table></figure>

<p>迁移完毕over</p>
<h3 id="2-gitee双线部署提高访问速度"><a href="#2-gitee双线部署提高访问速度" class="headerlink" title="2. gitee双线部署提高访问速度"></a>2. gitee双线部署提高访问速度</h3><h4 id="2-1-注册账号"><a href="#2-1-注册账号" class="headerlink" title="2.1 注册账号"></a>2.1 注册账号</h4><h4 id="2-2-创建仓库"><a href="#2-2-创建仓库" class="headerlink" title="2.2 创建仓库"></a>2.2 创建仓库</h4><p>创建一个与你的Gitee控件地址同名的空项目</p>
<blockquote>
<p>比如我的Gitee空间地址为<a href="https://gitee.com/Hammerzer%EF%BC%8C%E9%82%A3%E4%B9%88%E5%88%9B%E5%BB%BA%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D%E4%B8%BAHammerzer%EF%BC%8C">https://gitee.com/Hammerzer，那么创建的项目名为Hammerzer，</a></p>
<p>可能需要强制修改仓库名</p>
</blockquote>
<p>最终博客部署后的访问地址为<a href="https://hammerzer.gitee.io/">https://hammerzer.gitee.io</a></p>
<blockquote>
<p><strong>注意</strong>：如果创建仓库名称与空间地址不同，则需要访问 如<a href="https://hammerzer.gitee.io/hammer,%E5%90%8C%E6%97%B6%E4%B9%9F%E4%BC%9A%E5%AF%BC%E8%87%B4%60gitee">https://hammerzer.gitee.io/hammer,同时也会导致`gitee</a> page`无法显示css、js</p>
</blockquote>
<h4 id="2-3-修改配置"><a href="#2-3-修改配置" class="headerlink" title="2.3 修改配置"></a>2.3 修改配置</h4><p>复制上一步创建的项目的地址，也就是仓库的<code>SSH地址</code>，类似于<code>git@gitee.com:hhhh/hhhh.git</code></p>
<p>然后在Hexo配置文件_config.yml中找到deploy配置项，添加如下配置</p>
<blockquote>
<p>可多线部署，如下书写（单线部署可不写 <code>github</code>/<code>gitee</code>/<code>coding</code>）</p>
<p>记得冒号后有空格</p>
</blockquote>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repo</span>: </span><br><span class="line">      <span class="attribute">gitee</span>: git<span class="variable">@gitee</span>.<span class="attribute">hhhcom</span>:/hhh.git</span><br><span class="line">      <span class="attribute">github</span>: </span><br><span class="line">      <span class="attribute">coding</span>:</span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure>

<h4 id="2-4-添加SSH"><a href="#2-4-添加SSH" class="headerlink" title="2.4 添加SSH"></a>2.4 添加SSH</h4><p>在Gitee添加自己电脑的ssh key，这样每次更新代码到Gitee就不用再输入密码了</p>
<p>获取电脑的SSH可以参考   <a href="#mark-one">常见问题-1-1.8</a></p>
<p>然后在Gitee的设置页面找到安全设置–&gt;SSH公钥，用上一步获取的SSH创建一个新的公钥</p>
<blockquote>
<p>此处插播一条 little tip</p>
<p>上面的实现 <code>markdown</code>  自身链接跳转，下面给出所用代码：</p>
<p><code>&lt;a name=&quot;title&quot;&gt; &lt;/a&gt;</code></p>
<p><code>&lt;a href=&quot;#title&quot;&gt;&lt;/a&gt;</code></p>
</blockquote>
<h4 id="2-5-部署hexo"><a href="#2-5-部署hexo" class="headerlink" title="2.5 部署hexo"></a>2.5 部署hexo</h4><h4 id="2-6-开启Gitee-Pages服务"><a href="#2-6-开启Gitee-Pages服务" class="headerlink" title="2.6 开启Gitee Pages服务"></a>2.6 开启Gitee Pages服务</h4><ul>
<li>在项目主页找到服务，点击后可以看到Gitee Pages</li>
<li>点击跳转Gitee Pages服务页面，点击启动按钮开启服务</li>
<li>gitee pages会提示访问地址，然后就可以在浏览器输入<a href="https://hammerzer.gitee.io访问/">https://hammerzer.gitee.io访问</a></li>
</ul>
<h3 id="3-hexo双线部署在Gitee上出现的问题"><a href="#3-hexo双线部署在Gitee上出现的问题" class="headerlink" title="3. hexo双线部署在Gitee上出现的问题"></a>3. hexo双线部署在Gitee上出现的问题</h3><h4 id="3-1-在移动端出现点击事件失去默认行为"><a href="#3-1-在移动端出现点击事件失去默认行为" class="headerlink" title="3.1 在移动端出现点击事件失去默认行为"></a>3.1 在移动端出现点击事件失去默认行为</h4><blockquote>
<p>移动端区别于web端，有可能会默认阻止a标签默认行为，且在Web浏览器中调试时不会报错。</p>
<p>因此，只要换一种导航方式，即可。代码如下</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> href=<span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;href.length;i++)&#123;</span><br><span class="line">    href[i].ontouchend=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.location.href=<span class="built_in">this</span>.getAttribute(<span class="string">&quot;href&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-解决-gitee-page-无法自动更新"><a href="#3-2-解决-gitee-page-无法自动更新" class="headerlink" title="3.2 解决 gitee page 无法自动更新"></a>3.2 解决 gitee page 无法自动更新</h4><blockquote>
<p>参考简书<a href="https://www.jianshu.com/p/6460df84a099">该博文</a></p>
</blockquote>
<blockquote>
<p>gitee page 只有付费版才能自动更新，免费版只能手动点击 “设置” 中的更新按钮</p>
</blockquote>
<p><strong>自动化解决方案</strong>：使用 puppeteer 操作浏览器进行更新按钮点击</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 此处安装版本为 1.8.0</span></span><br><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&#x27;puppeteer&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">giteeUpdate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;</span><br><span class="line">        <span class="comment">// 此处可以使用 false 有头模式进行调试, 调试完注释即可</span></span><br><span class="line">          headless: <span class="literal">false</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line">    <span class="keyword">await</span> page.goto(<span class="string">&#x27;https://gitee.com/login&#x27;</span>);</span><br><span class="line">    <span class="comment">// 1. 选中账号控件</span></span><br><span class="line">    <span class="keyword">let</span> accountElements = <span class="keyword">await</span> page.$x(<span class="string">&#x27;//*[@id=&quot;user_login&quot;]&#x27;</span>) <span class="comment">// 此处使用 xpath 寻找控件，下同</span></span><br><span class="line">    <span class="comment">// 2. 填入账号</span></span><br><span class="line">    <span class="keyword">await</span> accountElements[<span class="number">0</span>].type(<span class="string">&#x27;你的 gitee 账户&#x27;</span>)</span><br><span class="line">    <span class="comment">// 3. 选中密码控件</span></span><br><span class="line">    <span class="keyword">let</span> pwdElements = <span class="keyword">await</span> page.$x(<span class="string">&#x27;//*[@id=&quot;user_password&quot;]&#x27;</span>)</span><br><span class="line">    <span class="comment">// 4. 填入密码</span></span><br><span class="line">    <span class="keyword">await</span> pwdElements[<span class="number">0</span>].type(<span class="string">&#x27;你的 gitee 密码&#x27;</span>)</span><br><span class="line">    <span class="comment">// 5. 点击登录</span></span><br><span class="line">    <span class="keyword">let</span> loginButtons = <span class="keyword">await</span> page.$x(<span class="string">&#x27;//*[@id=&quot;new_user&quot;]/div[2]/div/div/div[4]/input&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> loginButtons[<span class="number">0</span>].click()</span><br><span class="line">    <span class="comment">// 6. 等待登录成功</span></span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">await</span> page.goto(<span class="string">&#x27;你的 gitee page 更新按钮页面&#x27;</span>); <span class="comment">// 比如： https://gitee.com/yang0033/hexo-blog/pages</span></span><br><span class="line">    <span class="comment">// 7.1. 监听步骤 7 中触发的确认弹框，并点击确认</span></span><br><span class="line">    <span class="keyword">await</span> page.on(<span class="string">&#x27;dialog&#x27;</span>, <span class="keyword">async</span> dialog =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;确认更新&#x27;</span>)</span><br><span class="line">        dialog.accept();</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 7. 点击更新按钮，并弹出确认弹窗</span></span><br><span class="line">    <span class="keyword">let</span> updateButtons = <span class="keyword">await</span> page.$x(<span class="string">&#x27;//*[@id=&quot;pages-branch&quot;]/div[7]&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> updateButtons[<span class="number">0</span>].click()</span><br><span class="line">    <span class="comment">// 8. 轮询并确认是否更新完毕</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> page.waitFor(<span class="number">2000</span>)</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 8.1 获取更新状态标签</span></span><br><span class="line">            deploying = <span class="keyword">await</span> page.$x(<span class="string">&#x27;//*[@id=&quot;pages_deploying&quot;]&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> (deploying.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;更新中...&#x27;</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;更新完毕&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">500</span>);</span><br><span class="line">    <span class="comment">// 10.更新完毕，关闭浏览器</span></span><br><span class="line">    browser.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">giteeUpdate();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>尝试未成功，待更新</p>
</blockquote>
<h4 id="3-3-出现跨域请求失败503"><a href="#3-3-出现跨域请求失败503" class="headerlink" title="3.3 出现跨域请求失败503"></a>3.3 出现跨域请求失败503</h4><p>这种情况如果出现，修改网址为https，即可解决</p>
<h3 id="4-继静态压缩glup无果之后的替代"><a href="#4-继静态压缩glup无果之后的替代" class="headerlink" title="4. 继静态压缩glup无果之后的替代"></a>4. 继静态压缩glup无果之后的替代</h3><blockquote>
<p>参考该博主  <a href="https://blog.csdn.net/lewky_liu/article/details/82432003">Hexo瞎折腾系列</a></p>
</blockquote>
<h4 id="4-1-静态压缩的目的和手段"><a href="#4-1-静态压缩的目的和手段" class="headerlink" title="4.1 静态压缩的目的和手段"></a>4.1 静态压缩的目的和手段</h4><p>那么怎么提高hexo这个静态博客的页面加载速度呢？可以从以下的几个方面去入手： </p>
<ul>
<li>将js文件尽可能放置到body的闭合标签之前，因为在加载或者引入js文件时是阻塞式的，如果我们在页面的最开始就引入这些js文件，而这些文件又比较大，会造成页面在渲染时长时间处于白屏状态。</li>
<li>尽量避免去引用访问速度非常低下的cdn或者图片，可以改用访问速度更快的cdn，或者将难以迅速加载的图片保存到自己的站点目录下，以免在加载图片时耗费了大量的时间，最后还加载不出来。</li>
<li>对页面的静态资源进行压缩，包括css、js和html等文件。我们自己添加的css和js文件为了可读性，往往会有很多换行和空格，这些对于浏览器来说并没什么卵用，甚至还会降低渲染页面的速度。至于html文件，由于Markdown转成html的bug，会导致页面存在大量的空白，如果你查看下页面的源代码，就会发现这些大量的空白符，十分难看。这也会造成页面渲染的性能问题。</li>
</ul>
<h4 id="4-2-hexo的压缩静态资源插件"><a href="#4-2-hexo的压缩静态资源插件" class="headerlink" title="4.2 hexo的压缩静态资源插件"></a>4.2 hexo的压缩静态资源插件</h4><p>网上有很多相关的博文，常规的做法是使用<code>gulp</code>来进行压缩，<code>gulp</code>是<code>Node.js</code>下的自动构建工具，通过一列的task执行步骤进行自动流程化处理。</p>
<p>使用这种方法会比较麻烦，每次压缩时还需要输入额外的命令，比较繁琐，个人不是很喜欢，有兴趣的可以去自己了解下<a href="https://segmentfault.com/a/1190000009544924#articleHeader8">相关的东西</a>。这篇教程里很多详细的说明，里边有说到gulp的使用，绝对的精品文章。</p>
<p>这里我选择的是由rozbo大佬开发的<code>hexo-neat</code>压缩插件，配置简单，无需额外命令，你只要使用原本的调试三连或者部署三连就可以自动帮你完成静态资源的压缩！</p>
<h4 id="4-3-如何使用hexo-neat"><a href="#4-3-如何使用hexo-neat" class="headerlink" title="4.3 如何使用hexo-neat"></a>4.3 如何使用hexo-neat</h4><blockquote>
<p><strong>在站点根目录下安装</strong>hexo-neat</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-neat --save1</span><br></pre></td></tr></table></figure>

<h4 id="4-4-为站点配置文件添加相关配置"><a href="#4-4-为站点配置文件添加相关配置" class="headerlink" title="4.4 为站点配置文件添加相关配置"></a>4.4 为站点配置文件添加相关配置</h4><p>下边是我自己站点的相关配置，直接添加到站点配置文件<code>_config.yml</code>的末尾就可以。可以安装自己的需求去自定义配置，不过有些注意事项，可以参考我后文的踩坑记录。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"># hexo-neat</span><br><span class="line"># 博文压缩</span><br><span class="line">neat_enable: true</span><br><span class="line"># 压缩html</span><br><span class="line">neat_html:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line"># 压缩css  </span><br><span class="line">neat_css:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;**/*.min.css&#x27;</span><br><span class="line"># 压缩js</span><br><span class="line">neat_js:</span><br><span class="line">  enable: true</span><br><span class="line">  mangle: true</span><br><span class="line">  output:</span><br><span class="line">  compress:</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;**/*.min.js&#x27;</span><br><span class="line">    - &#x27;**/jquery.fancybox.pack.js&#x27;</span><br><span class="line">    - &#x27;**/index.js&#x27;  </span><br></pre></td></tr></table></figure>

<h4 id="4-5-hexo-neat插件踩坑记录"><a href="#4-5-hexo-neat插件踩坑记录" class="headerlink" title="4.5 hexo-neat插件踩坑记录"></a>4.5 hexo-neat插件踩坑记录</h4><p>由于在使用hexo-neat插件时，可以在命令窗口中看到各个文件的压缩率，于是我就开始捣鼓跳过哪些文件可以让效率更高。在鼓捣了一段时间之后，记录下使用该插件的一些注意事项，避免日后重蹈覆辙，也希望能对各位看官有所帮助。</p>
<h5 id="4-5-1-跳过压缩文件的正确配置方式"><a href="#4-5-1-跳过压缩文件的正确配置方式" class="headerlink" title="4.5.1 跳过压缩文件的正确配置方式"></a>4.5.1 跳过压缩文件的正确配置方式</h5><p>如果按照官方插件的文档说明来配置<code>exclude</code>，你会发现完全不起作用。这是因为配置的文件路径不对，压缩时找不到你配置的文件，自然也就无法跳过了。你需要给这些文件指定正确的路径，万能的配置方式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">neat_css:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;**/*.min.css&#x27;1234</span><br></pre></td></tr></table></figure>

<h5 id="4-5-2-压缩html时不要跳过-md文件"><a href="#4-5-2-压缩html时不要跳过-md文件" class="headerlink" title="4.5.2 压缩html时不要跳过.md文件"></a>4.5.2 压缩html时不要跳过<code>.md</code>文件</h5><p><code>.md</code>文件就是我们写文章时的markdown文件，如果跳过压缩<code>.md</code>文件，而你又刚好在文章中使用到了NexT自带的tab标签，那么当hexo在生成静态页面时就会发生解析错误。这会导致使用到了tab标签的页面生成失败而无法访问。</p>
<p>当初为了找到这个原因花了我两个晚上的时间，简直是夜不能寐。</p>
<h5 id="4-5-3-压缩html时不要跳过-swig文件"><a href="#4-5-3-压缩html时不要跳过-swig文件" class="headerlink" title="4.5.3 压缩html时不要跳过.swig文件"></a>4.5.3 压缩html时不要跳过<code>.swig</code>文件</h5><p><code>.swig</code>文件是模板引擎文件，简单的说hexo可以通过这些文件来生成对应的页面。如果跳过这些文件，那么你将会发现，你的所有页面完全没有起到压缩的效果，页面源代码里依然存在着一大堆空白。</p>
<h3 id="5-使用自定义的CSS样式"><a href="#5-使用自定义的CSS样式" class="headerlink" title="5. 使用自定义的CSS样式"></a>5. 使用自定义的CSS样式</h3><blockquote>
<p>参考 博主 <a href="https://segmentfault.com/a/1190000003846777">该文章</a></p>
</blockquote>
<p>想自定义About页面，需要使用自定义的css样式因为markdown支持html标签，使用自定义的CSS样式还是不错的。</p>
<p>下面总结一下具体的使用过程：</p>
<h4 id="5-1-添加样式支持"><a href="#5-1-添加样式支持" class="headerlink" title="5.1 添加样式支持"></a>5.1 添加样式支持</h4><p>为规范化开发，这里需要添加子集的样式文件。<br>首先，在样式文件的<code>source</code>文件夹下找到<code>css</code>文件夹，打开<code>main.styl</code>文件，在最后添加：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span>My Layer</span><br><span class="line"><span class="regexp">//</span>--------------------------------------------------</span><br><span class="line">@import <span class="string">&quot;_my/mycss&quot;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-新建自定义样式"><a href="#5-2-新建自定义样式" class="headerlink" title="5.2 新建自定义样式"></a>5.2 新建自定义样式</h4><p>找到样式文件夹<code>css</code> 新建<code>_my</code>文件夹，在其中新建<code>mycss.styl</code>文件，之后就可以按照stylus的格式自定义样式了。</p>
<h4 id="5-3-解决-gitee-page-更新后css仍然不变"><a href="#5-3-解决-gitee-page-更新后css仍然不变" class="headerlink" title="5.3 解决 gitee page 更新后css仍然不变"></a>5.3 解决 gitee page 更新后css仍然不变</h4><p>强制刷新浏览器 <code>Shift+F5</code>，这么傻的错误我居然还犯</p>
<h3 id="6-插入思维导图"><a href="#6-插入思维导图" class="headerlink" title="6. 插入思维导图"></a>6. 插入思维导图</h3><blockquote>
<p>参考 <a href="https://www.jianshu.com/p/1c4657f33899">简书</a></p>
</blockquote>
<h4 id="6-1-在hexo根目录下安装"><a href="#6-1-在hexo根目录下安装" class="headerlink" title="6.1 在hexo根目录下安装"></a>6.1 在hexo根目录下安装</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-simple-mindmap</span><br></pre></td></tr></table></figure>

<h4 id="6-2-在Markdown中使用思维导图"><a href="#6-2-在Markdown中使用思维导图" class="headerlink" title="6.2 在Markdown中使用思维导图"></a>6.2 在<code>Markdown</code>中使用思维导图</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% pullquote mindmap mindmap-md %&#125;</span><br><span class="line">- Front End</span><br><span class="line">    - 任何方向</span><br><span class="line">        - 编程语言</span><br><span class="line">            - Java</span><br><span class="line">        - SQL</span><br><span class="line">        - Linux</span><br><span class="line">        - Git</span><br><span class="line">    - 技术</span><br><span class="line">        - Java Web</span><br><span class="line">        - 数据库</span><br><span class="line">        - Docker</span><br><span class="line">        - svn</span><br><span class="line">        - 消息队列(MQ)</span><br><span class="line">        - mycat</span><br><span class="line">        - 大数据</span><br><span class="line">            - Hadoop</span><br><span class="line">            - HBase</span><br><span class="line">    - 内功</span><br><span class="line">        - 计算机基础</span><br><span class="line">            - 计算机网络</span><br><span class="line">            - 计算机操作系统</span><br><span class="line">            - 编译原理</span><br><span class="line">            - 计算机组成原理</span><br><span class="line">        - 数据结构与算法</span><br><span class="line">        - 设计模式</span><br><span class="line">        - 性能优化</span><br><span class="line">        - 架构设计</span><br><span class="line">        - 软件工程</span><br><span class="line">    - 其他</span><br><span class="line">        - 英语</span><br><span class="line">        - 博客</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-4-存在的问题"><a href="#6-4-存在的问题" class="headerlink" title="6.4 存在的问题"></a>6.4 存在的问题</h4><p>搜集资料发现应该就这么操作就可以正确插入思维导图，然而我却遇到了很多问题。</p>
<h5 id="6-4-1-思维导图节点未被渲染"><a href="#6-4-1-思维导图节点未被渲染" class="headerlink" title="6.4.1 思维导图节点未被渲染"></a>6.4.1 思维导图节点未被渲染</h5><p>更新<code>gitee pages</code>服务之后，出现思维导图限制框，但思维导图的节点没有被渲染，仍然是以无序列表形式展现</p>
<p><code>console</code>报错未找到 <code>‘$’</code>，这么说应该是这个插件直接使用了<code>JQuery</code>但未引用</p>
<p><strong>解决办法一</strong>：直接把<code>jquery</code>下载到本地，放在<code>theme/source/js</code>下</p>
<p>然后再Markdown中引入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>解决办法二</strong>：使用cdn，使用时应注意应该使用 <code>https</code>传输，否则像<code>chrome</code>会默认阻止连接 <code>jquery cdn</code></p>
<p>例如我是把下面的代码在 <code>themes/next/layout/_partials/head/head.swig</code>中全局引入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-插入流程图"><a href="#7-插入流程图" class="headerlink" title="7. 插入流程图"></a>7. 插入流程图</h3><p>安装hexo-filter-flowchart<br><code>npm install --save hexo-filter-flowchart</code></p>
<p>具体的流程图<code>Markdown</code>语法，见<a href="https://hammerzer.gitee.io/2020/08/26/markdown/">另一篇</a></p>
<h3 id="8-插入时序图"><a href="#8-插入时序图" class="headerlink" title="8. 插入时序图"></a>8. 插入时序图</h3><blockquote>
<p><a href="https://www.dazhuanlan.com/2019/12/24/5e0209fc19074/">参考源</a></p>
</blockquote>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p><a href="https://github.com/bubkoo/hexo-filter-sequence">hexo-filter-sequence</a> 插件:</p>
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">npm install --<span class="keyword">save</span> hexo-filter-<span class="keyword">sequence</span></span><br></pre></td></tr></table></figure>

<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>站点配置文件 <code>_config.yml</code> 中增加如下配置:</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">sequence:</span><br><span class="line">  webfon<span class="variable">t:</span> http<span class="variable">s:</span></span><br><span class="line">  raphae<span class="variable">l:</span> http<span class="variable">s:</span>//cdn.bootcss.<span class="keyword">com</span>/raphael/<span class="number">2.2</span>.<span class="number">7</span>/raphael.<span class="built_in">min</span>.js</span><br><span class="line">  underscore: http<span class="variable">s:</span>//cdn.bootcss.<span class="keyword">com</span>/underscore.js/<span class="number">1.8</span>.<span class="number">3</span>/underscore-<span class="built_in">min</span>.js</span><br><span class="line">  sequence: http<span class="variable">s:</span>//cdn.bootcss.<span class="keyword">com</span>/js-sequence-diagrams/<span class="number">1.0</span>.<span class="number">6</span>/sequence-diagram-<span class="built_in">min</span>.js</span><br><span class="line">  <span class="keyword">cs</span><span class="variable">s:</span> # optional, the url <span class="keyword">for</span> css, such <span class="keyword">as</span> hand drawn theme </span><br><span class="line">  option<span class="variable">s:</span> </span><br><span class="line">    theme: simple</span><br><span class="line">    css_clas<span class="variable">s:</span></span><br></pre></td></tr></table></figure>

<h4 id="修改源码"><a href="#修改源码" class="headerlink" title="修改源码"></a>修改源码</h4><p>源码修改后才能正常使用，进入插件目录作如下修改：</p>
<figure class="highlight roboconf"><table><tr><td class="code"><pre><span class="line">// index.js</span><br><span class="line">var assign = require(&#x27;deep-assign&#x27;);</span><br><span class="line">var renderer = require(&#x27;./lib/renderer&#x27;);</span><br><span class="line"></span><br><span class="line">hexo.config.sequence = assign(&#123;</span><br><span class="line">  <span class="attribute">webfont</span>: &#x27;https://cdn<span class="variable">.bootcss</span><span class="variable">.com</span>/webfont/1.6.28/webfontloader<span class="variable">.js</span>&#x27;,</span><br><span class="line">  raphael: &#x27;https://cdn<span class="variable">.bootcss</span><span class="variable">.com</span>/raphael/2.2.7/raphael<span class="variable">.min</span><span class="variable">.js</span>&#x27;,</span><br><span class="line">  underscore: &#x27;https://cdn<span class="variable">.bootcss</span><span class="variable">.com</span>/underscore<span class="variable">.js</span>/1.8.3/underscore-min<span class="variable">.js</span>&#x27;,</span><br><span class="line">  sequence: &#x27;https://cdn<span class="variable">.bootcss</span><span class="variable">.com</span>/js-sequence-diagrams/1.0.6/sequence-diagram-min<span class="variable">.js</span>&#x27;,</span><br><span class="line">  css: &#x27;&#x27;,</span><br><span class="line">  options: &#123;</span><br><span class="line">    theme: &#x27;simple&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, hexo<span class="variable">.config</span><span class="variable">.sequence</span>);</span><br><span class="line"></span><br><span class="line"><span class="attribute">hexo.extend.filter.register(&#x27;before_post_render&#x27;, renderer.render, 9);</span></span><br><span class="line"><span class="attribute"></span></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">// lib/renderer.js, 25 行</span></span><br><span class="line"><span class="keyword">if</span> (sequences.length) &#123;</span><br><span class="line">      <span class="keyword">var</span> config = <span class="keyword">this</span>.config.sequence;</span><br><span class="line">      <span class="comment">// resources</span></span><br><span class="line">      <span class="keyword">data</span>.content += <span class="string">&#x27;&lt;script src=&quot;&#x27;</span> + config.webfont + <span class="string">&#x27;&quot;&gt;&lt;/script&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">data</span>.content += <span class="string">&#x27;&lt;script src=&quot;&#x27;</span> + config.raphael + <span class="string">&#x27;&quot;&gt;&lt;/script&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">data</span>.content += <span class="string">&#x27;&lt;script src=&quot;&#x27;</span> + config.underscore + <span class="string">&#x27;&quot;&gt;&lt;/script&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">data</span>.content += <span class="string">&#x27;&lt;script src=&quot;&#x27;</span> + config.sequence + <span class="string">&#x27;&quot;&gt;&lt;/script&gt;&#x27;</span>;</span><br><span class="line">      ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-插入mermiad-甘特图"><a href="#9-插入mermiad-甘特图" class="headerlink" title="9. 插入mermiad 甘特图"></a>9. 插入mermiad 甘特图</h3><blockquote>
<p><a href="https://blog.csdn.net/qq_36347375/article/details/90478335">Hexo引入Mermaid流程图和MathJax数学公式</a></p>
<p>参考上面的文章，这是我见过的少有的没有坑的文章，点个👍</p>
</blockquote>
<h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><p>在<code>blog</code>根目录<em>安装mermaid插件</em></p>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install </span>hexo-filter-mermaid-<span class="keyword">diagrams </span>--save  *<span class="comment"># 安装mermaid插件*</span></span><br></pre></td></tr></table></figure>

<h4 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h4><ul>
<li>修改主题theme中的<code>_config.yml</code> 内的 <code>mermaid</code> 模块为 <code>true</code></li>
<li>其实可以deploy一下看看可行否，不行再继续（我在这一步就可以正确显示）：在根目录下的<code>_config.yml</code>中添加</li>
</ul>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mermaid chart</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">mermaid:</span> <span class="meta">## mermaid url https:<span class="comment">//github.com/knsv/mermaid</span></span></span><br><span class="line"><span class="symbol">  enable:</span> true  <span class="meta"># default true</span></span><br><span class="line"><span class="symbol">  version:</span> <span class="string">&quot;7.1.2&quot;</span> <span class="meta"># default v7.1.2</span></span><br><span class="line"><span class="symbol">  options:</span>  <span class="meta"># find more api options from https:<span class="comment">//github.com/knsv/mermaid/blob/master/src/mermaidAPI.js</span></span></span><br><span class="line">    <span class="meta">#startOnload: true  <span class="comment">// default true</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>其实可以<code>deploy</code>一下看看可行否，不行再继续：编辑<code>blog/themes/next/layout/_partials/footer.swig</code>，在最后添加如下内容</li>
</ul>
<figure class="highlight handlebars"><table><tr><td class="code"><pre><span class="line"><span class="xml">&#123;% if theme.mermaid.enable %&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;https://unpkg.com/mermaid@</span></span></span><span class="template-variable">&#123;&#123; <span class="name">theme.mermaid.version</span> &#125;&#125;</span><span class="xml"><span class="tag"><span class="string">/dist/mermaid.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    if (window.mermaid) &#123;</span></span><br><span class="line"><span class="xml">      mermaid.initialize(</span><span class="template-variable">&#123;&#123; <span class="name">JSON.stringify</span>(<span class="name">theme.mermaid.options</span>) &#125;&#125;</span><span class="xml">);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure>

<p><a href="http://www.guide2it.com/post/2019-03-10-1-make-flowcharts-with-mermaid-in-markdown/">多样的Mermaid流程图参考</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>Hexo &amp; Next部署与使用</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript Function</title>
    <url>/2020/08/25/JavaScript-commonly-used-functions/</url>
    <content><![CDATA[<blockquote>
<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><p>以下记录经常忘记又常用的<code>JS</code>内置函数</p>
<p><strong>相关 资料  ：</strong></p>
<p><a href="https://es6.ruanyifeng.com/">ECMAScript 6 入门</a></p>
<p><a href="https://www.liaoxuefeng.com/wiki/1022910821149312">廖雪峰的JavaScript教程</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/">MSD—&gt;Nice！@</a></p>
</blockquote>
<a id="more"></a>

<h2 id="Array-Functions"><a href="#Array-Functions" class="headerlink" title="Array Functions"></a>Array Functions</h2><h3 id="1-Array-forEach"><a href="#1-Array-forEach" class="headerlink" title="1. Array.forEach()"></a>1. Array.forEach()</h3><p><strong>描述</strong>：forEach()方法用于调用数组的每一个元素，并将元素传递给回调函数。</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="built_in">array</span>.<span class="keyword">for</span><span class="constructor">Each(<span class="params">function</span>(<span class="params">currentValue</span>, <span class="params">index</span>, <span class="params">arr</span>)</span>, thisValue)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>currentValue：必填，当前元素。</p>
<p>index：可选，当前元素的索引。</p>
<p>arr：可选，当前元素所属的数组对象。</p>
<p>thisValue：可选，传递给函数的值一般用this值，如果这个参数为空，”undefined”会传递给”this”值。（这个参数一般很少填）</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* JS代码 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>];</span><br><span class="line"></span><br><span class="line">colors.forEach(<span class="function">(<span class="params">item, $index, arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;item&#125;</span> =&gt; <span class="subst">$&#123;$index&#125;</span> =&gt; <span class="subst">$&#123;arr&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img data-src="pic1.png"></p>
<p>上面的代码用了ES6语法，几乎等同于下面的代码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* JS代码 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>];</span><br><span class="line"></span><br><span class="line">colors.<span class="keyword">forEach</span>(<span class="function"><span class="keyword">function</span>(<span class="params">item, $index, arr</span>) </span>&#123;</span><br><span class="line">  console.log(item + <span class="string">&#x27; =&gt; &#x27;</span> + $index + <span class="string">&#x27; =&gt; &#x27;</span> + arr);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>区别</strong>：其实，用 forEach() 主要是为了更方便的代替 for 对数组进行遍历。</p>
<p>用 for 遍历数组的方法</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* JS代码 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> i=<span class="number">0</span>; i &lt; colors.length; i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log( colors[i] + <span class="string">&#x27; =&gt; &#x27;</span> + i + <span class="string">&#x27; =&gt; &#x27;</span> + colors);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>forEach() 对于空数组是不会执行回调函数的。</li>
<li>for可以用continue跳过循环中的一个迭代，forEach用continue会报错。</li>
<li>forEach() 需要用 return 跳过循环中的一个迭代，跳过之后会执行下一个迭代。</li>
</ul>
<p><strong>如何跳过一次迭代</strong></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* JS代码 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> i=<span class="number">0</span>; i &lt; colors.length; i++)&#123;</span><br><span class="line">  <span class="keyword">if</span>( colors[i] == <span class="string">&#x27;blue&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log( colors[i] );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">colors.forEach( <span class="function"><span class="keyword">function</span>(<span class="params"> item </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(item == <span class="string">&#x27;blue&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log( item );</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<blockquote>
<p>没有办法终止或跳出forEach循环，除非抛出一个异常。</p>
<p>如果需要终止或者跳出循环，建议用some()或者every()。</p>
</blockquote>
<h3 id="2-Array-shift"><a href="#2-Array-shift" class="headerlink" title="2. Array.shift()"></a>2. Array.shift()</h3><p>shift() 方法用于把数组的第一个元素从其中删除，并返回第一个元素的值。</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">array</span>Object.shift()</span><br></pre></td></tr></table></figure>

<p><strong>返回值</strong>：数组原来的第一个元素的值。</p>
<p><strong>说明</strong></p>
<ul>
<li>如果数组是空的，那么 shift() 方法将不进行任何操作，返回 undefined 值。</li>
<li>请注意，该方法不创建新数组，而是直接修改原有的 arrayObject。</li>
<li>该方法会改变数组的长度。</li>
</ul>
<h3 id="3-Array-every-Array-some"><a href="#3-Array-every-Array-some" class="headerlink" title="3. Array.every()   Array.some()"></a>3. Array.every()   Array.some()</h3><blockquote>
<p>every()是对数组中每一项运行给定函数，如果该函数对每一项返回true,则返回true。</p>
<p>some()是对数组中每一项运行给定函数，如果该函数对任一项返回true，则返回true。</p>
<p>some一直在找符合条件的值，一旦找到，则不会继续迭代下去。<br>every从迭代开始，一旦有一个不符合条件，则不会继续迭代下去。</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">var arr = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> ];  </span><br><span class="line">console.log( arr.<span class="keyword">some</span>( <span class="keyword">function</span>( item, <span class="keyword">index</span>, <span class="keyword">array</span> )&#123;     </span><br><span class="line">    console.log( <span class="string">&#x27;item=&#x27;</span> + item + <span class="string">&#x27;,index=&#x27;</span>+<span class="keyword">index</span>+<span class="string">&#x27;,array=&#x27;</span>+<span class="keyword">array</span> );     </span><br><span class="line">    <span class="keyword">return</span> item &gt; <span class="number">3</span>;  </span><br><span class="line">&#125;));  </span><br><span class="line">console.log( arr.every( <span class="keyword">function</span>( item, <span class="keyword">index</span>, <span class="keyword">array</span> )&#123;     </span><br><span class="line">    console.log( <span class="string">&#x27;item=&#x27;</span> + item + <span class="string">&#x27;,index=&#x27;</span>+<span class="keyword">index</span>+<span class="string">&#x27;,array=&#x27;</span>+<span class="keyword">array</span> );     </span><br><span class="line">    <span class="keyword">return</span> item &gt; <span class="number">3</span>;  </span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<h3 id="4-Array-slice"><a href="#4-Array-slice" class="headerlink" title="4. Array.slice()"></a>4. Array.slice()</h3><p><strong>描述</strong>：slice() 方法可从已有的数组中返回选定的元素。</p>
<p>返回一个新的数组，包含从 start 到 end （不包括该元素）的 arrayObject 中的元素。</p>
<p>该方法并不会修改数组，而是返回一个子数组。</p>
<blockquote>
<p><strong>注释：</strong>您可使用负值从数组的尾部选取元素。</p>
<p><strong>注释：</strong>如果 end 未被规定，那么 slice() 方法会选取从 start 到数组结尾的所有元素。</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">arrayObject.<span class="keyword">slice</span>(<span class="keyword">start</span>,<span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">start</td>
<td align="left">必需。规定从何处开始选取。如果是负数，那么它规定从数组尾部开始算起的位置。也就是说，-1 指最后一个元素，-2 指倒数第二个元素，以此类推。</td>
</tr>
<tr>
<td align="left">end</td>
<td align="left">可选。规定从何处结束选取。该参数是数组片断结束处的数组下标。如果没有指定该参数，那么切分的数组包含从 start 到数组结束的所有元素。如果这个参数是负数，那么它规定的是从数组尾部开始算起的元素。</td>
</tr>
</tbody></table>
<h3 id="5-String-prototype-indexOf"><a href="#5-String-prototype-indexOf" class="headerlink" title="5. String.prototype.indexOf()"></a>5. String.prototype.indexOf()</h3><p><strong>描述：</strong>方法返回调用它的 <code>String</code> 对象中第一次出现的<code>指定值</code>的索引，从 <code>fromIndex</code> 处进行搜索。如果未找到该值，则返回 -1。</p>
<p><strong>语法</strong></p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">str.index<span class="constructor">Of(<span class="params">searchValue</span> [, <span class="params">fromIndex</span>])</span></span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li><p><code>searchValue</code></p>
<p>要被查找的字符串值。</p>
<p>如果没有提供确切地提供字符串，searchValue 会被强制设置为 <code>&quot;undefined&quot;</code>， 然后在当前字符串中查找这个值。</p>
<p>举个例子：<code>&#39;undefined&#39;.indexOf()</code> 将会返回0，因为 <code>undefined</code> 在位置0处被找到，但是 <code>&#39;undefine&#39;.indexOf()</code> 将会返回 -1 ，因为字符串 <code>&#39;undefined&#39;</code> 未被找到。</p>
</li>
<li><p><code>fromIndex</code> 可选</p>
<p>数字表示开始查找的位置。可以是任意整数，默认值为 <code>0</code>。</p>
<p>如果 <code>fromIndex</code> 的值小于 <code>0</code>，或者大于 <code>str.length</code> ，那么查找分别从 <code>0</code> 和<code>str.length</code> 开始。（译者注： <code>fromIndex</code> 的值小于 <code>0</code>，等同于为空情况； <code>fromIndex</code> 的值大于 <code>str.length</code> ，那么结果会直接返回 <code>-1</code> 。）</p>
<p>举个例子，<code>&#39;hello world&#39;.indexOf(&#39;o&#39;, -5)</code> 返回 <code>4</code> ，因为它是从位置<code>0</code>处开始查找，然后 <code>o</code> 在位置<code>4</code>处被找到。另一方面，<code>&#39;hello world&#39;.indexOf(&#39;o&#39;, 11)</code> （或 <code>fromIndex</code> 填入任何大于<code>11</code>的值）将会返回 <code>-1</code> ，因为开始查找的位置<code>11</code>处，已经是这个字符串的结尾了。</p>
</li>
</ul>
<p><strong>返回值</strong></p>
<p>查找的字符串 <code>searchValue</code> 的第一次出现的索引，如果没有找到，则返回 <code>-1</code>。</p>
<p>若被查找的字符串 <code>searchValue</code> 是一个空字符串，将会产生“奇怪”的结果。如果 <code>fromIndex</code> 值为空，或者 <code>fromIndex</code> 值小于被查找的字符串的长度，返回值和以下的 <code>fromIndex</code> 值一样</p>
<h3 id="6-Array-prototype-splice"><a href="#6-Array-prototype-splice" class="headerlink" title="6. Array.prototype.splice()"></a>6. Array.prototype.splice()</h3><p><strong>描述</strong></p>
<p>splice() 方法向/从数组中<code>添加</code>/<code>删除</code>项目，然后返回被删除的项目。</p>
<figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">array.splice(start<span class="comment">[, deleteCount<span class="comment">[, item1<span class="comment">[, item2<span class="comment">[, ...]</span>]</span>]</span>]</span>)</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li><p><code>start</code></p>
<p>指定修改的开始位置（从0计数）。如果超出了数组的长度，则从数组末尾开始添加内容；如果是负值，则表示从数组末位开始的第几位（从-1计数，这意味着-n是倒数第n个元素并且等价于<code>array.length-n</code>）；如果负数的绝对值大于数组的长度，则表示开始位置为第0位。</p>
</li>
<li><p><code>deleteCount</code> 可选</p>
<p>整数，表示要移除的数组元素的个数。</p>
<p>如果 <code>deleteCount</code> 大于 <code>start</code> 之后的元素的总数，则从 <code>start</code> 后面的元素都将被删除（含第 <code>start</code> 位）。</p>
<p>如果 <code>deleteCount</code> 被省略了，或者它的值大于等于<code>array.length - start</code>(也就是说，如果它大于或者等于<code>start</code>之后的所有元素的数量)，那么<code>start</code>之后数组的所有元素都会被删除。</p>
<p>如果 <code>deleteCount</code> 是 0 或者负数，则不移除元素。这种情况下，至少应添加一个新元素。</p>
</li>
<li><p><code>item1, item2, *...*</code> 可选</p>
<p>要添加进数组的元素,从<code>start</code> 位置开始。如果不指定，则 <code>splice()</code> 将只删除数组元素。</p>
</li>
</ul>
<p><strong>返回值</strong></p>
<p>由被删除的元素组成的一个数组。如果只删除了一个元素，则返回只包含一个元素的数组。如果没有删除元素，则返回空数组。</p>
<p><strong>注意</strong></p>
<p>该方法会改变原始数组。</p>
<h3 id="7-Array-prototype-map"><a href="#7-Array-prototype-map" class="headerlink" title="7. Array.prototype.map()"></a>7. Array.prototype.map()</h3><p><strong>map()</strong> 方法创建一个新数组(未修改原数组)，其结果是该数组中的每个元素是调用一次提供的函数后的返回值。</p>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> new_array = arr.map(<span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">currentValue[, index[, array]]</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Return element for new_array </span></span><br><span class="line">&#125;[, thisArg])</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<p><em>callback</em></p>
<p>生成新数组元素的函数，使用三个参数：</p>
<ul>
<li><p><code>currentValue</code></p>
<p><code>callback</code> 数组中正在处理的当前元素。</p>
</li>
<li><p><code>index</code>可选</p>
<p><code>callback</code> 数组中正在处理的当前元素的索引。</p>
</li>
<li><p><code>array</code>可选</p>
<p><code>map</code> 方法调用的数组。</p>
</li>
</ul>
<p><code>thisArg</code>可选</p>
<p>执行 <code>callback</code> 函数时值被用作<code>this</code>。</p>
<p><strong>描述</strong></p>
<p><code>map</code> 方法会给原数组中的每个元素都按顺序调用一次  <code>callback</code> 函数。<code>callback</code> 每次执行后的返回值（包括 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>）组合起来形成一个新数组。 <code>callback</code> 函数只会在有值的索引上被调用；那些从来没被赋过值或者使用 <code>delete</code> 删除的索引则不会被调用。</p>
<p>因为<code>map</code>生成一个新数组，当你不打算使用返回的新数组却使用<code>map</code>是违背设计初衷的，请用<code>forEach</code>或者<code>for-of</code>替代。你不该使用<code>map</code>: A)你不打算使用返回的新数组，或/且 B) 你没有从回调函数中返回值。</p>
<p><code>callback</code> 函数会被自动传入三个参数：数组元素，元素索引，原数组本身。</p>
<p>如果 <code>thisArg</code> 参数提供给<code>map</code>，则会被用作回调函数的<code>this</code>值。否则<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>会被用作回调函数的<code>this</code>值。<code>this</code>的值最终相对于<code>callback</code>函数的可观察性是依据<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">the usual rules for determining the this seen by a function</a>决定的</p>
<p><code>map </code>不修改调用它的原数组本身（当然可以在 <code>callback</code> 执行时改变原数组）</p>
<p><code>map</code> 方法处理数组元素的范围是在 <code>callback</code> 方法第一次调用之前就已经确定了。调用<code>map</code>方法之后追加的数组元素不会被<code>callback</code>访问。如果存在的数组元素改变了，那么传给<code>callback</code>的值是<code>map</code>访问该元素时的值。在<code>map</code>函数调用后但在访问该元素前，该元素被删除的话，则无法被访问到。</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><strong>示例见MDN</strong></a></p>
<ul>
<li>求数组中每个元素的平方根</li>
<li>使用 map 重新格式化数组中的对象</li>
<li>使用一个包含一个参数的函数来mapping(构建)一个数字数组</li>
<li>一般的<code>map</code> 方法(在一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/String"><code>String</code></a> 上使用 map 方法获取字符串中每个字符所对应的 ASCII 码)</li>
</ul>
<h3 id="8-Array-prototype-filter"><a href="#8-Array-prototype-filter" class="headerlink" title="8. Array.prototype.filter()"></a>8. Array.prototype.filter()</h3><p><strong>filter()</strong> 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。 </p>
<p>返回一个新的、由通过测试的元素组成的数组，如果没有任何数组元素通过测试，则返回空数组。</p>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> newArray = arr.filter(callback(element[, index[, array]])[, thisArg])</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<p><em>callback</em></p>
<p>用来测试数组的每个元素的函数。返回 <code>true</code> 表示该元素通过测试，保留该元素，<code>false</code> 则不保留。它接受以下三个参数：</p>
<ul>
<li><p><code>element</code></p>
<p>数组中当前正在处理的元素。</p>
</li>
<li><p><code>index</code>可选</p>
<p>正在处理的元素在数组中的索引。</p>
</li>
<li><p><code>array</code>可选</p>
<p>调用了 <code>filter</code> 的数组本身。</p>
</li>
</ul>
<p><code>thisArg</code>可选</p>
<p>执行 <code>callback</code> 时，用于 <code>this</code> 的值。</p>
<p><strong>描述</strong></p>
<p><code>filter</code> 为数组中的每个元素调用一次 <code>callback</code> 函数，并利用所有使得 <code>callback</code> 返回 true 或<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy">等价于 true 的值</a>的元素创建一个新数组。<code>callback</code> 只会在已经赋值的索引上被调用，对于那些已经被删除或者从未被赋值的索引不会被调用。那些没有通过 <code>callback</code> 测试的元素会被跳过，不会被包含在新数组中。</p>
<p><code>callback</code> 被调用时传入三个参数：</p>
<ol>
<li>元素的值</li>
<li>元素的索引</li>
<li>被遍历的数组本身</li>
</ol>
<p>如果为 <code>filter</code> 提供一个 <code>thisArg</code> 参数，则它会被作为 <code>callback</code> 被调用时的 <code>this</code> 值。否则，<code>callback</code> 的 <code>this</code> 值在非严格模式下将是全局对象，严格模式下为 <code>undefined</code>。<code>callback</code> 函数最终观察到的 <code>this</code> 值是根据<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this">通常函数所看到的 “this”的规则</a>确定的。</p>
<p><code>filter</code> 不会改变原数组，它返回过滤后的新数组。</p>
<p><code>filter</code> 遍历的元素范围在第一次调用 <code>callback</code> 之前就已经确定了。在调用 <code>filter</code> 之后被添加到数组中的元素不会被 <code>filter</code> 遍历到。如果已经存在的元素被改变了，则他们传入 <code>callback</code> 的值是 <code>filter</code> 遍历到它们那一刻的值。被删除或从来未被赋值的元素不会被遍历到。</p>
<h3 id="9-Array-prototype-reduce"><a href="#9-Array-prototype-reduce" class="headerlink" title="9. Array.prototype.reduce()"></a>9. Array.prototype.reduce()</h3><blockquote>
<p>方法对数组中的每个元素执行一个由您提供的<strong>reducer</strong>函数(升序执行)，将其结果汇总为单个返回值。</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MDN</span></span><br><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> accumulator + currentValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.reduce(reducer));</span><br><span class="line"><span class="comment">// expected output: 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5 + 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.reduce(reducer, <span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: 15</span></span><br></pre></td></tr></table></figure>

<p><strong>reducer</strong> 函数接收4个参数:</p>
<ol>
<li>Accumulator (acc) (累计器)</li>
<li>Current Value (cur) (当前值)</li>
<li>Current Index (idx) (当前索引)</li>
<li>Source Array (src) (源数组)</li>
</ol>
<p><strong>reducer</strong> 函数的返回值分配给累计器，该返回值在数组的每个迭代中被记住，并最后成为最终的单个结果值。</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">其他具体用法参考MDN</a></p>
<h2 id="Object-Function"><a href="#Object-Function" class="headerlink" title="Object Function"></a>Object Function</h2><h3 id="1-Object-assign"><a href="#1-Object-assign" class="headerlink" title="1. Object.assign()"></a>1. Object.assign()</h3><p>将所有可枚举的自身属性的值从一个或多个源对象复制到目标对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source = &#123; <span class="attr">b</span>: <span class="number">4</span>, <span class="attr">c</span>: <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> returnedTarget = <span class="built_in">Object</span>.assign(target, source);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(target);</span><br><span class="line"><span class="comment">// expected output: Object &#123; a: 1, b: 4, c: 5 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(returnedTarget);</span><br><span class="line"><span class="comment">// expected output: Object &#123; a: 1, b: 4, c: 5 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Object-create"><a href="#2-Object-create" class="headerlink" title="2. Object.create()"></a>2. Object.create()</h3><p>用指定的原型对象和属性创建一个新对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  isHuman: <span class="literal">false</span>,</span><br><span class="line">  printIntroduction: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>. Am I human? <span class="subst">$&#123;<span class="built_in">this</span>.isHuman&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> me = <span class="built_in">Object</span>.create(person);</span><br><span class="line"></span><br><span class="line">me.name = <span class="string">&#x27;Matthew&#x27;</span>; <span class="comment">// &quot;name&quot; is a property set on &quot;me&quot;, but not on &quot;person&quot;</span></span><br><span class="line">me.isHuman = <span class="literal">true</span>; <span class="comment">// inherited properties can be overwritten</span></span><br><span class="line"></span><br><span class="line">me.printIntroduction();</span><br><span class="line"><span class="comment">// expected output: &quot;My name is Matthew. Am I human? true&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Object-keys"><a href="#3-Object-keys" class="headerlink" title="3. Object.keys()"></a>3. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys"><code>Object.keys()</code></a></h3><p>返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和正常循环遍历该对象时返回的顺序一致 。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// simple array</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(arr)); <span class="comment">// console: [&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="number">0</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj)); <span class="comment">// console: [&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object with random key ordering</span></span><br><span class="line"><span class="keyword">var</span> anObj = &#123; <span class="number">100</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">7</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(anObj)); <span class="comment">// console: [&#x27;2&#x27;, &#x27;7&#x27;, &#x27;100&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// getFoo is a property which isn&#x27;t enumerable</span></span><br><span class="line"><span class="keyword">var</span> myObj = <span class="built_in">Object</span>.create(&#123;&#125;, &#123;</span><br><span class="line">  getFoo: &#123;</span><br><span class="line">    value: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">this</span>.foo; &#125;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;);</span><br><span class="line">myObj.foo = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(myObj)); <span class="comment">// console: [&#x27;foo&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="4-Object-values"><a href="#4-Object-values" class="headerlink" title="4. Object.values()"></a>4. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values"><code>Object.values()</code></a></h3><p>方法返回一个给定对象自身的所有可枚举属性值的数组，值的顺序与使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a>循环的顺序相同 ( 区别在于 for-in 循环枚举原型链中的属性 )。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(obj)); <span class="comment">// [&#x27;bar&#x27;, 42]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="number">0</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(obj)); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object with random key ordering</span></span><br><span class="line"><span class="comment">// when we use numeric keys, the value returned in a numerical order according to the keys</span></span><br><span class="line"><span class="keyword">var</span> an_obj = &#123; <span class="number">100</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">7</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(an_obj)); <span class="comment">// [&#x27;b&#x27;, &#x27;c&#x27;, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="5-Object-entries"><a href="#5-Object-entries" class="headerlink" title="5. Object.entries()"></a>5. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries"><code>Object.entries()</code></a></h3><p>返回一个给定对象自身可枚举属性的键值对数组，其排列与使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a> 循环遍历该对象时返回的顺序一致（区别在于 for-in 循环还会枚举原型链中的属性）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;</span><br><span class="line">  a: <span class="string">&#x27;somestring&#x27;</span>,</span><br><span class="line">  b: <span class="number">42</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(object1)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj)); <span class="comment">// [ [&#x27;foo&#x27;, &#x27;bar&#x27;], [&#x27;baz&#x27;, 42] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="number">0</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj)); <span class="comment">// [ [&#x27;0&#x27;, &#x27;a&#x27;], [&#x27;1&#x27;, &#x27;b&#x27;], [&#x27;2&#x27;, &#x27;c&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object with random key ordering</span></span><br><span class="line"><span class="keyword">const</span> anObj = &#123; <span class="number">100</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">7</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(anObj)); <span class="comment">// [ [&#x27;2&#x27;, &#x27;b&#x27;], [&#x27;7&#x27;, &#x27;c&#x27;], [&#x27;100&#x27;, &#x27;a&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// getFoo is property which isn&#x27;t enumerable</span></span><br><span class="line"><span class="keyword">const</span> myObj = <span class="built_in">Object</span>.create(&#123;&#125;, &#123; <span class="attr">getFoo</span>: &#123; value() &#123; <span class="keyword">return</span> <span class="built_in">this</span>.foo; &#125; &#125; &#125;);</span><br><span class="line">myObj.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(myObj)); <span class="comment">// [ [&#x27;foo&#x27;, &#x27;bar&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// non-object argument will be coerced to an object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(<span class="string">&#x27;foo&#x27;</span>)); <span class="comment">// [ [&#x27;0&#x27;, &#x27;f&#x27;], [&#x27;1&#x27;, &#x27;o&#x27;], [&#x27;2&#x27;, &#x27;o&#x27;] ]</span></span><br></pre></td></tr></table></figure>

<h3 id="6-删除对象属性"><a href="#6-删除对象属性" class="headerlink" title="6. 删除对象属性"></a>6. 删除对象属性</h3><p>通过<code>delete</code>操作符, 可以实现对对象属性的删除操作, 返回值是布尔</p>
<p><strong>注意：核心是 已声明的对象不可删除, 对象中的对象属性可以删除</strong></p>
<h4 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name =<span class="string">&#x27;zs&#x27;</span>  <span class="comment">//已声明的变量</span></span><br><span class="line"><span class="keyword">delete</span> name  <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> name)  <span class="comment">//String</span></span><br><span class="line"></span><br><span class="line">age = <span class="number">19</span>  <span class="comment">//未声明的变量</span></span><br><span class="line"><span class="keyword">delete</span> age     <span class="comment">//true</span></span><br><span class="line"><span class="keyword">typeof</span> age <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.val = <span class="string">&#x27;fds&#x27;</span>  <span class="comment">//window下的变量</span></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">this</span>.val      <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">this</span>.val)  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h4 id="删除函数"><a href="#删除函数" class="headerlink" title="删除函数"></a>删除函数</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;  <span class="comment">//已声明的函数</span></span><br><span class="line"><span class="keyword">delete</span> fn    <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> fn)  <span class="comment">//function</span></span><br><span class="line"></span><br><span class="line">fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;  <span class="comment">//未声明的函数</span></span><br><span class="line"><span class="keyword">delete</span> fn    <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> fn)  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h4 id="删除数组"><a href="#删除数组" class="headerlink" title="删除数组"></a>删除数组</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]  <span class="comment">///已声明的数组</span></span><br><span class="line"><span class="keyword">delete</span> arr    <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr)  <span class="comment">//object</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]  <span class="comment">//未声明的数组</span></span><br><span class="line"><span class="keyword">delete</span> arr   <span class="comment">//true    </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr)   <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]   <span class="comment">//已声明的数组</span></span><br><span class="line"><span class="keyword">delete</span> arr[<span class="number">1</span>]  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)   <span class="comment">//[&#x27;1&#x27;,&#x27;empty&#x27;,&#x27;3&#x27;] </span></span><br></pre></td></tr></table></figure>

<h4 id="删除对象"><a href="#删除对象" class="headerlink" title="删除对象"></a>删除对象</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  height: <span class="number">180</span>,</span><br><span class="line">  long: <span class="number">180</span>,</span><br><span class="line">  weight: <span class="number">180</span>,</span><br><span class="line">  hobby: &#123;</span><br><span class="line">    ball: <span class="string">&#x27;good&#x27;</span>,</span><br><span class="line">    music: <span class="string">&#x27;nice&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">delete</span> person  <span class="comment">///false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> person)   <span class="comment">//object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  height: <span class="number">180</span>,</span><br><span class="line">  long: <span class="number">180</span>,</span><br><span class="line">  weight: <span class="number">180</span>,</span><br><span class="line">  hobby: &#123;</span><br><span class="line">    ball: <span class="string">&#x27;good&#x27;</span>,</span><br><span class="line">    music: <span class="string">&#x27;nice&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">delete</span> person.hobby  <span class="comment">///true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> person.hobby)  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="7-Object-is"><a href="#7-Object-is" class="headerlink" title="7. Object.is()"></a>7. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is"><code>Object.is()</code></a></h3><p><code>Object.is()</code> 方法判断两个值是否为<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness">同一个值</a>。如果满足以下条件则两个值相等:</p>
<ul>
<li>都是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a></li>
<li>都是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null"><code>null</code></a></li>
<li>都是 <code>true</code> 或 <code>false</code></li>
<li>都是相同长度的字符串且相同字符按相同顺序排列</li>
<li>都是相同对象（意味着每个对象有同一个引用）</li>
<li>都是数字且<ul>
<li>都是 <code>+0</code></li>
<li>都是 <code>-0</code></li>
<li>都是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN"><code>NaN</code></a></li>
<li>或都是非零而且非 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN"><code>NaN</code></a> 且为同一个值</li>
</ul>
</li>
</ul>
<p>与<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality"><code>==</code></a> 运算<em>不同。</em> <code>==</code> 运算符在判断相等前对两边的变量(如果它们不是同一类型) 进行强制转换 (这种行为的结果会将 <code>&quot;&quot; == false</code> 判断为 <code>true</code>), 而 <code>Object.is</code>不会强制转换两边的值。</p>
<p>与<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Identity"><code>===</code></a> 运算也不相同。 <code>===</code> 运算符 (也包括 <code>==</code> 运算符) 将数字 <code>-0</code> 和 <code>+0</code> 视为相等 ，而将<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/NaN"><code>Number.NaN</code></a> 与<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN"><code>NaN</code></a>视为不相等.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty()</code></a></p>
<p>将给定描述符描述的命名属性添加到对象。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties"><code>Object.defineProperties()</code></a></p>
<p>将给定描述符描述的命名属性添加到对象。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze"><code>Object.freeze()</code></a></p>
<p>冻结对象。其他代码无法删除或更改其属性。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries"><code>Object.fromEntries()</code></a></p>
<p>从可迭代的<code>[key, value]</code>对中返回一个新对象。（这是的反向 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries"><code>Object.entries</code></a>）。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor"><code>Object.getOwnPropertyDescriptor()</code></a></p>
<p>返回对象的命名属性的属性描述符。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptors"><code>Object.getOwnPropertyDescriptors()</code></a></p>
<p>返回一个包含对象自身所有属性描述符的对象。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames"><code>Object.getOwnPropertyNames()</code></a></p>
<p>返回一个数组，其中包含给定对象<strong>自己</strong>的所有可枚举和不可枚举属性的名称。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols"><code>Object.getOwnPropertySymbols()</code></a></p>
<p>返回直接在给定对象上找到的所有符号属性的数组。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf"><code>Object.getPrototypeOf()</code></a></p>
<p>返回<code>prototype</code>指定对象的。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible"><code>Object.isExtensible()</code></a></p>
<p>确定是否允许扩展对象。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isFrozen"><code>Object.isFrozen()</code></a></p>
<p>确定对象是否冻结。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isSealed"><code>Object.isSealed()</code></a></p>
<p>确定对象是否密封。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions"><code>Object.preventExtensions()</code></a></p>
<p>防止对象的任何扩展。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/seal"><code>Object.seal()</code></a></p>
<p>防止其他代码删除对象的属性。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf"><code>Object.setPrototypeOf()</code></a></p>
<p>设置对象的原型（其内部<code>[[Prototype]]</code>属性）。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor"><code>Object.prototype.constructor</code></a></p>
<p>指定创建对象原型的函数。</p>
<h2 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h2><h3 id="一、-JS中判断某个字符串是否包含另一个字符串的五种方法"><a href="#一、-JS中判断某个字符串是否包含另一个字符串的五种方法" class="headerlink" title="一、 JS中判断某个字符串是否包含另一个字符串的五种方法"></a>一、 JS中判断某个字符串是否包含另一个字符串的五种方法</h3><h4 id="String对象的方法"><a href="#String对象的方法" class="headerlink" title="String对象的方法"></a>String对象的方法</h4><p><strong>方法一: indexOf()  (推荐)</strong></p>
<figure class="highlight openscad"><table><tr><td class="code"><pre><span class="line">var <span class="built_in">str</span> = <span class="string">&quot;123&quot;</span></span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">str</span>.indexOf(<span class="string">&quot;2&quot;</span>) != -<span class="number">1</span>);      <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>indexOf() 方法可返回某个指定的字符串值在字符串中首次出现的位置。如果要检索的字符串值没有出现，则该方法返回 -1。</p>
<p><strong>方法二:match()</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="built_in">RegExp</span>(<span class="regexp">/3/</span>);</span><br><span class="line"><span class="keyword">if</span> (str.match(reg))&#123;<span class="string">``</span> <span class="string">``</span><span class="comment">//包含；``&#125;</span></span><br></pre></td></tr></table></figure>

<p>match() 方法可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。</p>
<p><strong>方法三: search()</strong></p>
<figure class="highlight openscad"><table><tr><td class="code"><pre><span class="line">var <span class="built_in">str</span> = <span class="string">&quot;123&quot;</span></span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">str</span>.<span class="built_in">search</span>( <span class="string">&quot;2&quot;</span> ) != -<span class="number">1</span>);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>search() 方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串。如果没有找到任何匹配的子串，则返回 -1。</p>
<h4 id="RegExp对象的方法"><a href="#RegExp对象的方法" class="headerlink" title="RegExp对象的方法"></a>RegExp对象的方法</h4><p><strong>方法四: test()</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span>  str = <span class="string">&quot;123&quot;</span> </span><br><span class="line"><span class="keyword">var</span> reg = <span class="built_in">RegExp</span>(<span class="regexp">/3/</span>);</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(str) != <span class="number">-1</span>);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>test() 方法用于检索字符串中指定的值。返回 true 或 false。</p>
<p><strong>方法五:exec()</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="built_in">RegExp</span>(<span class="regexp">/3/</span>);</span><br><span class="line"><span class="keyword">if</span>(reg.exec(str))&#123;<span class="string">``</span> <span class="string">``</span><span class="comment">//包含；``&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>exec() 方法</strong>用于检索字符串中的正则表达式的匹配。返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。</p>
<h3 id="二、原生JS清空数组的三种方式"><a href="#二、原生JS清空数组的三种方式" class="headerlink" title="二、原生JS清空数组的三种方式"></a>二、原生JS清空数组的三种方式</h3><h4 id="1-splice函数"><a href="#1-splice函数" class="headerlink" title="1. splice函数"></a>1. splice函数</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">arrayObject.splice(index,howmany,element1,<span class="built_in">..</span><span class="built_in">..</span>.,elementX)</span><br></pre></td></tr></table></figure>

<p><code>index</code>：必选，规定从何处添加/删除元素。</p>
<p><code>howmany</code>：必选，规定应该删除多少元素。未规定此参数，则删除从 index 开始到原数组结尾的所有元素。</p>
<p><code>element1</code>:可选，规定要添加到数组的新元素。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];  </span><br><span class="line">arr.splice(<span class="number">0</span>,arr.length);  </span><br></pre></td></tr></table></figure>

<h4 id="2-给数组的length赋值为0"><a href="#2-给数组的length赋值为0" class="headerlink" title="2. 给数组的length赋值为0"></a>2. 给数组的length赋值为0</h4><p>该方法保留了数组其它属性。</p>
<p>赋予数组的长度小于本身的长度，数组中后面的元素将被截断。</p>
<p>赋予数组的长度大于本身的长度，将扩展数组长度，多的元素为undefined。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];  </span><br><span class="line">arr.length = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>目前 Prototype中数组的 <a href="http://api.prototypejs.org/language/Array/prototype/clear/">clear</a> 和mootools库中数组的 <a href="http://mootools.net/docs/core/Types/Array#Array:empty">empty</a> 使用这种方式清空数组。</p>
<p>其它语言如Java，其数组的length是只读的，不能被赋值。如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">int[] ary = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line">ary.length = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>Java中会报错，编译通不过。</p>
<h4 id="3-直接赋予新数组"><a href="#3-直接赋予新数组" class="headerlink" title="3. 直接赋予新数组 []"></a>3. 直接赋予新数组 []</h4><p>这种方式为将arr重新赋值为空数组，之前的数组如果没有被引用，将等待垃圾回收。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];  </span><br><span class="line">arr = [];</span><br></pre></td></tr></table></figure>

<h3 id="三、判断是否为字符串"><a href="#三、判断是否为字符串" class="headerlink" title="三、判断是否为字符串"></a>三、判断是否为字符串</h3><h4 id="1-基本方法"><a href="#1-基本方法" class="headerlink" title="1. 基本方法"></a>1. 基本方法</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span>(str)==<span class="string">&#x27;string&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-利用JS原生函数"><a href="#2-利用JS原生函数" class="headerlink" title="2. 利用JS原生函数"></a>2. 利用JS原生函数</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString <span class="comment">// ƒ toString() &#123; [native code] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(str)==<span class="string">&quot;[object String]&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>在<code>Object.prototype</code>这个this（上下文环境）中执行<code>toString</code>原生函数，会把里边的环境变量类型打印出来。</p>
<p><code>Object.prototype.toString()</code> –&gt;<code>执行结果</code>–&gt;<code>&quot;[object Object]&quot;</code></p>
</li>
<li><p>如果我们改变this（上下文环境），就能打印出当前环境变量类型，根据这个类型来判断。</p>
<p><code>Object.prototype.toString.call(str)</code> –&gt;<code>执行结果</code>–&gt;<code>&quot;[object String]&quot;</code></p>
</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown</title>
    <url>/2020/08/26/markdown/</url>
    <content><![CDATA[<blockquote>
<p>参考资料</p>
<ul>
<li><a href="https://github.com/LearnShare/Learning-Markdown/blob/master/README.md">markdown入门参考</a></li>
<li><a href="https://www.zybuluo.com/mdeditor">mdeditor</a> 一款国内的在线markdown编辑器</li>
<li><a href="http://bh-lay.github.io/mditor/">mditor</a> 一款轻量级的markdown编辑器</li>
<li><a href="https://www.miaoroom.com/?target/aHR0cHM6Ly9naXRodWIuY29tL2xlcHR1cmUvZWRpdG9y">lepture-editor</a></li>
<li><a href="https://www.miaoroom.com/?target/aHR0cHM6Ly9naXRodWIuY29tL2pidC9tYXJrZG93bi1lZGl0b3I=">markdown-editor</a></li>
</ul>
</blockquote>
<h2 id="一、关于Markdown"><a href="#一、关于Markdown" class="headerlink" title="一、关于Markdown"></a>一、关于Markdown</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p><a href="http://zh.wikipedia.org/wiki/Markdown">Wiki: Markdown</a></p>
<blockquote>
<p>Markdown 是一种轻量级标记语言，创始人为约翰·格鲁伯（John Gruber）。它允许人们“使用易读易写的纯文本格式编写文档，然后转换成有效的 XHTML（或者 HTML）文档”。这种语言吸收了很多在电子邮件中已有的纯文本标记的特性。</p>
</blockquote>
<a id="more"></a>

<h3 id="为什么选择-Markdown"><a href="#为什么选择-Markdown" class="headerlink" title="为什么选择 Markdown"></a>为什么选择 Markdown</h3><ul>
<li>它基于纯文本，方便修改和共享；</li>
<li>几乎可以在所有的文本编辑器中编写；</li>
<li>有众多编程语言的实现，以及应用的相关扩展；</li>
<li>在 <a href="https://github.com/">GitHub</a> 等网站中有很好的应用；</li>
<li>很容易转换为 HTML 文档或其他格式，兼容HTML；</li>
<li>适合用来编写文档、记录笔记、撰写文章。</li>
</ul>
<blockquote>
<p>‘.md’ 和 ‘.markdown’ 都是被普遍支持的扩展名，不过 ‘.md’ 更加简单和方便。</p>
</blockquote>
<h2 id="二、语法"><a href="#二、语法" class="headerlink" title="二、语法"></a>二、语法</h2><h3 id="2-1-段落与换行"><a href="#2-1-段落与换行" class="headerlink" title="2.1 段落与换行"></a>2.1 段落与换行</h3><ul>
<li>段落的前后必须是空行：</li>
</ul>
<blockquote>
<p>空行指的是行内什么都没有，或者只有空白符（空格或制表符）</p>
</blockquote>
<blockquote>
<p>相邻两行文本，如果中间没有空行 会显示在一行中（换行符被转换为空格）</p>
</blockquote>
<ul>
<li>如果需要在段落内加入换行（<code>&lt;br&gt;</code>）：</li>
</ul>
<blockquote>
<p>可以在前一行的末尾加入至少两个空格<br>然后换行写其它的文字</p>
</blockquote>
<ul>
<li>Markdown 中的多数区块都需要在两个空行之间。</li>
</ul>
<h3 id="2-2-标题"><a href="#2-2-标题" class="headerlink" title="2.2 标题"></a>2.2 标题</h3><h4 id="Setext-形式"><a href="#Setext-形式" class="headerlink" title="Setext 形式"></a>Setext 形式</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">H1</span><br><span class="line">====</span><br><span class="line"></span><br><span class="line">H2</span><br><span class="line">----</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>=</code> 和 <code>-</code> 的数量是没有限制的。通常的做法是使其和标题文本的长度相同，这样看起来比较舒服。或者可以像我一样，用四个 <code>-</code> 或 <code>=</code>。<br>Setext 形式只支持 <code>h1</code> 和 <code>h2</code> 两种标题。</p>
<p>使用 === 表示一级标题，使用 — 表示二级标题。(Setext 形式只支持 <code>h1</code> 和 <code>h2</code> 两种标题。)</p>
</blockquote>
<h4 id="atx-形式"><a href="#atx-形式" class="headerlink" title="atx 形式"></a>atx 形式</h4><p>① 可以用对称的 <code>#</code> 包括文本：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section">####H4####</span></span><br><span class="line"></span><br><span class="line"><span class="section">#####H5#####</span></span><br></pre></td></tr></table></figure>

<p>② 也可以只在左边使用 <code>#</code>：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section">####H4</span></span><br><span class="line"></span><br><span class="line"><span class="section">#####H5</span></span><br></pre></td></tr></table></figure>

<p>③ 成对的 <code>#</code> 左侧和只在左边使用的 <code>#</code> 的情况：左侧都不可以有任何空白，但其内侧可以使用空白。</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"> ###左侧使用了空格###</span><br><span class="line"></span><br><span class="line"><span class="section">#### 内侧使用了空格</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-引用"><a href="#2-3-引用" class="headerlink" title="2.3 引用"></a>2.3 引用</h3><h4 id="引用内容"><a href="#引用内容" class="headerlink" title="引用内容"></a>引用内容</h4><p>在段落或其他内容前使用 <code>&gt;</code> 符号，就可以将这段内容标记为 ‘引用’ 的内容（<code>&lt;blockquote&gt;</code>）</p>
<h4 id="多行引用"><a href="#多行引用" class="headerlink" title="多行引用"></a>多行引用</h4><blockquote>
<p>多行引用 可以在每行前加 <code>&gt;</code></p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&gt;如果仅在第一行使用 <span class="code">`&gt;`</span>，</span><br><span class="line">后面相邻的行即使省略 <span class="code">`&gt;`</span>，也会变成引用内容</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果仅在第一行使用 <code>&gt;</code>， 后面相邻的行即使省略 <code>&gt;</code>，也会变成引用内容</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&gt;如果引用内容需要换行，  </span><br><span class="line">&gt;可以在行尾添加两个空格</span><br><span class="line">&gt;</span><br><span class="line">&gt;或者在引用内容中加一个空行</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果引用内容需要换行，<br>可以在行尾添加两个空格</p>
<p>或者在引用内容中加一个空行</p>
</blockquote>
<h4 id="嵌套引用"><a href="#嵌套引用" class="headerlink" title="嵌套引用"></a>嵌套引用</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&gt;也可以在引用中</span><br><span class="line">&gt;&gt;使用嵌套的引用</span><br></pre></td></tr></table></figure>

<blockquote>
<p>也可以在引用中</p>
<blockquote>
<p>使用嵌套的引用</p>
</blockquote>
</blockquote>
<h3 id="2-4-列表"><a href="#2-4-列表" class="headerlink" title="2.4 列表"></a>2.4 列表</h3><h4 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h4><p>使用 *，+，- 表示无序列表。</p>
<h4 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h4><ol>
<li>有序列表以数字和 <code>.</code> 开始；</li>
<li>数字的序列并不会影响生成的列表序列；</li>
<li>但仍然推荐按照自然顺序（1.2.3…）编写。</li>
</ol>
<h4 id="嵌套的列表"><a href="#嵌套的列表" class="headerlink" title="嵌套的列表"></a>嵌套的列表</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">1.</span> 第一层</span><br><span class="line"><span class="bullet">  +</span> 1-1</span><br><span class="line"><span class="bullet">  +</span> 1-2</span><br><span class="line"><span class="bullet">2.</span> 无序列表和有序列表可以随意相互嵌套</span><br><span class="line"><span class="bullet">  1.</span> 2-1</span><br><span class="line"><span class="bullet">  2.</span> 2-2</span><br></pre></td></tr></table></figure>

<ol>
<li>第一层<ul>
<li>1-1</li>
<li>1-2</li>
</ul>
</li>
<li>无序列表和有序列表可以随意相互嵌套<ol>
<li>2-1</li>
<li>2-2</li>
</ol>
</li>
</ol>
<h4 id="语法和用法"><a href="#语法和用法" class="headerlink" title="语法和用法"></a>语法和用法</h4><ol>
<li>无序列表项的开始是：符号 空格；</li>
<li>有序列表项的开始是：数字 <code>.</code> 空格；</li>
<li>空格至少为一个，多个空格将被解析为一个；</li>
<li>如果仅需要在行前显示数字和 <code>.</code>：</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">05\. 可以使用：数字\. 来取消显示为列表</span><br></pre></td></tr></table></figure>

<p>\05. 可以使用：数字. 来取消显示为列表</p>
<h3 id="2-5-代码"><a href="#2-5-代码" class="headerlink" title="2.5 代码"></a>2.5 代码</h3><h4 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h4><p>可以使用缩进来插入代码块这里使用``````来包含多行代码：</p>
<p>代码块前后需要有至少一个空行，且每行代码前需要有至少一个 Tab 或四个空格；</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="params">&lt;html&gt;</span> <span class="comment">// Tab开头</span></span><br><span class="line">    <span class="params">&lt;title&gt;</span>Markdown<span class="params">&lt;/title&gt;</span></span><br><span class="line"><span class="params">&lt;/html&gt;</span> <span class="comment">// 四个空格开头</span></span><br></pre></td></tr></table></figure>

<h4 id="行内代码"><a href="#行内代码" class="headerlink" title="行内代码"></a>行内代码</h4><p>也可以通过 ``，插入行内代码：</p>
<p>例如 <code>&lt;title&gt;Markdown&lt;/title&gt;</code></p>
<h4 id="转换规则"><a href="#转换规则" class="headerlink" title="转换规则"></a>转换规则</h4><p>代码块中的文本（包括 Markdown 语法）都会显示为原始内容，而特殊字符会被转换为 HTML <a href="https://zh.wikipedia.org/wiki/XML%E4%B8%8EHTML%E5%AD%97%E7%AC%A6%E5%AE%9E%E4%BD%93%E5%BC%95%E7%94%A8%E5%88%97%E8%A1%A8">字符实体</a>。</p>
<h3 id="2-6-分隔线"><a href="#2-6-分隔线" class="headerlink" title="2.6 分隔线"></a>2.6 分隔线</h3><ul>
<li>可以在一行中使用三个或更多的 <code>*</code>、<code>-</code> 或 <code>_</code> 来添加分隔线（<code>&lt;hr&gt;</code>）</li>
<li>多个字符之间可以有空格（空白符），但不能有其他字符</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br><span class="line"><span class="strong"><span class="emphasis">-- -- --</span></span></span><br><span class="line"><span class="strong"><span class="emphasis"><span class="strong">__<span class="emphasis">_</span></span></span></span></span><br></pre></td></tr></table></figure>

<hr>
<hr>
<hr>
<h3 id="2-7-超链接"><a href="#2-7-超链接" class="headerlink" title="2.7 超链接"></a>2.7 超链接</h3><h4 id="行内式"><a href="#行内式" class="headerlink" title="行内式"></a>行内式</h4><p>格式为 <code>[link text](URL &#39;title text&#39;)</code>。</p>
<p>① 普通链接：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="string">Google</span>](<span class="link">http://www.google.com/</span>)</span><br></pre></td></tr></table></figure>

<p><a href="http://www.google.com/">Google</a></p>
<p>② 指向本地文件的链接：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="string">icon.png</span>](<span class="link">./images/icon.png</span>)</span><br></pre></td></tr></table></figure>

<p><a href="./images/icon.png">icon.png</a></p>
<p>③ 包含 ‘title’ 的链接:</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="string">Google</span>](<span class="link">http://www.google.com/ &quot;Google&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><a href="http://www.google.com/">Google</a></p>
<blockquote>
<p>title 使用 ‘ 或 “ 都是可以的。</p>
</blockquote>
<h4 id="参考式"><a href="#参考式" class="headerlink" title="参考式"></a>参考式</h4><p>参考式链接的写法相当于行内式拆分成两部分，并通过一个 <em>识别符</em> 来连接两部分。参考式能尽量保持文章结构的简单，也方便统一管理 URL。</p>
<blockquote>
<p>参考式相对于行内式有一个明显的优点，就是可以在多个不同的位置引用同一个 URL。</p>
</blockquote>
<p>① 首先，定义链接：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="string">Google</span>][<span class="symbol">link</span>]</span><br></pre></td></tr></table></figure>

<p><a href="http://www.google.com/">Google</a></p>
<p>第二个方括号内为链接独有的 <em>识别符</em>，可以是字母、数字、空白或标点符号。识别符是 <em>不区分大小写</em> 的；</p>
<p>② 然后定义链接内容：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="symbol">link</span>]: <span class="link">http://www.google.com/ &quot;Google&quot;</span></span><br></pre></td></tr></table></figure>

<p>其格式为：<code>[识别符]: URL &#39;title&#39;</code>。</p>
<blockquote>
<p>其中，URL可以使用 &lt;&gt; 包括起来，title 可以使用 “”、’’、() 包括（考虑到兼容性，建议使用引号），title 部分也可以换行来写；</p>
<p>链接内容的定义可以放在同一个文件的 <em>任意位置</em>；</p>
</blockquote>
<p>③ 也可以省略 <em>识别符</em>，使用链接文本作为 <em>识别符</em>：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="string">Google</span>][<span class="symbol"></span>]</span><br><span class="line">[<span class="symbol">Google</span>]: <span class="link">http://www.google.com/ &quot;Google&quot;</span></span><br></pre></td></tr></table></figure>

<p><a href="http://www.google.com/">Google</a></p>
<h4 id="自动链接"><a href="#自动链接" class="headerlink" title="自动链接"></a>自动链接</h4><p>使用 <code>&lt;&gt;</code> 包括的 URL 或邮箱地址会被自动转换为超链接：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">http:</span>//<span class="attr">www.google.com</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">123@email.com</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><a href="http://www.google.com/">http://www.google.com/</a></p>
<p><a href="mailto:123@email.com">123@email.com</a></p>
<p>该方式适合行内较短的链接，会使用 URL 作为链接文字。邮箱地址会自动编码，以逃避抓取机器人。</p>
<h3 id="2-8-图像"><a href="#2-8-图像" class="headerlink" title="2.8 图像"></a>2.8 图像</h3><p>插入图片的语法和插入超链接的语法基本一致，只是在最前面多一个 <code>!</code>。也分为行内式和参考式两种。</p>
<h4 id="行内式-1"><a href="#行内式-1" class="headerlink" title="行内式"></a>行内式</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">GitHub</span>](<span class="link">https://avatars2.githubusercontent.com/u/3265208?v=3&amp;s=100 &quot;GitHub,Social Coding&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>方括号中的部分是图片的替代文本，括号中的 ‘title’ 部分和链接一样，是可选的。</p>
<h4 id="参考式-1"><a href="#参考式-1" class="headerlink" title="参考式"></a>参考式</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">GitHub</span>][<span class="symbol">github</span>]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">github</span>]: <span class="link">https://avatars2.githubusercontent.com/u/3265208?v=3&amp;s=100 &quot;GitHub,Social Coding&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="指定图片的显示大小"><a href="#指定图片的显示大小" class="headerlink" title="指定图片的显示大小"></a>指定图片的显示大小</h4><p>Markdown 不支持指定图片的显示大小，不过可以通过直接插入<code>&lt;img /&gt;</code>标签来指定相关属性：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://avatars2.githubusercontent.com/u/3265208?v=3&amp;s=100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;GitHub&quot;</span> <span class="attr">title</span>=<span class="string">&quot;GitHub,Social Coding&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50&quot;</span> <span class="attr">height</span>=<span class="string">&quot;50&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-9-强调"><a href="#2-9-强调" class="headerlink" title="2.9 强调"></a>2.9 强调</h3><ul>
<li>使用 <code>* *</code> 或 <code>_ _</code> 包括的文本会被转换为 <code>&lt;em&gt;&lt;/em&gt;</code> ，通常表现为斜体：</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">这是用来 <span class="emphasis">*演示*</span> 的 <span class="emphasis">_文本_</span></span><br></pre></td></tr></table></figure>

<p>这是用来 <em>演示</em> 的 <em>文本</em></p>
<ul>
<li>使用 <code>** **</code> 或 <code>__ __</code> 包括的文本会被转换为 <code>&lt;strong&gt;&lt;/strong&gt;</code>，通常表现为加粗：</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">这是用来 <span class="strong">**演示**</span> 的 <span class="strong">__文本__</span></span><br></pre></td></tr></table></figure>

<p>这是用来 <strong>演示</strong> 的 <strong>文本</strong></p>
<ul>
<li><p>用来包括文本的 <code>*</code> 或 <code>_</code> 内侧不能有空白，否则 <code>*</code> 和 <code>_</code> 将不会被转换（不同的实现会有不同的表现）</p>
</li>
<li><p>如果需要在文本中显示成对的 <code>*</code> 或 <code>_</code>，可以在符号前加入 <code>\</code> 即可</p>
</li>
<li><p><code>*</code>、<code>**</code>、<code>_</code> 和 <code>__</code> 都必须 <em>成对使用</em> 。</p>
</li>
</ul>
<h3 id="2-9-字符转义"><a href="#2-9-字符转义" class="headerlink" title="2.9 字符转义"></a>2.9 字符转义</h3><p>  反斜线（<code>\</code>）用于插入在 Markdown 语法中有特殊作用的字符</p>
<p>  这些字符包括：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">\ `* _ &#123;&#125;<span class="selector-attr">[]</span>()#+. !</span><br></pre></td></tr></table></figure>



<h2 id="三、扩展语法"><a href="#三、扩展语法" class="headerlink" title="三、扩展语法"></a>三、扩展语法</h2><h3 id="3-1-内容目录"><a href="#3-1-内容目录" class="headerlink" title="3.1 内容目录"></a>3.1 内容目录</h3><p>在段落中填写 <code>[TOC]</code> 以显示全文内容的目录结构。</p>
<p>[TOC]</p>
<h3 id="3-2-标签分类"><a href="#3-2-标签分类" class="headerlink" title="3.2 标签分类"></a>3.2 标签分类</h3><p>在编辑区任意行的列首位置输入以下代码给文稿标签：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">标签： 数学 英语 Markdown</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">Tags： 数学 英语 Markdown</span><br></pre></td></tr></table></figure>

<h3 id="3-3-删除线"><a href="#3-3-删除线" class="headerlink" title="3.3 删除线"></a>3.3 删除线</h3><p>成对使用 ~~ 表示删除线。</p>
<p><del>这是一段错误的文本。</del></p>
<h3 id="3-4-注脚"><a href="#3-4-注脚" class="headerlink" title="3.4 注脚"></a>3.4 注脚</h3><p>使用 <code>[^keyword]</code> 表示注脚。</p>
<p>这是一个注脚<a href="1">^footnote</a>的样例。</p>
<p>这是第二个注脚<a href="2">^footnote2</a>的样例。</p>
<h3 id="3-5-LaTeX-公式"><a href="#3-5-LaTeX-公式" class="headerlink" title="3.5 LaTeX 公式"></a>3.5 LaTeX 公式</h3><p>$ 表示行内公式： </p>
<p>质能守恒方程可以用一个很简洁的方程式 $E=mc^2$ 来表达。</p>
<p>$$ 表示整行公式：</p>
<p>$$\sum_{i=1}^n a_i=0$$</p>
<p>$$f(x_1,x_x,\ldots,x_n) = x_1^2 + x_2^2 + \cdots + x_n^2 $$</p>
<p>$$\sum^{j-1}<em>{k=0}{\widehat{\gamma}</em>{kj} z_k}$$</p>
<p>访问 <a href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">MathJax</a> 参考更多使用方法。</p>
<h3 id="3-6-加强的代码块"><a href="#3-6-加强的代码块" class="headerlink" title="3.6 加强的代码块"></a>3.6 加强的代码块</h3><p>支持四十一种编程语言的语法高亮的显示，行号显示。</p>
<blockquote>
<p>格式如下：</p>
</blockquote>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">​<span class="string">``</span><span class="string">`python</span></span><br><span class="line"><span class="string">@requires_authorization</span></span><br><span class="line"><span class="string">def somef</span></span><br><span class="line"><span class="string">.......................</span></span><br><span class="line"><span class="string">​`</span><span class="string">``</span></span><br></pre></td></tr></table></figure>

<p>非代码示例：</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">$ sudo apt-<span class="builtin-name">get</span> install vim-gnome</span><br></pre></td></tr></table></figure>

<p>Python 示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@requires_authorization</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">somefunc</span>(<span class="params">param1=<span class="string">&#x27;&#x27;</span>, param2=<span class="number">0</span></span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;A docstring&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> param1 &gt; param2: <span class="comment"># interesting</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">&#x27;Greater&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> (param2 - param1 + <span class="number">1</span>) <span class="keyword">or</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">&#x27;&#x27;&#x27;interpreter</span></span><br><span class="line"><span class="string"><span class="meta">... </span>prompt&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>JavaScript 示例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* nth element in the fibonacci series.</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>n &gt;= 0</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return </span>the nth element, &gt;= 0.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>, b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> tmp;</span><br><span class="line">  <span class="keyword">while</span> (--n &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    tmp = a;</span><br><span class="line">    a += b;</span><br><span class="line">    b = tmp;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(fib(<span class="number">10</span>));</span><br></pre></td></tr></table></figure>

<h3 id="3-7-表格支持"><a href="#3-7-表格支持" class="headerlink" title="3.7 表格支持"></a>3.7 表格支持</h3><h4 id="单元格和表头"><a href="#单元格和表头" class="headerlink" title="单元格和表头"></a>单元格和表头</h4><p>使用 <code>|</code> 来分隔不同的单元格，使用 <code>-</code> 来分隔表头和其他行：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">name | age</span><br><span class="line">---- | ---</span><br><span class="line">LearnShare | 12</span><br><span class="line">Mike |  32</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>name</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>LearnShare</td>
<td>12</td>
</tr>
<tr>
<td>Mike</td>
<td>32</td>
</tr>
</tbody></table>
<p>为了美观，可以使用空格对齐不同行的单元格，并在左右两侧都使用 <code>|</code> 来标记单元格边界：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">|    name    | age |</span><br><span class="line">| ---------- | --- |</span><br><span class="line">| LearnShare |  12 |</span><br><span class="line">| Mike       |  32 |</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>name</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>LearnShare</td>
<td>12</td>
</tr>
<tr>
<td>Mike</td>
<td>32</td>
</tr>
</tbody></table>
<blockquote>
<p>为了使 Markdown 更清晰，<code>|</code> 和 <code>-</code> 两侧需要至少有一个空格（最左侧和最右侧的 <code>|</code> 外就不需要了）。</p>
</blockquote>
<h4 id="对齐"><a href="#对齐" class="headerlink" title="对齐"></a>对齐</h4><p>在表头下方的分隔线标记中加入 <code>:</code>，即可标记下方单元格内容的对齐方式：</p>
<ul>
<li><code>:---</code> 代表左对齐</li>
<li><code>:--:</code> 代表居中对齐</li>
<li><code>---:</code> 代表右对齐</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">| left | center | right |</span><br><span class="line">| :--- | :----: | ----: |</span><br><span class="line">| aaaa | bbbbbb | ccccc |</span><br><span class="line">| a    | b      | c     |</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">left</th>
<th align="center">center</th>
<th align="right">right</th>
</tr>
</thead>
<tbody><tr>
<td align="left">aaaa</td>
<td align="center">bbbbbb</td>
<td align="right">ccccc</td>
</tr>
<tr>
<td align="left">a</td>
<td align="center">b</td>
<td align="right">c</td>
</tr>
</tbody></table>
<blockquote>
<p>如果不使用对齐标记，单元格中的内容默认左对齐；表头单元格中的内容会一直居中对齐（不同的实现可能会有不同表现）。</p>
</blockquote>
<h4 id="插入其他内容"><a href="#插入其他内容" class="headerlink" title="插入其他内容"></a>插入其他内容</h4><p>表格中可以插入其他 Markdown 中的行内标记：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">|     name     | age |             blog                |</span><br><span class="line">| ------------ | --- | ------------------------------- |</span><br><span class="line">| <span class="emphasis">_LearnShare_</span> |  12 | [<span class="string">LearnShare</span>](<span class="link">http://xianbai.me</span>) |</span><br><span class="line">| <span class="strong">__Mike__</span>     |  32 | [<span class="string">Mike</span>](<span class="link">http://mike.me</span>)          |</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>name</th>
<th>age</th>
<th>blog</th>
</tr>
</thead>
<tbody><tr>
<td><em>LearnShare</em></td>
<td>12</td>
<td><a href="http://xianbai.me/">LearnShare</a></td>
</tr>
<tr>
<td><strong>Mike</strong></td>
<td>32</td>
<td><a href="http://mike.me/">Mike</a></td>
</tr>
</tbody></table>
<h3 id="3-8-Html-标签"><a href="#3-8-Html-标签" class="headerlink" title="3.8 Html 标签"></a>3.8 Html 标签</h3><p>本站支持在 Markdown 语法中嵌套 Html 标签，譬如，你可以用 Html 写一个纵跨两行的表格：</p>
<pre><code>&lt;table&gt;
    &lt;tr&gt;
        &lt;th rowspan=&quot;2&quot;&gt;值班人员&lt;/th&gt;
        &lt;th&gt;星期一&lt;/th&gt;
        &lt;th&gt;星期二&lt;/th&gt;
        &lt;th&gt;星期三&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;李强&lt;/td&gt;
        &lt;td&gt;张明&lt;/td&gt;
        &lt;td&gt;王平&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;</code></pre>
<table>
    <tr>
        <th rowspan="2">值班人员</th>
        <th>星期一</th>
        <th>星期二</th>
        <th>星期三</th>
    </tr>
    <tr>
        <td>李强</td>
        <td>张明</td>
        <td>王平</td>
    </tr>
</table>


<h3 id="3-9-内嵌图标"><a href="#3-9-内嵌图标" class="headerlink" title="3.9 内嵌图标"></a>3.9 内嵌图标</h3><p>本站的图标系统对外开放，在文档中输入</p>
<pre><code>&lt;i class=&quot;icon-weibo&quot;&gt;&lt;/i&gt;</code></pre>
<p>即显示微博的图标： <i class="icon-weibo icon-2x"></i></p>
<p>替换 上述 <code>i 标签</code> 内的 <code>icon-weibo</code> 以显示不同的图标，例如：</p>
<pre><code>&lt;i class=&quot;icon-renren&quot;&gt;&lt;/i&gt;</code></pre>
<p>即显示人人的图标： <i class="icon-renren icon-2x"></i></p>
<p>更多的图标和玩法可以参看 <a href="http://fortawesome.github.io/Font-Awesome/3.2.1/icons/">font-awesome</a> 官方网站。</p>
<h3 id="3-10-待办事宜-Todo-列表"><a href="#3-10-待办事宜-Todo-列表" class="headerlink" title="3.10 待办事宜 Todo 列表"></a>3.10 待办事宜 Todo 列表</h3><p>使用带有 [ ] 或 [x] （未完成或已完成）项的列表语法撰写一个待办事宜列表，并且支持子列表嵌套以及混用Markdown语法，例如：</p>
<pre><code>- [ ] **Cmd Markdown 开发**
    - [ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率
    - [ ] 支持以 PDF 格式导出文稿
    - [x] 新增Todo列表功能 [语法参考](https://github.com/blog/1375-task-lists-in-gfm-issues-pulls-comments)
    - [x] 改进 LaTex 功能
        - [x] 修复 LaTex 公式渲染问题
        - [x] 新增 LaTex 公式编号功能 [语法参考](http://docs.mathjax.org/en/latest/tex.html#tex-eq-numbers)
- [ ] **七月旅行准备**
    - [ ] 准备邮轮上需要携带的物品
    - [ ] 浏览日本免税店的物品
    - [x] 购买蓝宝石公主号七月一日的船票</code></pre>
<p>对应显示如下待办事宜 Todo 列表：</p>
<ul>
<li><input checked disabled type="checkbox"> <strong>Cmd Markdown 开发</strong><ul>
<li><input checked disabled type="checkbox"> 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li>
<li><input disabled type="checkbox"> 支持以 PDF 格式导出文稿</li>
<li><input disabled type="checkbox"> 新增Todo列表功能 <a href="https://github.com/blog/1375-task-lists-in-gfm-issues-pulls-comments">语法参考</a></li>
<li><input disabled type="checkbox"> 改进 LaTex 功能<ul>
<li><input checked disabled type="checkbox"> 修复 LaTex 公式渲染问题</li>
<li><input checked disabled type="checkbox"> 新增 LaTex 公式编号功能 <a href="http://docs.mathjax.org/en/latest/tex.html#tex-eq-numbers">语法参考</a></li>
</ul>
</li>
</ul>
</li>
<li><input disabled type="checkbox"> <strong>七月旅行准备</strong><ul>
<li><input disabled type="checkbox"> 准备邮轮上需要携带的物品</li>
<li><input disabled type="checkbox"> 浏览日本免税店的物品</li>
<li><input checked disabled type="checkbox"> 购买蓝宝石公主号七月一日的船票</li>
</ul>
</li>
</ul>
<h3 id="3-11-流程图"><a href="#3-11-流程图" class="headerlink" title="3.11 流程图"></a>3.11 流程图</h3><h4 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h4><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">​&lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">&quot;flowchart-0&quot;</span> <span class="built_in">class</span>=<span class="string">&quot;flow-chart&quot;</span>&gt;&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure>

<div id="flowchart-1" class="flow-chart"></div>


<h3 id="3-12-序列图"><a href="#3-12-序列图" class="headerlink" title="3.12 序列图"></a>3.12 序列图</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">​```squence</span><br><span class="line">对象A-&gt;对象B: 对象B你好吗?（请求）</span><br><span class="line">Note right of 对象B: 对象B的描述</span><br><span class="line">Note left of 对象A: 对象A的描述(提示)</span><br><span class="line">对象B--&gt;对象A: 我很好(响应)</span><br><span class="line">对象A-&gt;对象B: 你真的好吗？</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<div id="sequence-0"></div>

<h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例 2"></a>示例 2</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">​```squence</span><br><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good thanks!</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<div id="sequence-1"></div>
#### 示例 3
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">​```squence</span><br><span class="line">Title: <span class="keyword">Here</span> is a title</span><br><span class="line">A-&gt;B: <span class="keyword">Normal</span> line</span><br><span class="line">B--&gt;<span class="keyword">C</span>: <span class="keyword">Dashed</span> line</span><br><span class="line"><span class="keyword">C</span>-&gt;&gt;<span class="keyword">D</span>: <span class="keyword">Open</span> arrow</span><br><span class="line"><span class="keyword">D</span>--&gt;&gt;A: <span class="keyword">Dashed</span> open arrow</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>


<div id="sequence-2"></div>

<h3 id="3-13-甘特图"><a href="#3-13-甘特图" class="headerlink" title="3.13 甘特图"></a>3.13 甘特图</h3><p>甘特图内在思想简单。基本是一条线条图，横轴表示时间，纵轴表示活动（项目），线条表示在整个期间上计划和实际的活动完成情况。它直观地表明任务计划在什么时候进行，及实际进展与计划要求的对比。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">​&lt;pre class&#x3D;&quot;mermaid&quot;&gt;    gantt</span><br><span class="line">    title 项目开发流程</span><br><span class="line">    section 项目确定</span><br><span class="line">        需求分析       :a1, 2016-06-22, 3d</span><br><span class="line">        可行性报告     :after a1, 5d</span><br><span class="line">        概念验证       : 5d</span><br><span class="line">    section 项目实施</span><br><span class="line">        概要设计      :2016-07-05  , 5d</span><br><span class="line">        详细设计      :2016-07-08, 10d</span><br><span class="line">        编码          :2016-07-15, 10d</span><br><span class="line">        测试          :2016-07-22, 5d</span><br><span class="line">    section 发布验收</span><br><span class="line">        发布: 2d</span><br><span class="line">        验收: 3d</span><br><span class="line">​&lt;&#x2F;pre&gt;</span><br></pre></td></tr></table></figure>

<pre class="mermaid">gantt
 title 项目开发流程
    section 项目确定
        需求分析       :a1, 2016-06-22, 3d
        可行性报告     :after a1, 5d
        概念验证       : 5d
    section 项目实施
        概要设计      :2016-07-05  , 5d
        详细设计      :2016-07-08, 10d
        编码          :2016-07-15, 10d
        测试          :2016-07-22, 5d
    section 发布验收
        发布: 2d
        验收: 3d</pre>


<h3 id="3-14-Mermaid-流程图"><a href="#3-14-Mermaid-流程图" class="headerlink" title="3.14 Mermaid 流程图"></a>3.14 Mermaid 流程图</h3><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">​&lt;pre <span class="built_in">class</span>=<span class="string">&quot;mermaid&quot;</span>&gt;graph LR</span><br><span class="line">A[方形] <span class="comment">--&gt;B(圆角)</span></span><br><span class="line">  B <span class="comment">--&gt; C&#123;条件a&#125;</span></span><br><span class="line">  C <span class="comment">--&gt;|a=1| D[结果1]</span></span><br><span class="line">  C <span class="comment">--&gt;|a=2| E[结果2]</span></span><br><span class="line">  F[横向流程图]</span><br><span class="line">​&lt;/pre&gt;</span><br></pre></td></tr></table></figure>

<pre class="mermaid">graph LR
A[方形] -->B(圆角)
  B --> C{条件a}
  C -->|a=1| D[结果1]
  C -->|a=2| E[结果2]
  F[横向流程图]</pre>
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Start:>https://www.zybuluo.com
io=>inputoutput: verification
op=>operation: Your Operation
cond=>condition: Yes or No?
sub=>subroutine: Your Subroutine
e=>end

st->io->op->cond
cond(yes)->e
cond(no)->sub->io
​</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><textarea id="flowchart-1-code" style="display: none">st=>start: Start:>https://www.zybuluo.com
io=>inputoutput: verification
op=>operation: Your Operation
cond=>condition: Yes or No?
sub=>subroutine: Your Subroutine
e=>end

st->io->op->cond
cond(yes)->e
cond(no)->sub->io</textarea><textarea id="flowchart-1-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-1-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-1-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-1", options);</script><script src="https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js"></script><script src="https://cdn.bootcss.com/raphael/2.2.7/raphael.min.js"></script><script src="https://cdn.bootcss.com/underscore.js/1.8.3/underscore-min.js"></script><script src="https://cdn.bootcss.com/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script><textarea id="sequence-0-code" style="display: none">对象A->对象B: 对象B你好吗?（请求）
Note right of 对象B: 对象B的描述
Note left of 对象A: 对象A的描述(提示)
对象B-->对象A: 我很好(响应)
对象A->对象B: 你真的好吗？</textarea><textarea id="sequence-0-options" style="display: none">{"theme":"simple"}</textarea><script>  var code = document.getElementById("sequence-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-0", options);</script><textarea id="sequence-1-code" style="display: none">Alice->Bob: Hello Bob, how are you?
Note right of Bob: Bob thinks
Bob-->Alice: I am good thanks!</textarea><textarea id="sequence-1-options" style="display: none">{"theme":"simple"}</textarea><script>  var code = document.getElementById("sequence-1-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-1-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-1", options);</script><textarea id="sequence-2-code" style="display: none">Title: Here is a title
A->B: Normal line
B-->C: Dashed line
C->>D: Open arrow
D-->>A: Dashed open arrow</textarea><textarea id="sequence-2-options" style="display: none">{"theme":"simple"}</textarea><script>  var code = document.getElementById("sequence-2-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-2-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-2", options);</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Tool &amp; Platform</category>
      </categories>
      <tags>
        <tag>开发与调试</tag>
        <tag>开发工具</tag>
      </tags>
  </entry>
  <entry>
    <title>JS 基础概念二</title>
    <url>/2020/10/07/JS-basic-concept-sec/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>紧接 <code>基础概念</code>  做一系列补充</p>
<p>–  变量提升</p>
<p>–  作用域</p>
<p>–  闭包</p>
<p>–  立即执行函数表达式</p>
<p>–  异步任务队列</p>
</blockquote>
<a id="more"></a>

<h2 id="一、变量提升"><a href="#一、变量提升" class="headerlink" title="一、变量提升"></a>一、变量提升</h2><h3 id="JS代码的运行规则"><a href="#JS代码的运行规则" class="headerlink" title="JS代码的运行规则"></a>JS代码的运行规则</h3><p>在<code>JavaScript</code>代码运行之前其实是有一个编译阶段的。编译之后才是从上到下，一行一行解释执行。<code>变量提升</code>就发生在编译阶段，<em>它把变量和函数的声明提升至作用域的顶端</em>。（编译阶段的工作之一就是将变量与其作用域进行关联）。<br>所以对于代码<code>var a =2;</code>来说，编译器看到的是两行代码<code>var a; a = 2;</code>第一个语句是声明语句，在编译阶段处理。第二个语句是赋值语句，在运行阶段处理。</p>
<h3 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h3><p>ES6之前我们一般使用var来声明变量，<strong>提升</strong>简单来说就是把我们所写的类似于<code>var a = 123;</code>这样的变量声明，提升到它所在作用域的顶端去执行，到我们代码所在的位置来赋值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);  <span class="comment">//undefined</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span>; </span><br><span class="line">&#125;;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>

<p>上述代码a的结果是<code>undefined</code>，它的实际执行顺序如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    a = <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>

<p>再看一个：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>

<p>第一眼看到的时候会认为<code>undefined</code>, 但是记住声明会提升到作用域顶端</p>
<p><strong>下面来看一道经典面试题：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(v1);</span><br><span class="line"><span class="keyword">var</span> v1 = <span class="number">100</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v1);</span><br><span class="line">    <span class="keyword">var</span> v1 = <span class="number">200</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(v1);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line"><span class="built_in">console</span>.log(v1);</span><br></pre></td></tr></table></figure>

<p>输出的结果：</p>
<blockquote>
<p>//undefined<br>//undefined<br>//200<br>//100</p>
</blockquote>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><strong>变量提升</strong>需要注意两点：</p>
<ol>
<li>提升的部分只是变量声明，赋值语句和可执行的代码逻辑还保持在原地不动</li>
<li>提升只是将变量声明提升到变量所在的变量范围的顶端，并不是提升到全局范围，说明如下：</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">//会输出undefined</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//变量提升之后的效果</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    a = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>

<h3 id="函数提升"><a href="#函数提升" class="headerlink" title="函数提升"></a>函数提升</h3><p><code>Javascript</code>中不仅仅是变量声明有提升的现象，函数的声明也是一样</p>
<p>具名函数的声明有两种方式：  <strong>函数声明式</strong>   <strong>函数字面量式</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//函数声明式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">//函数字面量式 </span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>函数字面量式</strong>的声明和<strong>变量提升</strong>的结果是一样的，函数只是一个具体的值；</p>
<p>但是函数声明式的提升现象和变量提升略有不同</p>
<h4 id="函数声明式"><a href="#函数声明式" class="headerlink" title="函数声明式"></a>函数声明式</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(bar);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果：ƒ bar () &#123;</span></span><br><span class="line"><span class="comment">//  console.log(1);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>

<p>执行顺序相当于：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(bar);</span><br></pre></td></tr></table></figure>

<p><strong>函数提升是整个代码块提升到它所在的作用域的最开始执行</strong></p>
<h4 id="函数字面量式"><a href="#函数字面量式" class="headerlink" title="函数字面量式"></a>函数字面量式</h4><p><strong>函数声明会提升，但是函数表达式不会提升。</strong> 看如下代码：</p>
<p><span style="color:red;">注意：变量提升和变量赋值 是两回事！</span></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo();</span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;    <span class="comment">//这是一个函数表达式，不再是函数声明。</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>处理方式如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo;    </span><br><span class="line">foo();    <span class="comment">//TypeError，因为还没有赋值</span></span><br><span class="line">bar();    <span class="comment">//bar不可以在全局范围内引用</span></span><br><span class="line">foo = <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;            </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>

<h4 id="函数优先规则"><a href="#函数优先规则" class="headerlink" title="函数优先规则"></a>函数优先规则</h4><p>思考下面的问题:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo(); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> foo;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这就是<strong>函数优先规则</strong></p>
<p><span style="color:red;">变量声明和函数声明都会得到变量提升，但函数声明会最先得到提升，然后是变量声明。</span></p>
<p>处理方式如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125; </span><br><span class="line">foo();</span><br><span class="line">foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：<code>var foo;</code>由于是重复声明变量，所以被编译优化去掉。</p>
<h4 id="补充情况"><a href="#补充情况" class="headerlink" title="补充情况"></a>补充情况</h4><p><strong>1、对于函数声明来说，如果定义了相同的函数变量声明，后定义的声明会覆盖掉先前的声明，看如下代码：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo();    <span class="comment">//输出3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><strong>2、JavaScript中是没有块级作用域的概念</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo();    <span class="comment">//输出结果为2</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(a)&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<h2 id="二、作用域"><a href="#二、作用域" class="headerlink" title="二、作用域"></a>二、作用域</h2><h3 id="什么是作用域"><a href="#什么是作用域" class="headerlink" title="什么是作用域"></a>什么是作用域</h3><p>作用域是<span style="color:red;">在运行时代码中的某些特定部分中变量，函数和对象的可访问性</span>。换句话说，<em>作用域决定了代码区块中变量和其他资源的可见性。</em></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outFun2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> inVariable = <span class="string">&quot;内层变量2&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">outFun2();<span class="comment">//要先执行这个函数，否则根本不知道里面是啥</span></span><br><span class="line"><span class="built_in">console</span>.log(inVariable);<span class="comment">// inVariable is not defined</span></span><br></pre></td></tr></table></figure>

<p>从上面的例子可以体会到作用域的概念，变量 <code>inVariable</code> 在全局作用域没有声明，所以在全局作用域下取值会报错。我们可以这样理解：作用域就是一个独立的地盘，让变量不会外泄、暴露出去。<strong>也就是说作用域最大的用处就是隔离变量，不同作用域下同名变量不会有冲突。</strong></p>
<p>ES6 之前 JavaScript 没有块级作用域,只有全局作用域和函数作用域。ES6 的到来，为我们提供了<strong>块级作用域</strong>，可通过新增命令 <code>let</code> 和 <code>const</code> 来体现。</p>
<h3 id="全局作用域"><a href="#全局作用域" class="headerlink" title="全局作用域"></a>全局作用域</h3><p>在代码中任何地方都能访问到的对象拥有<strong>全局作用域</strong>，一般来说以下几种情形拥有全局作用域：</p>
<blockquote>
<p>在代码中任何地方都能访问到的对象拥有全局作用域一般来说以下几种情形拥有全局作用域：</p>
</blockquote>
<p><strong>1、最外层函数</strong>和<strong>在最外层函数外面定义的变量</strong>拥有全局作用域</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> outVariable = <span class="string">&quot;我是最外层变量&quot;</span>; <span class="comment">//最外层变量</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outFun</span>(<span class="params"></span>) </span>&#123; <span class="comment">//最外层函数</span></span><br><span class="line">    <span class="keyword">var</span> inVariable = <span class="string">&quot;内层变量&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">innerFun</span>(<span class="params"></span>) </span>&#123; <span class="comment">//内层函数</span></span><br><span class="line">        <span class="built_in">console</span>.log(inVariable);</span><br><span class="line">    &#125;</span><br><span class="line">    innerFun();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(outVariable); <span class="comment">//我是最外层变量</span></span><br><span class="line">outFun(); <span class="comment">//内层变量</span></span><br><span class="line"><span class="built_in">console</span>.log(inVariable); <span class="comment">//inVariable is not defined</span></span><br><span class="line">innerFun(); <span class="comment">//innerFun is not defined</span></span><br></pre></td></tr></table></figure>

<p><strong>2、所有未定义直接赋值的变量</strong>，自动声明为拥有全局作用域</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outFun2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    variable = <span class="string">&quot;未定义直接赋值的变量&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> inVariable2 = <span class="string">&quot;内层变量2&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">outFun2();<span class="comment">//要先执行这个函数，否则根本不知道里面是啥</span></span><br><span class="line"><span class="built_in">console</span>.log(variable); <span class="comment">//未定义直接赋值的变量</span></span><br><span class="line"><span class="built_in">console</span>.log(inVariable2); <span class="comment">//inVariable2 is not defined</span></span><br></pre></td></tr></table></figure>

<p><strong>3、所有 window 对象的属性拥有全局作用域</strong></p>
<p>一般情况下，window 对象的内置属性都拥有全局作用域，例如 window.name、window.location、window.top 等等。</p>
<p>全局作用域有个弊端：如果我们写了很多行 JS 代码，变量定义都没有用函数包括，那么它们就全部都在全局作用域中。这样就会污染全局命名空间, 容易引起命名冲突。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 张三写的代码中</span></span><br><span class="line"><span class="keyword">var</span> data = &#123;<span class="attr">a</span>: <span class="number">100</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 李四写的代码中</span></span><br><span class="line"><span class="keyword">var</span> data = &#123;<span class="attr">x</span>: <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>

<p>这就是为何 jQuery、Zepto 等库的源码，所有的代码都会放在(function(){…})()中。因为放在里面的所有变量，都不会被外泄和暴露，不会污染到外面，不会对其他的库或者 JS 脚本造成影响。这是<strong>函数作用域</strong>的一个体现。</p>
<h3 id="函数作用域"><a href="#函数作用域" class="headerlink" title="函数作用域"></a>函数作用域</h3><blockquote>
<p>函数作用域，是指声明在函数内部的变量，和全局作用域相反，局部作用域一般只在固定的代码片段内可访问到，最常见的例如函数内部。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> blogName=<span class="string">&quot;浮游天地&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">innerSay</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(blogName);</span><br><span class="line">    &#125;</span><br><span class="line">    innerSay();</span><br><span class="line">&#125;</span><br><span class="line">alert(blogName); <span class="comment">//脚本错误</span></span><br><span class="line">innerSay(); <span class="comment">//脚本错误</span></span><br></pre></td></tr></table></figure>

<p>作用域是分层的，内层作用域可以访问外层作用域的变量，反之则不行。</p>
<p><strong>值得注意的是</strong>：块语句（大括号“｛｝”中间的语句），如 if 和 switch 条件语句或 for 和 while 循环语句，不像函数，它们不会创建一个新的作用域。在块语句中定义的变量将保留在它们已经存在的作用域中。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="comment">// &#x27;if&#x27; 条件语句块不会创建一个新的作用域</span></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&#x27;Hammad&#x27;</span>; <span class="comment">// name 依然在全局作用域中</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// logs &#x27;Hammad&#x27;</span></span><br></pre></td></tr></table></figure>

<p>初学者经常需要花点时间才能习惯变量提升，而如果不理解这种特有行为，就可能导致bug 。正因为如此，ES6 引入了块级作用域，让变量的生命周期更加可控。</p>
<p><strong>函数作用域有两种方式</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//函数声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//函数表达式</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>两者的区别在于它们的名称标识符会被绑定到何处，第一段代码中会被绑定到所在作用域中，第二段代码被绑定在函数表达式自身的函数中而不是所在作用域中。</p>
<h3 id="块级作用域"><a href="#块级作用域" class="headerlink" title="块级作用域"></a>块级作用域</h3><p>ES6之前，在javascript中<strong>没有块作用域</strong>,也就是说在<code>&#123;...&#125;</code>中声明的变量会泄露到外面作用域</p>
<p>另外，ES5利用<strong>函数闭包</strong>，也可以<em>模仿块级作用域</em></p>
<blockquote>
<p>块级作用域可通过ES6新增命令 let 和 const 声明，所声明的变量在指定块的作用域外无法被访问。</p>
<p>let 声明的语法与 var 的语法一致。基本上可以用 let 来代替 var 进行变量声明，但会将变量的作用域限制在当前代码块中。</p>
</blockquote>
<p><strong>块级作用域在如下情况被创建：</strong></p>
<ul>
<li>在一个函数内部</li>
<li>在一个代码块（由一对花括号包裹）内部</li>
</ul>
<p><strong>块级作用域有以下几个特点：</strong></p>
<p><strong>1、声明变量不会提升到代码块顶部</strong>：let/const 声明并不会被提升到当前代码块的顶部，因此你需要手动将 let/const 声明放置到顶部，以便让变量在整个代码块内部可用。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">condition</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        <span class="keyword">let</span> value = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// value 在此处不可用</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">// value 在此处不可用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、禁止重复声明</strong></p>
<p>如果一个标识符已经在代码块内部被定义，那么在此代码块内使用同一个标识符进行 let 声明就会导致抛出错误。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> count = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">40</span>; <span class="comment">// Identifier &#x27;count&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>

<p>在本例中， count 变量被声明了两次：一次使用 var ，另一次使用 let 。因为 let 不能在同一作用域内重复声明一个已有标识符，此处的 let 声明就会抛出错误。但如果在嵌套的作用域内使用 let 声明一个同名的新变量，则不会抛出错误。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> count = <span class="number">30</span>;</span><br><span class="line"><span class="comment">// 不会抛出错误</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">40</span>;</span><br><span class="line">    <span class="comment">// 其他代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3、循环中的绑定块作用域的妙用</strong></p>
<p>开发者可能最希望实现 for 循环的块级作用域了，因为可以把声明的计数器变量限制在循环内，例如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>测试1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>测试2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>测试3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="keyword">var</span> btns = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;button&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">      btns[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;第&#x27;</span> + (i + <span class="number">1</span>) + <span class="string">&#x27;个&#x27;</span>)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们要实现这样的一个需求: 点击某个按钮, 提示”点击的是第 n 个按钮”，结果点击任意一个按钮，后台都是弹出“第四个”，这是因为 i 是全局变量，执行到点击事件时，此时 i 的值为 3，最简单的方法是<code>用 let 声明 i</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">   btns[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&#x27;第&#x27;</span> + (i + <span class="number">1</span>) + <span class="string">&#x27;个&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>三个简单案例</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scope=<span class="string">&#x27;global&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(scope);</span><br><span class="line">  <span class="keyword">var</span> scope=<span class="string">&#x27;local&#x27;</span>;</span><br><span class="line">  alert(scope);</span><br><span class="line">&#125;</span><br><span class="line">fn();   </span><br><span class="line">alert(scope);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//结果是undefined , local , global</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scope=<span class="string">&#x27;global&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(scope);</span><br><span class="line">  scope=<span class="string">&#x27;local&#x27;</span>;</span><br><span class="line">  alert(scope);</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br><span class="line">alert(scope);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//结果是global , local , local</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scope=<span class="string">&#x27;global&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">scope</span>)</span>&#123;</span><br><span class="line">  alert(scope);</span><br><span class="line">  scope=<span class="string">&#x27;local&#x27;</span>;</span><br><span class="line">  alert(scope);</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br><span class="line">alert(scope);</span><br><span class="line"></span><br><span class="line"><span class="comment">//结果是undefined , local , global</span></span><br></pre></td></tr></table></figure>

<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>作用域链本质上就是<strong>根据名称查找变量(标识符名称)的一套规则</strong>。</p>
<p>规则非常简单，在自己的变量对象里找不到变量，就上父级的变量对象查找，当抵达最外层的全局上下文中，无论找到还是没找到，查找过程都会停止。<strong>查找会在找到第一个匹配的变量时停止，被称为遮蔽效应</strong></p>
<p><strong>作用域</strong>其实是由<strong>执行上下文中的变量对象</strong>和<strong>作用域链</strong>共同构成的。</p>
<h3 id="相关试题"><a href="#相关试题" class="headerlink" title="相关试题"></a>相关试题</h3><p><strong>1、说明：因为<code>fn:function()</code>中的活动对象只有全局的a</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    a:<span class="number">11</span>,</span><br><span class="line">    b:&#123;</span><br><span class="line">        fn:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(a);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">o.b.fn(); <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<p><strong>2、说明：foo()中先查找自己的活动对象是否有a, 发现有，直接输出自己活动对象的a=1</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;        </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value = <span class="number">2</span>;</span><br><span class="line">    foo();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line">bar();<span class="comment">//1 </span></span><br></pre></td></tr></table></figure>
<p><strong>3、这种情况与上面有点不同, value=2只有赋值没有定义，所以会被提升到最上面</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//var value = 2   </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    value = <span class="number">2</span>;</span><br><span class="line">    foo();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line">bar();<span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<p><strong>4、函数体内函数声明会被提升</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">b</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(b);  <span class="comment">//函数b</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(b); <span class="comment">//函数b</span></span><br><span class="line">    &#125;</span><br><span class="line">    b();</span><br><span class="line">&#125;</span><br><span class="line">a(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>等效于：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">b</span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(b); <span class="comment">//函数b</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(b);  <span class="comment">//函数b</span></span><br><span class="line">    b();</span><br><span class="line">&#125;</span><br><span class="line">a(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<h2 id="三、闭包"><a href="#三、闭包" class="headerlink" title="三、闭包"></a>三、闭包</h2><h3 id="1、什么是闭包？"><a href="#1、什么是闭包？" class="headerlink" title="1、什么是闭包？"></a>1、什么是闭包？</h3><p>闭包是指有权访问另外一个函数作用域中的变量的函数。可以理解为<strong>能够读取另一个函数作用域的变量的函数</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&#x27;变量1&#x27;</span></span><br><span class="line">    <span class="keyword">var</span> inner = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.info(a)</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> inner <span class="comment">// inner 就是一个闭包函数，因为他能够访问到outer函数的作用域</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>很多人会搞不懂匿名函数与闭包的关系，实际上，<strong>闭包是站在作用域的角度上来定义的</strong>。</p>
<p>因为inner访问到outer作用域的变量，所以inner就是一个闭包函数。虽然定义很简单，但是有很多坑点，比如this指向、变量的作用域，稍微不注意可能就造成内存泄露。我们先把问题抛一边，思考一个问题：为什么闭包函数能够访问其他函数的作用域 ?</p>
<h3 id="2、从堆栈的角度看待JS函数"><a href="#2、从堆栈的角度看待JS函数" class="headerlink" title="2、从堆栈的角度看待JS函数"></a>2、从堆栈的角度看待JS函数</h3><p>基本变量的值一般都是存在栈内存中，而对象类型的变量的值存储在堆内存中，栈内存存储对应空间地址。基本的数据类型: Number 、Boolean、Undefined、String、Null。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> <span class="comment">//a是一个基本类型</span></span><br><span class="line"><span class="keyword">var</span> b = &#123;<span class="attr">m</span>: <span class="number">20</span> &#125; <span class="comment">//b是一个对象</span></span><br></pre></td></tr></table></figure>

<p>对应内存存储：</p>
<p><img data-src="js-bibao-1.png"></p>
<p>当我们执行 <code>b=&#123;m:30&#125;</code>时，堆内存就有新的对象<code>&#123;m：30&#125;</code>，栈内存的b指向新的空间地址( <code>指向&#123;m：30&#125;</code> )，而堆内存中原来的{m：20}就会被程序引擎垃圾回收掉，节约内存空间。我们知道js函数也是对象，它也是在堆与栈内存中存储的，我们来看一下转化：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(b);</span><br><span class="line">    &#125;</span><br><span class="line">    fn1();</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>

<p><img data-src="js-bibao-2.png"></p>
<p>栈是一种先进后出的数据结构：</p>
<ol>
<li>在执行fn前，此时我们在全局执行环境(浏览器就是window作用域)，全局作用域里有个变量a；</li>
<li>进入fn，此时栈内存就会push一个fn的执行环境，这个环境里有变量b和函数对象fn1，这里可以访问自身执行环境和全局执行环境所定义的变量</li>
<li>进入fn1，此时栈内存就会push 一个fn1的执行环境，这里面没有定义其他变量，但是我们可以访问到fn和全局执行环境里面的变量，因为程序在访问变量时，是向底层栈一个个找，如果找到全局执行环境里都没有对应变量，则程序抛出undefined的错误。</li>
<li>随着fn1()执行完毕，fn1的执行环境被杯销毁，接着执行完fn()，fn的执行环境也会被销毁，只剩全局的执行环境下，现在没有b变量，和fn1函数对象了，只有a 和 fn(函数声明作用域是window下)</li>
</ol>
<p>在函数内访问某个变量是根据函数作用域链来判断变量是否存在的，而函数作用域链是程序根据函数所在的执行环境栈来初始化的，所以上面的例子，我们在fn1里面打印变量b，根据fn1的作用域链的找到对应fn执行环境下的变量b。所以当程序在调用某个函数时，做了以下的工作：准备执行环境，初始函数作用域链和arguments参数对象</p>
<p>我们现在看回最初的例子outer与inner</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span>  a = <span class="string">&#x27;变量1&#x27;</span></span><br><span class="line">     <span class="keyword">var</span>  inner = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.info(a)</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">return</span> inner    <span class="comment">// inner 就是一个闭包函数，因为他能够访问到outer函数的作用域</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>  inner = outer()   <span class="comment">// 获得inner闭包函数</span></span><br><span class="line">inner()   <span class="comment">//&quot;变量1&quot;</span></span><br></pre></td></tr></table></figure>

<p>当程序执行完<code>var inner = outer()</code>，其实outer的执行环境并没有被销毁，因为他里面的变量a仍然被被inner的函数作用域链所引用，当程序执行完inner(), 这时候，inner和outer的执行环境才会被销毁调</p>
<p>《JavaScript高级编程》书中建议：<strong>由于闭包会携带包含它的函数的作用域，因为会比其他函数占用更多内容，过度使用闭包，会导致内存占用过多。</strong></p>
<h3 id="3、闭包坑点"><a href="#3、闭包坑点" class="headerlink" title="3、闭包坑点"></a>3、闭包坑点</h3><p><strong>坑点1： 引用的变量可能发生变化</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> result = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>； i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">        result.[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.info(i)</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JS经典问题：打印结果不是<code>1,2,3,4,...,10</code></p>
<p>因为每个闭包函数访问变量i是outer执行环境下的<code>变量i</code>，随着循环的结束，i已经变成10了，所以执行每个闭包函数，结果打印<code>10， 10， ..., 10</code></p>
<p><span style="color:red;">解决方法：</span></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> result = [];</span><br><span class="line">      <span class="keyword">for</span> （<span class="keyword">var</span> i = <span class="number">0</span>； i&lt;<span class="number">10</span>; i++）&#123;</span><br><span class="line">        result.[i] = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">             <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                   <span class="built_in">console</span>.info(num);    </span><br><span class="line"><span class="comment">// 此时访问的num，是上层函数执行环境的num，数组有10个函数对象，每个对象的执行环境下的number都不一样</span></span><br><span class="line">             &#125;</span><br><span class="line">        &#125;(i)</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>坑点2： this指向问题</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">     name: <span class="string">&#x27;&#x27;</span>object<span class="string">&quot;，</span></span><br><span class="line"><span class="string">     getName： function() &#123;</span></span><br><span class="line"><span class="string">        return function() &#123;</span></span><br><span class="line"><span class="string">             console.info(this.name)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">object.getName()()    // underfined</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 因为里面的闭包函数是在window作用域下执行的，也就是说，this指向windows</span></span><br></pre></td></tr></table></figure>

<p><strong>坑点3：内存泄露问题</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">showId</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">    el.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      aler(el.id)   <span class="comment">// 这样会导致闭包引用外层的el，当执行完showId后，el无法释放</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 改成下面</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">showId</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">    <span class="keyword">var</span> id  = el.id</span><br><span class="line">    el.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      aler(id)   <span class="comment">// 这样会导致闭包引用外层的el，当执行完showId后，el无法释放</span></span><br><span class="line">    &#125;</span><br><span class="line">    el = <span class="literal">null</span>    <span class="comment">// 主动释放el</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、闭包技巧"><a href="#4、闭包技巧" class="headerlink" title="4、闭包技巧"></a>4、闭包技巧</h3><p><strong>技巧1： 用闭包解决递归调用问题</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">factorial</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(num&lt;= <span class="number">1</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> num * factorial(num<span class="number">-1</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> anotherFactorial = factorial</span><br><span class="line">factorial = <span class="literal">null</span></span><br><span class="line">anotherFactorial(<span class="number">4</span>)   </span><br><span class="line"><span class="comment">// 报错 ，因为最好是return num* arguments.callee（num-1）</span></span><br><span class="line"><span class="comment">// arguments.callee指向当前执行函数，但是在严格模式下不能使用该属性也会报错，所以借助闭包来实现</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用闭包实现递归</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newFactorial</span> = （<span class="title">function</span> <span class="title">f</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(num&lt;<span class="number">1</span>) &#123;<span class="keyword">return</span> <span class="number">1</span>&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> num* f(num<span class="number">-1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;） </span><br><span class="line"><span class="comment">//这样就没有问题了，实际上起作用的是闭包函数f，而不是外面的函数newFactorial</span></span><br></pre></td></tr></table></figure>

<p><strong>技巧2：用闭包模仿块级作用域</strong></p>
<p>es6没出来之前，用var定义变量存在变量提升问题；es6以后当然大多用es6的<code>let 和const</code> 定义</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">    <span class="built_in">console</span>.info(i)</span><br><span class="line">&#125;</span><br><span class="line">alert(i)  <span class="comment">// 变量提升，弹出10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//为了避免i的提升可以这样做</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">         <span class="built_in">console</span>.info(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">alert(i)   <span class="comment">// underfined   因为i随着闭包函数的退出，执行环境销毁，变量回收</span></span><br></pre></td></tr></table></figure>

<h3 id="5、使用闭包的注意点"><a href="#5、使用闭包的注意点" class="headerlink" title="5、使用闭包的注意点"></a>5、使用闭包的注意点</h3><ul>
<li>由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</li>
<li>闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。</li>
</ul>
<h3 id="6、补充"><a href="#6、补充" class="headerlink" title="6、补充"></a>6、补充</h3><p><strong>闭包的创建：­­­</strong></p>
<p>闭包就是可以创建一个独立的环境，每个闭包里面的环境都是独立的，互不干扰。</p>
<p>闭包会发生内存泄漏，<span style="color:red;">每次外部函数执行的时候，外部函数的引用地址不同，都会重新创建一个新的地址。</span>但凡是当前活动对象中有被内部子集引用的数据，那么这个时候，这个数据不删除，保留一根指针给内部活动对象。</p>
<p><strong>在闭包的应用场景中，记住一句话：</strong></p>
<p><span style="color:red;"><strong>闭包找到的是同一地址中父级函数中对应变量最终的值</strong></span></p>
<h4 id="参考案例"><a href="#参考案例" class="headerlink" title="参考案例"></a>参考案例</h4><p><strong>例一</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funA</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;  <span class="comment">// funA的活动对象之中;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   <span class="comment">//匿名函数的活动对象;</span></span><br><span class="line">        alert(a);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = funA();</span><br><span class="line">b();  <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<p><strong>例二</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>; </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">innerFn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      i++;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> innerFn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> inner = outerFn();  </span><br><span class="line"><span class="comment">//每次外部函数执行的时候,都会开辟一块内存空间,外部函数的地址不同，都会重新创建一个新的地址</span></span><br><span class="line">inner();</span><br><span class="line">inner();</span><br><span class="line">inner();</span><br><span class="line"><span class="keyword">var</span> inner2 = outerFn();</span><br><span class="line">inner2();</span><br><span class="line">inner2();</span><br><span class="line">inner2();   <span class="comment">//1 2 3 1 2 3</span></span><br></pre></td></tr></table></figure>

<p><strong>例三</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> m = <span class="number">0</span>; </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getM</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> m; &#125; </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">seta</span>(<span class="params">val</span>) </span>&#123; m = val; &#125; </span><br><span class="line">  <span class="built_in">window</span>.g = getM; </span><br><span class="line">  <span class="built_in">window</span>.f = seta; </span><br><span class="line">&#125;)(); </span><br><span class="line">f(<span class="number">100</span>);</span><br><span class="line"><span class="built_in">console</span>.info(g());   <span class="comment">//100  闭包找到的是同一地址中父级函数中对应变量最终的值</span></span><br></pre></td></tr></table></figure>

<p><strong>例四</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span>; </span><br><span class="line">  <span class="keyword">return</span>  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">      count++; </span><br><span class="line">      <span class="built_in">console</span>.info(count); </span><br><span class="line">  &#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">var</span> t1 = f();</span><br><span class="line">t1();     <span class="comment">//1 </span></span><br><span class="line">t1();     <span class="comment">//2 </span></span><br><span class="line">t1();     <span class="comment">//3 </span></span><br></pre></td></tr></table></figure>

<p><strong>例五</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">1</span>; </span><br><span class="line">  <span class="keyword">var</span> tmp = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; </span><br><span class="line">      sum = sum + x; </span><br><span class="line">      <span class="keyword">return</span> tmp;    </span><br><span class="line">  &#125; </span><br><span class="line">  tmp.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">      <span class="keyword">return</span> sum; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tmp; </span><br><span class="line">&#125; </span><br><span class="line">alert(add(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>).toString());     <span class="comment">//6</span></span><br><span class="line"><span class="comment">// add()的第一次参数无效</span></span><br></pre></td></tr></table></figure>

<p><strong>例六</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lis = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;lis.length;i++)&#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">      lis[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(i);</span><br><span class="line">      &#125;;</span><br><span class="line">  &#125;)(i);       <span class="comment">//事件处理函数中闭包的写法</span></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p><strong>例七</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span>  fn=(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span>  i=<span class="number">10</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span>  <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(++i);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span>   fn;</span><br><span class="line">&#125;)() </span><br><span class="line">fn();   <span class="comment">//11</span></span><br><span class="line">fn();   <span class="comment">//12</span></span><br></pre></td></tr></table></figure>

<p><strong>例八</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">n,o</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(o);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">         fun:<span class="function"><span class="keyword">function</span>(<span class="params">m</span>) </span>&#123;</span><br><span class="line">               <span class="keyword">return</span> fun(m,n);</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = fun(<span class="number">0</span>);  <span class="comment">//undefined</span></span><br><span class="line">a.fun(<span class="number">1</span>);  <span class="comment">//0  </span></span><br><span class="line">a.fun(<span class="number">2</span>);  <span class="comment">//0  </span></span><br><span class="line">a.fun(<span class="number">3</span>);  <span class="comment">//0  </span></span><br><span class="line"><span class="keyword">var</span> b = fun(<span class="number">0</span>).fun(<span class="number">1</span>).fun(<span class="number">2</span>).fun(<span class="number">3</span>);   <span class="comment">//undefined  0  1  2</span></span><br><span class="line"><span class="keyword">var</span> c = fun(<span class="number">0</span>).fun(<span class="number">1</span>);  </span><br><span class="line">c.fun(<span class="number">2</span>);  </span><br><span class="line">c.fun(<span class="number">3</span>);  <span class="comment">//undefined  0  1  1</span></span><br></pre></td></tr></table></figure>

<p><strong>例九</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 经典对比</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> arr = [];</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; <span class="number">5</span>;i ++)&#123;</span><br><span class="line">     arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> i;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> list = fn();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,len = list.length;i &lt; len ; i ++)&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(list[i]());</span><br><span class="line">&#125;  <span class="comment">//5 5 5 5 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决办法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; <span class="number">5</span>;i ++)&#123;</span><br><span class="line">    arr[i] = (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;)(i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> list = fn();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,len = list.length;i &lt; len ; i ++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(list[i]());</span><br><span class="line">&#125;  <span class="comment">//0 1 2 3 4</span></span><br></pre></td></tr></table></figure>

<h2 id="四、立即执行函数表达式"><a href="#四、立即执行函数表达式" class="headerlink" title="四、立即执行函数表达式"></a>四、立即执行函数表达式</h2><h3 id="1、函数声明和函数表达式"><a href="#1、函数声明和函数表达式" class="headerlink" title="1、函数声明和函数表达式"></a>1、函数声明和函数表达式</h3><h4 id="1-1-函数声明（函数语句）"><a href="#1-1-函数声明（函数语句）" class="headerlink" title="1.1 函数声明（函数语句）"></a>1.1 函数声明（函数语句）</h4><ul>
<li>使用 function 关键字声明一个函数，再指定一个函数名，叫函数声明。</li>
<li>【注意】JavaScript引擎规定，如果function关键字出现在<strong>行首</strong>，一律解释成函数声明语句</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// body</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  调用函数</span></span><br><span class="line">test();</span><br></pre></td></tr></table></figure>

<h4 id="1-2-函数表达式-function-expression"><a href="#1-2-函数表达式-function-expression" class="headerlink" title="1.2 函数表达式    function expression"></a>1.2 函数表达式    <code>function expression</code></h4><ol>
<li>使用 function 关键字声明一个函数，函数名称可被省略，此种情况下的函数是 <strong>匿名函数</strong>（anonymous）。 函数名称只是函数体中的一个本地变量。</li>
<li><strong>将匿名函数赋予一个变量</strong>，叫函数表达式，这是最常见的函数表达式语法形式。</li>
</ol>
<h4 id="1-3-匿名函数"><a href="#1-3-匿名函数" class="headerlink" title="1.3 匿名函数"></a>1.3 匿名函数</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myFunction = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// statement</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 也可以为其命名</span></span><br><span class="line"><span class="keyword">var</span> myFunction = <span class="function"><span class="keyword">function</span> <span class="title">nameFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// statement</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>命名函数表达式的<strong>好处</strong>是当我们遇到错误时，堆栈跟踪会显示函数名，<strong>容易寻找错误</strong>。</li>
<li>可以看到，上面的两个例子都不以function开头。<strong>不以function开头的函数语句就是函数表达式定义</strong>。</li>
</ol>
<h4 id="1-4-IIFE"><a href="#1-4-IIFE" class="headerlink" title="1.4 IIFE"></a>1.4 IIFE</h4><p>但有时需要在定义函数之后，立即调用该函数（<strong>函数只使用一次</strong>）。这种函数就叫做<strong>立即执行函数</strong>，全称为<strong>立即调用函数表达式</strong>IIFE(Imdiately Invoked Function Expression)</p>
<h3 id="2、立即调用函数表达式"><a href="#2、立即调用函数表达式" class="headerlink" title="2、立即调用函数表达式"></a>2、立即调用函数表达式</h3><p><strong>立即调用函数表达式</strong>（IIFE）是一个<strong>在定义时就会立即执行的 JavaScript 函数。</strong></p>
<p>（1）这是一个被称为 <strong>自执行匿名函数 的设计模式</strong>，主要包含两部分。第一部分是包围在 <strong>圆括号运算符()</strong> 里的一个<strong>匿名函数</strong>。</p>
<p>（2）第二部分再一次使用 <strong>()</strong> 创建了一个<strong>立即执行函数表达式</strong>，JavaScript 引擎到此将直接执行函数。</p>
<h4 id="写法"><a href="#写法" class="headerlink" title="写法"></a>写法</h4><p>（1）【最常用的两种办法】</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 推荐使用</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125;());</span><br><span class="line"><span class="comment">// 也可以</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125;)();</span><br></pre></td></tr></table></figure>

<p>（2）【其他写法】</p>
<p>在Javascript里圆括号内不能包含语句，<strong>当解释器对代码进行解释的时候遇到圆括号就认为这里面是表达式，然后遇到function关键字就认为这是一个函数表达式，而不是函数声明</strong>。而更加奇妙的是只要是能将后面语句预先解释为表达式都可以，不一定是分分组操作符，于是立即执行函数表达式有了五花八门的写法，如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; counter1(); &#125;());</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; counter1(); &#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; counter1(); &#125;();</span><br><span class="line"><span class="literal">true</span> &amp;&amp; <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; counter1(); &#125;();</span><br><span class="line"><span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; counter1() &#125;();</span><br><span class="line"></span><br><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; counter1(); &#125;();</span><br><span class="line">~<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; counter1(); &#125;();</span><br><span class="line">-<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; counter1(); &#125;();</span><br><span class="line">+<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; counter1(); &#125;();</span><br></pre></td></tr></table></figure>

<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>1、IIFE 中的匿名函数拥有 <strong>独立的词法作用域</strong>。这不仅避免了外界访问此 IIFE 中的变量，而且又不会污染全局作用域。（另一种说法 【构造一个函数作用域，防止污染全局变量】）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;Barry&quot;</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 外部不能访问变量 name</span></span><br><span class="line">name  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>2、 JavaScript <strong>没用私有作用域的概念</strong>，如果是在多人开发的项目，你在全局或局部作用域中声明的变量，可能会被其他人不小心用同名的变量给 <strong>覆盖</strong>，根据JavaScript 函数作用域链的特性，使用这种技术可以模仿一个私有作用域，<strong>匿名函数</strong>作为一个“容器”，“容器”内部可以访问外部的变量，而外部环境不能访问“容器”内部的变量，所以 <code>( function()&#123;…&#125; )()</code> <strong>内部定义的变量不会和外部的变量发生冲突</strong>，俗称“匿名包裹器”或“命名空间”。</p>
<p>3、【注意】将 IIFE 分配给一个变量，不是存储 IIFE 本身，而是<strong>存储 IIFE 执行后返回的结果</strong>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;Barry&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// IIFE 执行后返回的结果</span></span><br><span class="line">result; <span class="comment">// &quot;Barry&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>假设有一个需求，每次调用函数，都返回加1的一个数字(数字初始值为0)</p>
<p><strong>一般情况下，我们会使用全局变量来保存该数字状态</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ++a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add()); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(add()); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p><strong>自定义属性</strong></p>
<p>但上面的方法中，变量a实际上只和add函数相关，却声明为全局变量，不太合适</p>
<p>因此，<span style="color:red;">将变量a更改为函数的自定义属性更为恰当</span></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ++add.count;</span><br><span class="line">&#125;</span><br><span class="line">add.count = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(add()); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(add()); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p><strong>IIFE</strong></p>
<p>其实这样做，还是有问题。有些代码可能会无意中将add.count重置</p>
<p><span style="color:red;">使用IIFE把计数器变量保存为私有变量更安全，同时也可以减少对全局空间的污染</span></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> add =  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++counter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(add()); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(add()); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<hr>

<h2 id="五、异步任务队列-task-queues"><a href="#五、异步任务队列-task-queues" class="headerlink" title="五、异步任务队列  task queues"></a>五、异步任务队列  <code>task queues</code></h2><blockquote>
<p>本文转载自 <a href="https://segmentfault.com/a/1190000019123388">异步任务队列</a></p>
<p>本文是对于异步系列第一篇里提到的<code>evenloop</code>模型中，所提到的任务队列(task queues)的展开分析</p>
<p><em>以下代码均使用chrome浏览器运行 关于浏览器表现的差异在最后做补充</em></p>
</blockquote>
<h3 id="一个典型例子"><a href="#一个典型例子" class="headerlink" title="一个典型例子"></a>一个典型例子</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"><span class="comment">// 第一个异步任务</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二个异步任务</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">&#125;).then(<span class="function">()=&gt;</span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script end&#x27;</span>)</span><br><span class="line"><span class="comment">// 实际输出结果： </span></span><br><span class="line"><span class="comment">// script start</span></span><br><span class="line"><span class="comment">// script end</span></span><br><span class="line"><span class="comment">// promise1</span></span><br><span class="line"><span class="comment">// promise2</span></span><br><span class="line"><span class="comment">// setTimeout</span></span><br></pre></td></tr></table></figure>

<p>根据之前说过的<code>evenloop</code>模型，首先输出<code>script start</code>和<code>script end</code>没有什么问题;<br>但是接下来却发现：<br><strong>先执行了<code>Promise</code>指定的<code>callback</code>而不是<code>setTimeout</code>的<code>callback</code>。</strong>– Why？</p>
<h3 id="两种任务队列"><a href="#两种任务队列" class="headerlink" title="两种任务队列"></a>两种任务队列</h3><p><strong>(<code>microtask queue</code>&amp;<code>macrotask queue</code>)</strong></p>
<p>在之前讨论evenloop模型时，粗略提到了任务队列有2种类型:<code>microtask queue</code>和<code>macrotask queue</code>，他们的区别在于:</p>
<ul>
<li><code>macrotask</code>的执行：是在evenloop的每次循环过程，q取出macrotask queue中可执行的第一个（<em>注意不一定是第一个，因为我们说过例如setTimeout可以指定任务被执行的最少延迟时间，当前macrotask queue的首位保存的任务可能还没有到执行时间，所以queue只是代表<code>callback</code>插入的顺序，不代表执行时也要按照这个顺序</em>）。</li>
<li><code>microtask</code>的执行：在evenloop的每次循环过程之后,<strong>如果当前的执行栈(call stack)为空，那么执行<code>microtask queue</code>中所有可执行的任务</strong></li>
</ul>
<p>（某些文献内容中 直接把<code>macrotask</code>称为<code>task</code>,或者某些中文文章中把它们翻译成”微任务”和”宏任务”，含义都是相似的：macrotask或者task代表相对单独占据evenloop过程一次循环的任务，而microtask有可能在一次循环中执行多个）</p>
<p>现在回头来解析前面的例子：</p>
<ol>
<li>第一次执行主函数，输出<code>script start</code></li>
<li>遇到<code>setTimeout</code>，将对应的callback插入<code>macrotask queue</code></li>
<li>遇到<code>promise</code>，将对应的callback插入<code>microtask queue</code></li>
<li>输出<code>script end</code>，主函数运行结束，执行栈清空，此时开始检查<code>microtask queue</code>，发现里面有可运行的任务，因此按顺序输出<code>promise1</code>和<code>promise2</code></li>
<li><code>microtask queue</code>执行完，开始新一轮循环，从<code>macrotask queue</code>取出<code>setTimeout</code>任务并执行，输出<code>setTimeout</code></li>
<li>结束，呈现上面的输出结果。</li>
</ol>
<p>常见异步操作对应的回调函数任务类型如下：</p>
<ul>
<li>macrotask: <code>setTimeout</code>, <code>setInterval</code>, <code>setImmediate</code>, <code>requestAnimationFrame</code>, <code>I/O</code>, <code>UI rendering</code></li>
<li>microtask: <code>process.nextTick</code>, <code>Promises</code>, <code>Object.observe</code>, <code>MutationObserver</code></li>
</ul>
<p>大概可以这样区分：和html交互密切相关的异步操作，一般是<code>macrotasks</code>；由<code>emcascript</code>的相关接口返回的异步操作，一般是<code>microtasks</code></p>
<h3 id="如何判断执行顺序"><a href="#如何判断执行顺序" class="headerlink" title="如何判断执行顺序"></a>如何判断执行顺序</h3><p>接下来看一个更复杂的例子，帮助理解不同异步任务的执行顺序</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.outer</span> &#123;</span></span><br><span class="line">        padding: 30px;</span><br><span class="line">        background-color: aqua;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.inner</span> &#123;</span></span><br><span class="line">        height: 100px;</span><br><span class="line">        background-color: brown;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span>outer</span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span>inner<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> outer = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.outer&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> inner = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.inner&#x27;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">// Let&#x27;s listen for attribute changes on the</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// outer element</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> MutationObserver(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;mutate&#x27;</span>);</span></span><br><span class="line">    &#125;).observe(outer, &#123;</span><br><span class="line"><span class="javascript">        attributes: <span class="literal">true</span></span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">// Here&#x27;s a click listener…</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">onClick</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;click&#x27;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;timeout&#x27;</span>);</span></span><br><span class="line">        &#125;, 0);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;promise&#x27;</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        outer.setAttribute(<span class="string">&#x27;data-random&#x27;</span>, <span class="built_in">Math</span>.random());</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">// …which we&#x27;ll attach to both elements</span></span></span><br><span class="line"><span class="javascript">    inner.addEventListener(<span class="string">&#x27;click&#x27;</span>, onClick);</span></span><br><span class="line"><span class="javascript">    outer.addEventListener(<span class="string">&#x27;click&#x27;</span>, onClick);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行以上代码，可以在浏览器看到两个嵌套的div（如图）:</p>
<p><img data-src="js-async-1.png"></p>
<p><strong>点击inner部分</strong>，打开chrome的调试器，可以看到console打出的结果是:</p>
<p><span style="color:red;"></span></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>The Starting Point of Blogs</title>
    <url>/2020/08/18/The-Starting-Point-of-Blogs/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Moustache’s First Blog 介绍 <code>Hexo</code>+<code>Github Page</code>的步骤和遇到的问题，并在此列出参考的文章，衷心感谢。</p>
<ul>
<li><a href="https://blog.csdn.net/jiunian_2761/article/details/97388534">Hexo博客搭建记录（一）：本地搭建以及部署到Github</a></li>
<li><a href="https://blog.csdn.net/jiunian_2761/article/details/97388745Hexo">博客搭建记录（二）：基本主题设置以及美化</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/30836436">Hexo+Next主题优化</a></li>
<li><a href="https://hexo.io/zh-cn/">Hexo官方文档</a></li>
</ul>
<a id="more"></a>

<h2 id="一、环境准备"><a href="#一、环境准备" class="headerlink" title="一、环境准备"></a>一、环境准备</h2><ul>
<li>Node.js</li>
<li>Npm</li>
<li>Git</li>
</ul>
<h2 id="二、配置本地Hexo"><a href="#二、配置本地Hexo" class="headerlink" title="二、配置本地Hexo"></a>二、配置本地Hexo</h2><h3 id="1-配置hexo全局控制命令"><a href="#1-配置hexo全局控制命令" class="headerlink" title="1.配置hexo全局控制命令"></a>1.配置hexo全局控制命令</h3><p>​    在cmd或者其他命令行工具下输入如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli </span><br></pre></td></tr></table></figure>

<h3 id="2-下载Hexo-工具"><a href="#2-下载Hexo-工具" class="headerlink" title="2.下载Hexo 工具"></a>2.下载Hexo 工具</h3><h4 id="2-1初始化博客目录"><a href="#2-1初始化博客目录" class="headerlink" title="2.1初始化博客目录"></a>2.1初始化博客目录</h4><p>在准备好的一个目录下存放自己的博客网站文件，例如我的是 <strong>/e/blog</strong>，也就是在E盘根目录新建了一个<strong>blog</strong>文件夹</p>
<p>然后我们进入该目录，点击鼠标右键，然后点击 <code>git bash</code> 出现一个命令窗口，接下来我们的大多数操作都用它来完成。</p>
<blockquote>
<p><code>Git Bash</code>在这里并不是唯一的选择，如您熟悉其他命令工具，也可以使用其他工具，这里使用<code>Git Bash</code>是为了减少更多不必要的麻烦</p>
</blockquote>
<p>在 <code>Git Bash</code>窗口下输入如下命令：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>

<p>按下回车Enter，<code>Git bash</code> 会自动下载相关文件</p>
<h4 id="2-2-本地生成运行"><a href="#2-2-本地生成运行" class="headerlink" title="2.2 本地生成运行"></a>2.2 本地生成运行</h4><p>在<code>Git Bash</code>窗口下，依次执行：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>这样，Hexo会默认运行在你本机的4000端口上，然后我们在浏览器中输入<code>http://localhost:4000</code>即可显示主题为<code>landscaped</code> 的页面</p>
<h2 id="三、部署到GitPage"><a href="#三、部署到GitPage" class="headerlink" title="三、部署到GitPage"></a>三、部署到GitPage</h2><blockquote>
<p>这个步骤开始前，请确保你已经注册了Github账号，且已经配置好了相关信息，配置方法请向上翻阅 <strong>二、安装Git</strong> 环节下。</p>
</blockquote>
<h3 id="1-在Github创建仓库。"><a href="#1-在Github创建仓库。" class="headerlink" title="1.在Github创建仓库。"></a>1.在Github创建仓库。</h3><p>打开 <a href="https://github.com/">Github官网</a> 登陆你的Github账号，点击页面右上角的 <code>+</code> 、<code>New repository</code>新建一个<code>repository</code>仓库</p>
<blockquote>
<p>为避免麻烦，这里仓库名必须按照<code>yourusername.github.io</code>规范填写，填写完仓库名后，我们点击<code>Create repository</code>按钮，然后等待其创建完成。复制该项目的HTTP链接<code>https://github.com/yourusername/yourusername.github.io.git</code></p>
</blockquote>
<blockquote>
<p><code>yourusername</code>指的就是你的github用户名，本文中出现的该字段都表示这个意思。</p>
</blockquote>
<h3 id="2-Hexo-配置"><a href="#2-Hexo-配置" class="headerlink" title="2.Hexo 配置"></a>2.Hexo 配置</h3><p>打开 <code>Git Bash</code> 切换到博客的根目录，输入：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install hexo-depolyer-git --save    </span><br></pre></td></tr></table></figure>

<p>然后输入：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">vim _config.yml</span><br></pre></td></tr></table></figure>

<p>进入站点配置文件编辑模式，我们向下翻到底部，可以看到 <code>depoly</code> 字段</p>
<p>在英文输入模式下，按键盘上的 <code>i</code>键进入编辑模式，将<code>depoly</code>字段编辑如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: </span><br><span class="line">          github: https:<span class="comment">//github.com/yourusername/yourusername.github.io.git</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<p>注意这里<code>:</code>后面一定要加空格，不然会出错。</p>
<p>然后我们按<code>Esc</code> 键，输入<code>:wq</code> 保存退出</p>
<h3 id="3-完成部署"><a href="#3-完成部署" class="headerlink" title="3.完成部署"></a>3.完成部署</h3><p>在命令行输入并执行：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>其中，<code>hexo d</code> 则是将本地文件推送到远程。</p>
<p>在第一次推送时，需要输入github  <code>userNam</code>e和<code>password</code></p>
<h2 id="四、使用Next主题"><a href="#四、使用Next主题" class="headerlink" title="四、使用Next主题"></a>四、使用Next主题</h2><h3 id="1-更改主题"><a href="#1-更改主题" class="headerlink" title="1. 更改主题"></a>1. 更改主题</h3><p><a href="https://hexo.io/themes/">Hexo主题库</a>可以找到更多主题，以下以Next为例</p>
<blockquote>
<p>在Hexo目录下有两份重要的配置文件，其名称都是<code>_config.yml</code> 。其中，一份位于站点根目录下，主要包含<code>Hexo</code>的自身配置，另一份位于主题目录下，主要用于配置主题相关的选项。<br>在接下来的描述中，我将前者称为 <strong>站点配置文件</strong>，后者称为 <strong>主题配置文件</strong> 。</p>
</blockquote>
<h4 id="1-1-安装Next"><a href="#1-1-安装Next" class="headerlink" title="1.1 安装Next"></a>1.1 安装Next</h4><p>安装Next主题的方式很简单，利用Git bash 在博客主目录下执行：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>hexo-theme-<span class="keyword">next</span> themes/<span class="keyword">next</span></span><br></pre></td></tr></table></figure>

<p>然后我们打开站点配置文件，将theme属性从默认值landscape改为next</p>
<figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line">theme: <span class="keyword">next</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>记住，所有的配置属性<code>:</code> 后面都要加一个空格,这样我们设定的值才会生效。</p>
</blockquote>
<h4 id="1-2-选择不同的Next主题样式"><a href="#1-2-选择不同的Next主题样式" class="headerlink" title="1.2 选择不同的Next主题样式"></a>1.2 选择不同的Next主题样式</h4><p>Next提供了四种主题风格scheme,可以在主题配置文件中配置：</p>
<figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="meta"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="meta"># Scheme Settings</span></span><br><span class="line"><span class="meta"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="meta"># Schemes</span></span><br><span class="line"><span class="meta">#scheme: Muse</span></span><br><span class="line"><span class="meta">#scheme: Mist</span></span><br><span class="line"><span class="meta">#scheme: Pisces</span></span><br><span class="line">scheme: Gemini</span><br></pre></td></tr></table></figure>

<p>这里个人选择 <code>Gemini</code></p>
<h3 id="2-更改站点属性"><a href="#2-更改站点属性" class="headerlink" title="2. 更改站点属性"></a>2. 更改站点属性</h3><h4 id="2-1-更改网站名、语言、作者"><a href="#2-1-更改网站名、语言、作者" class="headerlink" title="2.1 更改网站名、语言、作者"></a>2.1 更改网站名、语言、作者</h4><p>打开站点配置文件，找到<code>site</code>字段，具体修改如下：</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="meta"># 设置网站属性信息</span></span><br><span class="line"><span class="meta"># Site:</span></span><br><span class="line"><span class="symbol">title:</span> 小白的博客 <span class="meta">#网站标题（博客站点名字）。</span></span><br><span class="line"><span class="symbol">subtitle:</span> 小小白 <span class="meta">#网站副标题，显示在标题下方</span></span><br><span class="line"><span class="symbol">description:</span> 我是小白 <span class="meta">#个人描述，类似签名，用于搜索引擎对站点的描述，建议在里面加上你的站点的关键词</span></span><br><span class="line"><span class="symbol">keywords:</span> </span><br><span class="line"><span class="symbol">author:</span> 小白 <span class="meta">#博客文章作者</span></span><br><span class="line"><span class="symbol">language:</span> <span class="built_in">zh</span>-CN  <span class="meta">#设置博客站点语言为中文</span></span><br><span class="line"><span class="symbol">timezone:</span>  <span class="meta">#设置时区，默认当前电脑时区 一般设置为 Asia/Shanghai</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-更改blog-favicon"><a href="#2-2-更改blog-favicon" class="headerlink" title="2.2 更改blog favicon"></a>2.2 更改blog favicon</h4><p>博客网站的图标可以在<a href="https://www.easyicon.net/">easyicon</a>、<a href="http://www.bitbug.net/">bitbug</a>、<a href="https://www.iconfont.cn/plus/user/detail?uid=41718">iconfont</a>等网站选择和制作，然后选择或者创建相应大小的图标文件，放置在blog/themes/next/sources/images目录下，并在主题配置文件中进行如下配置，只需要设置small和medium两个就可以：</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">favicon:</span>  </span><br><span class="line"><span class="symbol">    small:</span> <span class="meta-keyword">/images/</span><span class="number">16</span>x16.png  </span><br><span class="line"><span class="symbol">    medium:</span> <span class="meta-keyword">/images/</span><span class="number">32</span>x32.png  </span><br><span class="line"><span class="symbol">    apple_touch_icon:</span> <span class="meta-keyword">/images/</span><span class="number">128</span>x128.png  </span><br><span class="line"><span class="symbol">    safari_pinned_tab:</span> <span class="meta-keyword">/images/</span>logo2.svg</span><br></pre></td></tr></table></figure>

<h3 id="3-菜单栏"><a href="#3-菜单栏" class="headerlink" title="3. 菜单栏"></a>3. 菜单栏</h3><h4 id="3-1-显示更多栏目"><a href="#3-1-显示更多栏目" class="headerlink" title="3.1 显示更多栏目"></a>3.1 显示更多栏目</h4><p>在主题配置文件中修改如下：</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line"><span class="symbol">  home:</span> / || home <span class="meta"># 首页</span></span><br><span class="line"><span class="symbol">  about:</span> <span class="meta-keyword">/about/</span> || user <span class="meta"># 关于</span></span><br><span class="line"><span class="symbol">  tags:</span> <span class="meta-keyword">/tags/</span> || tags <span class="meta"># 标签</span></span><br><span class="line"><span class="symbol">  categories:</span> <span class="meta-keyword">/categories/</span> || th <span class="meta"># 分类</span></span><br><span class="line"><span class="symbol">  archives:</span> <span class="meta-keyword">/archives/</span> || archive  <span class="meta"># 归档</span></span><br><span class="line">  <span class="meta"># schedule: /schedule/ || calendar # 日历</span></span><br><span class="line">  <span class="meta"># sitemap: /sitemap.xml || sitemap # 站点地图</span></span><br><span class="line">  <span class="meta"># commonweal: /404/ || heartbeat # 腾讯公益404</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-图标和内容量"><a href="#3-2-图标和内容量" class="headerlink" title="3.2 图标和内容量"></a>3.2 图标和内容量</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span> <span class="comment"># 是否显示各个页面的图标</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">true</span> <span class="comment"># 是否显示分类/标签/归档页的内容量</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-添加分类、标签、关于菜单项"><a href="#3-3-添加分类、标签、关于菜单项" class="headerlink" title="3.3 添加分类、标签、关于菜单项"></a>3.3 添加分类、标签、关于菜单项</h4><p>首先打开主题下的配置文件_config.yml，然后搜索menu找到如下配置项，将about、tags、categories前的#号去掉，就开启了关于、标签和分类标签，当然还有其他菜单项也可以开启</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line"><span class="symbol">  home:</span> / || home</span><br><span class="line"><span class="symbol">  about:</span> <span class="meta-keyword">/about/</span> || user</span><br><span class="line"><span class="symbol">  tags:</span> <span class="meta-keyword">/tags/</span> || tags</span><br><span class="line"><span class="symbol">  categories:</span> <span class="meta-keyword">/categories/</span> || th</span><br><span class="line"><span class="symbol">  archives:</span> <span class="meta-keyword">/archives/</span> || archive</span><br><span class="line">  <span class="meta">#schedule: /schedule/ || calendar</span></span><br></pre></td></tr></table></figure>


<p>需运行如下命令新建相关页面</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">hexo new<span class="built_in"> page </span><span class="string">&quot;about&quot;</span></span><br><span class="line">hexo new<span class="built_in"> page </span><span class="string">&quot;tags&quot;</span></span><br><span class="line">hexo new<span class="built_in"> page </span><span class="string">&quot;categories&quot;</span></span><br></pre></td></tr></table></figure>

<p>打开各页面对应的index.md文件，编辑如下内容</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">title</span>: about  # 在页面中显示的title</span><br><span class="line"><span class="attribute">date</span>: <span class="number">2019</span>-<span class="number">06</span>-<span class="number">25</span> <span class="number">19</span>:<span class="number">16</span>:<span class="number">17</span></span><br><span class="line"><span class="attribute">type</span>: <span class="string">&quot;about&quot;</span>  # 为固定内容，其他对应  <span class="string">&quot;tags&quot;</span>  <span class="string">&quot;categories&quot;</span></span><br></pre></td></tr></table></figure>

<p>然后在发布的博文开头添加<code>tag</code>s和<code>categories</code>,如：</p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">title: The Starting Point of Blogs</span><br><span class="line">urlname: The Starting Point of Blogs</span><br><span class="line">date: 2020<span class="string">-08</span><span class="string">-18</span> 13:56:39</span><br><span class="line"><span class="keyword">tags:</span> [hexo部署,next使用]   #new</span><br><span class="line">categories: Tool&amp;Platform   #new</span><br></pre></td></tr></table></figure>

<h4 id="3-4-本地搜索"><a href="#3-4-本地搜索" class="headerlink" title="3.4 本地搜索"></a>3.4 本地搜索</h4><p>在你站点的根目录下</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<p>打开 <code>Hexo</code> 站点的 <code>_config.yml</code>,添加配置</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure>

<p>打开 <code>themes/next/_config.yml</code> ,搜索关键字 <code>local_search</code> ,设置为 <code>true</code>：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Local search</span><br><span class="line"># Dependencies: https://github.com/flashlab/hexo-generator-search</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br><span class="line">  # if auto, trigger search by changing input</span><br><span class="line">  # if manual, trigger search by pressing enter key or search button</span><br><span class="line">  trigger: auto</span><br><span class="line">  # show top n results per article, show all results by setting to -1</span><br><span class="line">  top_n_per_article: 1</span><br></pre></td></tr></table></figure>

<h3 id="4-侧边栏"><a href="#4-侧边栏" class="headerlink" title="4. 侧边栏"></a>4. 侧边栏</h3><p>以下设置都是在 <strong>主题配置</strong> 文件中</p>
<h4 id="4-1-显示可跳转-日志-分类-标签页-的链接"><a href="#4-1-显示可跳转-日志-分类-标签页-的链接" class="headerlink" title="4.1 显示可跳转 日志 / 分类 / 标签页 的链接"></a>4.1 显示可跳转 日志 / 分类 / 标签页 的链接</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Posts / Categories / Tags in sidebar.</span></span><br><span class="line"><span class="attr">site_state:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-社交信息设置"><a href="#4-2-社交信息设置" class="headerlink" title="4.2 社交信息设置"></a>4.2 社交信息设置</h4><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="attribute">social</span>:</span><br><span class="line">  <span class="attribute">GitHub</span>: <span class="attribute">https</span>:<span class="comment">//github.com/yourname || github</span></span><br><span class="line">  <span class="number">#E</span><span class="attribute">-Mail</span>: <span class="attribute">mailto</span>:yourname<span class="variable">@gmail</span>.com || envelope</span><br><span class="line">  <span class="attribute">Weibo</span>: <span class="attribute">https</span>:<span class="comment">//weibo.com/yourname || weibo</span></span><br><span class="line">  #<span class="attribute">Google</span>: <span class="attribute">https</span>:<span class="comment">//plus.google.com/yourname || google</span></span><br><span class="line">  #<span class="attribute">Twitter</span>: <span class="attribute">https</span>:<span class="comment">//twitter.com/yourname || twitter</span></span><br><span class="line">  <span class="number">#FB</span> <span class="attribute">Page</span>: <span class="attribute">https</span>:<span class="comment">//www.facebook.com/yourname || facebook</span></span><br><span class="line">  #VK <span class="attribute">Group</span>: <span class="attribute">https</span>:<span class="comment">//vk.com/yourname || vk</span></span><br><span class="line">  #<span class="attribute">StackOverflow</span>: <span class="attribute">https</span>:<span class="comment">//stackoverflow.com/yourname || stack-overflow</span></span><br><span class="line">  #<span class="attribute">YouTube</span>: <span class="attribute">https</span>:<span class="comment">//youtube.com/yourname || youtube</span></span><br><span class="line">  #<span class="attribute">Instagram</span>: <span class="attribute">https</span>:<span class="comment">//instagram.com/yourname || instagram</span></span><br><span class="line">  #<span class="attribute">Skype</span>: <span class="attribute">skype</span>:yourname?call|chat || skype</span><br></pre></td></tr></table></figure>

<p>Next 默认给出了一些模板，我们只要将其中的链接改为自己的链接就可以了，当然你也可以自己定义，格式为</p>
<p>名字: 链接 || 图标名，图标必须是<a href="http://fontawesome.dashgame.com/">FontAwesome</a>网站中能找到的图标名。</p>
<p>例如我添加我的博客地址：</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="attr">qianfanguojin:</span> <span class="attr">https:</span><span class="comment">//qianfanguojin.github.io/ || codepen </span></span><br></pre></td></tr></table></figure>

<h4 id="4-3-圆形头像设置"><a href="#4-3-圆形头像设置" class="headerlink" title="4.3 圆形头像设置"></a>4.3 圆形头像设置</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="comment"># In theme directory (source/images): /images/avatar.gif</span></span><br><span class="line">  <span class="comment"># In site directory (source/uploads): /uploads/avatar.gif</span></span><br><span class="line">  <span class="comment"># You can also use other linking images.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.jpg</span> <span class="comment">#头像文件目录</span></span><br><span class="line">  <span class="comment"># If true, the avatar would be dispalyed in circle.</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span> <span class="comment">#设置鼠标放在头像上面是否旋转</span></span><br><span class="line">  <span class="comment"># If true, the avatar would be rotated with the cursor.</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">true</span> <span class="comment">#头像是否设为圆形</span></span><br></pre></td></tr></table></figure>

<p>将自己喜欢的头像头像按照需求自己更换自己喜欢的就可以了，不过这里要注意一下头像可能会变成椭圆，如果头像是椭圆的，是因为图片不是一个正方形的图片，找到一个宽高像素一样的的图片即可。</p>
<h5 id="设置头像边框为圆形框"><a href="#设置头像边框为圆形框" class="headerlink" title="设置头像边框为圆形框"></a>设置头像边框为圆形框</h5><p>打开位于 <code>themes/next/source/css/_common/components/sidebar/sidebar-author.syl</code> 文件,修改如下:</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">.site-author-image &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  padding: $site-author-image-padding;</span><br><span class="line">  max-width: $site-author-image-width;</span><br><span class="line">  height: $site-author-image-height;</span><br><span class="line">  border: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line"> // 修改头像边框</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  -webkit-border-radius: 50%;</span><br><span class="line">  -moz-border-radius: 50%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-4-设置侧边栏社交图标"><a href="#4-4-设置侧边栏社交图标" class="headerlink" title="4.4 设置侧边栏社交图标"></a>4.4 设置侧边栏社交图标</h4><p>打开 <code>themes/next/_config.yml</code> 文件,搜索关键字 <code>social_icons</code> ，添加社交站点名称（注意大小写）图标，<a href="https://link.zhihu.com/?target=http://fontawesome.dashgame.com/">Font Awesome</a>图标</p>
<h4 id="4-5-RSS"><a href="#4-5-RSS" class="headerlink" title="4.5 RSS"></a>4.5 RSS</h4><p>在你 <code>Hexo</code> 站点目录下：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>

<p>打开 <code>Hexo</code> 站点下的 <code>_config.yml</code> ,添加如下配置：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># feed</span><br><span class="line"># Dependencies: https://github.com/hexojs/hexo-generator-feed</span><br><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br><span class="line">  hub:</span><br><span class="line">  content:</span><br></pre></td></tr></table></figure>

<h4 id="4-6-友情链接"><a href="#4-6-友情链接" class="headerlink" title="4.6 友情链接"></a>4.6 友情链接</h4><p>打开 <code>themes/next/_config.yml</code> 文件,搜索关键字 <code>Blog rolls</code>：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Blog rolls</span><br><span class="line">links_title: 友情链接 #标题</span><br><span class="line">links_layout: block #布局，一行一个连接</span><br><span class="line">#links_layout: inline</span><br><span class="line">links: #连接</span><br><span class="line">  baidu: http://example.com/</span><br><span class="line">  google: http://example.com/</span><br></pre></td></tr></table></figure>

<h4 id="4-7-配置解读"><a href="#4-7-配置解读" class="headerlink" title="4.7 配置解读"></a>4.7 配置解读</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#自动生成目录</span></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span> <span class="comment">#自动产生目录编号</span></span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span> <span class="comment">#标题过长是否换行</span></span><br><span class="line">  <span class="comment"># If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">false</span> <span class="comment"># 是否显示所有等级的目录项。</span></span><br><span class="line">  <span class="comment"># Maximum heading depth of generated toc. You can set it in one post through `toc_max_depth` in Front-matter.</span></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">6</span> <span class="comment">#最大标题嵌套个数</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># Sidebar Position.#侧边栏的位置</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">  <span class="comment">#position: right</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Manual define the sidebar width. If commented, will be default for:</span></span><br><span class="line">  <span class="comment"># Muse | Mist: 320</span></span><br><span class="line">  <span class="comment"># Pisces | Gemini: 240</span></span><br><span class="line">  <span class="comment">#width: 300</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar Display (only for Muse | Mist), available values:</span></span><br><span class="line">  <span class="comment">#  - post    expand on posts automatically. Default.</span></span><br><span class="line">  <span class="comment">#  - always  expand for all pages automatically.</span></span><br><span class="line">  <span class="comment">#  - hide    expand only when click on the sidebar toggle icon.</span></span><br><span class="line">  <span class="comment">#  - remove  totally remove sidebar including sidebar toggle.</span></span><br><span class="line">  <span class="attr">display:</span> <span class="string">post</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar offset from top menubar in pixels (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="attr">offset:</span> <span class="number">12</span> <span class="comment"># 侧边栏相对主菜单的像素距离</span></span><br><span class="line">  <span class="comment"># Enable sidebar on narrow view (only for Muse | Mist).</span></span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">false</span> <span class="comment">#在手机上侧边栏是否显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回顶部</span></span><br><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="comment"># Back to top in sidebar.</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span>  <span class="comment">#侧边栏显示返回顶部信息,默认显示在页面右下方</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="comment">#显示百分比</span></span><br></pre></td></tr></table></figure>

<h3 id="5-页面设置"><a href="#5-页面设置" class="headerlink" title="5. 页面设置"></a>5. 页面设置</h3><h4 id="5-1-鼠标点击红心"><a href="#5-1-鼠标点击红心" class="headerlink" title="5.1 鼠标点击红心"></a>5.1 鼠标点击红心</h4><p>目前网上大多数文章都是在<code>themes/next/source/js/src</code> 下新建文件，但笔者写这篇文章时最新版Next已经没有<code>src</code>文件夹了 ，于是，我们可以在<code>themes/next/source/js/</code>下新建<code>clicklove.js</code>内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">&quot;left:&quot;</span>+d[e].x+<span class="string">&quot;px;top:&quot;</span>+d[e].y+<span class="string">&quot;px;opacity:&quot;</span>+d[e].alpha+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].scale+<span class="string">&quot;,&quot;</span>+d[e].scale+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].color+<span class="string">&quot;;z-index:99999&quot;</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;div&quot;</span>);a.className=<span class="string">&quot;heart&quot;</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX<span class="number">-5</span>,<span class="attr">y</span>:e.clientY<span class="number">-5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;style&quot;</span>);a.type=<span class="string">&quot;text/css&quot;</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">&quot;rgb(&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;)&quot;</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">setTimeout</span>(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>

<p>然后在修改<code>themes/next/layout/_layout.swig</code> 文件末尾添加</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!-- 页面点击小红心 --&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> theme.clicklove %&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/clicklove.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>

<p>注意</p>
<blockquote>
<p>很多人配置正确但不显示的原因主要出在这里，也就是<code>src</code> 后面的文件链接错误，hexo中使用的是相对路径，也就是说,只要你不指定为绝对路径,设置的链接都将是<code>root+url</code>的形式，一般来说，大多数用户默认的<code>root</code> 都为<code>/</code> ，但是有些情况，例如设置了Git Page ,要修改<code>root</code>的路径，<code>root</code>路径我们可以在 <strong>站点配置文件</strong> 中找到：</p>
</blockquote>
<figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"># URL</span><br><span class="line">\## <span class="keyword">If</span> your site <span class="keyword">is</span> put <span class="keyword">in</span> a subdirectory, <span class="keyword">set</span> url <span class="keyword">as</span> <span class="string">&#x27;http://yoursite.com/child&#x27;</span> <span class="keyword">and</span> root <span class="keyword">as</span> <span class="string">&#x27;/child/&#x27;</span></span><br><span class="line">url: http:<span class="comment">//yoursite.com</span></span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line"> trailing_index: <span class="keyword">true</span> # <span class="keyword">Set</span> <span class="keyword">to</span> <span class="keyword">false</span> <span class="keyword">to</span> <span class="keyword">remove</span> trailing <span class="string">&#x27;index.html&#x27;</span> <span class="keyword">from</span> permalinks</span><br><span class="line"> trailing_html: <span class="keyword">true</span> # <span class="keyword">Set</span> <span class="keyword">to</span> <span class="keyword">false</span> <span class="keyword">to</span> <span class="keyword">remove</span> trailing <span class="string">&#x27;.html&#x27;</span> <span class="keyword">from</span> permalinks</span><br></pre></td></tr></table></figure>

<p><img data-src="problem1.jpg"></p>
<p>上图就是在我设置了Git Page后 <code>root</code>路径的值，在这种情况下，我们在修改<code>themes/next/layout/_layout.swig</code> 文件时，<code>src</code> 的路径都应该加上<code>root</code> 的路径值，因此，在这种情况下代码应修改为：</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!-- 页面点击小红心 --&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> theme.clicklove %&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/fa/js/clicklove.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>

<p>确定无误后最后在主题配置文件末尾添加：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示页面红心</span></span><br><span class="line"><span class="attr">clicklove:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>另外还有一个效果，跟那个红心是差不多的（只能选一个），首先在<code>themes/next/source/js/src</code>里面建一个叫<code>fireworks.js</code>的文件，代码如下：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[<span class="number">-1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length<span class="number">-1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;<span class="string">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[<span class="number">-1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length<span class="number">-1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;;</span><br></pre></td></tr></table></figure>

<p>打开<code>themes/next/layout/_layout.swig</code>,在<code>&lt;/body&gt;</code>上面写下如下代码：</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> theme.fireworks %&#125;</span><span class="xml">   <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">&quot;fireworks&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span>    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/src/fireworks.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>

<p>打开主题配置文件，在里面最后写下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fireworks</span></span><br><span class="line"><span class="attr">fireworks:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="5-2-添加动态背景"><a href="#5-2-添加动态背景" class="headerlink" title="5.2 添加动态背景"></a>5.2 添加动态背景</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置动态背景</span></span><br><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-nest</span></span><br><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">true</span> <span class="comment"># display on mobile or not</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;0,0,255&quot;</span> <span class="comment"># RGB values, use `,` to separate</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.5</span> <span class="comment"># the opacity of line: 0~1</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">170</span> <span class="comment"># the number of lines</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># JavaScript 3D library.</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-three</span></span><br><span class="line"><span class="attr">three:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">delay:</span> <span class="literal">false</span> <span class="comment"># Set true to further delay loading</span></span><br><span class="line">  <span class="attr">three_waves:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">canvas_lines:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">canvas_sphere:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Canvas-ribbon</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-ribbon</span></span><br><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">300</span> <span class="comment"># The width of the ribbon</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span> <span class="comment"># The transparency of the ribbon</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># The display level of the ribbon</span></span><br></pre></td></tr></table></figure>

<p>新版Next已经支持了上面三种动态背景方式，大家想用哪种就将该项的<code>enable</code> 设为 <code>true</code>,具体效果大家自己尝试，一般用的是第一种。</p>
<p>当然，指明要用那种，但是Next没有自带该动画的包，我们要自己下载，链接就在注释中<code># Dependencies</code> 项后面 ，例如我下载第一种：</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/theme</span>-<span class="keyword">next</span>/theme-<span class="keyword">next</span>-canvas-nest themes/<span class="keyword">next</span>/source/<span class="class"><span class="keyword">lib</span>/<span class="title">canvas</span>-<span class="title">nest</span></span></span><br></pre></td></tr></table></figure>

<p>链接后的是指定下载后放到的文件夹名，大家要注意是放在<code>lib</code> 下且文件夹名字应该和上面的设置项名字一样。</p>
<h5 id="个人使用了canvas-ribbon的背景，且优先使用cdn引入"><a href="#个人使用了canvas-ribbon的背景，且优先使用cdn引入" class="headerlink" title="个人使用了canvas-ribbon的背景，且优先使用cdn引入"></a>个人使用了<code>canvas-ribbon</code>的背景，且优先使用cdn引入</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line"> <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">size:</span> <span class="number">300</span> <span class="comment"># The width of the ribbon</span></span><br><span class="line"> <span class="attr">alpha:</span> <span class="number">0.4</span> <span class="comment"># The transparency of the ribbon</span></span><br><span class="line"> <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># The display level of the ribbon</span></span><br></pre></td></tr></table></figure>

<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">\<span class="comment"># Internal version: 1.0.0</span></span><br><span class="line">canvas_ribbon: <span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>theme-<span class="keyword">next</span><span class="regexp">/theme-next-canvas-    ribbon@1/</span>canvas-ribbon.js</span><br><span class="line">\<span class="comment"># canvas_ribbon:</span></span><br></pre></td></tr></table></figure>

<h4 id="5-3-博客底部基本布局"><a href="#5-3-博客底部基本布局" class="headerlink" title="5.3 博客底部基本布局"></a>5.3 博客底部基本布局</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 博客底部布局</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># Specify the date when the site was setup. If not defined, current year will be used.</span></span><br><span class="line">  <span class="comment">#since: 2015 #设置建站时间，不设置则默认为当前年份</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Icon between year and copyright info.</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line">    <span class="comment"># Icon name in Font Awesome. See: https://fontawesome.com/v4.7.0/icons/</span></span><br><span class="line">    <span class="comment"># `heart` is recommended with animation in red (#ff0000).</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">heart</span>  <span class="comment"># 作者图标，默认为author，自定义的图标需来自fontawesome中</span></span><br><span class="line">    <span class="comment"># If you want to animate the icon, set it to true.</span></span><br><span class="line">    <span class="attr">animated:</span> <span class="literal">true</span>  <span class="comment"># 图标是否闪动</span></span><br><span class="line">    <span class="comment"># Change the color of icon, using Hex Code.</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;#808080&quot;</span> <span class="comment"># 图标颜色</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If not defined, `author` from Hexo `_config.yml` will be used.</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="string">小白</span> <span class="comment">#设置底部显示的名字，默认为站点配置文件的author名字</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">powered:</span></span><br><span class="line">    <span class="comment"># Hexo link (Powered by Hexo).</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># 是否显示 Powered By Hexo</span></span><br><span class="line">    <span class="comment"># Version info of Hexo after Hexo link (vX.X.X).</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">false</span> <span class="comment"># 是否显示 Hexo 版本</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="comment"># Theme &amp; scheme info link (Theme - NexT.scheme).</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># 是否显示主题信息</span></span><br><span class="line">    <span class="comment"># Version info of NexT after scheme info (vX.X.X).</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">false</span> <span class="comment"># 是否显示主题版本</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Beian ICP information for Chinese users. See: http://www.beian.miit.gov.cn</span></span><br><span class="line">  <span class="attr">beian:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># 是否显示网站备案信息</span></span><br><span class="line">    <span class="attr">icp:</span></span><br></pre></td></tr></table></figure>

<h4 id="5-4-底部显示busuanzi博客访客-访问次数统计"><a href="#5-4-底部显示busuanzi博客访客-访问次数统计" class="headerlink" title="5.4 底部显示busuanzi博客访客/访问次数统计"></a>5.4 底部显示busuanzi博客访客/访问次数统计</h4><p>修改主题配置文件内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 不蒜子统计功能</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 是否开启busuanzi统计功能</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span> <span class="comment"># 是否统计总访客数</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">user</span> <span class="comment"># 访客数图标</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span> <span class="comment"># 是否显示同级总访问次数</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">eye</span> <span class="comment"># 总访问次数的图标</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span> <span class="comment"># 是否显示单个文章查看次数</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">eye</span> <span class="comment"># 文章被查看次数的图标</span></span><br></pre></td></tr></table></figure>

<h4 id="5-5-右上角显示Github标识"><a href="#5-5-右上角显示Github标识" class="headerlink" title="5.5 右上角显示Github标识"></a>5.5 右上角显示Github标识</h4><p>修改主题配置文件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># `Follow me on GitHub` banner in the top-right corner.</span></span><br><span class="line"><span class="comment"># Github 跳转图标</span></span><br><span class="line"><span class="attr">github_banner:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 功能开关</span></span><br><span class="line">  <span class="attr">permalink:</span> <span class="string">https://github.com/yourname</span> <span class="comment"># Github主页地址</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">Follow</span> <span class="string">me</span> <span class="string">on</span> <span class="string">GitHub</span> <span class="comment"># 鼠标悬停显示的文字</span></span><br></pre></td></tr></table></figure>

<h4 id="5-6-接入网易云播放器"><a href="#5-6-接入网易云播放器" class="headerlink" title="5.6 接入网易云播放器"></a>5.6 接入网易云播放器</h4><p>首先在网易云音乐网页端搜索你想播放的音乐（有版权保护的不行）</p>
<p>在网易云客户端点击生成外链播放器，得到外链的html代码：</p>
<p>后我们将代码粘贴到一个合适的位置，建议在侧边栏，对应的文件是<code>themes/next/layout/_macro/sidebar.swig</code> ，不同的位置效果呈现的效果不同，例如我的：</p>
<figure class="highlight handlebars"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;site-overview-wrap sidebar-panel&#123;% if not display_toc or toc(page.content).length &lt;= 1 %&#125; sidebar-panel-active&#123;% endif %&#125;&quot;</span>&gt;</span>         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;site-overview&quot;</span>&gt;</span>            </span></span><br><span class="line"><span class="xml">    </span><span class="template-variable">&#123;&#123; <span class="name"><span class="builtin-name">partial</span></span>(<span class="name">&#x27;_partials/sidebar/site-overview.swig&#x27;</span>, &#123;&#125;, &#123;cache: theme.cache.enable&#125;) &#125;&#125;</span><span class="xml">                      </span></span><br><span class="line"><span class="xml">    &#123;% for inject_item in theme.injects.sidebar %&#125;             </span></span><br><span class="line"><span class="xml">    </span><span class="template-variable">&#123;&#123; <span class="name"><span class="builtin-name">partial</span></span>(<span class="name">inject_item.layout</span>, inject_item.locals, inject_item.options) &#125;&#125;</span><span class="xml">           &#123;% endfor %&#125;         </span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>         </span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--网易云链接--&gt;</span>         </span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="5-7-浏览页面的时候显示当前浏览进度"><a href="#5-7-浏览页面的时候显示当前浏览进度" class="headerlink" title="5.7 浏览页面的时候显示当前浏览进度"></a>5.7 浏览页面的时候显示当前浏览进度</h4><p>打开 <code>themes/next/_config.yml</code> ,搜索关键字 <code>scrollpercent</code> ,把 <code>false</code> 改为 <code>true</code>。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Scroll percent label in b2t button</span><br><span class="line">  scrollpercent: true</span><br></pre></td></tr></table></figure>

<p>如果想把 <code>top</code>按钮放在侧边栏,打开 <code>themes/next/_config.yml</code> ,搜索关键字 <code>b2t</code> ,把 <code>false</code> 改为 <code>true</code>。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Back to top in sidebar</span><br><span class="line">  b2t: true</span><br><span class="line"></span><br><span class="line">  # Scroll percent label in b2t button</span><br><span class="line">  scrollpercent: true</span><br></pre></td></tr></table></figure>

<h4 id="5-8-添加顶部加载条"><a href="#5-8-添加顶部加载条" class="headerlink" title="5.8 添加顶部加载条"></a>5.8 添加顶部加载条</h4><p>打开 <code>themes/next/_config.yml</code> ，搜索关键字 <code>pace</code> ,设置为 <code>true</code> ,可以更换加载样式：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">Dependencies: https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>theme-<span class="keyword">next</span>-pace</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Progress bar in the top during page loading.</span><br><span class="line">pace: true</span><br><span class="line"># Themes list:</span><br><span class="line">#pace-theme-big-counter</span><br><span class="line">#pace-theme-bounce</span><br><span class="line">#pace-theme-barber-shop</span><br><span class="line">#pace-theme-center-atom</span><br><span class="line">#pace-theme-center-circle</span><br><span class="line">#pace-theme-center-radar</span><br><span class="line">#pace-theme-center-simple</span><br><span class="line">#pace-theme-corner-indicator</span><br><span class="line">#pace-theme-fill-left</span><br><span class="line">#pace-theme-flash</span><br><span class="line">#pace-theme-loading-bar</span><br><span class="line">#pace-theme-mac-osx</span><br><span class="line">#pace-theme-minimal</span><br><span class="line"># For example</span><br><span class="line"># pace_theme: pace-theme-center-simple</span><br><span class="line">pace_theme: pace-theme-flash #替换更换样式</span><br></pre></td></tr></table></figure>

<h4 id="5-9-自定义鼠标样式"><a href="#5-9-自定义鼠标样式" class="headerlink" title="5.9 自定义鼠标样式"></a>5.9 自定义鼠标样式</h4><p>打开 <code>themes/next/source/css/_custom/custom.styl</code> ,在里面写下如下代码：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">// 鼠标样式</span><br><span class="line">  * &#123;</span><br><span class="line">      cursor: url(&quot;http://om8u46rmb.bkt.clouddn.com/sword2.ico&quot;),auto!important</span><br><span class="line">  &#125;</span><br><span class="line">  :active &#123;</span><br><span class="line">      cursor: url(&quot;http://om8u46rmb.bkt.clouddn.com/sword1.ico&quot;),auto!important</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>其中 url 里面必须是 ico 图片，ico 图片可以上传到网上（我是使用七牛云图床），然后获取外链，复制到 url 里就行了</p>
<h3 id="6-文章内容相关"><a href="#6-文章内容相关" class="headerlink" title="6 文章内容相关"></a>6 文章内容相关</h3><h4 id="6-1-文章摘要显示（显示阅读全文按钮）"><a href="#6-1-文章摘要显示（显示阅读全文按钮）" class="headerlink" title="6.1 文章摘要显示（显示阅读全文按钮）"></a>6.1 文章摘要显示（显示阅读全文按钮）</h4><ul>
<li><p>自动形成摘要模式</p>
<p>打开主题配置文件，修改内容如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  </span><br><span class="line">  <span class="attr">length:</span> <span class="number">150</span> <span class="comment"># 截取的内容长度</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Read more button</span></span><br><span class="line"><span class="comment"># If true, the read more button would be displayed in excerpt section.</span></span><br><span class="line"><span class="attr">read_more_btn:</span> <span class="literal">true</span> <span class="comment"># 是否显示阅读全文按钮  </span></span><br></pre></td></tr></table></figure>

<p>但是这样的方式不够自由，我们可以使用如下方式：</p>
</li>
</ul>
<h4 id="6-2-代码块设置"><a href="#6-2-代码块设置" class="headerlink" title="6.2 代码块设置"></a>6.2 代码块设置</h4><p>使用参照如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 代码块设置</span></span><br><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># Available values: normal | night | night eighties | night blue | night bright</span></span><br><span class="line">  <span class="comment"># See: https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line">  <span class="comment"># 代码块主题, 可选的值为 normal; night; night eighties; night blue; night bright</span></span><br><span class="line">  <span class="attr">highlight_theme:</span> <span class="string">night</span></span><br><span class="line">  <span class="comment"># Add copy_button on codeblock</span></span><br><span class="line">  <span class="comment"># 显示复制按钮</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show text copy result.</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span>  <span class="comment"># 按钮显示格式</span></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>

<p>代码块样式的具体内容可以查看<a href="http://theme-next.iissnan.com/theme-settings.html#syntax-highlight-scheme">官方文档</a></p>
<h4 id="6-3-添加打赏"><a href="#6-3-添加打赏" class="headerlink" title="6.3 添加打赏"></a>6.3 添加打赏</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reward (Donate)</span></span><br><span class="line"><span class="comment"># 打赏设置</span></span><br><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line">  <span class="comment"># If true, reward would be displayed in every article by default.</span></span><br><span class="line">  <span class="comment"># You can show or hide reward in a specific article throuth `reward: true | false` in Front-matter.</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 功能开关</span></span><br><span class="line">  <span class="attr">animation:</span> <span class="literal">true</span> <span class="comment"># 动画</span></span><br><span class="line">  <span class="comment">#comment: Donate comment here.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="comment">#wechatpay: /images/wechatpay.png # 微信捐赠二维码图片</span></span><br><span class="line">  <span class="comment">#alipay: /images/alipay.png # 支付宝捐赠二维码图片</span></span><br><span class="line">  <span class="comment">#bitcoin: /images/bitcoin.png # 比特币</span></span><br></pre></td></tr></table></figure>

<h4 id="6-4-添加版权信息"><a href="#6-4-添加版权信息" class="headerlink" title="6.4 添加版权信息"></a>6.4 添加版权信息</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># See: https://creativecommons.org/share-your-work/licensing-types-examples</span></span><br><span class="line"><span class="comment"># Available values of license: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></span><br><span class="line"><span class="comment"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span></span><br><span class="line"><span class="comment"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span> <span class="comment"># 许可协议</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span> <span class="comment"># 侧边栏显示</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span> <span class="comment"># 文章底部显示</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></table></figure>

<p>注意</p>
<blockquote>
<p>版权信息中的本文链接 由主题配置中的   <code>url</code>   控制</p>
</blockquote>
<h4 id="6-5-自定义文章底部版权声明"><a href="#6-5-自定义文章底部版权声明" class="headerlink" title="6.5 自定义文章底部版权声明"></a>6.5 自定义文章底部版权声明</h4><p>效果：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">作者：Dragonstyle</span><br><span class="line">链接：http://www.dragonstyle.win/2017/09/06/Android-Studio个人设置/</span><br><span class="line">來源：简书</span><br><span class="line">版权声明： 本博客所有文章除特别声明外，均采用 CC BY-NC-SA 4.0 许可协议。转载请注明出处！</span><br></pre></td></tr></table></figure>

<p>在目录 <code>themes/next/layout/_macro/</code> 下添加 <code>my-copyright.swig</code> ,内容如下:</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&#123;% if page.copyright %&#125;</span><br><span class="line">&lt;div class=&quot;my_post_copyright&quot;&gt;</span><br><span class="line">  &lt;script src=&quot;//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!-- JS库 sweetalert 可修改路径 --&gt;</span><br><span class="line">  &lt;script type=&quot;text/javascript&quot; src=&quot;http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;p&gt;&lt;span&gt;本文标题:&lt;/span&gt;&#123;&#123; page.title &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;文章作者:&lt;/span&gt;&#123;&#123; theme.author &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;发布时间:&lt;/span&gt;&#123;&#123; page.date.format(&quot;YYYY年MM月DD日 - HH:mm:ss&quot;) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;最后更新:&lt;/span&gt;&#123;&#123; page.updated.format(&quot;YYYY年MM月DD日 - HH:mm:ss&quot;) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;原始链接:&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot; title=&quot;&#123;&#123; page.title &#125;&#125;&quot;&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt;</span><br><span class="line">    &lt;span class=&quot;copy-path&quot;  title=&quot;点击复制文章链接&quot;&gt;&lt;i class=&quot;fa fa-clipboard&quot; data-clipboard-text=&quot;&#123;&#123; page.permalink &#125;&#125;&quot;  aria-label=&quot;复制成功！&quot;&gt;&lt;/i&gt;&lt;/span&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;许可协议:&lt;/span&gt;&lt;i class=&quot;fa fa-creative-commons&quot;&gt;&lt;/i&gt; &lt;a rel=&quot;license&quot; href=&quot;https://creativecommons.org/licenses/by-nc-nd/4.0/&quot; target=&quot;_blank&quot; title=&quot;Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)&quot;&gt;署名-非商业性使用-禁止演绎 4.0 国际&lt;/a&gt; 转载请保留原文链接及作者。&lt;/p&gt;  </span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt; </span><br><span class="line">    var clipboard = new Clipboard(&#x27;.fa-clipboard&#x27;);</span><br><span class="line">    clipboard.on(&#x27;success&#x27;, $(function()&#123;</span><br><span class="line">      $(&quot;.fa-clipboard&quot;).click(function()&#123;</span><br><span class="line">        swal(&#123;   </span><br><span class="line">          title: &quot;&quot;,   </span><br><span class="line">          text: &#x27;复制成功&#x27;,   </span><br><span class="line">          html: false,</span><br><span class="line">          timer: 500,   </span><br><span class="line">          showConfirmButton: false</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;));  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>在目录 <code>themes/next/source/css/_common/components/post/</code> 下添加 <code>my-post-copyright.styl</code>,内容如下:</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">.my_post_copyright &#123;</span><br><span class="line">  width: 85%;</span><br><span class="line">  max-width: 45em;</span><br><span class="line">  margin: 2.8em auto 0;</span><br><span class="line">  padding: 0.5em 1.0em;</span><br><span class="line">  border: 1px solid #d3d3d3;</span><br><span class="line">  font-size: 0.93rem;</span><br><span class="line">  line-height: 1.6em;</span><br><span class="line">  word-break: break-all;</span><br><span class="line">  background: rgba(255,255,255,0.4);</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright p&#123;margin:0;&#125;</span><br><span class="line">.my_post_copyright span &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: 5.2em;</span><br><span class="line">  color: #333333; // title color</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .raw &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 5em;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright a &#123;</span><br><span class="line">  color: #808080;</span><br><span class="line">  border-bottom:0;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright a:hover &#123;</span><br><span class="line">  color: #0593d3; // link color</span><br><span class="line">  text-decoration: underline;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright:hover .fa-clipboard &#123;</span><br><span class="line">  color: #000;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .post-url:hover &#123;</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .copy-path &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 1em;</span><br><span class="line">  +mobile()&#123;display:none;&#125;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .copy-path:hover &#123;</span><br><span class="line">  color: #808080;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改 <code>themes/next/layout/_macro/post.swig</code> ,在代码如下：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.wechat_subscriber.enabled and not is_index %&#125;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;% include &#x27;wechat-subscriber.swig&#x27; %&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"> &#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>之前添加增加如下代码：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">      &#123;% if not is_index %&#125;</span><br><span class="line">        &#123;% include &#x27;my-copyright.swig&#x27; %&#125;</span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>修改 <code>themes/next/source/css/_common/components/post/post.styl</code> 文件，在最后一行增加代码：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">@import &quot;my-post-copyright&quot;</span><br></pre></td></tr></table></figure>

<p>设置新建文章自动开启</p>
<p><code>copyright</code>,即新建文章自动显示自定义的版权声明,设置 <code>your site/scaffolds/post.md</code>文件</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags:</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">categories:</span><br><span class="line">copyright: true #新增,开启</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h4 id="6-6-添加图片"><a href="#6-6-添加图片" class="headerlink" title="6.6 添加图片"></a>6.6 添加图片</h4><ol>
<li><p><strong>设置站点配置<code>_config.yml</code></strong>:将<code>post_asset_folder: false</code>改为<code>post_asset_folder: true</code></p>
</li>
<li><p><strong>安装插件</strong>：在hexo根目录打开Git Bash,执行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>运行<code>hexo n &quot;XXXXXX&quot;</code></strong>,生成XXXXX.md博文时就会在<code>/source/_posts</code>目录下生成XXXXXX的文件夹，将你想在XXXXX博文中插入的照片放置到这个同名文件夹中即可，图片的命名随意。</p>
</li>
<li><p><strong>添加图片</strong>:在想添加的位置写入<code>![](图片名字.图片格式)</code>,例如<code>![](1.png)</code></p>
</li>
</ol>
<h4 id="6-7-添加文章结束提示语"><a href="#6-7-添加文章结束提示语" class="headerlink" title="6.7 添加文章结束提示语"></a>6.7 添加文章结束提示语</h4><blockquote>
<p>提示：原文章中此处出现问题</p>
</blockquote>
<p><img data-src="problem2.png"></p>
<p><strong>核心代码</strong>：</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> not is_index %&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;color: #ccc;font-size:14px;display:flex;justify-content:center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;display:inline-block;&quot;</span>&gt;</span>------ 今天只会更爱哈尼 <span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#f17c67;margin:0 5px;display:inline-block;animation: iconAnimate 1.33s ease-in-out infinite;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-heart&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;display:inline-block;&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>The End of This Article------<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果你想简单一点实现，直接复制这段代码，然后将其插入到 <code>themes/next/layout/_macro/post.swig</code> 文件的如下位置：</li>
</ul>
<p><img data-src="problem2-1.png"></p>
<p>当然，我们大多时候对功能都需要一个灵活性，也就是可以开关。为了实现这样的效果，我们先在<code>themes/next/layout/_macro/</code> 新建 <code>passage-end-tag.swig</code> 文件，将上面的 <strong>核心代码</strong> 添加进去。<br>然后我们修改<code>themes/next/layout/_macro/post.swig</code> 文件 ，将上面简单实现的代码替换成：</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!-- 文章结束表示语--&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      </span><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> not is_index %&#125;</span></span><br><span class="line"><span class="xml">        </span><span class="template-tag">&#123;% <span class="name"><span class="name">include</span></span> &#x27;passage-end-tag.swig&#x27; %&#125;</span></span><br><span class="line"><span class="xml">      </span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>然后，我们在主题配置文件末尾添加：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文章结束提示语</span></span><br><span class="line"><span class="attr">passage_end_tag:</span> </span><br><span class="line"> <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>我们就可以在这里将其设为<code>true</code> 或 <code>false</code> 来控制其显示。</p>
<blockquote>
<p>个人在配置的时候，使用<code>&lt;i class=&quot;fa fa-heart-o&quot; aria-hidden=&quot;true&quot;&gt;</code>一直不被解析，没找到原因，换了一个图标就显示了</p>
</blockquote>
<blockquote>
<p>另外一个问题，如果出现乱码的情况<br><strong>解决办法</strong>：首先是把乱码部分对应的文件用写字板打开，转换其编码格式为<code>UTF-8</code></p>
</blockquote>
<blockquote>
<p>最后一个应该注意的是，结束语是居中显示，需要注意左右两面内容的实际长度一致，否则很丑</p>
</blockquote>
<h4 id="6-8-添加博客字数和阅读时间统计功能"><a href="#6-8-添加博客字数和阅读时间统计功能" class="headerlink" title="6.8 添加博客字数和阅读时间统计功能"></a>6.8 添加博客字数和阅读时间统计功能</h4><p>首先在站点根目录下配置依赖：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-symbols-<span class="keyword">count</span>-<span class="built_in">time</span> <span class="comment">--save</span></span><br></pre></td></tr></table></figure>

<p>然后再站点配置文件中加入以下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">symbols:</span> <span class="literal">true</span> <span class="comment">#是否统计字数</span></span><br><span class="line">  <span class="attr">time:</span> <span class="literal">true</span> <span class="comment">#是否统计阅读时长</span></span><br><span class="line">  <span class="attr">total_symbols:</span> <span class="literal">true</span> <span class="comment">#是否统计总字数</span></span><br><span class="line">  <span class="attr">total_time:</span> <span class="literal">true</span> <span class="comment">#是否统计总阅读时长</span></span><br></pre></td></tr></table></figure>

<p>最后在主题配置文件中修改为以下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字数及访问时间统计</span></span><br><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span>  <span class="comment">#分隔线</span></span><br><span class="line">  <span class="attr">item_text_post:</span> <span class="literal">true</span>  <span class="comment">#文章中的显示是否显示文本</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">true</span>       <span class="comment">#网页底部的显示是否显示文本</span></span><br><span class="line">  <span class="attr">awl:</span> <span class="number">2</span> <span class="comment">#平均每个字符的长度</span></span><br><span class="line">  <span class="attr">wpm:</span> <span class="number">275</span> <span class="comment"># 设定每分钟可阅读的字符数</span></span><br></pre></td></tr></table></figure>

<h4 id="6-9-修改-tag-图标"><a href="#6-9-修改-tag-图标" class="headerlink" title="6.9 修改 tag 图标"></a>6.9 修改 tag 图标</h4><p>默认的 <code>tag</code> 样式为 <code>#</code> 不带图标，我们可以改成使用图标</p>
<p>新版Next 已经帮我们集成了这个功能，我们只要在主题配置文件中修改：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Use icon instead of the symbol # to indicate the tag at the bottom of the post </span></span><br><span class="line"><span class="comment"># 使用标签图标 </span></span><br><span class="line"><span class="attr">tag_icon:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="6-10-设置博客摘要显示"><a href="#6-10-设置博客摘要显示" class="headerlink" title="6.10 设置博客摘要显示"></a>6.10 设置博客摘要显示</h4><p>首先我们需要开启摘要功能，修改主题配置文件：参考该<a href="https://jiangding1990.github.io/2017/04/25/Hexo%E4%BD%BF%E7%94%A8NexT%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE%E4%B8%BB%E9%A1%B5%E6%98%BE%E7%A4%BA%E6%96%87%E7%AB%A0%E6%91%98%E8%A6%81%E6%96%B9%E6%B3%95/">方法</a></p>
<h5 id="solution-1-在文章中使用进行手动截断-推荐"><a href="#solution-1-在文章中使用进行手动截断-推荐" class="headerlink" title="solution 1     在文章中使用进行手动截断(推荐)"></a>solution 1     在文章中使用进行手动截断(<strong>推荐</strong>)</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="solution-2-在文章中的front-matter中添加description，并提供文章摘要"><a href="#solution-2-在文章中的front-matter中添加description，并提供文章摘要" class="headerlink" title="solution 2     在文章中的front-matter中添加description，并提供文章摘要"></a>solution 2     在文章中的<code>front-matter</code>中添加<code>description</code>，并提供文章摘要</h5><p>这种方式只会在首页列表中显示文章的摘要内容，进入文章详情后不会再显示。使用这种方法也可以实现首页文章部分显示的效果</p>
<p>方法如下图所示：</p>
<p><img data-src="problem3.png"></p>
<h5 id="solution-3-自动生成摘要"><a href="#solution-3-自动生成摘要" class="headerlink" title="solution 3     自动生成摘要"></a>solution 3     自动生成摘要</h5><p>想要自动生成文章摘要，需在<code>主题配置</code>文件中添加以下代码：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">150</span></span><br></pre></td></tr></table></figure>

<p>其中的<code>length</code>值为摘要所截取的字符长度。</p>
<h4 id="6-11-设置文章英文链接"><a href="#6-11-设置文章英文链接" class="headerlink" title="6.11 设置文章英文链接"></a>6.11 设置文章英文链接</h4><p>hexo生成的默认文章链接格式为<code>： :year/:month/:day/:title/</code>，这种默认的配置缺点很明显，当文件名是中文的时候url链接里就有中文出现。<br> 可以通过添加<code>urlname</code>字段实现文章的链接为英文，在md文件的Front-matter区域新增<code>urlname</code>属性，值为文章的英文title，参考如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">---</span></span><br><span class="line"><span class="selector-tag">title</span>: 基于<span class="selector-tag">Hexo</span>+<span class="selector-tag">Next</span>的主题优化总结</span><br><span class="line"><span class="selector-tag">urlname</span>: <span class="selector-tag">summary-of-theme-optimization-based-on-hexo</span>&amp;<span class="selector-tag">next</span></span><br><span class="line"><span class="selector-tag">date</span>: 2019<span class="selector-tag">-07-12</span> 20<span class="selector-pseudo">:01</span><span class="selector-pseudo">:26</span></span><br><span class="line"><span class="selector-tag">categories</span>:</span><br><span class="line">  <span class="selector-tag">-</span> 工具</span><br><span class="line"><span class="selector-tag">tags</span>: </span><br><span class="line">  <span class="selector-tag">-</span> <span class="selector-tag">Hexo</span></span><br><span class="line"><span class="selector-tag">---</span></span><br></pre></td></tr></table></figure>

<p>再将博客配置文件下的<code>permalink</code>值改为：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:urlname/</span></span><br></pre></td></tr></table></figure>

<h4 id="6-12-Markdown首行缩进"><a href="#6-12-Markdown首行缩进" class="headerlink" title="6.12 Markdown首行缩进"></a>6.12 Markdown首行缩进</h4><p>在段落开头，输入以下字符，然后紧跟着输入文本即可。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&amp;<span class="selector-id">#160</span>; &amp;<span class="selector-id">#160</span>; &amp;<span class="selector-id">#160</span>; &amp;<span class="selector-id">#160</span>;</span><br></pre></td></tr></table></figure>

<h4 id="6-13-Markdown转义字符"><a href="#6-13-Markdown转义字符" class="headerlink" title="6.13 Markdown转义字符"></a>6.13 Markdown转义字符</h4><p>md中用到的主要可能有语法意义的非空白符号有：\ ` * _ { } [ ] ( ) # + - . !<br> 在正常段落中要原样输出以上符号，一般需要加反斜杠\在前（连续两个反斜杠输出一个反斜杠。</p>
<h4 id="6-14-修改文章间分割线"><a href="#6-14-修改文章间分割线" class="headerlink" title="6.14 修改文章间分割线"></a>6.14 修改文章间分割线</h4><p>打开 <code>themes/next/source/css/_common/components/post/post-eof.styl</code> ,修改：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">.posts-expand &#123;</span><br><span class="line">  .post-eof &#123;</span><br><span class="line">    display: block;</span><br><span class="line">  //  margin: $post-eof-margin-top auto $post-eof-margin-bottom;  </span><br><span class="line">    width: 0%; //分割线长度</span><br><span class="line">    height: 0px; // 分割线高度</span><br><span class="line">    background: $grey-light;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-15-博文置顶"><a href="#6-15-博文置顶" class="headerlink" title="6.15 博文置顶"></a>6.15 博文置顶</h4><p>打开 <code>Hexo</code> 站点下 <code>node_modules/hexo-generator-index/lib/generator.js</code> 文件。代码全部替换为：(next 5.1以后主题已自带此功能)</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&#x27;use strict&#x27;;</span><br><span class="line">var pagination = require(&#x27;hexo-pagination&#x27;);</span><br><span class="line">module.exports = function(locals)&#123;</span><br><span class="line">  var config = this.config;</span><br><span class="line">  var posts = locals.posts;</span><br><span class="line">    posts.data = posts.data.sort(function(a, b) &#123;</span><br><span class="line">        if(a.top &amp;&amp; b.top) &#123; // 两篇文章top都有定义</span><br><span class="line">            if(a.top == b.top) return b.date - a.date; // 若top值一样则按照文章日期降序排</span><br><span class="line">            else return b.top - a.top; // 否则按照top值降序排</span><br><span class="line">        &#125;</span><br><span class="line">        else if(a.top &amp;&amp; !b.top) &#123; // 以下是只有一篇文章top有定义，那么将有top的排在前面（这里用异或操作居然不行233）</span><br><span class="line">            return -1;</span><br><span class="line">        &#125;</span><br><span class="line">        else if(!a.top &amp;&amp; b.top) &#123;</span><br><span class="line">            return 1;</span><br><span class="line">        &#125;</span><br><span class="line">        else return b.date - a.date; // 都没定义按照文章日期降序排</span><br><span class="line">    &#125;);</span><br><span class="line">  var paginationDir = config.pagination_dir || &#x27;page&#x27;;</span><br><span class="line">  return pagination(&#x27;&#x27;, posts, &#123;</span><br><span class="line">    perPage: config.index_generator.per_page,</span><br><span class="line">    layout: [&#x27;index&#x27;, &#x27;archive&#x27;],</span><br><span class="line">    format: paginationDir + &#x27;/%d/&#x27;,</span><br><span class="line">    data: &#123;</span><br><span class="line">      __index: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>打开文章添加top字段,设置数值，数值越大文章越靠前：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">layout: layout</span><br><span class="line">title: 标签1</span><br><span class="line">date: 2017-08-18 15:41:18</span><br><span class="line">tags: 标签1</span><br><span class="line">top: 100</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h4 id="6-16-文章顶部显示更新时间"><a href="#6-16-文章顶部显示更新时间" class="headerlink" title="6.16 文章顶部显示更新时间"></a>6.16 文章顶部显示更新时间</h4><p>打开主题配置文件 <code>_config.yml</code> ,搜索关键字 <code>updated_at</code> 设置为 <code>true</code> ：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Post meta display settings</span><br><span class="line">post_meta:</span><br><span class="line">  item_text: true</span><br><span class="line">  created_at: true</span><br><span class="line">  updated_at: ture</span><br><span class="line">  categories: true</span><br></pre></td></tr></table></figure>

<p>编辑文章,增加关键字<code>updated</code>（next可以根据文章改变时间自动更改）</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">layout: layout</span><br><span class="line">title: 关于</span><br><span class="line">date: 2017-08-18 15:41:18</span><br><span class="line">updated: 2017-09-05 20:18:54 #手动添加更新时间</span><br></pre></td></tr></table></figure>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>Hexo &amp; Next部署与使用</tag>
      </tags>
  </entry>
  <entry>
    <title>JS 基础概念</title>
    <url>/2020/09/22/JS-basic-concept/</url>
    <content><![CDATA[<h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><blockquote>
<p>回顾一些JavaScript基本概念</p>
<p>–  JS 白屏</p>
<p>–  JS FOUC 原理</p>
<p>–  async  await  defer</p>
<p>–  原型链</p>
<p>–  函数this指针</p>
</blockquote>
<a id="more"></a>

<h2 id="一、JS-白屏"><a href="#一、JS-白屏" class="headerlink" title="一、JS 白屏"></a>一、JS <code>白屏</code></h2><h3 id="白屏原因"><a href="#白屏原因" class="headerlink" title="白屏原因"></a>白屏原因</h3><ol>
<li>在弱网络下(2G网路或者GPRS网络) ,网络延迟，JS加载延迟 ,会阻塞页面</li>
<li>客户端存在bug，缓存模块错乱，不缓存js等后来挂起的文件，以及乱缓存index.html</li>
</ol>
<h3 id="白屏优化实践"><a href="#白屏优化实践" class="headerlink" title="白屏优化实践"></a>白屏优化实践</h3><blockquote>
<p>待补充</p>
</blockquote>
<h2 id="二、JS-FOUC-原理"><a href="#二、JS-FOUC-原理" class="headerlink" title="二、JS FOUC 原理"></a>二、JS <code>FOUC</code> 原理</h2><p><strong>浏览器样式闪烁</strong></p>
<p>如果使用import方法对css进行导入,会导致某些页面在Windows 下的<code>Internet Explorer</code>出现一些奇怪的现象：<strong>以无样式显示页面内容的瞬间闪烁</strong></p>
<p>这种现象称之为<code>文档样式短暂失效</code>(Flash of Unstyled Content)，简称为<code>FOUC</code>.</p>
<p><strong>原因大致为：</strong></p>
<ol>
<li>使用import方法导入样式表。</li>
<li>将样式表放在页面底部</li>
<li>有几个样式表，放在html结构的不同位置。</li>
</ol>
<blockquote>
<p>其实原理很清楚：</p>
<p>当样式表晚于结构性html 加载，当加载到此样式表时，页面将停止之前的渲染。此样</p>
<p>式表被下载和解析后，将重新渲染页面，也就出现了短暂的花屏现象。</p>
</blockquote>
<p><strong>解决方法：</strong>使用link标签将样式表放在文档head中</p>
<h2 id="三、async-await-defer"><a href="#三、async-await-defer" class="headerlink" title="三、async   await   defer"></a>三、async   await   defer</h2><h3 id="3-1-async"><a href="#3-1-async" class="headerlink" title="3.1 async"></a>3.1 async</h3><p>带<code>async</code>关键字的函数，是声明异步函数，返回值是promise对象，如果<code>async</code>关键字函数返回的不是promise，会自动用Promise.resolve()包装。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>

<p>返回值为 <code>Promise &#123;&lt;resolved&gt;: &quot;test&quot;&#125;</code>。</p>
<h3 id="3-2-await"><a href="#3-2-await" class="headerlink" title="3.2 await"></a>3.2 await</h3><p><code>await</code>等待右侧表达式的结果，这个结果是promise对象或者其他值。</p>
<ul>
<li>如果它等到的不是一个 promise 对象，那 <code>await</code> 表达式的运算结果就是它等到的东西。</li>
<li>如果它等到的是一个 promise 对象，await 就忙起来了，它会阻塞后面的代码，等着 promise 对象 resolve，然后得到 resolve 的值，作为 <code>await</code> 表达式的运算结果。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> resolve(<span class="string">&quot;test&quot;</span>), <span class="number">2000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> test();</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;end&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>由于<code>test()</code>造成的阻塞，<code>console.log(&#39;end&#39;)</code>会等到两秒后执行</p>
<p>所以为了避免造成阻塞，await 必须用在 async 函数中，async 函数调用不会造成阻塞。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> resolve(<span class="string">&quot;test&quot;</span>), <span class="number">2000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> test();</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br><span class="line">test2();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;end&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>先执行console.log(‘end’)，两秒后执行console.log(‘test’)</p>
<p>如果await用在普通函数中，会报错，如下：</p>
<p><img data-src="js-concept-await.png"></p>
<h3 id="3-3-async-await的执行顺序"><a href="#3-3-async-await的执行顺序" class="headerlink" title="3.3 async/await的执行顺序"></a>3.3 async/await的执行顺序</h3><p>遇到await会阻塞后面的代码，先执行async外面的同步代码，同步代码执行完，再回到async内部，继续执行await后面的代码。以下面的代码分析：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;start test1&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">await</span> test2());</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;end test1&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;test2&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="string">&#x27;return test2 value&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">test1();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;start async&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>);</span><br><span class="line">    resolve();</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;end async&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>执行的结果</p>
<p><img data-src="js-concept-await-demo.png"></p>
<ul>
<li>首先执行宏任务，执行<code>test1</code>函数，执行<code>console.log(&#39;start test1&#39;)</code></li>
<li>遇到<code>await</code>，先执行右边<code>test2中的console.log(&#39;test2&#39;)</code>，中断了后面的代码，执行<code>test1</code>外面的同步代码</li>
<li>执行<code>console.log(&#39;start async&#39;)</code></li>
<li>遇到<code>setTimeout</code>，推到到下个宏任务队列中</li>
<li>执行Promise里面的同步代码<code>console.log(&#39;promise1&#39;)</code></li>
<li>运行到<code>promise().then</code>，发现是promise对象，推到微任务队列中</li>
<li>执行<code>console.log(&#39;end async&#39;)</code></li>
<li><code>test1</code>外面的同步代码执行结束后，回到<code>test1</code>中，<code>console.log(await test2())</code>执行完成后**<u>返回Promise</u>** {<code>&lt;resolved&gt;</code>: “return test2 value”}，是promise对象，推到微任务队列中</li>
<li>此时第一个宏任务结束，执行所有的微任务，因为微任务队列先进先出，所以先执行<code>console.log(&#39;promise2&#39;)</code>，后执行<code>console.log(&#39;return test2 value&#39;)</code></li>
<li>执行test2完成后，后面的代码不再阻塞，执行<code>console.log(&#39;end test1&#39;)</code></li>
<li>执行下个宏任务，即执行<code>console.log(&#39;setTimeout&#39;)</code></li>
</ul>
<p><strong>补充下有关宏任务和微任务的知识</strong></p>
<p>宏任务和微任务都是队列，宏任务有<code>script</code>、<code>setTimeout</code>、<code>setInterval</code>等，微任务有<code>Promise.then catch finally</code>、<code>process.nextTick</code>等，宏任务和微任务的关系如下：</p>
<p><img data-src="js-await-task.jpg"></p>
<h3 id="3-4-async-await的优缺点"><a href="#3-4-async-await的优缺点" class="headerlink" title="3.4 async/await的优缺点"></a>3.4 async/await的优缺点</h3><p><strong>1. 优点</strong></p>
<p>相对于<code>promise</code>，<code>async/await</code>处理 then 的调用链，代码要清晰很多，几乎和同步代码一样</p>
<p><strong>2. 缺点</strong></p>
<p>滥用 await 可能会导致性能问题，因为 await 会阻塞代码</p>
<h3 id="3-5-处理reject"><a href="#3-5-处理reject" class="headerlink" title="3.5 处理reject"></a>3.5 处理reject</h3><p><strong>1. try/catch</strong></p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> function fn() &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                reject(<span class="string">&#x27;err3&#x27;</span>);</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err)&#123;</span><br><span class="line">        alert(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br></pre></td></tr></table></figure>

<p><strong>2. catch</strong></p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> function fn() &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, re    ject)</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            reject(<span class="string">&#x27;err&#x27;</span>);</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">fn().<span class="keyword">catch</span>(alert)</span><br></pre></td></tr></table></figure>



<h3 id="3-6-脚本加载标志-async-defer"><a href="#3-6-脚本加载标志-async-defer" class="headerlink" title="3.6 脚本加载标志 async  defer"></a>3.6 脚本加载标志 <code>async</code>  <code>defer</code></h3><ol>
<li><p><span style="color:red;"><code>&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</code></span></p>
<p>没有 <code>defer</code> 或 <code>async</code>，浏览器会立即加载并执行指定的脚本，“立即”指的是在渲染该 script 标签之下的文档元素之前，也就是说不等待后续载入的文档元素，读到就加载并执行。</p>
</li>
<li><p><span style="color:red;"><code>&lt;script async src=&quot;script.js&quot;&gt;&lt;/script&gt;</code></span></p>
<p>有 <code>async</code>，加载和渲染后续文档元素的过程将和 <code>script.js</code> 的加载与执行并行进行（异步）</p>
</li>
<li><p><span style="color:red;"><code>&lt;script defer src=&quot;myscript.js&quot;&gt;&lt;/script&gt;</code></span></p>
<p>有 <code>defer</code>，加载后续文档元素的过程将和 <code>script.js</code> 的加载并行进行（异步），但是 <code>script.js</code> 的执行要在所有元素解析完成之后，<code>DOMContentLoaded</code> 事件触发之前完成</p>
</li>
</ol>
<p>然后从实用角度来说呢，首先把所有脚本都丢到 <code>&lt;/body&gt;</code> 之前是最佳实践，因为对于旧浏览器来说这是唯一的优化选择，此法可保证非脚本的其他一切元素能够以最快的速度得到加载和解析。</p>
<p><img data-src="js-defer-1.jpg"></p>
<p>蓝色线代表网络读取，红色线代表执行时间，这俩都是针对脚本的；绿色线代表 HTML 解析。</p>
<p><strong>此图告诉我们以下几个要点：</strong></p>
<ol>
<li><em>defer</em> 和 <em>async</em> 在网络读取（下载）这块儿是一样的，都是异步的（相较于 HTML 解析）</li>
<li>差别在于脚本下载完之后何时执行，显然 <em>defer</em> 是最接近我们对于应用脚本加载和执行的要求的</li>
<li>关于 <em>defer</em>，此图未尽之处在于它是按照加载顺序执行脚本的，这一点要善加利用</li>
<li><em>async</em> 则是一个乱序执行的主，反正对它来说脚本的加载和执行是紧紧挨着的，所以不管你声明的顺序如何，只要它加载完了就会立刻执行</li>
<li>仔细想想，<em>async</em> 对于应用脚本的用处不大，因为它完全不考虑依赖（哪怕是最低级的顺序执行），不过它对于那些可以不依赖任何脚本或不被任何脚本依赖的脚本来说却是非常合适的，最典型的例子：Google Analytics</li>
</ol>
<blockquote>
<p>一图胜千言</p>
</blockquote>
<p><img data-src="js-defer-2.jpg"></p>
<h2 id="四、原型链"><a href="#四、原型链" class="headerlink" title="四、原型链"></a>四、原型链</h2><blockquote>
<p>膜拜这位简书大佬   <a href="https://www.jianshu.com/p/116ea3be6ef5">彻底理解js的原型链</a></p>
<p>写的太牛博以至于我只能转载  </p>
<p>–  本文主要参考了<a href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">MDN文档</a>和<a href="https://link.jianshu.com/?t=https://www.zhihu.com/question/34183746">知乎讨论</a>。</p>
</blockquote>
<h3 id="由浅入深的理解原型链"><a href="#由浅入深的理解原型链" class="headerlink" title="由浅入深的理解原型链"></a>由浅入深的理解原型链</h3><p>在js中，大部分东西都是对象，数组是对象，函数也是对象，对象更加是对象。<strong>不管我们给数组和函数定义什么内容，它们总是有一些相同的方法和属性</strong>。比如说hasOwnProperty()，toString()等：</p>
<p><img data-src="chrome.png"></p>
<p><strong>这说明一个对象所拥有的属性不仅仅是它本身拥有的属性，它还会从其他对象中继承一些属性。当js在一个对象中找不到需要的属性时，它会到这个对象的父对象上去找，以此类推，这就构成了对象的原型链</strong>。理解js的原型链对使用js的对象非常有帮助。</p>
<blockquote>
<p>Chrome强大的控制台可以显示出每一个对象所有的属性！包括prototype、__proto__、constructor等</p>
</blockquote>
<p>让我们通过一个例子由浅到深地理解原型链：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">_name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = _name;</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;I am &#x27;</span>, <span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> Foo(<span class="string">&#x27;obj1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> f2 = <span class="keyword">new</span> Foo(<span class="string">&#x27;obj2&#x27;</span>);</span><br><span class="line"></span><br><span class="line">f1.show();  <span class="comment">//  I am obj1</span></span><br><span class="line">f2.show();  <span class="comment">//  I am obj2</span></span><br></pre></td></tr></table></figure>

<p>这是我们经常使用的创建对象的方式，将共同的方法放到Foo.prototype中，所有实例都共有这个方法了。</p>
<p>这是怎么实现的呢？我们看下面这张图的第一行：</p>
<p><img data-src="prototype.jpg"></p>
<h4 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h4><p><strong>先只用看第一行</strong></p>
<p>我们定义的show函数在Foo.prototype中，当我们执行<code>f1.show()</code>时，js发现f1本身没有show这个属性，所以它就到f1的原型（也就是<code>__proto__</code>指向的对象）去找，找到了就可以调用。</p>
<blockquote>
<p>注：每个对象都有一个方法<code>hasOwnProperty()</code>来检查对象本身是否有某个属性，如果有则返回true；如果这个属性在它的原型链上或原型链上都没有，则返回false；</p>
</blockquote>
<p>图片第一行告诉了我们4点：</p>
<ol>
<li><strong>所有函数都有一个prototype指针</strong>，指向原型对象，如图中的Foo的prototype指针。prototype指针的意义是，当我们使用这个构造函数new出新对象的时候，<strong>新对象的原型是谁</strong>。</li>
<li><strong>构造函数的prototype所指向的原型对象</strong>有一个constructor指针，指回构造函数。如图中Foo.prototype的constructor指针指向Foo。constructor指针有助于我们找到一个对象的构造函数是谁。</li>
<li>__proto__<strong>每个对象都有</strong>，js在new一个对象的时候，会将它的__proto__指向<strong>构造函数的prototype指向的那个对象</strong>。在上图中，f1、f2这些实例对象的__proto__都指向了Foo.prototype。</li>
<li>如果一个对象的__proto__指向了另一个对象，那么前者就继承了后者的所有属性。</li>
</ol>
<blockquote>
<p>请注意<code>__proto__</code>与prototype的区别！<code>__proto__</code>才是真正连接原型链的东西，而prototype只是构造函数的一个指针属性而已。</p>
</blockquote>
<h4 id="Js原生对象的继承关系"><a href="#Js原生对象的继承关系" class="headerlink" title="Js原生对象的继承关系"></a>Js原生对象的继承关系</h4><p><strong>理解了这个小例子我们就可以往图片的下面看了，它展示了js原生对象的继承关系是怎么样的。</strong></p>
<p>我们先看看Foo的原型吧！Foo是一个函数，它的构造函数是js内部的function Function()，Function的prototype指向了一个对象Function.prototype，因此Foo的<code>__proto__</code>就指向了<code>Function.prototype</code>，如图。</p>
<blockquote>
<p>所有的函数都以function Function()为构造函数，因此，所有函数<strong>（包括function Function()和function Object()）</strong>的<code>__proto__</code>都指向Function.prototype这个对象，这个对象中定义了所有函数都共有的方法，比如call()、apply()等。</p>
</blockquote>
<p>我们继续深入下去，Function.prototype这个对象，它就是一个普通的对象，它的构造函数是js内置的function Object()，function Object()的prototype指向Object.prototype，因此Function.prototype.<code>__proto__</code>就指向Object.prototype，这个对象中定义了所有对象共有的属性，比如我们之前说的hasOwnProperty()和toString()等。</p>
<blockquote>
<p>同理，Foo.prototype和其他自定义的对象也是<code>__proto__</code>指向Object.prototype对象，就不需要说明了。</p>
</blockquote>
<p>Object.prototype就是原型链的终点了，它的<code>__proto__</code>是null，js查找属性时，如果到这里还没有找到，那就是<code>undefined</code>了。</p>
<p>到这里就不难理解为什么我们说在js中，函数也是对象了，它就是继承自对象的！</p>
<h3 id="由原型链到继承和对象声明"><a href="#由原型链到继承和对象声明" class="headerlink" title="由原型链到继承和对象声明"></a>由原型链到继承和对象声明</h3><blockquote>
<p>转载自<a href="https://www.cnblogs.com/xfcao/p/10029731.html">JS中原型链的理解</a></p>
</blockquote>
<p><code>new</code>操作符具体干了什么呢?其实很简单，就干了三件事情。</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">var obj  = &#123;&#125;;</span><br><span class="line">obj.__proto__ = <span class="module-access"><span class="module"><span class="identifier">Base</span>.</span></span>prototype;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Base</span>.</span></span>call(obj);</span><br></pre></td></tr></table></figure>

<ul>
<li>第一行，我们创建了一个空对象obj</li>
<li>第二行，我们将这个空对象的__proto__成员指向了Base函数对象prototype成员对象</li>
<li>第三行，我们将Base函数对象的this指针替换成obj，然后再调用Base函数，于是我们就给obj对象赋值了一个id成员变量，这个成员变量的值是”base”，关于call函数的用法。</li>
</ul>
<p>在谈原型链之前，我们首先要了解自定义函数与 Function 之间是什么关系，而构造函数、原型和实例之间又存在什么千丝万缕的关系呢？</p>
<p>其实，所有的函数都是 <code>Function</code> 的实例。</p>
<p>在构造函数上都有一个原型属性 <code>prototype</code>，该属性也是一个对象；那么在原型对象上有一个 <code>constructor</code> 属性，该属性指向的就是构造函数；而实例对象上有一个 <code>_proto_</code> 属性，<span style="color:red;font-weight:bold;">该属性也指向原型对象，并且该属性不是标准属性，不可以用在编程中，该属性用于浏览器内部使用</span>。</p>
<h4 id="1-构造函数、原型和实例之间的关系"><a href="#1-构造函数、原型和实例之间的关系" class="headerlink" title="1.  构造函数、原型和实例之间的关系"></a>1.  构造函数、原型和实例之间的关系</h4><p> <strong><code>_proto_</code></strong></p>
<ul>
<li>在函数里有一个属性prototype</li>
<li>由该函数创建的对象默认会连接到该属性上</li>
</ul>
<p><strong>prototype 与 <code>_proto_</code> 的关系</strong></p>
<ul>
<li><code>_proto_</code>是站在对象角度来说的</li>
<li>prototype 是站在构造函数角度来说的</li>
</ul>
<h5 id="①-Object"><a href="#①-Object" class="headerlink" title="①+Object"></a>①+Object</h5><p><img data-src="prototype-1.png"></p>
<h5 id="②-Function-Object-Array"><a href="#②-Function-Object-Array" class="headerlink" title="②+Function+Object+Array"></a>②+Function+Object+Array</h5><p><img data-src="prototype-2.png"></p>
<p>接下来再来讨论什么是原型链。其实，就是有限的实例对象和原型之间组成有限链，就是用来实现共享属性和继承的。下面，我们看代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="comment">// 对象是有原型对象的</span></span><br><span class="line"><span class="comment">// 原型对象也有原型对象</span></span><br><span class="line"><span class="comment">// obj._proto_._proto_._proto_</span></span><br><span class="line"><span class="comment">// 原型对象也有原型对象，对象的原型对象一直往上找，会找到一个null</span></span><br><span class="line"><span class="comment">// 原型链示例</span></span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="comment">// arr -&gt; Array.prototype -&gt; Object.prototype -&gt; null</span></span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="comment">// o -&gt; Object.prototype -&gt; null;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name1 = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name2 = <span class="string">&#x27;2&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo2.prototype = <span class="keyword">new</span> Foo1();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo3</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = <span class="string">&#x27;3&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo3.prototype = <span class="keyword">new</span> Foo2();</span><br><span class="line"><span class="keyword">var</span> foo3 = <span class="keyword">new</span> Foo3();</span><br><span class="line"><span class="built_in">console</span>.dir(foo3);</span><br></pre></td></tr></table></figure>

<p><img data-src="prototype-3.png"></p>
<p><img data-src="prototype-4.png"></p>
<h4 id="2-继承"><a href="#2-继承" class="headerlink" title="2. 继承"></a>2. 继承</h4><h5 id="2-1-原型继承"><a href="#2-1-原型继承" class="headerlink" title="2.1 原型继承"></a>2.1 原型继承</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tiger</span>(<span class="params">color</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.color = color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//   var tiger = new Tiger(&#x27;yellow&#x27;);</span></span><br><span class="line"><span class="comment">//   console.log(tiger.color);</span></span><br><span class="line"><span class="comment">//   console.log(tiger.name);  //undefined</span></span><br><span class="line"><span class="comment">//   Tiger.prototype = new Animal(&#x27;老虎&#x27;);   //一种方式</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.name = <span class="string">&#x27;大老虎&#x27;</span>;   <span class="comment">//第二种方式</span></span><br><span class="line"><span class="keyword">var</span> tiger = <span class="keyword">new</span> Tiger(<span class="string">&#x27;yellow&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(tiger.color);</span><br><span class="line"><span class="built_in">console</span>.log(tiger.name);</span><br></pre></td></tr></table></figure>

<p><strong>值得注意的是，这里存在两个主要的问题：</strong></p>
<p> ①它不方便给父级类型传递参数；</p>
<p> ②父级类型当中的引用类型被所有的实例共享</p>
<h5 id="2-2-ES5-提供了Object-create-方法来实现继承"><a href="#2-2-ES5-提供了Object-create-方法来实现继承" class="headerlink" title="2.2 ES5 提供了Object.create() 方法来实现继承"></a>2.2 ES5 提供了Object.create() 方法来实现继承</h5><p>这种方法是ES5的新特性，其实就是<strong>复制继承</strong>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">————做兼容</span><br><span class="line"><span class="comment">//shim垫片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">Object</span>.create)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.create(obj);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">        Foo.prototype = obj;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-3-拷贝继承"><a href="#2-3-拷贝继承" class="headerlink" title="2.3 拷贝继承"></a>2.3 拷贝继承</h5><p>初始化 <code>obj</code> 时，生成相应的 <code>__proto__</code>；通过此函数获取继承属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.extend = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> obj)&#123;</span><br><span class="line">        <span class="built_in">this</span>[k] = obj[k];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-4-借用构造函数继承"><a href="#2-4-借用构造函数继承" class="headerlink" title="2.4 借用构造函数继承"></a>2.4 借用构造函数继承</h5><p>被借用的构造函数中原型上的成员没有被借过来</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mouse</span>(<span class="params">nickname</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    Animal.call(<span class="built_in">this</span>,<span class="string">&#x27;老鼠&#x27;</span>);</span><br><span class="line">    <span class="built_in">this</span>.nickname = nickname;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> Mouse(<span class="string">&#x27;杰瑞&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(m.name);</span><br><span class="line"><span class="built_in">console</span>.log(m.nickname);</span><br></pre></td></tr></table></figure>

<p><strong>存在的问题：</strong>可以解决原型继承当中传参问题，但是父类型当中的原型对象上的成员（属性和方法）不能被继承到</p>
<h5 id="2-5-组合继承"><a href="#2-5-组合继承" class="headerlink" title="2.5 组合继承"></a>2.5 组合继承</h5><p>——prototype对象是有动态性的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">   Person.call(<span class="built_in">this</span>,name);</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person();</span><br><span class="line">Student.prototype.contructor = Student;</span><br><span class="line">Student.prototype.showAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> stu = <span class="keyword">new</span> Student(<span class="string">&#x27;张三&#x27;</span>,<span class="number">12</span>);</span><br><span class="line">stu.showName();</span><br><span class="line">stu.showAge();</span><br></pre></td></tr></table></figure>

<p>【原型继承+借用构造函数继承】它的特点就是属性每个实例一份，方法共享</p>
<p><strong>【小结】</strong>套用一句很粗暴的话，所谓原型链就是找妈的一种行为方式，就可以理解为人是人他妈生的，妖是妖他妈生的。原型链的核心其实就只有一个：属性共享和独立的控制，当你的对象实例需要独立的属性，所有做法的本质都是在对象实例里面创建属性。若不考虑太多，你大可以在Person里面直接定义你所需要独立的属性来覆盖掉原型的属性。总之，使用原型继承的时候，要对于原型中的属性要特别注意，因为他们都是牵一发而动全身的存在。现在最常用的方法是<strong>组合模式</strong>。</p>
<h4 id="3-总结"><a href="#3-总结" class="headerlink" title="3. 总结"></a>3. 总结</h4><h5 id="3-1-原型链"><a href="#3-1-原型链" class="headerlink" title="3.1 原型链"></a>3.1 原型链</h5><p>  <strong>1）构造函数、原型和实例的关系</strong></p>
<p>​    ①构造函数都有一个属性prototype，这个属性是一个对象（Object的实例）</p>
<p>​    ②原型对象prototype里面有一个constructor属性，该属性指向原型对象所属的构造函数</p>
<p>​    ③实例对象都有一个_proto_属性，该属性也指向构造函数的原型对象，它是一个非标准属性，不可以用于编程，它是用于浏览器自己使用的</p>
<p>  <strong>2）prototype与_proto_的关系</strong></p>
<p>​    ①prototype是构造函数的属性</p>
<p>​    ②<code>_proto_</code>是实例对象的属性</p>
<p>​          ——这两者都指向同一个对象</p>
<p>  <u>【总结】</u></p>
<p>​      i）函数也是对象，对象不一定是函数；</p>
<p>​      ii）对象的本质：无序的键值对集合；键值对当中的值可以是任意数据类型的值</p>
<p>​      iii）对象就是一个容器，这个容器当中放的是（属性和方法）</p>
<p>  <strong>3）属性搜索</strong></p>
<p>  　　① 在访问对象的某个成员的时候会先在对象中找是否存在</p>
<p>  　　② 如果当前对象中没有就在构造函数的原型对象中找</p>
<p>  　　③ 如果原型对象中没有找到就到原型对象的原型上找</p>
<p>  　　④ 知道<code>Object</code>的原型对象的原型是null为止</p>
<h5 id="3-2-Function"><a href="#3-2-Function" class="headerlink" title="3.2 Function"></a>3.2 Function</h5><p><strong>——所有函数都是Function的实例</strong></p>
<p>  ①本地对象：独立于宿主环境（浏览器）的对象</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">——  包括<span class="built_in">Object</span>、<span class="built_in">Array</span>、<span class="built_in">Date</span>、<span class="built_in">RegExp</span>、<span class="built_in">Function</span>、<span class="built_in">Error</span>、<span class="built_in">Number</span>、<span class="built_in">String</span>、<span class="built_in">Boolean</span></span><br></pre></td></tr></table></figure>

<p>  ②内置对象——包括Math、Global（window，在js中就是全局变量），使用的时候不需要new</p>
<p>  ③宿主对象——包括<code>自定义对象</code>、<code>DOM</code>、<code>BOM</code></p>
<h4 id="4-回顾-new-操作符的使用过程"><a href="#4-回顾-new-操作符的使用过程" class="headerlink" title="4. 回顾 new 操作符的使用过程"></a>4. 回顾 <code>new</code> 操作符的使用过程</h4><blockquote>
<p>参考<a href="https://www.cnblogs.com/kevin2chen/p/6418327.html">JS中new一个对象的过程</a></p>
</blockquote>
<p>使用new关键字调用函数（<strong>new</strong> ClassA**(…)**）的具体步骤：</p>
<p><strong>4.1 创建空对象；</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>4.2 设置新对象的constructor属性为构造函数的名称，设置新对象的<code>__proto__</code>属性指向构造函数的prototype对象；</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj.__proto__ = ClassA.prototype;</span><br></pre></td></tr></table></figure>

<p><strong>4.3 使用新对象调用函数，函数中的this被指向新实例对象：</strong></p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">ClassA</span>.</span></span>call(obj);　　<span class="comment">//&#123;&#125;.构造函数(); </span></span><br></pre></td></tr></table></figure>

<p><strong>4.4 将初始化完毕的新对象地址，保存到等号左边的变量中</strong></p>
<p>注意：若构造函数中返回this或返回值是基本类型（number、string、boolean、null、undefined）的值，则返回新实例对象；若返回值是引用类型的值，则实际返回值为这个引用类型。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="string">&quot;bar&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">　　<span class="built_in">this</span>.foo = <span class="string">&quot;foo&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> test();                     <span class="comment">//test中的this指新对象，并未改变全局的foo属性</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.foo);          <span class="comment">// &quot;bar&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> test().foo);      <span class="comment">// &quot;foo&quot;;</span></span><br></pre></td></tr></table></figure>

<p><strong>优先级问题：</strong></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence">优先级由高到低</a>：小括号(xxx) —&gt; 属性访问.  —&gt; new foo() —-&gt; foo()</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>); </span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//先从.属性访问符号开始往前面找一个最近的对象，同时注意new Foo()优先于Foo();</span></span><br><span class="line"><span class="keyword">var</span> a=<span class="keyword">new</span> Foo.getName();<span class="comment">//3;===new (Foo.getName)();返回Foo.getName类型的实例</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="keyword">new</span> Foo().getName();<span class="comment">//2;===(new Foo()).getName()；返回undefined</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="keyword">new</span> <span class="keyword">new</span> Foo().getName();<span class="comment">//2;===new (new Foo().getName)();返回Foo.getName类型的实例</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getTime();<span class="comment">//===((new Date()).getTime)()</span></span><br><span class="line">(<span class="keyword">new</span> <span class="built_in">Date</span>).getTime();</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>.getTime();<span class="comment">//Uncaught TypeError: Date(...).getTime is not a function；===new (Date.getTime)()</span></span><br></pre></td></tr></table></figure>

<h3 id="原型链相关实践应用"><a href="#原型链相关实践应用" class="headerlink" title="原型链相关实践应用"></a>原型链相关实践应用</h3><blockquote>
<p>两道很不错的，而且讲的很完美的试题。</p>
<p>转载自  <a href="https://www.jianshu.com/p/ae7afb5ba420">陌上寒</a></p>
</blockquote>
<h4 id="五条原型原则"><a href="#五条原型原则" class="headerlink" title="五条原型原则"></a>五条原型原则</h4><ol>
<li>所有的引用类型（数组，对象，函数）都具有对象特性，即可自由扩展属性（除了null以外）</li>
<li>所有的引用类型（数组，对象，函数），都有一个<em>proto</em>属性，属性值是一个普通的对象    （隐式原型）</li>
<li>所有的函数，都有一个prototype属性，属性值也是一个普通的对象</li>
<li>所有的引用类型（数组，对象，函数），<em>proto</em>属性值指向他构造函数的prototype属性值</li>
<li>当试图得到一个对象的某个属性时，如果这个对象本身没有这个属性，那么会去它的<em>proto</em>(即它的构造函数的prototype)中寻找</li>
</ol>
<h4 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a>第一题</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a) &#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.a = <span class="number">1</span>;</span><br><span class="line">B.prototype.a = <span class="number">1</span>;</span><br><span class="line">C.prototype.a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> A().a);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> B().a);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> C(<span class="number">2</span>).a);</span><br></pre></td></tr></table></figure>

<p>我们一起拆解一下</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//新建一个构造函数A</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">//新建一个构造函数B，并添加一个自有属性a，属性a的值取决于传入的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//新建一个构造函数C，如果有参数，则添加自有属性a，属性a的值为传入的参数值，</span></span><br><span class="line"><span class="comment">//如果没有传入参数，则构造函数C没有自有属性</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a) &#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在A的原型对象上添加一个属性a，属性a的值是1，(两个同理)</span></span><br><span class="line">A.prototype.a = <span class="number">1</span>;</span><br><span class="line">B.prototype.a = <span class="number">1</span>;</span><br><span class="line">C.prototype.a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p><strong>求A的实例下属性a的值即new A().a</strong></p>
<p>构造函数<code>function A()&#123;&#125;</code>,是没有自有属性的，没有怎么办？顺着原型链查找，我们找到构造函数A的原型对象<code>A.prototype</code>，<br> 因为<code>A.prototype.a = 1</code>;<br> 所以<code>console.log(new A().a);</code>输出1<br> 还可以这么拆解</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo =  <span class="keyword">new</span> A()</span><br><span class="line"><span class="built_in">console</span>.log(foo.a)</span><br></pre></td></tr></table></figure>

<p>同样的构造函数A下面找不到属性<code>a</code>，那就得顺着原型链查找，即<code>foo._proto_</code>我们知道<br> 五条原型原则的第四条</p>
<blockquote>
<p>4     所有的引用类型（数组，对象，函数），<em>proto</em>属性值值向他构造函数的prototype属性值</p>
</blockquote>
<p>所以我们得出<br> <code>foo._proto_===A.prototype</code><br> 因为已知条件<code>A.prototype.a = 1;</code><br> 最后在原型链上找到了属性a<br> 看图</p>
<p><img data-src="prototype-5.png"></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> A().a)        <span class="comment">//1</span></span><br></pre></td></tr></table></figure>


<p> 如果这个理解了，那么下面的两个自然也就引刃而解</p>
<p><strong>求B的实例下属性a的值即new B().a</strong></p>
<p>我们知道B实例下是有属性a的，a的值等于传入的参数，因为创建B实例的时候没有传入参数所以最后输出==&gt;<code>undefined</code></p>
<p> <strong>注意</strong><br> 这里有个地方要说明一下<br> 由于构造函数B存在属性a，但是由于没有传入参数，导致属性a的值是<code>undefined</code>，<br> 后来又一次执行了   <code>B.prototype.a = 1;</code>，在B的原型上添加了属性a，并赋值为1，当查找属性或方法是，先查找自身，自身没有，再去原型链上的，如果在自身找到了，就会停止，<br> 这个例子中，我们找到了a但是a的值是undefined，<strong>undefined也是值</strong>，找到了就停止，尽管原型链上还有值，js也不会继续查找下去<br> 所以这个例子很经典，贴个图，感受一下</p>
<p><img data-src="prototype-6.png"></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> B().a);        <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<p><strong>求C的实例下属性a的值即new C(2).a</strong></p>
<p>如果👆两题都懂了，这个就是小case<br> 实例化一个构造函数C并传入参数2，因为有参数，所以，构造函数C存在自有属性a，并且属性a的值为2<br> <code>C.prototype.a = 1;</code><br> 在C的原型对象上添加一个属性a，并且赋值1<br> 然后就出现这样的情况，自有属性和原型属性都存在，这时候取值当然就是从自有属性中取啦<br> 来个图感受一下</p>
<p><img data-src="prototype-7.png"></p>
<p>所以</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> C(<span class="number">2</span>).a);    <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<h4 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h4><p>在第二题开始之前我们很有必要先复习一下昨天的一个知识点？为什么说很有必要呢？因为这是一把🔑，它是解开这道题目的关键 <strong>instanceof</strong></p>
<blockquote>
<p>instanceof用于判断一个变量是否某个对象的实例</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.prototype.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;a()&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Function</span>.prototype.b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;b()&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> F();</span><br><span class="line">F.a();<span class="comment">//a()</span></span><br><span class="line">F.b();<span class="comment">//b()</span></span><br><span class="line">f.a();<span class="comment">//a()</span></span><br><span class="line">f.b();<span class="comment">//Uncaught TypeError: f.b is not a function</span></span><br></pre></td></tr></table></figure>

<p>F是个构造函数，而f是构造函数F的一个实例。<br>到<code>instanceof</code>发力的时候了</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(F <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line"><span class="built_in">console</span>.log(F <span class="keyword">instanceof</span> <span class="built_in">Function</span>);</span><br></pre></td></tr></table></figure>

<p>所以我们得出结论<br>F是<code>Object</code> 和 <code>Function</code>两个的实例，执行代码</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(F.prototype);</span><br></pre></td></tr></table></figure>

<p>看输出</p>
<p><img data-src="prototype-8.png"></p>
<p><strong>即F既能访问到a，也能访问到b。</strong><br>所以F.a() 输出 a()     F.b() 输出 b()<br>继续</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(f <span class="keyword">instanceof</span> <span class="built_in">Object</span>);<span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(f <span class="keyword">instanceof</span> F);<span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(f <span class="keyword">instanceof</span> <span class="built_in">Function</span>);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p><code>f</code> 并不是<code>Function</code>的实例，因为它本来就不是构造函数，所以就不能调用Function原型链上的相关属性和方法了，只能访问<code>Object</code>原型链。<br> 所以f.a() 输出  a()， 而f.b()就报错了。</p>
<p> 接下来，我们具体分析下，它们是如何按路径查找的：</p>
<ul>
<li>f.a()的查找路径: f自身: 没有 —&gt; <code>f._proto_(Object.prototype)</code>: 输出a()</li>
<li>f.b()的查找路径: f自身: 没有 —&gt; <code>f._proto_(Object.prototype)</code>: 没有 —&gt; <code>f._proto_._proto_</code> (<code>Object.prototype._proto_</code>): 因为找不到，所以报错</li>
<li>F.a()的查找路径: F自身: 没有 —&gt; <code>F._proto_(Function.prototype)</code>: 没有 —&gt; <code>F._proto_._proto_(Object.prototype)</code>: 输出 a()</li>
<li>F.b()的查找路径: F自身: 没有 —&gt; <code>F._proto_(Function.prototype)</code>: b()</li>
</ul>
<h2 id="五、函数this指针"><a href="#五、函数this指针" class="headerlink" title="五、函数this指针"></a>五、函数<code>this</code>指针</h2><blockquote>
<p>转载  <a href="https://www.cnblogs.com/zjjDaily/p/9482958.html">深入理解JS函数中this指针的指向</a></p>
<p>大神写的太牛掰，我无言补充，跪拜！</p>
</blockquote>
<p><strong>核心</strong>： </p>
<p><strong>函数在执行时，会在函数体内部自动生成一个<code>this</code>指针。<span style="color:red;">谁直接调用产生这个this指针的函数，this就指向谁。</span></strong></p>
<p>怎么理解指向呢，我认为指向就是等于。例如直接在js中输入下面的等式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>===<span class="built_in">window</span>);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p> 情况不同，this指向的对象也不同。例如：</p>
<h3 id="1-函数声明的情况"><a href="#1-函数声明的情况" class="headerlink" title="1. 函数声明的情况"></a>1. 函数声明的情况</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bj=<span class="number">20</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//10</span></span><br><span class="line">    <span class="built_in">console</span>.log(bj);<span class="comment">//20</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj+bj);<span class="comment">//30</span></span><br><span class="line">&#125;</span><br><span class="line">add();</span><br><span class="line"><span class="built_in">window</span>.add();</span><br></pre></td></tr></table></figure>

<p>（1） 执行了add（）之后，此时的this指向的是window对象，为什么呢？因为这时候add是全局函数，是通过window<strong>直接调用</strong>的。所以下面我专门写了个window.add()就是为了说明，全局函数的this都是指向的window。</p>
<p>（2） 就像alert（）自带的警告弹窗一样,window.alert（）执行之后也是一样的效果。所以只要是  window点  这种调用方式都可以省略掉，因此警告弹窗可以直接使用alert（）。</p>
<h3 id="2-函数表达式"><a href="#2-函数表达式" class="headerlink" title="2. 函数表达式"></a>2. 函数表达式</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> zjj=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bj=<span class="number">30</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//10</span></span><br><span class="line">    <span class="built_in">console</span>.log(bj);<span class="comment">//30</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj+bj);<span class="comment">//40</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> zjj);<span class="comment">//function</span></span><br><span class="line">zjj();</span><br><span class="line"><span class="built_in">window</span>.zjj();</span><br></pre></td></tr></table></figure>

<p>（1） 执行了zjj（）之后，函数中的this也是指向window对象。原因和第一个是一样的，都是通过window这个对象<strong>直接调用</strong>。</p>
<h3 id="3-函数作为对象的属性去调用"><a href="#3-函数作为对象的属性去调用" class="headerlink" title="3. 函数作为对象的属性去调用"></a>3. 函数作为对象的属性去调用</h3><h4 id="例一"><a href="#例一" class="headerlink" title="例一"></a>例一</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    name:<span class="string">&quot;八戒&quot;</span>,</span><br><span class="line">    age:<span class="string">&quot;500&quot;</span>,</span><br><span class="line">    say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bj=<span class="number">40</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//就是obj这个对象</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//undefined</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);<span class="comment">//八戒</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.say();</span><br><span class="line"><span class="built_in">window</span>.obj.say();    </span><br></pre></td></tr></table></figure>

<p>（1） 当obj.say（）被执行的时候，此时的this指向的是 obj 这个对象，为什么呢？因为say函数是通过obj这个对象<strong>直接调用</strong>的。</p>
<p>（2） 那有人可能会问了，obj对象实际上也是通过window对象调用的，为什么this不指向window呢？我认为是因为say这个函数是通过 <strong>obj</strong> 对象<strong>直接调用</strong>的，而没有通过 window 对象<strong>直接调用</strong>，因此this不会指向window。看下面的例子就明白了。</p>
<h4 id="例二"><a href="#例二" class="headerlink" title="例二"></a>例二</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    name:<span class="string">&quot;八戒&quot;</span>,</span><br><span class="line">    age:<span class="number">500</span>,</span><br><span class="line">    say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//是obj这个对象</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//undefined</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)<span class="comment">//八戒</span></span><br><span class="line">    &#125;,</span><br><span class="line">    action:&#123;</span><br><span class="line">        name:<span class="string">&quot;悟空&quot;</span>,</span><br><span class="line">        age:<span class="number">1000</span>,</span><br><span class="line">        say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//是action这个对象</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//undefined</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)<span class="comment">//悟空</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.say();</span><br><span class="line">obj.action.say();</span><br><span class="line"><span class="built_in">window</span>.obj.action.say();</span><br></pre></td></tr></table></figure>

<p>（1） obj.say()执行之后，此时这个函数里的this指向的是obj对象，原因是因为say函数是通过obj<strong>直接调用</strong>的。</p>
<p>（2） obj.action.say()执行之后，此时这个函数里的this指向的是action对象，原因是因为say函数是通过action对象<strong>直接调用</strong>的。并没有通过obj<strong>直接调用</strong>。也没有通过 window <strong>直接调用</strong>，所以此时action对象中say函数里的的this指向并不会是obj或者window。</p>
<h4 id="例三"><a href="#例三" class="headerlink" title="例三"></a>例三</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    name:<span class="string">&quot;八戒&quot;</span>,</span><br><span class="line">    age:<span class="number">500</span>,</span><br><span class="line">    say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//就是obj这个对象</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//undefined</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)<span class="comment">//八戒</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">wk</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//10</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);<span class="comment">//这里显示的是为空</span></span><br><span class="line">        &#125;</span><br><span class="line">        wk();        </span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">obj.say();</span><br></pre></td></tr></table></figure>

<p>（1） 这种情况下，say函数里的this指针还是指向的obj，原因是因为say函数是通过obj<strong>直接调用</strong>。</p>
<p>（2） <span style="color:red;">但是这时候wk函数中的this就是指向的是window了。为什么呢？因为 wk（）函数在 say（）函数中，是属于普通函数调用，但是并没有通过say或者obj<strong>直接调用</strong>，只是自执行，这个时候，wk就是一个全局函数，因此该函数的this指向的就是window。</span></p>
<p>（3） 那为什么this.name是显示的为空呢？因为 window 对象中本身就有一个 name 值，并不是某处添加的，如果把name换成age，得到的就是undefined了。</p>
<p>（4） <span style="color:#F74A70">那怎样让wk（）函数中的this指向obj呢。<strong>一种方式</strong>就是在say函数中把say（）函数的this用变量保存起来，即 <code>var that=this;</code> 然后wk（）函数使用that就能达到指向obj的目的了。<strong>另外的方式是通过apply或者call来改变。</strong></span></p>
<p>（5）<span style="color:#EDC547;"> 那wk（）在这里能不能写成<code>window.wk()</code>呢？这样是不行的，会报错，<code>window.wk is not a function</code>。为什么不行呢，this不是指向window吗，为什么widow对象里灭有wk（）这个函数。。这个嘛，我也不知道，先留个坑，后面再来填</span></p>
<h4 id="例四"><a href="#例四" class="headerlink" title="例四"></a>例四</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    name:<span class="string">&quot;八戒&quot;</span>,</span><br><span class="line">    age:<span class="string">&quot;500&quot;</span>,</span><br><span class="line">    say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bj=<span class="number">40</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//10</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);<span class="comment">//这里没有输出内容</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> elseObj=obj.say;</span><br><span class="line">elseObj();</span><br></pre></td></tr></table></figure>

<p> （1） 执行了<code>elseObj（）</code>函数之后，为什么say函数中的this却指向了window呢？首先要理解这句话：<strong>谁直接调用产生这个this指针的函数，this就指向谁</strong>。<strong>当<code>obj.say</code>赋值给<code>elseObj</code>的时候，elseObj只是一个函数，而并没有执行，因此this指针的指向并不明确</strong>，这个时候执行到 <code>var elseObj=obj.say</code>的 时候，整程序相当于：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> elseObj=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bj=<span class="number">40</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line">elseObj();</span><br></pre></td></tr></table></figure>

<p> 　 这就和 <strong>第2种 函数表达式</strong>的情况一样了。所以，当执行elseObj（）的时候，this就指向window，this.obj为10，因为这时候elseObj（）是通过 window <strong>直接调用</strong>的</p>
<p>（2） this.name为空是因为 window 对象中本身就有一个 name 值，并不是某处添加的，如果把name换成其它的比如age，得到的就是undefined了，因为全局并没有age属性。</p>
<h4 id="例五"><a href="#例五" class="headerlink" title="例五"></a>例五</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    name:<span class="string">&quot;八戒&quot;</span>,</span><br><span class="line">    age:<span class="number">500</span>,</span><br><span class="line">    say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//10</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.age);<span class="comment">//undefined</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.say()();</span><br><span class="line"><span class="comment">//    var elseObj=obj.say();</span></span><br><span class="line"><span class="comment">//    elseObj();</span></span><br></pre></td></tr></table></figure>

<p>（1） obj.say（）（）为什么会有两个括号？因为obj.say（）执行之后返回的是一个函数，并没有执行，再加一个括号就是执行返回的那个匿名函数。</p>
<p>（2） 如果不习惯也可以使用上面注释的那种方式，是一样的效果。</p>
<p>（3） 执行了函数之后，为什么返回的函数中this是指向window的呢？那是因为执行obj.say（）的时候，只是一个函数，相当于就是注释里的第一行代码，这时候返回的函数并未被执行。当再加一个括号的时候，就是执行了返回的那个函数，这个时候返回的函数就相当于是一个全局函数，是通过window<strong>直接调用</strong>，因此this就是指向的是window。</p>
<h3 id="4-工厂模式中this的指向"><a href="#4-工厂模式中this的指向" class="headerlink" title="4. 工厂模式中this的指向"></a>4. 工厂模式中this的指向</h3><blockquote>
<p>工厂模式可以理解为在内部完成一个新对象的构建；而构造函数模式可以理解为工厂外派员工在外去完成一个新对象的构建。</p>
</blockquote>
<h4 id="例一-1"><a href="#例一-1" class="headerlink" title="例一"></a>例一</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a,b</span>)</span>&#123;　　 </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window对象</span></span><br><span class="line">    <span class="keyword">var</span> bj=<span class="number">20</span>;</span><br><span class="line">    <span class="keyword">var</span> sun=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    sun.one=a;</span><br><span class="line">    sun.two=b;</span><br><span class="line">    sun.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//是sun对象，&#123;one: 2, two: 3, say: ƒ()&#125;</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//undefined</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.one);<span class="comment">//2</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sun;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> wk=fun(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">wk.say();</span><br></pre></td></tr></table></figure>

<p> （1） 话说为什么叫工厂模式，我搞不太清楚，不过这个不重要，重要的是通过这个模式，在每次调用函数的时候，虽然每次都返回的是sun这个对象，但是每个对象都是不相似的，即使内容一样，比如 : (引用类型，其地址不同)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sf=fun(<span class="number">2</span>,<span class="number">3</span>); <span class="built_in">console</span>.log(sf===wk);     <span class="comment">//false </span></span><br></pre></td></tr></table></figure>

<p>（2） 那为什么say（）函数执行之后，this是指向返回的那个对象呢？这个很明显嘛，say（）是通过wk这个对象<strong>直接调用</strong>的，而wk是fun函数返回sun对象。所以这里的this就指向的是返回的对象。所以<code>this.bj = undefined</code>，因为返回的对象中没有bj属性。</p>
<p>（3） 我认为这种模式最重要的还是 <code>renturn sun</code>这个返回语句，这个是必不可少的。</p>
<p>（4） fun(a,b)这个函数中的this指向的是window，原因是执行 <code>var wk=fun(2,3);</code> 的时候，fun函数已经被执行了，并且<strong>直接调用</strong>它的就是window，所以这时的this是指向的window。</p>
<h4 id="例二-1"><a href="#例二-1" class="headerlink" title="例二"></a>例二</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a,b</span>)</span>&#123;　　 </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window对象</span></span><br><span class="line">    <span class="keyword">var</span> bj=<span class="number">20</span>;</span><br><span class="line">    <span class="keyword">var</span> sun=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    sun.one=a;</span><br><span class="line">    sun.two=b;</span><br><span class="line">    sun.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//是sun对象，&#123;one: 2, two: 3, say: ƒ()&#125;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//是window对象</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sun;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> wk=fun(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> ss=wk.say();</span><br><span class="line">ss();</span><br></pre></td></tr></table></figure>

<p> （1） 为什么say函数中return 的函数中this是指向的window对象呢？首先，执行到 <code>var wk=fun(2,3);</code> 的时候<strong>，wk是一个对象。</strong>继续执行下一句代码，ss这时候是一个函数，就是通过say函数返回之后赋值的。这时候返回的函数还未执行，this指向并不明确。当执行到最后一句代码，ss（）函数执行了。这时候，<strong>ss函数就是一个全局函数</strong>，是通过window<strong>直接调用</strong>的。所以这时的this指向的是window。</p>
<p>（2） 如果say中返回的是一个对象，对象中又有个函数，像下面一样：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sun.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//是sun对象，&#123;one: 2, two: 3, say: ƒ()&#125;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        wk:<span class="string">&quot;1&quot;</span>,</span><br><span class="line">        say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时候执行到ss.say()的时候，this指向的就是ss这个对象，即通过say函数返回的那个对象。<strong>原因还是一样，say函数是通过ss直接调用的，而ss对象是wk.say()返回的对象。</strong></p>
<h3 id="5-构造函数中this的指向"><a href="#5-构造函数中this的指向" class="headerlink" title="5. 构造函数中this的指向"></a>5. 构造函数中this的指向</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bj=<span class="number">20</span>;</span><br><span class="line">    <span class="built_in">this</span>.bj=<span class="number">30</span>;</span><br><span class="line">    <span class="built_in">this</span>.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//Add &#123;bj: 30, say: ƒ()&#125;</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.bj);<span class="comment">//30</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>) ;<span class="comment">//Add &#123;bj: 30, say: ƒ()&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj=<span class="keyword">new</span> Add();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj);<span class="comment">//object</span></span><br><span class="line">obj.say();</span><br></pre></td></tr></table></figure>

<p> （1） 要明白构造函数的this指向，我们需要明白<strong>调用构造函数经历的步骤</strong>：<code>摘至JS高程 6.2.2节</code></p>
<p>　　a.  创建一个新对象。</p>
<p>　　b.  将构造函数的作用域赋给新对象（因此this就指向了这个新对象）。</p>
<p>　　c.  执行构造函数中的代码（为这个新对象添加属性）。</p>
<p>　　d.  返回新对象。</p>
<p>　　<span style="color:#1f6fb5;font-weight:bold;font-style:italic;">这个对new一个对象的解释，是最易懂的说法</span></p>
<p>（2） <strong>构造函数与工厂模式相比</strong>：</p>
<p>　　a.  没有显式的创建对象。</p>
<p>　　b.  没有return语句。</p>
<p>　　c.  直接将属性和方法赋值给 this 对象。</p>
<p>（3） 首先，<strong>obj.say()执行之后，say函数中this的指向是obj对象</strong>，这个很明显，不再赘述。在不用new操作符的时候，Add()函数里的this指向的就是window；但是使用了new操作符之后，Add()函数中 <code>console.log(this)</code> 这个this为什么是obj对象，而不是window呢？</p>
<p>​    这个原因我认为在js权威指南4.6节对象创建表达式和8.2.3构造函数使用中，有所说明。<strong>使用new操作符的时候，js先创建一个新的空对象，然后，js传入指定的参数并将这个新对象当做this的值来调用一个指定的函数。这个函数可以使用this来初始化这个新创建对象的属性。所以当使用new操作符之后，函数中的this指向的是新创建的对象。所以构造函数中的this就是指向new出来的那个对象。</strong></p>
<p>（5） 如果构造函数中有return语句，那么此时 <code>var obj=new Add();</code> obj就是return出来的内容，但是Add函数中的this还是指向的创建的新对象Add；</p>
<h3 id="6-原型对象中this的指向"><a href="#6-原型对象中this的指向" class="headerlink" title="6. 原型对象中this的指向"></a>6. 原型对象中this的指向</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bj=<span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Add</span>(<span class="params"></span>)</span>&#123;　　</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//Add&#123;&#125;&#125;;</span></span><br><span class="line">    Add.prototype.bj=<span class="number">10</span>;</span><br><span class="line">    Add.prototype.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//Add&#123;&#125;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>);<span class="comment">//window</span></span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj=<span class="keyword">new</span> Add;<span class="comment">//没传参数可以省略括号</span></span><br><span class="line">obj.say()();</span><br></pre></td></tr></table></figure>

<p> （1） obj.say()()执行的时候，this指向的是window，<strong>这个还是因为obj.say()执行时返回的是一个函数</strong>，然后再加一个括号，就执行返回的这个函数，此时这个函数属于全局函数，所以，this会指向window</p>
<p>（2） Add()这个构造函数中的this指向的是Add{}，原因和上面构造函数中this的指向一样。</p>
<p>（3） <code>Add.prototype.say=function()&#123; console.log(this) &#125;</code> 这里面的this 也是指向的是Add{}，至于原因，我认为是因为say（）这个函数是通过obj直接调用的，所以this指向的是obj，所以是Add{}。</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>　　<strong>要想判断函数中this的指向，只要知道谁直接调用产生this指针的函数，this就指向谁了</strong>。</p>
<p>　　<strong>只是要注意使用了new 操作符之后，构造函数内部的this指向的是新对象，通俗点讲就是new出来的新实例。</strong></p>
<h3 id="补充和挖坑"><a href="#补充和挖坑" class="headerlink" title="补充和挖坑"></a>补充和挖坑</h3><p>再来一个例子说明一下，通俗的理解一下this指针的指向：<strong>谁直接调用产生 this 指针的函数，这函数里的 this 指针就指向谁。</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> factory = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.a = <span class="string">&#x27;first-A&#x27;</span>;  </span><br><span class="line">  <span class="built_in">this</span>.b = <span class="string">&#x27;first-B&#x27;</span>;</span><br><span class="line">  <span class="built_in">this</span>.c = &#123;</span><br><span class="line">    a:<span class="string">&#x27;second-A&#x27;</span>,</span><br><span class="line">    b:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.a</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> factory().c.b(); <span class="comment">// second-A</span></span><br></pre></td></tr></table></figure>

<p>（1） 这个代码首先考的是运算符的优先级   <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence">MDN运算符优先级 </a> </p>
<p>（2） <code>new的优先级</code>和 <code>点运算符等级</code>一样，从左至右执行，所以先执行 <code>new factory()</code> 然后再执行 <code>点运算符</code>。</p>
<p>（3） 执行了 new 操作之后，然后发现函数调用的优先级和成员访问运算符的优先级一样，然后遵循从左到右的执行方式。因此就先执行 成员访问运算符 .c</p>
<p>（4） 这时 .c 就是一个对象，然后再取 b 属性，是个函数。这个时候 this 指针已经产生， 而产生这个this指针的是b函数，而且是通过 c 调用的。<strong>因此此时 this 的指向就是 c 对象。所以最后打印出<code>second-A</code></strong></p>
<p>（5） 如果想要 c 里面的 b函数中 this指向的是 factory 实例。<strong>要么使用 bind.apply,call等方法来强行改变</strong>； <strong>要么就把 b 函数写成 es6箭头函数的方式</strong>。这样 b 函数就没有this指针，而 b 函数里面的this，就是上一级的 this。</p>
<p>然后再来说一下  <strong>回调函数  |  立即执行函数（IIFE）  | 点击事件</strong>  的 this 的指向</p>
<p>在这之前我们要知道：函数传参是按值传递，如果是<strong>基本数据类型</strong>，则是直接复制数据的值传过去；如果是<strong>引用类型</strong>，比如对象，函数这种，传递的就是该数据 <strong>在堆中存放的地址</strong>。 </p>
<p>那么，<span style="color:red;">回调函数就是传的 <strong>函数在堆中的地址</strong>，也就是说，<strong>回调函数中 this 的指向，决定于执行回调函数 时的执行上下文环境。</strong></span></p>
<p><strong>首先是 setTimeout，setInterval 这种类型的回调函数。</strong></p>
<h4 id="7-setTimeout的回调"><a href="#7-setTimeout的回调" class="headerlink" title="7. setTimeout的回调"></a>7. setTimeout的回调</h4><p><strong>例一</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>) </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>（1） 这是最最常用的常见的定时器用法，<strong>回调函数里的this指向的是window。</strong></p>
<p>（2） 由<code>setTimeout()</code>调用的代码运行在与所在函数完全分离的执行环境上。这会导致，这些代码中包含的 <code>this</code> 关键字在非严格模式会指向 <code>window</code> (或全局)对象，严格模式下为 <code>undefined</code>，这和所期望的<code>this</code>的值是不一样的。<strong>在严格模式下，setTimeout( )的回调函数里面的this仍然默认指向window对象， 并不是undefined</strong>。 这几句话是 MDN上，<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout">setTimeout中 关于 this 的问题</a> 里对 this 指向的解释。</p>
<p>（3） 我的理解是：由于setTimeout属于宏任务，它的回调在延时之后才进入到主线程执行，而函数执行的时候才明确 this 的指向。执行的时候，由于没有设置内部this的指向。相当于是普通函数调用。所以会默认指向window</p>
<p><strong>例二</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    age:<span class="number">10</span>,</span><br><span class="line">    getage:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.age)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(obj.getage,<span class="number">1000</span>)   <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    obj.getage()  <span class="comment">// 10</span></span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p>（1） 第一个setTimeout，执行obj.getage 之后，<strong>相当于setTimeout的回调是一个匿名函数，执行的时候，函数内部未设置this的指向。相当于是普通函数调用</strong>。所以this默认指向<code>window</code>，所以结果是<code>undefined</code>。</p>
<p>（2） 第二个setTimeout，传给setTimeout的也是一个匿名回调函数，执行匿名函数，执行到 obj.getage() 的时候，getage函数里的this，指向的就是obj了，所以能打印出10。<strong>还是遵循 谁调用产生 this指针的函数，this就指向谁的规则</strong></p>
<h4 id="8-对于-数组的遍历方法-中的this"><a href="#8-对于-数组的遍历方法-中的this" class="headerlink" title="8. 对于 数组的遍历方法 中的this"></a>8. 对于 数组的遍历方法 中的<code>this</code></h4><p><strong>foreach，map，filter，some</strong>，每次 <code>callback</code> 函数被调用的时候，<code>this</code> 都会指向 最后一个参数 <code>thisArg</code> 的这个对象。如果省略了 <code>thisArg</code> 参数,或者赋值为<code> null</code> 或 <code>undefined</code>，则 this 指向全局对象 。在严格模式下则是undefined（未传值的时候）。如果用箭头函数的写法，就要看当前上一层的 this 指向的是哪里了</p>
<p>reduce 累加器的参数中并没有 thisArg 对象可以传，但是在回调函数中，this指向的是window。如果用箭头函数的写法，就要看当前上一层的 this 指向的是哪里了</p>
<h4 id="9-点击、移入移出等类似事件的回调函数-的-this-指向"><a href="#9-点击、移入移出等类似事件的回调函数-的-this-指向" class="headerlink" title="9. 点击、移入移出等类似事件的回调函数 的 this 指向"></a>9. 点击、移入移出等类似事件的回调函数 的 <code>this</code> 指向</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;button type=<span class="string">&quot;button&quot;</span> id=<span class="string">&quot;btn&quot;</span>&gt;点我啊&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDom</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.dir(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 第一种调用方法</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>).addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    getDom(); </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种调用方法</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>).onclick = getDom()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种调用方法</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>).addEventListener(<span class="string">&#x27;click&#x27;</span>,getDom)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第四种调用方法</span></span><br><span class="line">&lt;button type=<span class="string">&quot;button&quot;</span> id=<span class="string">&quot;btn&quot;</span> onclick=<span class="string">&quot;console.log(this)&quot;</span>&gt;点我啊&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>console.log()会在浏览器控制台打印出信息</p>
<p>console.dir()可以显示一个对象的所有属性和方法</p>
</blockquote>
<p>（1） 第一种调用方法，this指向的是window。<strong>虽然在<code>function()&#123;&#125;</code> 回调函数里的 this 指向的是button这个DOM对象，但是getDom是在这里面调用的，和普通函数调用没什么区别</strong>。所以也指向window</p>
<p>（2） 第二种都不用点击，直接触发，this指向window。因为直接当做普通函数调用了。</p>
<p>（3） 第三种方法<strong>，this指向 button这个DOM对象</strong>。回调函数传入的是函数执行的地址，执行的时候相当于是在window环境下执行，所以getDom的this指向的是window</p>
<p>（4） 第四种方式，this指向 button 这个DOM对象。</p>
<p><img data-src="this-1.png"></p>
<p> <strong>当函数被用作事件处理函数时，它的<code>this</code>指向触发事件的元素（一些浏览器在使用非<code>addEventListener</code>的函数动态添加监听函数时不遵守这个约定）。 — MDN</strong></p>
<p><strong>对于 立即执行函数 IIFE 中 this的指向，指向的是window</strong></p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><span class="line">(<span class="name">function</span>()&#123;</span><br><span class="line"> console.log(<span class="name">this</span>) // window</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>到这里，我还是没搞懂下面这种情况：</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  age:<span class="number">10</span>,</span><br><span class="line">  say:<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        console.log(<span class="keyword">this</span>)   <span class="comment">// window</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span>();</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line">obj.say();</span><br></pre></td></tr></table></figure>

<p>get函数里的this指向的是window，因为get函数 独立调用，并没有为内部 this 明确指向。所以会指向 window 。如果是严格模式，则指向undefined。</p>
<h3 id="遗留问题解答一"><a href="#遗留问题解答一" class="headerlink" title="遗留问题解答一"></a>遗留问题解答一</h3><p>（1）既然 this 指向的是window，为什么get函数在window上不能访问？</p>
<p>（2）这种在函数内部定义并执行的方式，和立即执行函数有没有区别？</p>
<p>（3）词法分析的时候，这个函数是被怎样处理的？</p>
<hr>
<p>以前没搞懂为什么上面内部申明的 get（）方法不能在window上访问，其实很简单。</p>
<p>get函数是在say函数里面 创建的，也就是说，不管怎么调用，get函数的作用域都只能是在say函数里面。而get方法是自执行，并没有其它任何对象直接调用，所以this是指向window，但是作用域是say函数里面，却不是window。感觉和立即执行函数没区别。</p>
<p>不要理解成 this 指向window，产生这个this的函数就一定在window作用域上挂载。this指向 和 函数作用域 并不是相互的</p>
<p>由于js是采用的静态作用域（也叫词法作用域），这就意味着函数的执行依赖于函数定义的时候所产生（而不是函数调用的时候产生的）的变量作用域。</p>
<p>所以，函数的作用域是基于函数创建（可以理解为函数定义的时候）的地方，也就是函数在哪里创建，不管是否返回这个函数，或者返回带括号（已执行）的函数，都不用在意，只要知道是在哪里定义即创建的就知道函数的作用域是什么内容了。</p>
<p>在全局作用域中“定义”一个函数的时候，只会创建包含全局作用域的作用域链。只有“执行”该函数的时候，才会复制创建时的作用域，并将当前函数的局部作用域放在作用域链的顶端。</p>
<p>去取变量值的时候，首先看本函数里有没有该值，如果没有再到函数定义的外部去找</p>
<hr>
<h3 id="遗留问题解答二"><a href="#遗留问题解答二" class="headerlink" title="遗留问题解答二"></a>遗留问题解答二</h3><p>如果使用了严格模式，this的指向则是它进入执行环境时的值。不一定是undefined。 </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>) <span class="comment">// &#123;a: 1&#125;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f2.bind(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;)() === <span class="literal">undefined</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p> 如果未指定this，则是undefined</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>) <span class="comment">// undefined</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f2() === <span class="literal">undefined</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>Front End</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
</search>
